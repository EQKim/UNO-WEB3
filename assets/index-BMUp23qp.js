(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Ud={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function _S(){if(N_)return El;N_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return El.Fragment=t,El.jsx=n,El.jsxs=n,El}var O_;function vS(){return O_||(O_=1,Ud.exports=_S()),Ud.exports}var rt=vS(),Ld={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function ES(){if(V_)return wt;V_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function I(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,tt={};function Z(N,$,nt){this.props=N,this.context=$,this.refs=tt,this.updater=nt||q}Z.prototype.isReactComponent={},Z.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},Z.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function pt(){}pt.prototype=Z.prototype;function lt(N,$,nt){this.props=N,this.context=$,this.refs=tt,this.updater=nt||q}var ot=lt.prototype=new pt;ot.constructor=lt,F(ot,Z.prototype),ot.isPureReactComponent=!0;var Lt=Array.isArray,vt={H:null,A:null,T:null,S:null,V:null},gt=Object.prototype.hasOwnProperty;function D(N,$,nt,J,ft,Rt){return nt=Rt.ref,{$$typeof:r,type:N,key:$,ref:nt!==void 0?nt:null,props:Rt}}function S(N,$){return D(N.type,$,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function V(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return $[nt]})}var M=/\/+/g;function P(N,$){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):$.toString(36)}function C(){}function pe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function($){N.status==="pending"&&(N.status="fulfilled",N.value=$)},function($){N.status==="pending"&&(N.status="rejected",N.reason=$)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,$,nt,J,ft){var Rt=typeof N;(Rt==="undefined"||Rt==="boolean")&&(N=null);var At=!1;if(N===null)At=!0;else switch(Rt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(N.$$typeof){case r:case t:At=!0;break;case T:return At=N._init,ae(At(N._payload),$,nt,J,ft)}}if(At)return ft=ft(N),At=J===""?"."+P(N,0):J,Lt(ft)?(nt="",At!=null&&(nt=At.replace(M,"$&/")+"/"),ae(ft,$,nt,"",function(Qn){return Qn})):ft!=null&&(R(ft)&&(ft=S(ft,nt+(ft.key==null||N&&N.key===ft.key?"":(""+ft.key).replace(M,"$&/")+"/")+At)),$.push(ft)),1;At=0;var De=J===""?".":J+":";if(Lt(N))for(var Wt=0;Wt<N.length;Wt++)J=N[Wt],Rt=De+P(J,Wt),At+=ae(J,$,nt,Rt,ft);else if(Wt=I(N),typeof Wt=="function")for(N=Wt.call(N),Wt=0;!(J=N.next()).done;)J=J.value,Rt=De+P(J,Wt++),At+=ae(J,$,nt,Rt,ft);else if(Rt==="object"){if(typeof N.then=="function")return ae(pe(N),$,nt,J,ft);throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return At}function H(N,$,nt){if(N==null)return N;var J=[],ft=0;return ae(N,J,"","",function(Rt){return $.call(nt,Rt,ft++)}),J}function et(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var ht=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Bt(){}return wt.Children={map:H,forEach:function(N,$,nt){H(N,function(){$.apply(this,arguments)},nt)},count:function(N){var $=0;return H(N,function(){$++}),$},toArray:function(N){return H(N,function($){return $})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},wt.Component=Z,wt.Fragment=n,wt.Profiler=l,wt.PureComponent=lt,wt.StrictMode=s,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vt,wt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return vt.H.useMemoCache(N)}},wt.cache=function(N){return function(){return N.apply(null,arguments)}},wt.cloneElement=function(N,$,nt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var J=F({},N.props),ft=N.key,Rt=void 0;if($!=null)for(At in $.ref!==void 0&&(Rt=void 0),$.key!==void 0&&(ft=""+$.key),$)!gt.call($,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&$.ref===void 0||(J[At]=$[At]);var At=arguments.length-2;if(At===1)J.children=nt;else if(1<At){for(var De=Array(At),Wt=0;Wt<At;Wt++)De[Wt]=arguments[Wt+2];J.children=De}return D(N.type,ft,void 0,void 0,Rt,J)},wt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},wt.createElement=function(N,$,nt){var J,ft={},Rt=null;if($!=null)for(J in $.key!==void 0&&(Rt=""+$.key),$)gt.call($,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ft[J]=$[J]);var At=arguments.length-2;if(At===1)ft.children=nt;else if(1<At){for(var De=Array(At),Wt=0;Wt<At;Wt++)De[Wt]=arguments[Wt+2];ft.children=De}if(N&&N.defaultProps)for(J in At=N.defaultProps,At)ft[J]===void 0&&(ft[J]=At[J]);return D(N,Rt,void 0,void 0,null,ft)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(N){return{$$typeof:p,render:N}},wt.isValidElement=R,wt.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:et}},wt.memo=function(N,$){return{$$typeof:y,type:N,compare:$===void 0?null:$}},wt.startTransition=function(N){var $=vt.T,nt={};vt.T=nt;try{var J=N(),ft=vt.S;ft!==null&&ft(nt,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Bt,ht)}catch(Rt){ht(Rt)}finally{vt.T=$}},wt.unstable_useCacheRefresh=function(){return vt.H.useCacheRefresh()},wt.use=function(N){return vt.H.use(N)},wt.useActionState=function(N,$,nt){return vt.H.useActionState(N,$,nt)},wt.useCallback=function(N,$){return vt.H.useCallback(N,$)},wt.useContext=function(N){return vt.H.useContext(N)},wt.useDebugValue=function(){},wt.useDeferredValue=function(N,$){return vt.H.useDeferredValue(N,$)},wt.useEffect=function(N,$,nt){var J=vt.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(N,$)},wt.useId=function(){return vt.H.useId()},wt.useImperativeHandle=function(N,$,nt){return vt.H.useImperativeHandle(N,$,nt)},wt.useInsertionEffect=function(N,$){return vt.H.useInsertionEffect(N,$)},wt.useLayoutEffect=function(N,$){return vt.H.useLayoutEffect(N,$)},wt.useMemo=function(N,$){return vt.H.useMemo(N,$)},wt.useOptimistic=function(N,$){return vt.H.useOptimistic(N,$)},wt.useReducer=function(N,$,nt){return vt.H.useReducer(N,$,nt)},wt.useRef=function(N){return vt.H.useRef(N)},wt.useState=function(N){return vt.H.useState(N)},wt.useSyncExternalStore=function(N,$,nt){return vt.H.useSyncExternalStore(N,$,nt)},wt.useTransition=function(){return vt.H.useTransition()},wt.version="19.1.1",wt}var M_;function Im(){return M_||(M_=1,Ld.exports=ES()),Ld.exports}var Qe=Im(),zd={exports:{}},Tl={},Bd={exports:{}},qd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function TS(){return P_||(P_=1,(function(r){function t(H,et){var ht=H.length;H.push(et);t:for(;0<ht;){var Bt=ht-1>>>1,N=H[Bt];if(0<l(N,et))H[Bt]=et,H[ht]=N,ht=Bt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var et=H[0],ht=H.pop();if(ht!==et){H[0]=ht;t:for(var Bt=0,N=H.length,$=N>>>1;Bt<$;){var nt=2*(Bt+1)-1,J=H[nt],ft=nt+1,Rt=H[ft];if(0>l(J,ht))ft<N&&0>l(Rt,J)?(H[Bt]=Rt,H[ft]=ht,Bt=ft):(H[Bt]=J,H[nt]=ht,Bt=nt);else if(ft<N&&0>l(Rt,ht))H[Bt]=Rt,H[ft]=ht,Bt=ft;else break t}}return et}function l(H,et){var ht=H.sortIndex-et.sortIndex;return ht!==0?ht:H.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,w=null,I=3,q=!1,F=!1,tt=!1,Z=!1,pt=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;function Lt(H){for(var et=n(y);et!==null;){if(et.callback===null)s(y);else if(et.startTime<=H)s(y),et.sortIndex=et.expirationTime,t(g,et);else break;et=n(y)}}function vt(H){if(tt=!1,Lt(H),!F)if(n(g)!==null)F=!0,gt||(gt=!0,P());else{var et=n(y);et!==null&&ae(vt,et.startTime-H)}}var gt=!1,D=-1,S=5,R=-1;function V(){return Z?!0:!(r.unstable_now()-R<S)}function M(){if(Z=!1,gt){var H=r.unstable_now();R=H;var et=!0;try{t:{F=!1,tt&&(tt=!1,lt(D),D=-1),q=!0;var ht=I;try{e:{for(Lt(H),w=n(g);w!==null&&!(w.expirationTime>H&&V());){var Bt=w.callback;if(typeof Bt=="function"){w.callback=null,I=w.priorityLevel;var N=Bt(w.expirationTime<=H);if(H=r.unstable_now(),typeof N=="function"){w.callback=N,Lt(H),et=!0;break e}w===n(g)&&s(g),Lt(H)}else s(g);w=n(g)}if(w!==null)et=!0;else{var $=n(y);$!==null&&ae(vt,$.startTime-H),et=!1}}break t}finally{w=null,I=ht,q=!1}et=void 0}}finally{et?P():gt=!1}}}var P;if(typeof ot=="function")P=function(){ot(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,pe=C.port2;C.port1.onmessage=M,P=function(){pe.postMessage(null)}}else P=function(){pt(M,0)};function ae(H,et){D=pt(function(){H(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(H){switch(I){case 1:case 2:case 3:var et=3;break;default:et=I}var ht=I;I=et;try{return H()}finally{I=ht}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(H,et){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ht=I;I=H;try{return et()}finally{I=ht}},r.unstable_scheduleCallback=function(H,et,ht){var Bt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Bt+ht:Bt):ht=Bt,H){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ht+N,H={id:T++,callback:et,priorityLevel:H,startTime:ht,expirationTime:N,sortIndex:-1},ht>Bt?(H.sortIndex=ht,t(y,H),n(g)===null&&H===n(y)&&(tt?(lt(D),D=-1):tt=!0,ae(vt,ht-Bt))):(H.sortIndex=N,t(g,H),F||q||(F=!0,gt||(gt=!0,P()))),H},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(H){var et=I;return function(){var ht=I;I=et;try{return H.apply(this,arguments)}finally{I=ht}}}})(qd)),qd}var x_;function AS(){return x_||(x_=1,Bd.exports=TS()),Bd.exports}var jd={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function SS(){if(k_)return Ze;k_=1;var r=Im();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ze.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,T)},Ze.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Ze.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ze.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ze.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,w=p(T,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:q}):T==="script"&&s.d.X(g,{crossOrigin:w,integrity:I,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ze.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ze.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ze.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ze.requestFormReset=function(g){s.d.r(g)},Ze.unstable_batchedUpdates=function(g,y){return g(y)},Ze.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Ze.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ze.version="19.1.1",Ze}var U_;function wS(){if(U_)return jd.exports;U_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),jd.exports=SS(),jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function bS(){if(L_)return Tl;L_=1;var r=AS(),t=Im(),n=wS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),lt=Symbol.for("react.consumer"),ot=Symbol.for("react.context"),Lt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Z:return"Profiler";case tt:return"StrictMode";case vt:return"Suspense";case gt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case ot:return(e.displayName||"Context")+".Provider";case lt:return(e._context.displayName||"Context")+".Consumer";case Lt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:pe(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return pe(e(i))}catch{}}return null}var ae=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Bt=[],N=-1;function $(e){return{current:e}}function nt(e){0>N||(e.current=Bt[N],Bt[N]=null,N--)}function J(e,i){N++,Bt[N]=e.current,e.current=i}var ft=$(null),Rt=$(null),At=$(null),De=$(null);function Wt(e,i){switch(J(At,i),J(Rt,e),J(ft,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?r_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=r_(i),e=s_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(ft),J(ft,e)}function Qn(){nt(ft),nt(Rt),nt(At)}function Wi(e){e.memoizedState!==null&&J(De,e);var i=ft.current,a=s_(i,e.type);i!==a&&(J(Rt,e),J(ft,a))}function yi(e){Rt.current===e&&(nt(ft),nt(Rt)),De.current===e&&(nt(De),pl._currentValue=ht)}var Wr=Object.prototype.hasOwnProperty,ts=r.unstable_scheduleCallback,es=r.unstable_cancelCallback,ho=r.unstable_shouldYield,su=r.unstable_requestPaint,Sn=r.unstable_now,kh=r.unstable_getCurrentPriorityLevel,fo=r.unstable_ImmediatePriority,Ks=r.unstable_UserBlockingPriority,ns=r.unstable_NormalPriority,Uh=r.unstable_LowPriority,Xs=r.unstable_IdlePriority,mo=r.log,au=r.unstable_setDisableYieldValue,oe=null,Ht=null;function hn(e){if(typeof mo=="function"&&au(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(oe,e)}catch{}}var Xe=Math.clz32?Math.clz32:is,ou=Math.log,Lh=Math.LN2;function is(e){return e>>>=0,e===0?32:31-(ou(e)/Lh|0)|0}var rs=256,ss=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=kn(o):(v&=E,v!==0?h=kn(v):a||(a=E&~e,a!==0&&(h=kn(a))))):(E=o&~f,E!==0?h=kn(E):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function as(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function po(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(){var e=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),e}function yo(){var e=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),e}function _i(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function vi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _o(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Xe(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Yn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Yn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Xe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function vo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Xe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function tr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function er(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:w_(e.type))}function lu(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var ne=Math.random().toString(36).slice(2),Se="__reactFiber$"+ne,ge="__reactProps$"+ne,wn="__reactContainer$"+ne,Eo="__reactEvents$"+ne,zh="__reactListeners$"+ne,nr="__reactHandles$"+ne,uu="__reactResources$"+ne,os="__reactMarker$"+ne;function ir(e){delete e[Se],delete e[ge],delete e[Eo],delete e[zh],delete e[nr]}function Ei(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[wn]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=u_(e);e!==null;){if(a=e[Se])return a;e=u_(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Se]||e[wn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Xn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function en(e){var i=e[uu];return i||(i=e[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[os]=!0}var To=new Set,Js={};function Un(e,i){Ti(e,i),Ti(e+"Capture",i)}function Ti(e,i){for(Js[e]=i,e=0;e<i.length;e++)To.add(i[e])}var cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},ls={};function fu(e){return Wr.call(ls,e)?!0:Wr.call(hu,e)?!1:cu.test(e)?ls[e]=!0:(hu[e]=!0,!1)}function rr(e,i,a){if(fu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function $n(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Be(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var us,du;function Ai(e){if(us===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);us=i&&i[1]||"",du=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+us+e+du}var Ws=!1;function ta(e,i){if(!e||Ws)return"";Ws=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{Ws=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ai(a):""}function Ao(e){switch(e.tag){case 26:case 27:case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Ai("Activity");default:return""}}function ea(e){try{var i="";do i+=Ao(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function So(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bh(e){var i=So(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function na(e){e._valueTracker||(e._valueTracker=Bh(e))}function wo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=So(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var qh=/[\n"\\]/g;function ye(e){return e.replace(qh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fn(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+nn(i)):e.value!==""+nn(i)&&(e.value=""+nn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?sr(e,v,nn(i)):a!=null?sr(e,v,nn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+nn(E):e.removeAttribute("name")}function hs(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function sr(e,i,a){i==="number"&&cs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Si(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Yt(e,i,a){if(i!=null&&(i=""+nn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+nn(a):""}function fs(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ae(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=nn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function bn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ds.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function bo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&mu(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&mu(e,f,i[f])}function Ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return Hh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wi=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bi=null,Ri=null;function Io(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[ge]||null;t:switch(e=i.stateNode,i.type){case"input":if(fn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ye(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ge]||null;if(!h)throw Error(s(90));fn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&wo(o)}break t;case"textarea":Yt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Si(e,!!a.multiple,i,!1)}}}var Zn=!1;function pu(e,i,a){if(Zn)return e(i,a);Zn=!0;try{var o=e(i);return o}finally{if(Zn=!1,(bi!==null||Ri!==null)&&(lc(),bi&&(i=bi,e=Ri,Ri=bi=null,Io(i),e)))for(i=0;i<e.length;i++)Io(e[i])}}function ms(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ge]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Ln)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){In=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{In=!1}var Jn=null,ar=null,Ii=null;function Co(){if(Ii)return Ii;var e,i=ar,a=i.length,o,h="value"in Jn?Jn.value:Jn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ii=h.slice(e,1<o?1-o:void 0)}function Wn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function Do(){return!1}function Ne(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:Do,this.isPropagationStopped=Do,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Ne(jt),gs=T({},jt,{view:0,detail:0}),gu=Ne(gs),sa,aa,ei,ys=T({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&e.type==="mousemove"?(sa=e.screenX-ei.screenX,aa=e.screenY-ei.screenY):aa=sa=0,ei=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Cn=Ne(ys),yu=T({},ys,{dataTransfer:0}),Gh=Ne(yu),_s=T({},gs,{relatedTarget:0}),oa=Ne(_s),No=T({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),la=Ne(No),_u=T({},jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=Ne(_u),Fh=T({},jt,{data:0}),Oo=Ne(Fh),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Eu[e])?!!i[e]:!1}function Es(){return Vo}var Tu=T({},gs,{key:function(e){if(e.key){var i=vs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Wn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(e){return e.type==="keypress"?Wn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ca=Ne(Tu),Au=T({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Ne(Au),Ci=T({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Su=Ne(Ci),wu=T({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),bu=Ne(wu),Ru=T({},ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=Ne(Ru),rn=T({},jt,{newState:0,oldState:0}),Iu=Ne(rn),Cu=[9,13,27,32],ni=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var m=Ln&&"TextEvent"in window&&!u,_=Ln&&(!ni||u&&8<u&&11>=u),A=" ",k=!1;function j(e,i){switch(e){case"keyup":return Cu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mt=!1;function we(e,i){switch(e){case"compositionend":return W(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return e=i.data,e===A&&k?null:e;default:return null}}function Pt(e,i){if(Mt)return e==="compositionend"||!ni&&j(e,i)?(e=Co(),Ii=ar=Jn=null,Mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Di(e,i,a,o){bi?Ri?Ri.push(o):Ri=[o]:bi=o,i=mc(i,"onChange"),0<i.length&&(a=new ra("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var qe=null,ii=null;function Po(e){Wy(e,0)}function Du(e){var i=Xn(e);if(wo(i))return e}function Ep(e,i){if(e==="change")return i}var Tp=!1;if(Ln){var Qh;if(Ln){var Yh="oninput"in document;if(!Yh){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),Yh=typeof Ap.oninput=="function"}Qh=Yh}else Qh=!1;Tp=Qh&&(!document.documentMode||9<document.documentMode)}function Sp(){qe&&(qe.detachEvent("onpropertychange",wp),ii=qe=null)}function wp(e){if(e.propertyName==="value"&&Du(ii)){var i=[];Di(i,ii,e,Rn(e)),pu(Po,i)}}function K0(e,i,a){e==="focusin"?(Sp(),qe=i,ii=a,qe.attachEvent("onpropertychange",wp)):e==="focusout"&&Sp()}function X0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Du(ii)}function $0(e,i){if(e==="click")return Du(i)}function Z0(e,i){if(e==="input"||e==="change")return Du(i)}function J0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var dn=typeof Object.is=="function"?Object.is:J0;function xo(e,i){if(dn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Wr.call(i,h)||!dn(e[h],i[h]))return!1}return!0}function bp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rp(e,i){var a=bp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=bp(a)}}function Ip(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ip(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Cp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=cs(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=cs(e.document)}return i}function Kh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var W0=Ln&&"documentMode"in document&&11>=document.documentMode,fa=null,Xh=null,ko=null,$h=!1;function Dp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$h||fa==null||fa!==cs(o)||(o=fa,"selectionStart"in o&&Kh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&xo(ko,o)||(ko=o,o=mc(Xh,"onSelect"),0<o.length&&(i=new ra("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=fa)))}function Ts(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var da={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Zh={},Np={};Ln&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function As(e){if(Zh[e])return Zh[e];if(!da[e])return e;var i=da[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Np)return Zh[e]=i[a];return e}var Op=As("animationend"),Vp=As("animationiteration"),Mp=As("animationstart"),tA=As("transitionrun"),eA=As("transitionstart"),nA=As("transitioncancel"),Pp=As("transitionend"),xp=new Map,Jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jh.push("scrollEnd");function zn(e,i){xp.set(e,i),Un(i,[e])}var kp=new WeakMap;function Dn(e,i){if(typeof e=="object"&&e!==null){var a=kp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ea(i)},kp.set(e,i),i)}return{value:e,source:i,stack:ea(i)}}var Nn=[],ma=0,Wh=0;function Nu(){for(var e=ma,i=Wh=ma=0;i<e;){var a=Nn[i];Nn[i++]=null;var o=Nn[i];Nn[i++]=null;var h=Nn[i];Nn[i++]=null;var f=Nn[i];if(Nn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Up(a,h,f)}}function Ou(e,i,a,o){Nn[ma++]=e,Nn[ma++]=i,Nn[ma++]=a,Nn[ma++]=o,Wh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function tf(e,i,a,o){return Ou(e,i,a,o),Vu(e)}function pa(e,i){return Ou(e,null,null,i),Vu(e)}function Up(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Xe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Vu(e){if(50<ol)throw ol=0,od=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ga={};function iA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,i,a,o){return new iA(e,i,a,o)}function ef(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ni(e,i){var a=e.alternate;return a===null?(a=mn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Lp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Mu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")ef(e)&&(v=1);else if(typeof e=="string")v=sS(e,a,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=mn(31,a,i,h),e.elementType=R,e.lanes=f,e;case F:return Ss(a.children,h,f,i);case tt:v=8,h|=24;break;case Z:return e=mn(12,a,i,h|2),e.elementType=Z,e.lanes=f,e;case vt:return e=mn(13,a,i,h),e.elementType=vt,e.lanes=f,e;case gt:return e=mn(19,a,i,h),e.elementType=gt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pt:case ot:v=10;break t;case lt:v=9;break t;case Lt:v=11;break t;case D:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=mn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function Ss(e,i,a,o){return e=mn(7,e,o,i),e.lanes=a,e}function nf(e,i,a){return e=mn(6,e,null,i),e.lanes=a,e}function rf(e,i,a){return i=mn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ya=[],_a=0,Pu=null,xu=0,On=[],Vn=0,ws=null,Oi=1,Vi="";function bs(e,i){ya[_a++]=xu,ya[_a++]=Pu,Pu=e,xu=i}function zp(e,i,a){On[Vn++]=Oi,On[Vn++]=Vi,On[Vn++]=ws,ws=e;var o=Oi;e=Vi;var h=32-Xe(o)-1;o&=~(1<<h),a+=1;var f=32-Xe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Oi=1<<32-Xe(i)+h|a<<h|o,Vi=f+e}else Oi=1<<f|a<<h|o,Vi=e}function sf(e){e.return!==null&&(bs(e,1),zp(e,1,0))}function af(e){for(;e===Pu;)Pu=ya[--_a],ya[_a]=null,xu=ya[--_a],ya[_a]=null;for(;e===ws;)ws=On[--Vn],On[Vn]=null,Vi=On[--Vn],On[Vn]=null,Oi=On[--Vn],On[Vn]=null}var sn=null,le=null,qt=!1,Rs=null,ri=!1,of=Error(s(519));function Is(e){var i=Error(s(418,""));throw zo(Dn(i,e)),of}function Bp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[ge]=o,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<ul.length;a++)Dt(ul[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),hs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),na(i);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),fs(i,o.value,o.defaultValue,o.children),na(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||i_(i.textContent,a)?(o.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),o.onScroll!=null&&Dt("scroll",i),o.onScrollEnd!=null&&Dt("scrollend",i),o.onClick!=null&&(i.onclick=pc),i=!0):i=!1,i||Is(e)}function qp(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:sn=sn.return}}function Uo(e){if(e!==sn)return!1;if(!qt)return qp(e),qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Sd(e.type,e.memoizedProps)),a=!a),a&&le&&Is(e),qp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=qn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,Ar(e.type)?(e=Id,Id=null,le=e):le=i):le=sn?qn(e.stateNode.nextSibling):null;return!0}function Lo(){le=sn=null,qt=!1}function jp(){var e=Rs;return e!==null&&(un===null?un=e:un.push.apply(un,e),Rs=null),e}function zo(e){Rs===null?Rs=[e]:Rs.push(e)}var lf=$(null),Cs=null,Mi=null;function or(e,i,a){J(lf,i._currentValue),i._currentValue=a}function Pi(e){e._currentValue=lf.current,nt(lf)}function uf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function cf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),uf(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),uf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Bo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;dn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===De.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(pl):e=[pl])}h=h.return}e!==null&&cf(i,e,a,o),i.flags|=262144}function ku(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ds(e){Cs=e,Mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Hp(Cs,e)}function Uu(e,i){return Cs===null&&Ds(e),Hp(e,i)}function Hp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Mi===null){if(e===null)throw Error(s(308));Mi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Mi=Mi.next=i;return a}var rA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},sA=r.unstable_scheduleCallback,aA=r.unstable_NormalPriority,Re={$$typeof:ot,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new rA,data:new Map,refCount:0}}function qo(e){e.refCount--,e.refCount===0&&sA(aA,function(){e.controller.abort()})}var jo=null,ff=0,va=0,Ea=null;function oA(e,i){if(jo===null){var a=jo=[];ff=0,va=md(),Ea={status:"pending",value:void 0,then:function(o){a.push(o)}}}return ff++,i.then(Gp,Gp),i}function Gp(){if(--ff===0&&jo!==null){Ea!==null&&(Ea.status="fulfilled");var e=jo;jo=null,va=0,Ea=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function lA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Fp=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&oA(e,i),Fp!==null&&Fp(e,i)};var Ns=$(null);function df(){var e=Ns.current;return e!==null?e:te.pooledCache}function Lu(e,i){i===null?J(Ns,Ns.current):J(Ns,i.pool)}function Qp(){var e=df();return e===null?null:{parent:Re._currentValue,pool:e}}var Ho=Error(s(460)),Yp=Error(s(474)),zu=Error(s(542)),mf={then:function(){}};function Kp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bu(){}function Xp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Bu,Bu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Zp(e),e;default:if(typeof i.status=="string")i.then(Bu,Bu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Zp(e),e}throw Go=i,Ho}}var Go=null;function $p(){if(Go===null)throw Error(s(459));var e=Go;return Go=null,e}function Zp(e){if(e===Ho||e===zu)throw Error(s(483))}var lr=!1;function pf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ur(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Vu(e),Up(e,null,a),i}return Ou(e,o,i,a),Vu(e)}function Fo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,vo(e,a)}}function yf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var _f=!1;function Qo(){if(_f){var e=Ea;if(e!==null)throw e}}function Yo(e,i,a,o){_f=!1;var h=e.updateQueue;lr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(xt&z)===z:(o&z)===z){z!==0&&z===va&&(_f=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,mt=E;z=i;var $t=a;switch(mt.tag){case 1:if(Et=mt.payload,typeof Et=="function"){K=Et.call($t,K,z);break t}K=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=mt.payload,z=typeof Et=="function"?Et.call($t,K,z):Et,z==null)break t;K=T({},K,z);break t;case 2:lr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),_r|=v,e.lanes=v,e.memoizedState=K}}function Jp(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Wp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Jp(a[e],i)}var Ta=$(null),qu=$(0);function tg(e,i){e=qi,J(qu,e),J(Ta,i),qi=e|i.baseLanes}function vf(){J(qu,qi),J(Ta,Ta.current)}function Ef(){qi=qu.current,nt(Ta),nt(qu)}var hr=0,bt=null,Kt=null,_e=null,ju=!1,Aa=!1,Os=!1,Hu=0,Ko=0,Sa=null,uA=0;function he(){throw Error(s(321))}function Tf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!dn(e[a],i[a]))return!1;return!0}function Af(e,i,a,o,h,f){return hr=f,bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?Ug:Lg,Os=!1,f=a(o,h),Os=!1,Aa&&(f=ng(i,a,o,h)),eg(e),f}function eg(e){H.H=Xu;var i=Kt!==null&&Kt.next!==null;if(hr=0,_e=Kt=bt=null,ju=!1,Ko=0,Sa=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&ku(e)&&(Ve=!0))}function ng(e,i,a,o){bt=e;var h=0;do{if(Aa&&(Sa=null),Ko=0,Aa=!1,25<=h)throw Error(s(301));if(h+=1,_e=Kt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=gA,f=i(a,o)}while(Aa);return f}function cA(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Xo(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(bt.flags|=1024),i}function Sf(){var e=Hu!==0;return Hu=0,e}function wf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function bf(e){if(ju){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ju=!1}hr=0,_e=Kt=bt=null,Aa=!1,Ko=Hu=0,Sa=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?bt.memoizedState=_e=e:_e=_e.next=e,_e}function ve(){if(Kt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=_e===null?bt.memoizedState:_e.next;if(i!==null)_e=i,Kt=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},_e===null?bt.memoizedState=_e=e:_e=_e.next=e}return _e}function Rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(e){var i=Ko;return Ko+=1,Sa===null&&(Sa=[]),e=Xp(Sa,e,i),i=bt,(_e===null?i.memoizedState:_e.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Ug:Lg),e}function Gu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xo(e);if(e.$$typeof===ot)return $e(e)}throw Error(s(438,String(e)))}function If(e){var i=null,a=bt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Rf(),bt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function xi(e,i){return typeof i=="function"?i(e):i}function Fu(e){var i=ve();return Cf(i,Kt,e)}function Cf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,b=null,L=i,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(xt&K)===K:(hr&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===va&&(G=!0);else if((hr&z)===z){L=L.next,z===va&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,bt.lanes|=z,_r|=z;K=L.action,Os&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,bt.lanes|=K,_r|=K;L=L.next}while(L!==null&&L!==i);if(b===null?v=f:b.next=E,!dn(f,e.memoizedState)&&(Ve=!0,G&&(a=Ea,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Df(e){var i=ve(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);dn(f,i.memoizedState)||(Ve=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function ig(e,i,a){var o=bt,h=ve(),f=qt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!dn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=ag.bind(null,o,h,e);if($o(2048,8,E,[e]),h.getSnapshot!==i||v||_e!==null&&_e.memoizedState.tag&1){if(o.flags|=2048,wa(9,Qu(),sg.bind(null,o,h,a,i),null),te===null)throw Error(s(349));f||(hr&124)!==0||rg(o,i,a)}return a}function rg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=bt.updateQueue,i===null?(i=Rf(),bt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function sg(e,i,a,o){i.value=a,i.getSnapshot=o,og(i)&&lg(e)}function ag(e,i,a){return a(function(){og(i)&&lg(e)})}function og(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!dn(e,a)}catch{return!0}}function lg(e){var i=pa(e,2);i!==null&&vn(i,e,2)}function Nf(e){var i=on();if(typeof e=="function"){var a=e;if(e=a(),Os){hn(!0);try{a()}finally{hn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},i}function ug(e,i,a,o){return e.baseState=a,Cf(e,Kt,typeof o=="function"?o:xi)}function hA(e,i,a,o,h){if(Ku(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,cg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function cg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),hg(e,i,E)}catch(L){Of(e,i,L)}finally{H.T=f}}else try{f=a(h,o),hg(e,i,f)}catch(L){Of(e,i,L)}}function hg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){fg(e,i,o)},function(o){return Of(e,i,o)}):fg(e,i,a)}function fg(e,i,a){i.status="fulfilled",i.value=a,dg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,cg(e,a)))}function Of(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,dg(i),i=i.next;while(i!==o)}e.action=null}function dg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function mg(e,i){return i}function pg(e,i){if(qt){var a=te.formState;if(a!==null){t:{var o=bt;if(qt){if(le){e:{for(var h=le,f=ri;h.nodeType!==8;){if(!f){h=null;break e}if(h=qn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=qn(h.nextSibling),o=h.data==="F!";break t}}Is(o)}o=!1}o&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:i},a.queue=o,a=Pg.bind(null,bt,o),o.dispatch=a,o=Nf(!1),f=kf.bind(null,bt,!1,o.queue),o=on(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=hA.bind(null,bt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function gg(e){var i=ve();return yg(i,Kt,e)}function yg(e,i,a){if(i=Cf(e,i,mg)[0],e=Fu(xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Xo(i)}catch(v){throw v===Ho?zu:v}else o=i;i=ve();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(bt.flags|=2048,wa(9,Qu(),fA.bind(null,h,a),null)),[o,f,e]}function fA(e,i){e.action=i}function _g(e){var i=ve(),a=Kt;if(a!==null)return yg(i,a,e);ve(),i=i.memoizedState,a=ve();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function wa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=bt.updateQueue,i===null&&(i=Rf(),bt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Qu(){return{destroy:void 0,resource:void 0}}function vg(){return ve().memoizedState}function Yu(e,i,a,o){var h=on();o=o===void 0?null:o,bt.flags|=e,h.memoizedState=wa(1|i,Qu(),a,o)}function $o(e,i,a,o){var h=ve();o=o===void 0?null:o;var f=h.memoizedState.inst;Kt!==null&&o!==null&&Tf(o,Kt.memoizedState.deps)?h.memoizedState=wa(i,f,a,o):(bt.flags|=e,h.memoizedState=wa(1|i,f,a,o))}function Eg(e,i){Yu(8390656,8,e,i)}function Tg(e,i){$o(2048,8,e,i)}function Ag(e,i){return $o(4,2,e,i)}function Sg(e,i){return $o(4,4,e,i)}function wg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function bg(e,i,a){a=a!=null?a.concat([e]):null,$o(4,4,wg.bind(null,i,e),a)}function Vf(){}function Rg(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Tf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Ig(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Tf(i,o[1]))return o[0];if(o=e(),Os){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,i],o}function Mf(e,i,a){return a===void 0||(hr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Ny(),bt.lanes|=e,_r|=e,a)}function Cg(e,i,a,o){return dn(a,i)?a:Ta.current!==null?(e=Mf(e,a,o),dn(e,i)||(Ve=!0),e):(hr&42)===0?(Ve=!0,e.memoizedState=a):(e=Ny(),bt.lanes|=e,_r|=e,i)}function Dg(e,i,a,o,h){var f=et.p;et.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,kf(e,!1,i,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=lA(b,o);Zo(e,i,G,_n(e))}else Zo(e,i,o,_n(e))}catch(K){Zo(e,i,{then:function(){},status:"rejected",reason:K},_n())}finally{et.p=f,H.T=v}}function dA(){}function Pf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Ng(e).queue;Dg(e,h,i,ht,a===null?dA:function(){return Og(e),a(o)})}function Ng(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:ht},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Og(e){var i=Ng(e).next.queue;Zo(e,i,{},_n())}function xf(){return $e(pl)}function Vg(){return ve().memoizedState}function Mg(){return ve().memoizedState}function mA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=_n();e=ur(a);var o=cr(i,e,a);o!==null&&(vn(o,i,a),Fo(o,i,a)),i={cache:hf()},e.payload=i;return}i=i.return}}function pA(e,i,a){var o=_n();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ku(e)?xg(i,a):(a=tf(e,i,a,o),a!==null&&(vn(a,e,o),kg(a,i,o)))}function Pg(e,i,a){var o=_n();Zo(e,i,a,o)}function Zo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ku(e))xg(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,dn(E,v))return Ou(e,i,h,0),te===null&&Nu(),!1}catch{}finally{}if(a=tf(e,i,h,o),a!==null)return vn(a,e,o),kg(a,i,o),!0}return!1}function kf(e,i,a,o){if(o={lane:2,revertLane:md(),action:o,hasEagerState:!1,eagerState:null,next:null},Ku(e)){if(i)throw Error(s(479))}else i=tf(e,a,o,2),i!==null&&vn(i,e,2)}function Ku(e){var i=e.alternate;return e===bt||i!==null&&i===bt}function xg(e,i){Aa=ju=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function kg(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,vo(e,a)}}var Xu={readContext:$e,use:Gu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Ug={readContext:$e,use:Gu,useCallback:function(e,i){return on().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:Eg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Yu(4194308,4,wg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Yu(4194308,4,e,i)},useInsertionEffect:function(e,i){Yu(4,2,e,i)},useMemo:function(e,i){var a=on();i=i===void 0?null:i;var o=e();if(Os){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=on();if(a!==void 0){var h=a(i);if(Os){hn(!0);try{a(i)}finally{hn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=pA.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var i=on();return e={current:e},i.memoizedState=e},useState:function(e){e=Nf(e);var i=e.queue,a=Pg.bind(null,bt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Vf,useDeferredValue:function(e,i){var a=on();return Mf(a,e,i)},useTransition:function(){var e=Nf(!1);return e=Dg.bind(null,bt,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=bt,h=on();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(xt&124)!==0||rg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Eg(ag.bind(null,o,f,e),[e]),o.flags|=2048,wa(9,Qu(),sg.bind(null,o,f,a,i),null),a},useId:function(){var e=on(),i=te.identifierPrefix;if(qt){var a=Vi,o=Oi;a=(o&~(1<<32-Xe(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Hu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=uA++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:xf,useFormState:pg,useActionState:pg,useOptimistic:function(e){var i=on();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=kf.bind(null,bt,!0,a),a.dispatch=i,[e,i]},useMemoCache:If,useCacheRefresh:function(){return on().memoizedState=mA.bind(null,bt)}},Lg={readContext:$e,use:Gu,useCallback:Rg,useContext:$e,useEffect:Tg,useImperativeHandle:bg,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Ig,useReducer:Fu,useRef:vg,useState:function(){return Fu(xi)},useDebugValue:Vf,useDeferredValue:function(e,i){var a=ve();return Cg(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Fu(xi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:ig,useId:Vg,useHostTransitionStatus:xf,useFormState:gg,useActionState:gg,useOptimistic:function(e,i){var a=ve();return ug(a,Kt,e,i)},useMemoCache:If,useCacheRefresh:Mg},gA={readContext:$e,use:Gu,useCallback:Rg,useContext:$e,useEffect:Tg,useImperativeHandle:bg,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Ig,useReducer:Df,useRef:vg,useState:function(){return Df(xi)},useDebugValue:Vf,useDeferredValue:function(e,i){var a=ve();return Kt===null?Mf(a,e,i):Cg(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Df(xi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:ig,useId:Vg,useHostTransitionStatus:xf,useFormState:_g,useActionState:_g,useOptimistic:function(e,i){var a=ve();return Kt!==null?ug(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:If,useCacheRefresh:Mg},ba=null,Jo=0;function $u(e){var i=Jo;return Jo+=1,ba===null&&(ba=[]),Xp(ba,e,i)}function Wo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Zu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function zg(e){var i=e._init;return i(e._payload)}function Bg(e){function i(x,O){if(e){var U=x.deletions;U===null?(x.deletions=[O],x.flags|=16):U.push(O)}}function a(x,O){if(!e)return null;for(;O!==null;)i(x,O),O=O.sibling;return null}function o(x){for(var O=new Map;x!==null;)x.key!==null?O.set(x.key,x):O.set(x.index,x),x=x.sibling;return O}function h(x,O){return x=Ni(x,O),x.index=0,x.sibling=null,x}function f(x,O,U){return x.index=U,e?(U=x.alternate,U!==null?(U=U.index,U<O?(x.flags|=67108866,O):U):(x.flags|=67108866,O)):(x.flags|=1048576,O)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,O,U,Y){return O===null||O.tag!==6?(O=nf(U,x.mode,Y),O.return=x,O):(O=h(O,U),O.return=x,O)}function b(x,O,U,Y){var at=U.type;return at===F?G(x,O,U.props.children,Y,U.key):O!==null&&(O.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&zg(at)===O.type)?(O=h(O,U.props),Wo(O,U),O.return=x,O):(O=Mu(U.type,U.key,U.props,null,x.mode,Y),Wo(O,U),O.return=x,O)}function L(x,O,U,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=rf(U,x.mode,Y),O.return=x,O):(O=h(O,U.children||[]),O.return=x,O)}function G(x,O,U,Y,at){return O===null||O.tag!==7?(O=Ss(U,x.mode,Y,at),O.return=x,O):(O=h(O,U),O.return=x,O)}function K(x,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=nf(""+O,x.mode,U),O.return=x,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return U=Mu(O.type,O.key,O.props,null,x.mode,U),Wo(U,O),U.return=x,U;case q:return O=rf(O,x.mode,U),O.return=x,O;case S:var Y=O._init;return O=Y(O._payload),K(x,O,U)}if(ae(O)||P(O))return O=Ss(O,x.mode,U,null),O.return=x,O;if(typeof O.then=="function")return K(x,$u(O),U);if(O.$$typeof===ot)return K(x,Uu(x,O),U);Zu(x,O)}return null}function z(x,O,U,Y){var at=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return at!==null?null:E(x,O,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===at?b(x,O,U,Y):null;case q:return U.key===at?L(x,O,U,Y):null;case S:return at=U._init,U=at(U._payload),z(x,O,U,Y)}if(ae(U)||P(U))return at!==null?null:G(x,O,U,Y,null);if(typeof U.then=="function")return z(x,O,$u(U),Y);if(U.$$typeof===ot)return z(x,O,Uu(x,U),Y);Zu(x,U)}return null}function B(x,O,U,Y,at){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return x=x.get(U)||null,E(O,x,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return x=x.get(Y.key===null?U:Y.key)||null,b(O,x,Y,at);case q:return x=x.get(Y.key===null?U:Y.key)||null,L(O,x,Y,at);case S:var It=Y._init;return Y=It(Y._payload),B(x,O,U,Y,at)}if(ae(Y)||P(Y))return x=x.get(U)||null,G(O,x,Y,at,null);if(typeof Y.then=="function")return B(x,O,U,$u(Y),at);if(Y.$$typeof===ot)return B(x,O,U,Uu(O,Y),at);Zu(O,Y)}return null}function Et(x,O,U,Y){for(var at=null,It=null,ut=O,yt=O=0,Pe=null;ut!==null&&yt<U.length;yt++){ut.index>yt?(Pe=ut,ut=null):Pe=ut.sibling;var zt=z(x,ut,U[yt],Y);if(zt===null){ut===null&&(ut=Pe);break}e&&ut&&zt.alternate===null&&i(x,ut),O=f(zt,O,yt),It===null?at=zt:It.sibling=zt,It=zt,ut=Pe}if(yt===U.length)return a(x,ut),qt&&bs(x,yt),at;if(ut===null){for(;yt<U.length;yt++)ut=K(x,U[yt],Y),ut!==null&&(O=f(ut,O,yt),It===null?at=ut:It.sibling=ut,It=ut);return qt&&bs(x,yt),at}for(ut=o(ut);yt<U.length;yt++)Pe=B(ut,x,yt,U[yt],Y),Pe!==null&&(e&&Pe.alternate!==null&&ut.delete(Pe.key===null?yt:Pe.key),O=f(Pe,O,yt),It===null?at=Pe:It.sibling=Pe,It=Pe);return e&&ut.forEach(function(Ir){return i(x,Ir)}),qt&&bs(x,yt),at}function mt(x,O,U,Y){if(U==null)throw Error(s(151));for(var at=null,It=null,ut=O,yt=O=0,Pe=null,zt=U.next();ut!==null&&!zt.done;yt++,zt=U.next()){ut.index>yt?(Pe=ut,ut=null):Pe=ut.sibling;var Ir=z(x,ut,zt.value,Y);if(Ir===null){ut===null&&(ut=Pe);break}e&&ut&&Ir.alternate===null&&i(x,ut),O=f(Ir,O,yt),It===null?at=Ir:It.sibling=Ir,It=Ir,ut=Pe}if(zt.done)return a(x,ut),qt&&bs(x,yt),at;if(ut===null){for(;!zt.done;yt++,zt=U.next())zt=K(x,zt.value,Y),zt!==null&&(O=f(zt,O,yt),It===null?at=zt:It.sibling=zt,It=zt);return qt&&bs(x,yt),at}for(ut=o(ut);!zt.done;yt++,zt=U.next())zt=B(ut,x,yt,zt.value,Y),zt!==null&&(e&&zt.alternate!==null&&ut.delete(zt.key===null?yt:zt.key),O=f(zt,O,yt),It===null?at=zt:It.sibling=zt,It=zt);return e&&ut.forEach(function(yS){return i(x,yS)}),qt&&bs(x,yt),at}function $t(x,O,U,Y){if(typeof U=="object"&&U!==null&&U.type===F&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:t:{for(var at=U.key;O!==null;){if(O.key===at){if(at=U.type,at===F){if(O.tag===7){a(x,O.sibling),Y=h(O,U.props.children),Y.return=x,x=Y;break t}}else if(O.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&zg(at)===O.type){a(x,O.sibling),Y=h(O,U.props),Wo(Y,U),Y.return=x,x=Y;break t}a(x,O);break}else i(x,O);O=O.sibling}U.type===F?(Y=Ss(U.props.children,x.mode,Y,U.key),Y.return=x,x=Y):(Y=Mu(U.type,U.key,U.props,null,x.mode,Y),Wo(Y,U),Y.return=x,x=Y)}return v(x);case q:t:{for(at=U.key;O!==null;){if(O.key===at)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(x,O.sibling),Y=h(O,U.children||[]),Y.return=x,x=Y;break t}else{a(x,O);break}else i(x,O);O=O.sibling}Y=rf(U,x.mode,Y),Y.return=x,x=Y}return v(x);case S:return at=U._init,U=at(U._payload),$t(x,O,U,Y)}if(ae(U))return Et(x,O,U,Y);if(P(U)){if(at=P(U),typeof at!="function")throw Error(s(150));return U=at.call(U),mt(x,O,U,Y)}if(typeof U.then=="function")return $t(x,O,$u(U),Y);if(U.$$typeof===ot)return $t(x,O,Uu(x,U),Y);Zu(x,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(x,O.sibling),Y=h(O,U),Y.return=x,x=Y):(a(x,O),Y=nf(U,x.mode,Y),Y.return=x,x=Y),v(x)):a(x,O)}return function(x,O,U,Y){try{Jo=0;var at=$t(x,O,U,Y);return ba=null,at}catch(ut){if(ut===Ho||ut===zu)throw ut;var It=mn(29,ut,null,x.mode);return It.lanes=Y,It.return=x,It}finally{}}}var Ra=Bg(!0),qg=Bg(!1),Mn=$(null),si=null;function fr(e){var i=e.alternate;J(Ie,Ie.current&1),J(Mn,e),si===null&&(i===null||Ta.current!==null||i.memoizedState!==null)&&(si=e)}function jg(e){if(e.tag===22){if(J(Ie,Ie.current),J(Mn,e),si===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(si=e)}}else dr()}function dr(){J(Ie,Ie.current),J(Mn,Mn.current)}function ki(e){nt(Mn),si===e&&(si=null),nt(Ie)}var Ie=$(0);function Ju(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Rd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Uf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Lf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=_n(),h=ur(o);h.payload=i,a!=null&&(h.callback=a),i=cr(e,h,o),i!==null&&(vn(i,e,o),Fo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=_n(),h=ur(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=cr(e,h,o),i!==null&&(vn(i,e,o),Fo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=_n(),o=ur(a);o.tag=2,i!=null&&(o.callback=i),i=cr(e,o,a),i!==null&&(vn(i,e,a),Fo(i,e,a))}};function Hg(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!xo(a,o)||!xo(h,f):!0}function Gg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Lf.enqueueReplaceState(i,i.state,null)}function Vs(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Wu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Fg(e){Wu(e)}function Qg(e){console.error(e)}function Yg(e){Wu(e)}function tc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Kg(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function zf(e,i,a){return a=ur(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(e,i)},a}function Xg(e){return e=ur(e),e.tag=3,e}function $g(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Kg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Kg(i,a,o),typeof h!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function yA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Bo(i,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return si===null?ud():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===mf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),hd(e,o,h)),!1;case 22:return a.flags|=65536,o===mf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),hd(e,o,h)),!1}throw Error(s(435,a.tag))}return hd(e,o,h),ud(),!1}if(qt)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==of&&(e=Error(s(422),{cause:o}),zo(Dn(e,a)))):(o!==of&&(i=Error(s(423),{cause:o}),zo(Dn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Dn(o,a),h=zf(e.stateNode,o,h),yf(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=Dn(f,a),al===null?al=[f]:al.push(f),ue!==4&&(ue=2),i===null)return!0;o=Dn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=zf(a.stateNode,o,e),yf(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vr===null||!vr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Xg(h),$g(h,e,a,o),yf(a,h),!1}a=a.return}while(a!==null);return!1}var Zg=Error(s(461)),Ve=!1;function je(e,i,a,o){i.child=e===null?qg(i,null,a,o):Ra(i,e.child,a,o)}function Jg(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ds(i),o=Af(e,i,a,v,f,h),E=Sf(),e!==null&&!Ve?(wf(e,i,h),Ui(e,i,h)):(qt&&E&&sf(i),i.flags|=1,je(e,i,o,h),i.child)}function Wg(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!ef(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,ty(e,i,f,o,h)):(e=Mu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!Yf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:xo,a(v,o)&&e.ref===i.ref)return Ui(e,i,h)}return i.flags|=1,e=Ni(f,o),e.ref=i.ref,e.return=i,i.child=e}function ty(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(xo(f,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=f,Yf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Ui(e,i,h)}return Bf(e,i,a,o,h)}function ey(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return ny(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Lu(i,f!==null?f.cachePool:null),f!==null?tg(i,f):vf(),jg(i);else return i.lanes=i.childLanes=536870912,ny(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Lu(i,f.cachePool),tg(i,f),dr(),i.memoizedState=null):(e!==null&&Lu(i,null),vf(),dr());return je(e,i,h,a),i.child}function ny(e,i,a,o){var h=df();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Lu(i,null),vf(),jg(i),e!==null&&Bo(e,i,o,!0),null}function ec(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Bf(e,i,a,o,h){return Ds(i),a=Af(e,i,a,o,void 0,h),o=Sf(),e!==null&&!Ve?(wf(e,i,h),Ui(e,i,h)):(qt&&o&&sf(i),i.flags|=1,je(e,i,a,h),i.child)}function iy(e,i,a,o,h,f){return Ds(i),i.updateQueue=null,a=ng(i,o,a,h),eg(e),o=Sf(),e!==null&&!Ve?(wf(e,i,f),Ui(e,i,f)):(qt&&o&&sf(i),i.flags|=1,je(e,i,a,f),i.child)}function ry(e,i,a,o,h){if(Ds(i),i.stateNode===null){var f=ga,v=a.contextType;typeof v=="object"&&v!==null&&(f=$e(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Lf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},pf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?$e(v):ga,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Uf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Lf.enqueueReplaceState(f,f.state,null),Yo(i,o,f,h),Qo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=Vs(a,E);f.props=b;var L=f.context,G=a.contextType;v=ga,typeof G=="object"&&G!==null&&(v=$e(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Gg(i,f,o,v),lr=!1;var z=i.memoizedState;f.state=z,Yo(i,o,f,h),Qo(),L=i.memoizedState,E||z!==L||lr?(typeof K=="function"&&(Uf(i,a,K,o),L=i.memoizedState),(b=lr||Hg(i,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,gf(e,i),v=i.memoizedProps,G=Vs(a,v),f.props=G,K=i.pendingProps,z=f.context,L=a.contextType,b=ga,typeof L=="object"&&L!==null&&(b=$e(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Gg(i,f,o,b),lr=!1,z=i.memoizedState,f.state=z,Yo(i,o,f,h),Qo();var B=i.memoizedState;v!==K||z!==B||lr||e!==null&&e.dependencies!==null&&ku(e.dependencies)?(typeof E=="function"&&(Uf(i,a,E,o),B=i.memoizedState),(G=lr||Hg(i,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&ku(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,ec(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Ra(i,e.child,null,h),i.child=Ra(i,null,a,h)):je(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Ui(e,i,h),e}function sy(e,i,a,o){return Lo(),i.flags|=256,je(e,i,a,o),i.child}var qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jf(e){return{baseLanes:e,cachePool:Qp()}}function Hf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Pn),e}function ay(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(qt){if(h?fr(i):dr(),qt){var E=le,b;if(b=E){t:{for(b=E,E=ri;b.nodeType!==8;){if(!E){E=null;break t}if(b=qn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:ws!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},b=mn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,sn=i,le=null,b=!0):b=!1}b||Is(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Rd(E)?i.lanes=32:i.lanes=536870912,null;ki(i)}return E=o.children,o=o.fallback,h?(dr(),h=i.mode,E=nc({mode:"hidden",children:E},h),o=Ss(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=jf(a),h.childLanes=Hf(e,v,a),i.memoizedState=qf,o):(fr(i),Gf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(fr(i),i.flags&=-257,i=Ff(e,i,a)):i.memoizedState!==null?(dr(),i.child=e.child,i.flags|=128,i=null):(dr(),h=o.fallback,E=i.mode,o=nc({mode:"visible",children:o.children},E),h=Ss(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ra(i,e.child,null,a),o=i.child,o.memoizedState=jf(a),o.childLanes=Hf(e,v,a),i.memoizedState=qf,i=h);else if(fr(i),Rd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,zo({value:o,source:null,stack:null}),i=Ff(e,i,a)}else if(Ve||Bo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=te,v!==null&&(o=a&-a,o=(o&42)!==0?1:tr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,pa(e,o),vn(v,e,o),Zg;E.data==="$?"||ud(),i=Ff(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,le=qn(E.nextSibling),sn=i,qt=!0,Rs=null,ri=!1,e!==null&&(On[Vn++]=Oi,On[Vn++]=Vi,On[Vn++]=ws,Oi=e.id,Vi=e.overflow,ws=i),i=Gf(i,o.children),i.flags|=4096);return i}return h?(dr(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Ni(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ni(L,h):(h=Ss(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=jf(a):(b=E.cachePool,b!==null?(L=Re._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Qp(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Hf(e,v,a),i.memoizedState=qf,o):(fr(i),a=e.child,e=a.sibling,a=Ni(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Gf(e,i){return i=nc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function nc(e,i){return e=mn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ff(e,i,a){return Ra(i,e.child,null,a),e=Gf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function oy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),uf(e.return,i,a)}function Qf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function ly(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(je(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oy(e,a,i);else if(e.tag===19)oy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ju(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Qf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ju(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Qf(i,!0,a,null,f);break;case"together":Qf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ui(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),_r|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Bo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ni(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ni(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Yf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ku(e)))}function _A(e,i,a){switch(i.tag){case 3:Wt(i,i.stateNode.containerInfo),or(i,Re,e.memoizedState.cache),Lo();break;case 27:case 5:Wi(i);break;case 4:Wt(i,i.stateNode.containerInfo);break;case 10:or(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(fr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ay(e,i,a):(fr(i),e=Ui(e,i,a),e!==null?e.sibling:null);fr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Bo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return ly(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,ey(e,i,a);case 24:or(i,Re,e.memoizedState.cache)}return Ui(e,i,a)}function uy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Yf(e,a)&&(i.flags&128)===0)return Ve=!1,_A(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,qt&&(i.flags&1048576)!==0&&zp(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")ef(o)?(e=Vs(o,e),i.tag=1,i=ry(null,i,o,e,a)):(i.tag=0,i=Bf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Lt){i.tag=11,i=Jg(null,i,o,e,a);break t}else if(h===D){i.tag=14,i=Wg(null,i,o,e,a);break t}}throw i=pe(o)||o,Error(s(306,i,""))}}return i;case 0:return Bf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Vs(o,i.pendingProps),ry(e,i,o,h,a);case 3:t:{if(Wt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,gf(e,i),Yo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,or(i,Re,o),o!==f.cache&&cf(i,[Re],a,!0),Qo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=sy(e,i,o,a);break t}else if(o!==h){h=Dn(Error(s(424)),i),zo(h),i=sy(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=qn(e.firstChild),sn=i,qt=!0,Rs=null,ri=!0,a=qg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=Ui(e,i,a);break t}je(e,i,o,a)}i=i.child}return i;case 26:return ec(e,i),e===null?(a=d_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qt||(a=i.type,e=i.pendingProps,o=gc(At.current).createElement(a),o[Se]=i,o[ge]=e,Ge(o,a,e),ce(o),i.stateNode=o):i.memoizedState=d_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Wi(i),e===null&&qt&&(o=i.stateNode=c_(i.type,i.pendingProps,At.current),sn=i,ri=!0,h=le,Ar(i.type)?(Id=h,le=qn(o.firstChild)):le=h),je(e,i,i.pendingProps.children,a),ec(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&qt&&((h=o=le)&&(o=QA(o,i.type,i.pendingProps,ri),o!==null?(i.stateNode=o,sn=i,le=qn(o.firstChild),ri=!1,h=!0):h=!1),h||Is(i)),Wi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Sd(h,f)?o=null:v!==null&&Sd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Af(e,i,cA,null,null,a),pl._currentValue=h),ec(e,i),je(e,i,o,a),i.child;case 6:return e===null&&qt&&((e=a=le)&&(a=YA(a,i.pendingProps,ri),a!==null?(i.stateNode=a,sn=i,le=null,e=!0):e=!1),e||Is(i)),null;case 13:return ay(e,i,a);case 4:return Wt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ra(i,null,o,a):je(e,i,o,a),i.child;case 11:return Jg(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,or(i,i.type,o.value),je(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ds(i),h=$e(h),o=o(h),i.flags|=1,je(e,i,o,a),i.child;case 14:return Wg(e,i,i.type,i.pendingProps,a);case 15:return ty(e,i,i.type,i.pendingProps,a);case 19:return ly(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=nc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ni(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ey(e,i,a);case 24:return Ds(i),o=$e(Re),e===null?(h=df(),h===null&&(h=te,f=hf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},pf(i),or(i,Re,h)):((e.lanes&a)!==0&&(gf(e,i),Yo(i,null,null,a),Qo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),or(i,Re,o)):(o=f.cache,or(i,Re,o),o!==h.cache&&cf(i,[Re],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Li(e){e.flags|=4}function cy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!__(i)){if(i=Mn.current,i!==null&&((xt&4194048)===xt?si!==null:(xt&62914560)!==xt&&(xt&536870912)===0||i!==si))throw Go=mf,Yp;e.flags|=8192}}function ic(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?yo():536870912,e.lanes|=i,Na|=i)}function tl(e,i){if(!qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function vA(e,i,a){var o=i.pendingProps;switch(af(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Pi(Re),Qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Uo(i)?Li(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,jp())),re(i),null;case 26:return a=i.memoizedState,e===null?(Li(i),a!==null?(re(i),cy(i,a)):(re(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Li(i),re(i),cy(i,a)):(re(i),i.flags&=-16777217):(e.memoizedProps!==o&&Li(i),re(i),i.flags&=-16777217),null;case 27:yi(i),a=At.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=ft.current,Uo(i)?Bp(i):(e=c_(h,o,a),i.stateNode=e,Li(i))}return re(i),null;case 5:if(yi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(e=ft.current,Uo(i))Bp(i);else{switch(h=gc(At.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[ge]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Ge(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Li(i)}}return re(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=At.current,Uo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||i_(e.nodeValue,a)),e||Is(i)}else e=gc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Uo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=jp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ki(i),i):(ki(i),null)}if(ki(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),ic(i,i.updateQueue),re(i),null;case 4:return Qn(),e===null&&_d(i.stateNode.containerInfo),re(i),null;case 10:return Pi(i.type),re(i),null;case 19:if(nt(Ie),h=i.memoizedState,h===null)return re(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)tl(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Ju(e),f!==null){for(i.flags|=128,tl(h,!1),e=f.updateQueue,i.updateQueue=e,ic(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Lp(a,e),a=a.sibling;return J(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&Sn()>ac&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304)}else{if(!o)if(e=Ju(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,ic(i,e),tl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qt)return re(i),null}else 2*Sn()-h.renderingStartTime>ac&&a!==536870912&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Sn(),i.sibling=null,e=Ie.current,J(Ie,o?e&1|2:e&1),i):(re(i),null);case 22:case 23:return ki(i),Ef(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&ic(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&nt(Ns),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Pi(Re),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function EA(e,i){switch(af(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Pi(Re),Qn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return yi(i),null;case 13:if(ki(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Lo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return nt(Ie),null;case 4:return Qn(),null;case 10:return Pi(i.type),null;case 22:case 23:return ki(i),Ef(),e!==null&&nt(Ns),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Pi(Re),null;case 25:return null;default:return null}}function hy(e,i){switch(af(i),i.tag){case 3:Pi(Re),Qn();break;case 26:case 27:case 5:yi(i);break;case 4:Qn();break;case 13:ki(i);break;case 19:nt(Ie);break;case 10:Pi(i.type);break;case 22:case 23:ki(i),Ef(),e!==null&&nt(Ns);break;case 24:Pi(Re)}}function el(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Jt(i,i.return,E)}}function mr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(G){Jt(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){Jt(i,i.return,G)}}function fy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Wp(i,a)}catch(o){Jt(e,e.return,o)}}}function dy(e,i,a){a.props=Vs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Jt(e,i,o)}}function nl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Jt(e,i,h)}}function ai(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(e,i,h)}else a.current=null}function my(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Jt(e,e.return,h)}}function Kf(e,i,a){try{var o=e.stateNode;qA(o,e.type,a,i),o[ge]=i}catch(h){Jt(e,e.return,h)}}function py(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ar(e.type)||e.tag===4}function Xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||py(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ar(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $f(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=pc));else if(o!==4&&(o===27&&Ar(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for($f(e,i,a),e=e.sibling;e!==null;)$f(e,i,a),e=e.sibling}function rc(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ar(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(rc(e,i,a),e=e.sibling;e!==null;)rc(e,i,a),e=e.sibling}function gy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ge(i,o,a),i[Se]=e,i[ge]=a}catch(f){Jt(e,e.return,f)}}var zi=!1,fe=!1,Zf=!1,yy=typeof WeakSet=="function"?WeakSet:Set,Me=null;function TA(e,i){if(e=e.containerInfo,Td=Ac,e=Cp(e),Kh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ad={focusedElem:e,selectionRange:a},Ac=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=Vs(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Jt(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)bd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function _y(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:pr(e,a),o&4&&el(5,a);break;case 1:if(pr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var h=Vs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}o&64&&fy(a),o&512&&nl(a,a.return);break;case 3:if(pr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Wp(e,i)}catch(v){Jt(a,a.return,v)}}break;case 27:i===null&&o&4&&gy(a);case 26:case 5:pr(e,a),i===null&&o&4&&my(a),o&512&&nl(a,a.return);break;case 12:pr(e,a);break;case 13:pr(e,a),o&4&&Ty(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=NA.bind(null,a),KA(e,a))));break;case 22:if(o=a.memoizedState!==null||zi,!o){i=i!==null&&i.memoizedState!==null||fe,h=zi;var f=fe;zi=o,(fe=i)&&!f?gr(e,a,(a.subtreeFlags&8772)!==0):pr(e,a),zi=h,fe=f}break;case 30:break;default:pr(e,a)}}function vy(e){var i=e.alternate;i!==null&&(e.alternate=null,vy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ir(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,ln=!1;function Bi(e,i,a){for(a=a.child;a!==null;)Ey(e,i,a),a=a.sibling}function Ey(e,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||ai(a,i),Bi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ai(a,i);var o=ie,h=ln;Ar(a.type)&&(ie=a.stateNode,ln=!1),Bi(e,i,a),hl(a.stateNode),ie=o,ln=h;break;case 5:fe||ai(a,i);case 6:if(o=ie,h=ln,ie=null,Bi(e,i,a),ie=o,ln=h,ie!==null)if(ln)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(f){Jt(a,i,f)}else try{ie.removeChild(a.stateNode)}catch(f){Jt(a,i,f)}break;case 18:ie!==null&&(ln?(e=ie,l_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),vl(e)):l_(ie,a.stateNode));break;case 4:o=ie,h=ln,ie=a.stateNode.containerInfo,ln=!0,Bi(e,i,a),ie=o,ln=h;break;case 0:case 11:case 14:case 15:fe||mr(2,a,i),fe||mr(4,a,i),Bi(e,i,a);break;case 1:fe||(ai(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&dy(a,i,o)),Bi(e,i,a);break;case 21:Bi(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Bi(e,i,a),fe=o;break;default:Bi(e,i,a)}}function Ty(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vl(e)}catch(a){Jt(i,i.return,a)}}function AA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new yy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new yy),i;default:throw Error(s(435,e.tag))}}function Jf(e,i){var a=AA(e);i.forEach(function(o){var h=OA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function pn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ar(E.type)){ie=E.stateNode,ln=!1;break t}break;case 5:ie=E.stateNode,ln=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,ln=!0;break t}E=E.return}if(ie===null)throw Error(s(160));Ey(f,v,h),ie=null,ln=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ay(i,e),i=i.sibling}var Bn=null;function Ay(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(i,e),gn(e),o&4&&(mr(3,e,e.return),el(3,e),mr(5,e,e.return));break;case 1:pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),o&64&&zi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Bn;if(pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[os]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ge(f,o,a),f[Se]=e,ce(f),o=f;break t;case"link":var v=g_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;case"meta":if(v=g_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,ce(f),o=f}e.stateNode=o}else y_(h,e.type,e.stateNode);else e.stateNode=p_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?y_(h,e.type,e.stateNode):p_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Kf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),a!==null&&o&4&&Kf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),e.flags&32){h=e.stateNode;try{bn(h,"")}catch(B){Jt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Kf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Zf=!0);break;case 6:if(pn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Jt(e,e.return,B)}}break;case 3:if(vc=null,h=Bn,Bn=yc(i.containerInfo),pn(i,e),Bn=h,gn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(i.containerInfo)}catch(B){Jt(e,e.return,B)}Zf&&(Zf=!1,Sy(e));break;case 4:o=Bn,Bn=yc(e.stateNode.containerInfo),pn(i,e),gn(e),Bn=o;break;case 12:pn(i,e),gn(e);break;case 13:pn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rd=Sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Jf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=zi,G=fe;if(zi=L||h,fe=G||b,pn(i,e),fe=G,zi=L,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||zi||fe||Ms(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Jt(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){Jt(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Jf(e,a))));break;case 19:pn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Jf(e,o)));break;case 30:break;case 21:break;default:pn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(py(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Xf(e);rc(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(bn(v,""),a.flags&=-33);var E=Xf(e);rc(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=Xf(e);$f(e,L,b);break;default:throw Error(s(161))}}catch(G){Jt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Sy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Sy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function pr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)_y(e,i.alternate,i),i=i.sibling}function Ms(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:mr(4,i,i.return),Ms(i);break;case 1:ai(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&dy(i,i.return,a),Ms(i);break;case 27:hl(i.stateNode);case 26:case 5:ai(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}e=e.sibling}}function gr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:gr(h,f,a),el(4,f);break;case 1:if(gr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Jt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Jp(b[h],E)}catch(L){Jt(o,o.return,L)}}a&&v&64&&fy(f),nl(f,f.return);break;case 27:gy(f);case 26:case 5:gr(h,f,a),a&&o===null&&v&4&&my(f),nl(f,f.return);break;case 12:gr(h,f,a);break;case 13:gr(h,f,a),a&&v&4&&Ty(h,f);break;case 22:f.memoizedState===null&&gr(h,f,a),nl(f,f.return);break;case 30:break;default:gr(h,f,a)}i=i.sibling}}function Wf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&qo(a))}function td(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e))}function oi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(e,i,a,o),i=i.sibling}function wy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:oi(e,i,a,o),h&2048&&el(9,i);break;case 1:oi(e,i,a,o);break;case 3:oi(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e)));break;case 12:if(h&2048){oi(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Jt(i,i.return,b)}}else oi(e,i,a,o);break;case 13:oi(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?oi(e,i,a,o):il(e,i):f._visibility&2?oi(e,i,a,o):(f._visibility|=2,Ia(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Wf(v,i);break;case 24:oi(e,i,a,o),h&2048&&td(i.alternate,i);break;default:oi(e,i,a,o)}}function Ia(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(f,v,E,b,h),el(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ia(f,v,E,b,h):il(f,v):(G._visibility|=2,Ia(f,v,E,b,h)),h&&L&2048&&Wf(v.alternate,v);break;case 24:Ia(f,v,E,b,h),h&&L&2048&&td(v.alternate,v);break;default:Ia(f,v,E,b,h)}i=i.sibling}}function il(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:il(a,o),h&2048&&Wf(o.alternate,o);break;case 24:il(a,o),h&2048&&td(o.alternate,o);break;default:il(a,o)}i=i.sibling}}var rl=8192;function Ca(e){if(e.subtreeFlags&rl)for(e=e.child;e!==null;)by(e),e=e.sibling}function by(e){switch(e.tag){case 26:Ca(e),e.flags&rl&&e.memoizedState!==null&&oS(Bn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var i=Bn;Bn=yc(e.stateNode.containerInfo),Ca(e),Bn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=rl,rl=16777216,Ca(e),rl=i):Ca(e));break;default:Ca(e)}}function Ry(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function sl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Cy(o,e)}Ry(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Iy(e),e=e.sibling}function Iy(e){switch(e.tag){case 0:case 11:case 15:sl(e),e.flags&2048&&mr(9,e,e.return);break;case 3:sl(e);break;case 12:sl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,sc(e)):sl(e);break;default:sl(e)}}function sc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Cy(o,e)}Ry(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:mr(8,i,i.return),sc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,sc(i));break;default:sc(i)}e=e.sibling}}function Cy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,f=o.return;if(vy(o),o===a){Me=null;break t}if(h!==null){h.return=f,Me=h;break t}Me=f}}}var SA={getCacheForType:function(e){var i=$e(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},wA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,Ct=null,xt=0,Ft=0,yn=null,yr=!1,Da=!1,ed=!1,qi=0,ue=0,_r=0,Ps=0,nd=0,Pn=0,Na=0,al=null,un=null,id=!1,rd=0,ac=1/0,oc=null,vr=null,He=0,Er=null,Oa=null,Va=0,sd=0,ad=null,Dy=null,ol=0,od=null;function _n(){if((Gt&2)!==0&&xt!==0)return xt&-xt;if(H.T!==null){var e=va;return e!==0?e:md()}return er()}function Ny(){Pn===0&&(Pn=(xt&536870912)===0||qt?go():536870912);var e=Mn.current;return e!==null&&(e.flags|=32),Pn}function vn(e,i,a){(e===te&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Ma(e,0),Tr(e,xt,Pn,!1)),vi(e,a),((Gt&2)===0||e!==te)&&(e===te&&((Gt&2)===0&&(Ps|=a),ue===4&&Tr(e,xt,Pn,!1)),li(e))}function Oy(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||as(e,i),h=o?IA(e,i):cd(e,i,!0),f=o;do{if(h===0){Da&&!o&&Tr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!bA(a)){h=cd(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=al;var b=E.current.memoizedState.isDehydrated;if(b&&(Ma(E,v).flags|=256),v=cd(E,v,!1),v!==2){if(ed&&!b){E.errorRecoveryDisabledLanes|=f,Ps|=f,h=4;break t}f=un,un=h,f!==null&&(un===null?un=f:un.push.apply(un,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ma(e,0),Tr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Tr(o,i,Pn,!yr);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=rd+300-Sn(),10<h)){if(Tr(o,i,Pn,!yr),$s(o,0,!0)!==0)break t;o.timeoutHandle=a_(Vy.bind(null,o,a,un,oc,id,i,Pn,Ps,Na,yr,f,2,-0,0),h);break t}Vy(o,a,un,oc,id,i,Pn,Ps,Na,yr,f,0,-0,0)}}break}while(!0);li(e)}function Vy(e,i,a,o,h,f,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:aS},by(i),K=lS(),K!==null)){e.cancelPendingCommit=K(zy.bind(null,e,i,f,a,o,h,v,E,b,G,1,z,B)),Tr(e,f,v,!L);return}zy(e,i,f,a,o,h,v,E,b)}function bA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!dn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Tr(e,i,a,o){i&=~nd,i&=~Ps,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Xe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Yn(e,a,i)}function lc(){return(Gt&6)===0?(ll(0),!1):!0}function ld(){if(Ct!==null){if(Ft===0)var e=Ct.return;else e=Ct,Mi=Cs=null,bf(e),ba=null,Jo=0,e=Ct;for(;e!==null;)hy(e.alternate,e),e=e.return;Ct=null}}function Ma(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,HA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ld(),te=e,Ct=a=Ni(e.current,null),xt=i,Ft=0,yn=null,yr=!1,Da=as(e,i),ed=!1,Na=Pn=nd=Ps=_r=ue=0,un=al=null,id=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Xe(o),f=1<<h;i|=e[h],o&=~f}return qi=i,Nu(),a}function My(e,i){bt=null,H.H=Xu,i===Ho||i===zu?(i=$p(),Ft=3):i===Yp?(i=$p(),Ft=4):Ft=i===Zg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Ct===null&&(ue=1,tc(e,Dn(i,e.current)))}function Py(){var e=H.H;return H.H=Xu,e===null?Xu:e}function xy(){var e=H.A;return H.A=SA,e}function ud(){ue=4,yr||(xt&4194048)!==xt&&Mn.current!==null||(Da=!0),(_r&134217727)===0&&(Ps&134217727)===0||te===null||Tr(te,xt,Pn,!1)}function cd(e,i,a){var o=Gt;Gt|=2;var h=Py(),f=xy();(te!==e||xt!==i)&&(oc=null,Ma(e,i)),i=!1;var v=ue;t:do try{if(Ft!==0&&Ct!==null){var E=Ct,b=yn;switch(Ft){case 8:ld(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var L=Ft;if(Ft=0,yn=null,Pa(e,E,b,L),a&&Da){v=0;break t}break;default:L=Ft,Ft=0,yn=null,Pa(e,E,b,L)}}RA(),v=ue;break}catch(G){My(e,G)}while(!0);return i&&e.shellSuspendCounter++,Mi=Cs=null,Gt=o,H.H=h,H.A=f,Ct===null&&(te=null,xt=0,Nu()),v}function RA(){for(;Ct!==null;)ky(Ct)}function IA(e,i){var a=Gt;Gt|=2;var o=Py(),h=xy();te!==e||xt!==i?(oc=null,ac=Sn()+500,Ma(e,i)):Da=as(e,i);t:do try{if(Ft!==0&&Ct!==null){i=Ct;var f=yn;e:switch(Ft){case 1:Ft=0,yn=null,Pa(e,i,f,1);break;case 2:case 9:if(Kp(f)){Ft=0,yn=null,Uy(i);break}i=function(){Ft!==2&&Ft!==9||te!==e||(Ft=7),li(e)},f.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Kp(f)?(Ft=0,yn=null,Uy(i)):(Ft=0,yn=null,Pa(e,i,f,7));break;case 5:var v=null;switch(Ct.tag){case 26:v=Ct.memoizedState;case 5:case 27:var E=Ct;if(!v||__(v)){Ft=0,yn=null;var b=E.sibling;if(b!==null)Ct=b;else{var L=E.return;L!==null?(Ct=L,uc(L)):Ct=null}break e}}Ft=0,yn=null,Pa(e,i,f,5);break;case 6:Ft=0,yn=null,Pa(e,i,f,6);break;case 8:ld(),ue=6;break t;default:throw Error(s(462))}}CA();break}catch(G){My(e,G)}while(!0);return Mi=Cs=null,H.H=o,H.A=h,Gt=a,Ct!==null?0:(te=null,xt=0,Nu(),ue)}function CA(){for(;Ct!==null&&!ho();)ky(Ct)}function ky(e){var i=uy(e.alternate,e,qi);e.memoizedProps=e.pendingProps,i===null?uc(e):Ct=i}function Uy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=iy(a,i,i.pendingProps,i.type,void 0,xt);break;case 11:i=iy(a,i,i.pendingProps,i.type.render,i.ref,xt);break;case 5:bf(i);default:hy(a,i),i=Ct=Lp(i,qi),i=uy(a,i,qi)}e.memoizedProps=e.pendingProps,i===null?uc(e):Ct=i}function Pa(e,i,a,o){Mi=Cs=null,bf(i),ba=null,Jo=0;var h=i.return;try{if(yA(e,h,i,a,xt)){ue=1,tc(e,Dn(a,e.current)),Ct=null;return}}catch(f){if(h!==null)throw Ct=h,f;ue=1,tc(e,Dn(a,e.current)),Ct=null;return}i.flags&32768?(qt||o===1?e=!0:Da||(xt&536870912)!==0?e=!1:(yr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ly(i,e)):uc(i)}function uc(e){var i=e;do{if((i.flags&32768)!==0){Ly(i,yr);return}e=i.return;var a=vA(i.alternate,i,qi);if(a!==null){Ct=a;return}if(i=i.sibling,i!==null){Ct=i;return}Ct=i=e}while(i!==null);ue===0&&(ue=5)}function Ly(e,i){do{var a=EA(e.alternate,e);if(a!==null){a.flags&=32767,Ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=a}while(e!==null);ue=6,Ct=null}function zy(e,i,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do cc();while(He!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Wh,_o(e,a,f,v,E,b),e===te&&(Ct=te=null,xt=0),Oa=i,Er=e,Va=a,sd=f,ad=h,Dy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,VA(ns,function(){return Gy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=et.p,et.p=2,v=Gt,Gt|=4;try{TA(e,i,a)}finally{Gt=v,et.p=h,H.T=o}}He=1,By(),qy(),jy()}}function By(){if(He===1){He=0;var e=Er,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{Ay(i,e);var f=Ad,v=Cp(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Ip(E.ownerDocument.documentElement,E)){if(b!==null&&Kh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),Et=E.textContent.length,mt=Math.min(b.start,Et),$t=b.end===void 0?mt:Math.min(b.end,Et);!B.extend&&mt>$t&&(v=$t,$t=mt,mt=v);var x=Rp(E,mt),O=Rp(E,$t);if(x&&O&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var U=K.createRange();U.setStart(x.node,x.offset),B.removeAllRanges(),mt>$t?(B.addRange(U),B.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),B.addRange(U))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Y=K[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ac=!!Td,Ad=Td=null}finally{Gt=h,et.p=o,H.T=a}}e.current=i,He=2}}function qy(){if(He===2){He=0;var e=Er,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{_y(e,i.alternate,i)}finally{Gt=h,et.p=o,H.T=a}}He=3}}function jy(){if(He===4||He===3){He=0,su();var e=Er,i=Oa,a=Va,o=Dy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?He=5:(He=0,Oa=Er=null,Hy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(vr=null),Zs(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=et.p,et.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=i,et.p=h}}(Va&3)!==0&&cc(),li(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===od?ol++:(ol=0,od=e):ol=0,ll(0)}}function Hy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,qo(i)))}function cc(e){return By(),qy(),jy(),Gy()}function Gy(){if(He!==5)return!1;var e=Er,i=sd;sd=0;var a=Zs(Va),o=H.T,h=et.p;try{et.p=32>a?32:a,H.T=null,a=ad,ad=null;var f=Er,v=Va;if(He=0,Oa=Er=null,Va=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Iy(f.current),wy(f,f.current,v,a),Gt=E,ll(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{et.p=h,H.T=o,Hy(e,i)}}function Fy(e,i,a){i=Dn(a,i),i=zf(e.stateNode,i,2),e=cr(e,i,2),e!==null&&(vi(e,2),li(e))}function Jt(e,i,a){if(e.tag===3)Fy(e,e,a);else for(;i!==null;){if(i.tag===3){Fy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(vr===null||!vr.has(o))){e=Dn(a,e),a=Xg(2),o=cr(i,a,2),o!==null&&($g(a,o,i,e),vi(o,2),li(o));break}}i=i.return}}function hd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new wA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(ed=!0,h.add(a),e=DA.bind(null,e,i,a),i.then(e,e))}function DA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(xt&a)===a&&(ue===4||ue===3&&(xt&62914560)===xt&&300>Sn()-rd?(Gt&2)===0&&Ma(e,0):nd|=a,Na===xt&&(Na=0)),li(e)}function Qy(e,i){i===0&&(i=yo()),e=pa(e,i),e!==null&&(vi(e,i),li(e))}function NA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Qy(e,a)}function OA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Qy(e,a)}function VA(e,i){return ts(e,i)}var hc=null,xa=null,fd=!1,fc=!1,dd=!1,xs=0;function li(e){e!==xa&&e.next===null&&(xa===null?hc=xa=e:xa=xa.next=e),fc=!0,fd||(fd=!0,PA())}function ll(e,i){if(!dd&&fc){dd=!0;do for(var a=!1,o=hc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Xe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,$y(o,f))}else f=xt,f=$s(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||as(o,f)||(a=!0,$y(o,f));o=o.next}while(a);dd=!1}}function MA(){Yy()}function Yy(){fc=fd=!1;var e=0;xs!==0&&(jA()&&(e=xs),xs=0);for(var i=Sn(),a=null,o=hc;o!==null;){var h=o.next,f=Ky(o,i);f===0?(o.next=null,a===null?hc=h:a.next=h,h===null&&(xa=a)):(a=o,(e!==0||(f&3)!==0)&&(fc=!0)),o=h}ll(e)}function Ky(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Xe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=po(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=te,a=xt,a=$s(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&es(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||as(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&es(o),Zs(a)){case 2:case 8:a=Ks;break;case 32:a=ns;break;case 268435456:a=Xs;break;default:a=ns}return o=Xy.bind(null,e),a=ts(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&es(o),e.callbackPriority=2,e.callbackNode=null,2}function Xy(e,i){if(He!==0&&He!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(cc()&&e.callbackNode!==a)return null;var o=xt;return o=$s(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Oy(e,o,i),Ky(e,Sn()),e.callbackNode!=null&&e.callbackNode===a?Xy.bind(null,e):null)}function $y(e,i){if(cc())return null;Oy(e,i,!0)}function PA(){GA(function(){(Gt&6)!==0?ts(fo,MA):Yy()})}function md(){return xs===0&&(xs=go()),xs}function Zy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function Jy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function xA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=Zy((h[ge]||null).action),v=o.submitter;v&&(i=(i=v[ge]||null)?Zy(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new ra("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(xs!==0){var b=v?Jy(h,v):new FormData(h);Pf(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Jy(h,v):new FormData(h),Pf(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var pd=0;pd<Jh.length;pd++){var gd=Jh[pd],kA=gd.toLowerCase(),UA=gd[0].toUpperCase()+gd.slice(1);zn(kA,"on"+UA)}zn(Op,"onAnimationEnd"),zn(Vp,"onAnimationIteration"),zn(Mp,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(tA,"onTransitionRun"),zn(eA,"onTransitionStart"),zn(nA,"onTransitionCancel"),zn(Pp,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function Wy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Wu(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Wu(G)}h.currentTarget=null,f=b}}}}function Dt(e,i){var a=i[Eo];a===void 0&&(a=i[Eo]=new Set);var o=e+"__bubble";a.has(o)||(t_(i,e,2,!1),a.add(o))}function yd(e,i,a){var o=0;i&&(o|=4),t_(a,e,o,i)}var dc="_reactListening"+Math.random().toString(36).slice(2);function _d(e){if(!e[dc]){e[dc]=!0,To.forEach(function(a){a!=="selectionchange"&&(LA.has(a)||yd(a,!1,e),yd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[dc]||(i[dc]=!0,yd("selectionchange",!1,i))}}function t_(e,i,a,o){switch(w_(i)){case 2:var h=hS;break;case 8:h=fS;break;default:h=Vd}a=h.bind(null,i,a,e),h=void 0,!In||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function vd(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ei(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}pu(function(){var L=f,G=Rn(a),K=[];t:{var z=xp.get(e);if(z!==void 0){var B=ra,Et=e;switch(e){case"keypress":if(Wn(a)===0)break t;case"keydown":case"keyup":B=ca;break;case"focusin":Et="focus",B=oa;break;case"focusout":Et="blur",B=oa;break;case"beforeblur":case"afterblur":B=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Su;break;case Op:case Vp:case Mp:B=la;break;case Pp:B=bu;break;case"scroll":case"scrollend":B=gu;break;case"wheel":B=ha;break;case"copy":case"cut":case"paste":B=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Mo;break;case"toggle":case"beforetoggle":B=Iu}var mt=(i&4)!==0,$t=!mt&&(e==="scroll"||e==="scrollend"),x=mt?z!==null?z+"Capture":null:z;mt=[];for(var O=L,U;O!==null;){var Y=O;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||x===null||(Y=ms(O,x),Y!=null&&mt.push(cl(O,Y,U))),$t)break;O=O.return}0<mt.length&&(z=new B(z,Et,null,a,G),K.push({event:z,listeners:mt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==wi&&(Et=a.relatedTarget||a.fromElement)&&(Ei(Et)||Et[wn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Et=a.relatedTarget||a.toElement,B=L,Et=Et?Ei(Et):null,Et!==null&&($t=c(Et),mt=Et.tag,Et!==$t||mt!==5&&mt!==27&&mt!==6)&&(Et=null)):(B=null,Et=L),B!==Et)){if(mt=Cn,Y="onMouseLeave",x="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Mo,Y="onPointerLeave",x="onPointerEnter",O="pointer"),$t=B==null?z:Xn(B),U=Et==null?z:Xn(Et),z=new mt(Y,O+"leave",B,a,G),z.target=$t,z.relatedTarget=U,Y=null,Ei(G)===L&&(mt=new mt(x,O+"enter",Et,a,G),mt.target=U,mt.relatedTarget=$t,Y=mt),$t=Y,B&&Et)e:{for(mt=B,x=Et,O=0,U=mt;U;U=ka(U))O++;for(U=0,Y=x;Y;Y=ka(Y))U++;for(;0<O-U;)mt=ka(mt),O--;for(;0<U-O;)x=ka(x),U--;for(;O--;){if(mt===x||x!==null&&mt===x.alternate)break e;mt=ka(mt),x=ka(x)}mt=null}else mt=null;B!==null&&e_(K,z,B,mt,!1),Et!==null&&$t!==null&&e_(K,$t,Et,mt,!0)}}t:{if(z=L?Xn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var at=Ep;else if(be(z))if(Tp)at=Z0;else{at=X0;var It=K0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Ro(L.elementType)&&(at=Ep):at=$0;if(at&&(at=at(e,L))){Di(K,at,a,G);break t}It&&It(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&sr(z,"number",z.value)}switch(It=L?Xn(L):window,e){case"focusin":(be(It)||It.contentEditable==="true")&&(fa=It,Xh=L,ko=null);break;case"focusout":ko=Xh=fa=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,Dp(K,a,G);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Dp(K,a,G)}var ut;if(ni)t:{switch(e){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Mt?j(e,a)&&(yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(yt="onCompositionStart");yt&&(_&&a.locale!=="ko"&&(Mt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Mt&&(ut=Co()):(Jn=G,ar="value"in Jn?Jn.value:Jn.textContent,Mt=!0)),It=mc(L,yt),0<It.length&&(yt=new Oo(yt,e,null,a,G),K.push({event:yt,listeners:It}),ut?yt.data=ut:(ut=W(a),ut!==null&&(yt.data=ut)))),(ut=m?we(e,a):Pt(e,a))&&(yt=mc(L,"onBeforeInput"),0<yt.length&&(It=new Oo("onBeforeInput","beforeinput",null,a,G),K.push({event:It,listeners:yt}),It.data=ut)),xA(K,e,L,a,G)}Wy(K,i)})}function cl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function mc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ms(e,a),h!=null&&o.unshift(cl(e,h,f)),h=ms(e,i),h!=null&&o.push(cl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function e_(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=ms(a,f),L!=null&&v.unshift(cl(a,L,b))):h||(L=ms(a,f),L!=null&&v.push(cl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var zA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function n_(e){return(typeof e=="string"?e:""+e).replace(zA,`
`).replace(BA,"")}function i_(e,i){return i=n_(i),n_(e)===i}function pc(){}function Xt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||bn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&bn(e,""+o);break;case"className":$n(e,"class",o);break;case"tabIndex":$n(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(e,a,o);break;case"style":bo(e,o,f);break;case"data":if(i!=="object"){$n(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=pc);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ia(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),rr(e,"popover",o);break;case"xlinkActuate":Be(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Be(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Be(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Be(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Be(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Be(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Be(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Be(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Be(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jh.get(a)||a,rr(e,a,o))}}function Ed(e,i,a,o,h,f){switch(a){case"style":bo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?bn(e,o):(typeof o=="number"||typeof o=="bigint")&&bn(e,""+o);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=pc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):rr(e,a,o)}}}function Ge(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,f,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),o&&Xt(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Xt(e,i,o,G,a,null)}}hs(e,f,E,b,L,v,h,!1),na(e);return;case"select":Dt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xt(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Si(e,!!o,i,!1):a!=null&&Si(e,!!o,a,!0);return;case"textarea":Dt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}fs(e,o,h,f),na(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,i,b,o,a,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(o=0;o<ul.length;o++)Dt(ul[o],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,L,o,a,null)}return;default:if(Ro(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Ed(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xt(e,i,E,o,a,null))}function qA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||Xt(e,i,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&Xt(e,i,z,B,o,K)}}fn(e,v,E,b,L,G,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Xt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Xt(e,i,h,f,o,b)}i=E,a=v,o=B,z!=null?Si(e,!!a,z,!1):!!o!=!!a&&(i!=null?Si(e,!!a,i,!0):Si(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xt(e,i,v,h,o,f)}Yt(e,z,B);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Xt(e,i,Et,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)z=a[mt],a.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt)&&Xt(e,i,mt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xt(e,i,L,z,o,B)}return;default:if(Ro(i)){for(var $t in a)z=a[$t],a.hasOwnProperty($t)&&z!==void 0&&!o.hasOwnProperty($t)&&Ed(e,i,$t,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||Ed(e,i,G,z,o,B);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&Xt(e,i,x,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||Xt(e,i,K,z,o,B)}var Td=null,Ad=null;function gc(e){return e.nodeType===9?e:e.ownerDocument}function r_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Sd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wd=null;function jA(){var e=window.event;return e&&e.type==="popstate"?e===wd?!1:(wd=e,!0):(wd=null,!1)}var a_=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,o_=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof o_<"u"?function(e){return o_.resolve(null).then(e).catch(FA)}:a_;function FA(e){setTimeout(function(){throw e})}function Ar(e){return e==="head"}function l_(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&hl(v.documentElement),a&2&&hl(v.body),a&4)for(a=v.head,hl(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[os]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),vl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);vl(i)}function bd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bd(a),ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function QA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[os])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function YA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qn(e.nextSibling),e===null))return null;return e}function Rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function KA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Id=null;function u_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function c_(e,i,a){switch(i=gc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ir(e)}var xn=new Map,h_=new Set;function yc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ji=et.d;et.d={f:XA,r:$A,D:ZA,C:JA,L:WA,m:tS,X:nS,S:eS,M:iS};function XA(){var e=ji.f(),i=lc();return e||i}function $A(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?Og(i):ji.r(e)}var Ua=typeof document>"u"?null:document;function f_(e,i,a){var o=Ua;if(o&&typeof i=="string"&&i){var h=ye(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),h_.has(h)||(h_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ge(i,"link",e),ce(i),o.head.appendChild(i)))}}function ZA(e){ji.D(e),f_("dns-prefetch",e,null)}function JA(e,i){ji.C(e,i),f_("preconnect",e,i)}function WA(e,i,a){ji.L(e,i,a);var o=Ua;if(o&&e&&i){var h='link[rel="preload"][as="'+ye(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ye(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ye(a.imageSizes)+'"]')):h+='[href="'+ye(e)+'"]';var f=h;switch(i){case"style":f=La(e);break;case"script":f=za(e)}xn.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),xn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(fl(f))||i==="script"&&o.querySelector(dl(f))||(i=o.createElement("link"),Ge(i,"link",e),ce(i),o.head.appendChild(i)))}}function tS(e,i){ji.m(e,i);var a=Ua;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ye(o)+'"][href="'+ye(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(e)}if(!xn.has(f)&&(e=T({rel:"modulepreload",href:e},i),xn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(f)))return}o=a.createElement("link"),Ge(o,"link",e),ce(o),a.head.appendChild(o)}}}function eS(e,i,a){ji.S(e,i,a);var o=Ua;if(o&&e){var h=en(o).hoistableStyles,f=La(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fl(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=xn.get(f))&&Cd(e,a);var b=v=o.createElement("link");ce(b),Ge(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,_c(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function nS(e,i){ji.X(e,i);var a=Ua;if(a&&e){var o=en(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(dl(h)),f||(e=T({src:e,async:!0},i),(i=xn.get(h))&&Dd(e,i),f=a.createElement("script"),ce(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function iS(e,i){ji.M(e,i);var a=Ua;if(a&&e){var o=en(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(dl(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=xn.get(h))&&Dd(e,i),f=a.createElement("script"),ce(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function d_(e,i,a,o){var h=(h=At.current)?yc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=La(a.href),a=en(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=La(a.href);var f=en(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(fl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xn.set(e,a),f||rS(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(a),a=en(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function La(e){return'href="'+ye(e)+'"'}function fl(e){return'link[rel="stylesheet"]['+e+"]"}function m_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function rS(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ge(i,"link",a),ce(i),e.head.appendChild(i))}function za(e){return'[src="'+ye(e)+'"]'}function dl(e){return"script[async]"+e}function p_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ye(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),Ge(o,"style",h),_c(o,a.precedence,e),i.instance=o;case"stylesheet":h=La(a.href);var f=e.querySelector(fl(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=m_(a),(h=xn.get(h))&&Cd(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ge(f,"link",o),i.state.loading|=4,_c(f,a.precedence,e),i.instance=f;case"script":return f=za(a.src),(h=e.querySelector(dl(f)))?(i.instance=h,ce(h),h):(o=a,(h=xn.get(f))&&(o=T({},a),Dd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Ge(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,_c(o,a.precedence,e));return i.instance}function _c(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Cd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Dd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var vc=null;function g_(e,i,a){if(vc===null){var o=new Map,h=vc=new Map;h.set(a,o)}else h=vc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[os]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function y_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function sS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function __(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ml=null;function aS(){}function oS(e,i,a){if(ml===null)throw Error(s(475));var o=ml;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=La(a.href),f=e.querySelector(fl(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Ec.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=m_(a),(h=xn.get(h))&&Cd(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ge(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Ec.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function lS(){if(ml===null)throw Error(s(475));var e=ml;return e.stylesheets&&e.count===0&&Nd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Nd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Ec(){if(this.count--,this.count===0){if(this.stylesheets)Nd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tc=null;function Nd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tc=new Map,i.forEach(uS,e),Tc=null,Ec.call(e))}function uS(e,i){if(!(i.state.loading&4)){var a=Tc.get(e);if(a)var o=a.get(null);else{a=new Map,Tc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Ec.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var pl={$$typeof:ot,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function cS(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function v_(e,i,a,o,h,f,v,E,b,L,G,K){return e=new cS(e,i,a,v,E,b,L,K),i=1,f===!0&&(i|=24),f=mn(3,null,null,i),e.current=f,f.stateNode=e,i=hf(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},pf(f),e}function E_(e){return e?(e=ga,e):ga}function T_(e,i,a,o,h,f){h=E_(h),o.context===null?o.context=h:o.pendingContext=h,o=ur(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=cr(e,o,i),a!==null&&(vn(a,e,i),Fo(a,e,i))}function A_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Od(e,i){A_(e,i),(e=e.alternate)&&A_(e,i)}function S_(e){if(e.tag===13){var i=pa(e,67108864);i!==null&&vn(i,e,67108864),Od(e,67108864)}}var Ac=!0;function hS(e,i,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=2,Vd(e,i,a,o)}finally{et.p=f,H.T=h}}function fS(e,i,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=8,Vd(e,i,a,o)}finally{et.p=f,H.T=h}}function Vd(e,i,a,o){if(Ac){var h=Md(o);if(h===null)vd(e,i,o,Sc,a),b_(e,o);else if(mS(h,e,i,a,o))o.stopPropagation();else if(b_(e,o),i&4&&-1<dS.indexOf(e)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=kn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Xe(v);E.entanglements[1]|=b,v&=~b}li(f),(Gt&6)===0&&(ac=Sn()+500,ll(0))}}break;case 13:E=pa(f,2),E!==null&&vn(E,f,2),lc(),Od(f,2)}if(f=Md(o),f===null&&vd(e,i,o,Sc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else vd(e,i,o,null,a)}}function Md(e){return e=Rn(e),Pd(e)}var Sc=null;function Pd(e){if(Sc=null,e=Ei(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Sc=e,null}function w_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kh()){case fo:return 2;case Ks:return 8;case ns:case Uh:return 32;case Xs:return 268435456;default:return 32}default:return 32}}var xd=!1,Sr=null,wr=null,br=null,gl=new Map,yl=new Map,Rr=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b_(e,i){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(i.pointerId)}}function _l(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&S_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function mS(e,i,a,o,h){switch(i){case"focusin":return Sr=_l(Sr,e,i,a,o,h),!0;case"dragenter":return wr=_l(wr,e,i,a,o,h),!0;case"mouseover":return br=_l(br,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return gl.set(f,_l(gl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,yl.set(f,_l(yl.get(f)||null,e,i,a,o,h)),!0}return!1}function R_(e){var i=Ei(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,lu(e.priority,function(){if(a.tag===13){var o=_n();o=tr(o);var h=pa(a,o);h!==null&&vn(h,a,o),Od(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Md(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);wi=o,a.target.dispatchEvent(o),wi=null}else return i=Kn(a),i!==null&&S_(i),e.blockedOn=a,!1;i.shift()}return!0}function I_(e,i,a){wc(e)&&a.delete(i)}function pS(){xd=!1,Sr!==null&&wc(Sr)&&(Sr=null),wr!==null&&wc(wr)&&(wr=null),br!==null&&wc(br)&&(br=null),gl.forEach(I_),yl.forEach(I_)}function bc(e,i){e.blockedOn===i&&(e.blockedOn=null,xd||(xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pS)))}var Rc=null;function C_(e){Rc!==e&&(Rc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Rc===e&&(Rc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Pd(o||a)===null)continue;break}var f=Kn(a);f!==null&&(e.splice(i,3),i-=3,Pf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function vl(e){function i(b){return bc(b,e)}Sr!==null&&bc(Sr,e),wr!==null&&bc(wr,e),br!==null&&bc(br,e),gl.forEach(i),yl.forEach(i);for(var a=0;a<Rr.length;a++){var o=Rr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Rr.length&&(a=Rr[0],a.blockedOn===null);)R_(a),a.blockedOn===null&&Rr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[ge]||null;if(typeof f=="function")v||C_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[ge]||null)E=v.formAction;else if(Pd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),C_(a)}}}function kd(e){this._internalRoot=e}Ic.prototype.render=kd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=_n();T_(a,o,e,i,null,null)},Ic.prototype.unmount=kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;T_(e.current,2,null,e,null,null),lc(),i[wn]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var i=er();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Rr.length&&i!==0&&i<Rr[a].priority;a++);Rr.splice(a,0,e),a===0&&R_(e)}};var D_=t.version;if(D_!=="19.1.1")throw Error(s(527,D_,"19.1.1"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var gS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{oe=Cc.inject(gS),Ht=Cc}catch{}}return Tl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Fg,f=Qg,v=Yg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=v_(e,1,!1,null,null,a,o,h,f,v,E,null),e[wn]=i.current,_d(e),new kd(i)},Tl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Fg,v=Qg,E=Yg,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=v_(e,1,!0,i,a??null,o,h,f,v,E,b,L),i.context=E_(null),a=i.current,o=_n(),o=tr(o),h=ur(o),h.callback=null,cr(a,h,o),a=o,i.current.lanes=a,vi(i,a),li(i),e[wn]=i.current,_d(e),new Ic(i)},Tl.version="19.1.1",Tl}var z_;function RS(){if(z_)return zd.exports;z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),zd.exports=bS(),zd.exports}var IS=RS();const CS=()=>{};var B_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},DS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},AE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,w=(c&3)<<4|p>>4;let I=(p&15)<<2|y>>6,q=y&63;g||(q=64,d||(I=64)),s.push(n[T],n[w],n[I],n[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(TE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):DS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||w==null)throw new NS;const I=c<<2|p>>4;if(s.push(I),y!==64){const q=p<<4&240|y>>2;if(s.push(q),w!==64){const F=y<<6&192|w;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class NS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OS=function(r){const t=TE(r);return AE.encodeByteArray(t,!0)},Fc=function(r){return OS(r).replace(/\./g,"")},SE=function(r){try{return AE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=()=>VS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof B_>"u")return;const r=B_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},xS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&SE(r[1]);return t&&JSON.parse(t)},fh=()=>{try{return CS()||MS()||PS()||xS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},wE=r=>fh()?.emulatorHosts?.[r],kS=r=>{const t=wE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},bE=()=>fh()?.config,RE=r=>fh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function IE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Fc(JSON.stringify(n)),Fc(JSON.stringify(d)),""].join(".")}const bl={};function zS(){const r={prod:[],emulator:[]};for(const t of Object.keys(bl))bl[t]?r.emulator.push(t):r.prod.push(t);return r}function BS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let q_=!1;function CE(r,t){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||bl[r]===t||bl[r]||q_)return;bl[r]=t;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=zS().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,q){I.setAttribute("width","24"),I.setAttribute("id",q),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{q_=!0,d()},I}function T(I,q){I.setAttribute("id",q),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=BS(s),q=n("text"),F=document.getElementById(q)||document.createElement("span"),tt=n("learnmore"),Z=document.getElementById(tt)||document.createElement("a"),pt=n("preprendIcon"),lt=document.getElementById(pt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ot=I.element;p(ot),T(Z,tt);const Lt=y();g(lt,pt),ot.append(lt,F,Z,Lt),document.body.appendChild(ot)}c?(F.innerText="Preview backend disconnected.",lt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(lt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function jS(){const r=fh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QS(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function YS(){return!jS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KS(){try{return typeof indexedDB=="object"}catch{return!1}}function XS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="FirebaseError";class Ji extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=$S,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jl.prototype.create)}}class jl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?ZS(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Ji(l,p,s)}}function ZS(r,t){return r.replace(JS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const JS=/\{\$([^}]+)}/g;function WS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function zs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(j_(c)&&j_(d)){if(!zs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function j_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function tw(r,t){const n=new ew(r,t);return n.subscribe.bind(n)}class ew{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");nw(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Hd),l.error===void 0&&(l.error=Hd),l.complete===void 0&&(l.complete=Hd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nw(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new US;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(sw(t))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=ks){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ks){return this.instances.has(t)}getOptions(t=ks){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ks){return this.component?this.component.multipleInstances?t:ks:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rw(r){return r===ks?void 0:r}function sw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new iw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Nt||(Nt={}));const ow={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},lw=Nt.INFO,uw={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},cw=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=uw[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cm{constructor(t){this.name=t,this._logLevel=lw,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ow[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const hw=(r,t)=>t.some(n=>r instanceof n);let H_,G_;function fw(){return H_||(H_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DE=new WeakMap,tm=new WeakMap,NE=new WeakMap,Gd=new WeakMap,Dm=new WeakMap;function mw(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(xr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&DE.set(n,r)}).catch(()=>{}),Dm.set(t,r),t}function pw(r){if(tm.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});tm.set(r,t)}let em={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return tm.get(r);if(t==="objectStoreNames")return r.objectStoreNames||NE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function gw(r){em=r(em)}function yw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Fd(this),t,...n);return NE.set(s,t.sort?t.sort():[t]),xr(s)}:dw().includes(r)?function(...t){return r.apply(Fd(this),t),xr(DE.get(this))}:function(...t){return xr(r.apply(Fd(this),t))}}function _w(r){return typeof r=="function"?yw(r):(r instanceof IDBTransaction&&pw(r),hw(r,fw())?new Proxy(r,em):r)}function xr(r){if(r instanceof IDBRequest)return mw(r);if(Gd.has(r))return Gd.get(r);const t=_w(r);return t!==r&&(Gd.set(r,t),Dm.set(t,r)),t}const Fd=r=>Dm.get(r);function vw(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=xr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(xr(d.result),g.oldVersion,g.newVersion,xr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Ew=["get","getKey","getAll","getAllKeys","count"],Tw=["put","add","delete","clear"],Qd=new Map;function F_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Qd.get(t))return Qd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=Tw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Ew.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Qd.set(t,c),c}gw(r=>({...r,get:(t,n,s)=>F_(t,n)||r.get(t,n,s),has:(t,n)=>!!F_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Sw(r){return r.getComponent()?.type==="VERSION"}const nm="@firebase/app",Q_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Cm("@firebase/app"),ww="@firebase/app-compat",bw="@firebase/analytics-compat",Rw="@firebase/analytics",Iw="@firebase/app-check-compat",Cw="@firebase/app-check",Dw="@firebase/auth",Nw="@firebase/auth-compat",Ow="@firebase/database",Vw="@firebase/data-connect",Mw="@firebase/database-compat",Pw="@firebase/functions",xw="@firebase/functions-compat",kw="@firebase/installations",Uw="@firebase/installations-compat",Lw="@firebase/messaging",zw="@firebase/messaging-compat",Bw="@firebase/performance",qw="@firebase/performance-compat",jw="@firebase/remote-config",Hw="@firebase/remote-config-compat",Gw="@firebase/storage",Fw="@firebase/storage-compat",Qw="@firebase/firestore",Yw="@firebase/ai",Kw="@firebase/firestore-compat",Xw="firebase",$w="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",Zw={[nm]:"fire-core",[ww]:"fire-core-compat",[Rw]:"fire-analytics",[bw]:"fire-analytics-compat",[Cw]:"fire-app-check",[Iw]:"fire-app-check-compat",[Dw]:"fire-auth",[Nw]:"fire-auth-compat",[Ow]:"fire-rtdb",[Vw]:"fire-data-connect",[Mw]:"fire-rtdb-compat",[Pw]:"fire-fn",[xw]:"fire-fn-compat",[kw]:"fire-iid",[Uw]:"fire-iid-compat",[Lw]:"fire-fcm",[zw]:"fire-fcm-compat",[Bw]:"fire-perf",[qw]:"fire-perf-compat",[jw]:"fire-rc",[Hw]:"fire-rc-compat",[Gw]:"fire-gcs",[Fw]:"fire-gcs-compat",[Qw]:"fire-fst",[Kw]:"fire-fst-compat",[Yw]:"fire-vertex","fire-js":"fire-js",[Xw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,Jw=new Map,rm=new Map;function Y_(r,t){try{r.container.addComponent(t)}catch(n){Qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Za(r){const t=r.name;if(rm.has(t))return Qi.debug(`There were multiple attempts to register component ${t}.`),!1;rm.set(t,r);for(const n of Qc.values())Y_(n,r);for(const n of Jw.values())Y_(n,r);return!0}function Nm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new jl("app","Firebase",Ww);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=$w;function OE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:im,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw kr.create("bad-app-name",{appName:String(l)});if(n||(n=bE()),!n)throw kr.create("no-options");const c=Qc.get(l);if(c){if(zs(n,c.options)&&zs(s,c.config))return c;throw kr.create("duplicate-app",{appName:l})}const d=new aw(l);for(const g of rm.values())d.addComponent(g);const p=new t1(n,s,d);return Qc.set(l,p),p}function VE(r=im){const t=Qc.get(r);if(!t&&r===im&&bE())return OE();if(!t)throw kr.create("no-app",{appName:r});return t}function Ur(r,t,n){let s=Zw[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qi.warn(d.join(" "));return}Za(new Bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebase-heartbeat-database",n1=1,Ml="firebase-heartbeat-store";let Yd=null;function ME(){return Yd||(Yd=vw(e1,n1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(r=>{throw kr.create("idb-open",{originalErrorMessage:r.message})})),Yd}async function i1(r){try{const n=(await ME()).transaction(Ml),s=await n.objectStore(Ml).get(PE(r));return await n.done,s}catch(t){if(t instanceof Ji)Qi.warn(t.message);else{const n=kr.create("idb-get",{originalErrorMessage:t?.message});Qi.warn(n.message)}}}async function K_(r,t){try{const s=(await ME()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(t,PE(r)),await s.done}catch(n){if(n instanceof Ji)Qi.warn(n.message);else{const s=kr.create("idb-set",{originalErrorMessage:n?.message});Qi.warn(s.message)}}}function PE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=1024,s1=30;class a1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=X_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>s1){const l=u1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=X_(),{heartbeatsToSend:n,unsentEntries:s}=o1(this._heartbeatsCache.heartbeats),l=Fc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qi.warn(t),""}}}function X_(){return new Date().toISOString().substring(0,10)}function o1(r,t=r1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),$_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),$_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class l1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KS()?XS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function $_(r){return Fc(JSON.stringify({version:2,heartbeats:r})).length}function u1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(r){Za(new Bs("platform-logger",t=>new Aw(t),"PRIVATE")),Za(new Bs("heartbeat",t=>new a1(t),"PRIVATE")),Ur(nm,Q_,r),Ur(nm,Q_,"esm2020"),Ur("fire-js","")}c1("");var h1="firebase",f1="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(h1,f1,"app");function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d1=xE,kE=new jl("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Cm("@firebase/auth");function m1(r,...t){Yc.logLevel<=Nt.WARN&&Yc.warn(`Auth (${so}): ${r}`,...t)}function xc(r,...t){Yc.logLevel<=Nt.ERROR&&Yc.error(`Auth (${so}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(r,...t){throw Om(r,...t)}function ci(r,...t){return Om(r,...t)}function UE(r,t,n){const s={...d1(),[t]:n};return new jl("auth","Firebase",s).create(t,{appName:r.name})}function Lr(r){return UE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Om(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return kE.create(r,...t)}function Tt(r,t,...n){if(!r)throw Om(t,...n)}function Hi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw xc(t),new Error(t)}function Ki(r,t){r||Hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){return typeof self<"u"&&self.location?.href||""}function p1(){return Z_()==="http:"||Z_()==="https:"}function Z_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p1()||GS()||"connection"in navigator)?navigator.onLine:!0}function y1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=qS()||FS()}get(){return g1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E1=new Gl(3e4,6e4);function dh(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ao(r,t,n,s,l={}){return zE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=Hl({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return HS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ro(r.emulatorConfig.host)&&(y.credentials="include"),LE.fetch()(await qE(r,r.config.apiHost,n,p),y)})}async function zE(r,t,n){r._canInitEmulator=!1;const s={..._1,...t};try{const l=new T1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Dc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Dc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Dc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw UE(r,T,y);Yi(r,T)}}catch(l){if(l instanceof Ji)throw l;Yi(r,"network-request-failed",{message:String(l)})}}async function BE(r,t,n,s,l={}){const c=await ao(r,t,n,s,l);return"mfaPendingCredential"in c&&Yi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function qE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?Vm(r.config,l):`${r.config.apiScheme}://${l}`;return v1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class T1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ci(this.auth,"network-request-failed")),E1.get())})}}function Dc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ci(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,t){return ao(r,"POST","/v1/accounts:delete",t)}async function Kc(r,t){return ao(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function S1(r,t=!1){const n=ze(r),s=await n.getIdToken(t),l=Mm(s);Tt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Rl(Kd(l.auth_time)),issuedAtTime:Rl(Kd(l.iat)),expirationTime:Rl(Kd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Kd(r){return Number(r)*1e3}function Mm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const l=SE(n);return l?JSON.parse(l):(xc("Failed to decode base64 JWT payload"),null)}catch(l){return xc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function J_(r){const t=Mm(r);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ji&&w1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function w1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(r){const t=r.auth,n=await r.getIdToken(),s=await Pl(r,Kc(t,{idToken:n}));Tt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?jE(l.providerUserInfo):[],d=I1(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new am(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function R1(r){const t=ze(r);await Xc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function I1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function jE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(r,t){const n=await zE(r,{},async()=>{const s=Hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await qE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&ro(r.emulatorConfig.host)&&(g.credentials="include"),LE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D1(r,t){return ao(r,"POST","/v2/accounts:revokeToken",dh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):J_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const n=J_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await C1(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ya;return s&&(Tt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(Tt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(Tt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r,t){Tt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Hn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new b1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new am(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,t));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return S1(this,t)}reload(){return R1(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Hn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Lr(this.auth));const t=await this.getIdToken();return await Pl(this,A1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:I,isAnonymous:q,providerData:F,stsTokenManager:tt}=n;Tt(w&&tt,t,"internal-error");const Z=Ya.fromJSON(this.name,tt);Tt(typeof w=="string",t,"internal-error"),Cr(s,t.name),Cr(l,t.name),Tt(typeof I=="boolean",t,"internal-error"),Tt(typeof q=="boolean",t,"internal-error"),Cr(c,t.name),Cr(d,t.name),Cr(p,t.name),Cr(g,t.name),Cr(y,t.name),Cr(T,t.name);const pt=new Hn({uid:w,auth:t,email:l,emailVerified:I,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:T});return F&&Array.isArray(F)&&(pt.providerData=F.map(lt=>({...lt}))),g&&(pt._redirectEventId=g),pt}static async _fromIdTokenResponse(t,n,s=!1){const l=new Ya;l.updateFromServerResponse(n);const c=new Hn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Xc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];Tt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?jE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Ya;p.updateFromIdToken(s);const g=new Hn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new am(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function Gi(r){Ki(r instanceof Function,"Expected a class definition");let t=W_.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,W_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}HE.type="NONE";const tv=HE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(r,t,n){return`firebase:${r}:${t}:${n}`}class Ka{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=kc(this.userKey,l.apiKey,c),this.fullPersistenceKey=kc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Kc(this.auth,{idToken:t}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,t):null}return Hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ka(Gi(tv),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Gi(tv);const d=kc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let w;if(typeof T=="string"){const I=await Kc(t,{idToken:T}).catch(()=>{});if(!I)break;w=await Hn._fromGetAccountInfoResponse(t,I,T)}else w=Hn._fromJSON(t,T);y!==c&&(p=w),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ka(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ka(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(YE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(GE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(XE(t))return"Blackberry";if($E(t))return"Webos";if(FE(t))return"Safari";if((t.includes("chrome/")||QE(t))&&!t.includes("edge/"))return"Chrome";if(KE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function GE(r=tn()){return/firefox\//i.test(r)}function FE(r=tn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QE(r=tn()){return/crios\//i.test(r)}function YE(r=tn()){return/iemobile/i.test(r)}function KE(r=tn()){return/android/i.test(r)}function XE(r=tn()){return/blackberry/i.test(r)}function $E(r=tn()){return/webos/i.test(r)}function Pm(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function N1(r=tn()){return Pm(r)&&!!window.navigator?.standalone}function O1(){return QS()&&document.documentMode===10}function ZE(r=tn()){return Pm(r)||KE(r)||$E(r)||XE(r)||/windows phone/i.test(r)||YE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(r,t=[]){let n;switch(r){case"Browser":n=ev(tn());break;case"Worker":n=`${ev(tn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(r,t={}){return ao(r,"GET","/v2/passwordPolicy",dh(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=6;class x1{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??P1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new V1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ka.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Kc(this,{idToken:t}),s=await Hn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Xc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=y1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(Lr(this));const n=t?ze(t):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await M1(this),n=new x1(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new jl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await D1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Gi(t)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&m1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function mh(r){return ze(r)}class nv{constructor(t){this.auth=t,this.observer=null,this.addObserver=tw(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U1(r){xm=r}function L1(r){return xm.loadJS(r)}function z1(){return xm.gapiScript}function B1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r,t){const n=Nm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(zs(c,t??{}))return l;Yi(l,"already-initialized")}return n.initialize({options:t})}function j1(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Gi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function H1(r,t,n){const s=mh(r);Tt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=WE(t),{host:d,port:p}=G1(t),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(zs(y,s.config.emulator)&&zs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,ro(d)?(IE(`${c}//${d}${g}`),CE("Auth",!0)):F1()}function WE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function G1(r){const t=WE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:iv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:iv(d)}}}function iv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function F1(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,n){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,t){return BE(r,"POST","/v1/accounts:signInWithIdp",dh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="http://localhost";class qs extends tT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Yi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new qs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Xa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Xa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Xa(t,n)}buildRequest(){const t={requestUri:Q1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Hl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends eT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Fl{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Fl{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Or.credential(t.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Fl{constructor(){super("twitter.com")}static credential(t,n){return qs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Vr.credential(n,s)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,t){return BE(r,"POST","/v1/accounts:signUp",dh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Hn._fromIdTokenResponse(t,s,l),d=rv(s);return new jr({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=rv(s);return new jr({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function rv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r){if(jn(r.app))return Promise.reject(Lr(r));const t=mh(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new jr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Y1(t,{returnSecureToken:!0}),s=await jr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ji{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new $c(t,n,s,l)}}function nT(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(r,c,t,s):c})}async function X1(r,t,n=!1){const s=await Pl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return jr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(r,t,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(Lr(s));const l="reauthenticate";try{const c=await Pl(r,nT(s,l,t,r),n);Tt(c.idToken,s,"internal-error");const d=Mm(c.idToken);Tt(d,s,"internal-error");const{sub:p}=d;return Tt(r.uid===p,s,"user-mismatch"),jr._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(r,t,n=!1){if(jn(r.app))return Promise.reject(Lr(r));const s="signIn",l=await nT(r,s,t),c=await jr._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function J1(r,t,n,s){return ze(r).onIdTokenChanged(t,n,s)}function W1(r,t,n){return ze(r).beforeAuthStateChanged(t,n)}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=1e3,eb=10;class rT extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);O1()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,eb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},tb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}rT.type="LOCAL";const nb=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}sT.type="SESSION";const aT=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ph(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await ib(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=km("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(w){const I=w;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function sb(r){hi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function ab(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ob(){return navigator?.serviceWorker?.controller||null}function lb(){return oT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebaseLocalStorageDb",ub=1,Jc="firebaseLocalStorage",uT="fbase_key";class Ql{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(r,t){return r.transaction([Jc],t?"readwrite":"readonly").objectStore(Jc)}function cb(){const r=indexedDB.deleteDatabase(lT);return new Ql(r).toPromise()}function om(){const r=indexedDB.open(lT,ub);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Jc,{keyPath:uT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Jc)?t(s):(s.close(),await cb(),t(await om()))})})}async function sv(r,t,n){const s=gh(r,!0).put({[uT]:t,value:n});return new Ql(s).toPromise()}async function hb(r,t){const n=gh(r,!1).get(t),s=await new Ql(n).toPromise();return s===void 0?null:s.value}function av(r,t){const n=gh(r,!0).delete(t);return new Ql(n).toPromise()}const fb=800,db=3;class cT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>db)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(lb()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ab(),!this.activeServiceWorker)return;this.sender=new rb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ob()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await om();return await sv(t,Zc,"1"),await av(t,Zc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>sv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>hb(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>av(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=gh(l,!1).getAll();return new Ql(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cT.type="LOCAL";const mb=cT;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r,t){return t?Gi(t):(Tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends tT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Xa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Xa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function gb(r){return Z1(r.auth,new Um(r),r.bypassAuthState)}function yb(r){const{auth:t,user:n}=r;return Tt(n,t,"internal-error"),$1(n,new Um(r),r.bypassAuthState)}async function _b(r){const{auth:t,user:n}=r;return Tt(n,t,"internal-error"),X1(n,new Um(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gb;case"linkViaPopup":case"linkViaRedirect":return _b;case"reauthViaPopup":case"reauthViaRedirect":return yb;default:Yi(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Gl(2e3,1e4);class Ga extends hT{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,vb.get())};t()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="pendingRedirect",Uc=new Map;class Tb extends hT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Uc.get(this.auth._key());if(!t){try{const s=await Ab(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Uc.set(this.auth._key(),t)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ab(r,t){const n=bb(t),s=wb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Sb(r,t){Uc.set(r._key(),t)}function wb(r){return Gi(r._redirectPersistence)}function bb(r){return kc(Eb,r.config.apiKey,r.name)}async function Rb(r,t,n=!1){if(jn(r.app))return Promise.reject(Lr(r));const s=mh(r),l=pb(s,t),d=await new Tb(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=600*1e3;class Cb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Db(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!fT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ci(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ib&&this.cachedEventUids.clear(),this.cachedEventUids.has(ov(t))}saveEventToCache(t){this.cachedEventUids.add(ov(t)),this.lastProcessedEventTime=Date.now()}}function ov(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function fT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Db(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(r,t={}){return ao(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vb=/^https?/;async function Mb(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Nb(r);for(const n of t)try{if(Pb(n))return}catch{}Yi(r,"unauthorized-domain")}function Pb(r){const t=sm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Vb.test(n))return!1;if(Ob.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Gl(3e4,6e4);function lv(){const r=hi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function kb(r){return new Promise((t,n)=>{function s(){lv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lv(),n(ci(r,"network-request-failed"))},timeout:xb.get()})}if(hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(hi().gapi?.load)s();else{const l=B1("iframefcb");return hi()[l]=()=>{gapi.load?s():n(ci(r,"network-request-failed"))},L1(`${z1()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Lc=null,t})}let Lc=null;function Ub(r){return Lc=Lc||kb(r),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Gl(5e3,15e3),zb="__/auth/iframe",Bb="emulator/auth/iframe",qb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hb(r){const t=r.config;Tt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Vm(t,Bb):`https://${r.config.authDomain}/${zb}`,s={apiKey:t.apiKey,appName:r.name,v:so},l=jb.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Hl(s).slice(1)}`}async function Gb(r){const t=await Ub(r),n=hi().gapi;return Tt(n,r,"internal-error"),t.open({where:document.body,url:Hb(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qb,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=ci(r,"network-request-failed"),p=hi().setTimeout(()=>{c(d)},Lb.get());function g(){hi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qb=500,Yb=600,Kb="_blank",Xb="http://localhost";class uv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $b(r,t,n,s=Qb,l=Yb){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Fb,width:s.toString(),height:l.toString(),top:c,left:d},y=tn().toLowerCase();n&&(p=QE(y)?Kb:n),GE(y)&&(t=t||Xb,g.scrollbars="yes");const T=Object.entries(g).reduce((I,[q,F])=>`${I}${q}=${F},`,"");if(N1(y)&&p!=="_self")return Zb(t||"",p),new uv(null);const w=window.open(t||"",p,T);Tt(w,r,"popup-blocked");try{w.focus()}catch{}return new uv(w)}function Zb(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__/auth/handler",Wb="emulator/auth/handler",tR=encodeURIComponent("fac");async function cv(r,t,n,s,l,c){Tt(r.config.authDomain,r,"auth-domain-config-required"),Tt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:so,eventId:l};if(t instanceof eT){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",WS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))d[T]=w}if(t instanceof Fl){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${tR}=${encodeURIComponent(g)}`:"";return`${eR(r)}?${Hl(p).slice(1)}${y}`}function eR({config:r}){return r.emulator?Vm(r,Wb):`https://${r.authDomain}/${Jb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class nR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=Rb,this._overrideRedirectResult=Sb}async _openPopup(t,n,s,l){Ki(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await cv(t,n,s,sm(),l);return $b(t,c,km())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await cv(t,n,s,sm(),l);return sb(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ki(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Gb(t),s=new Cb(t);return n.register("authEvent",l=>(Tt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Xd,{type:Xd},l=>{const c=l?.[0]?.[Xd];c!==void 0&&n(!!c),Yi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mb(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZE()||FE()||Pm()}}const iR=nR;var hv="@firebase/auth",fv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aR(r){Za(new Bs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;Tt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(r)},y=new k1(s,l,c,g);return j1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Za(new Bs("auth-internal",t=>{const n=mh(t.getProvider("auth").getImmediate());return(s=>new rR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(hv,fv,sR(r)),Ur(hv,fv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=300,lR=RE("authIdTokenMaxAge")||oR;let dv=null;const uR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lR)return;const l=n?.token;dv!==l&&(dv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function cR(r=VE()){const t=Nm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=q1(r,{popupRedirectResolver:iR,persistence:[mb,nb,aT]}),s=RE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=uR(c.toString());W1(n,d,()=>d(n.currentUser)),J1(n,p=>d(p))}}const l=wE("auth");return l&&H1(n,`http://${l}`),n}function hR(){return document.getElementsByTagName("head")?.[0]??document}U1({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ci("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",hR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aR("Browser");var mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,dT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,S){function R(){}R.prototype=S.prototype,D.D=S.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(V,M,P){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return S.prototype[M].apply(V,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,S,R){R||(R=0);var V=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)V[M]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(M=0;16>M;++M)V[M]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=D.g[0],R=D.g[1],M=D.g[2];var P=D.g[3],C=S+(P^R&(M^P))+V[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=P+(M^S&(R^M))+V[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(R^P&(S^R))+V[2]+606105819&4294967295,M=P+(C<<17&4294967295|C>>>15),C=R+(S^M&(P^S))+V[3]+3250441966&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(P^R&(M^P))+V[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(M^S&(R^M))+V[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(R^P&(S^R))+V[6]+2821735955&4294967295,M=P+(C<<17&4294967295|C>>>15),C=R+(S^M&(P^S))+V[7]+4249261313&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(P^R&(M^P))+V[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(M^S&(R^M))+V[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(R^P&(S^R))+V[10]+4294925233&4294967295,M=P+(C<<17&4294967295|C>>>15),C=R+(S^M&(P^S))+V[11]+2304563134&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(P^R&(M^P))+V[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(M^S&(R^M))+V[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(R^P&(S^R))+V[14]+2792965006&4294967295,M=P+(C<<17&4294967295|C>>>15),C=R+(S^M&(P^S))+V[15]+1236535329&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(M^P&(R^M))+V[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^M&(S^R))+V[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(P^S))+V[11]+643717713&4294967295,M=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(M^P))+V[0]+3921069994&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(R^M))+V[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^M&(S^R))+V[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(P^S))+V[15]+3634488961&4294967295,M=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(M^P))+V[4]+3889429448&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(R^M))+V[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^M&(S^R))+V[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(P^S))+V[3]+4107603335&4294967295,M=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(M^P))+V[8]+1163531501&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(R^M))+V[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^M&(S^R))+V[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(P^S))+V[7]+1735328473&4294967295,M=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(M^P))+V[12]+2368359562&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(R^M^P)+V[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^M)+V[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^R)+V[11]+1839030562&4294967295,M=P+(C<<16&4294967295|C>>>16),C=R+(M^P^S)+V[14]+4259657740&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^P)+V[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^M)+V[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^R)+V[7]+4139469664&4294967295,M=P+(C<<16&4294967295|C>>>16),C=R+(M^P^S)+V[10]+3200236656&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^P)+V[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^M)+V[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^R)+V[3]+3572445317&4294967295,M=P+(C<<16&4294967295|C>>>16),C=R+(M^P^S)+V[6]+76029189&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^P)+V[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^M)+V[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^R)+V[15]+530742520&4294967295,M=P+(C<<16&4294967295|C>>>16),C=R+(M^P^S)+V[2]+3299628645&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(M^(R|~P))+V[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~M))+V[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~R))+V[14]+2878612391&4294967295,M=P+(C<<15&4294967295|C>>>17),C=R+(P^(M|~S))+V[5]+4237533241&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~P))+V[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~M))+V[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~R))+V[10]+4293915773&4294967295,M=P+(C<<15&4294967295|C>>>17),C=R+(P^(M|~S))+V[1]+2240044497&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~P))+V[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~M))+V[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~R))+V[6]+2734768916&4294967295,M=P+(C<<15&4294967295|C>>>17),C=R+(P^(M|~S))+V[13]+1309151649&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~P))+V[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~M))+V[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~R))+V[2]+718787259&4294967295,M=P+(C<<15&4294967295|C>>>17),C=R+(P^(M|~S))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+P&4294967295}s.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var R=S-this.blockSize,V=this.B,M=this.h,P=0;P<S;){if(M==0)for(;P<=R;)l(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<S;)if(V[M++]=D.charCodeAt(P++),M==this.blockSize){l(this,V),M=0;break}}else for(;P<S;)if(V[M++]=D[P++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var R=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=R&255,R/=256;for(this.u(D),D=Array(16),S=R=0;4>S;++S)for(var V=0;32>V;V+=8)D[R++]=this.g[S]>>>V&255;return D};function c(D,S){var R=p;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=S(D)}function d(D,S){this.h=S;for(var R=[],V=!0,M=D.length-1;0<=M;M--){var P=D[M]|0;V&&P==S||(R[M]=P,V=!1)}this.g=R}var p={};function g(D){return-128<=D&&128>D?c(D,function(S){return new d([S|0],0>S?-1:0)}):new d([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return Z(y(-D));for(var S=[],R=1,V=0;D>=R;V++)S[V]=D/R|0,R*=4294967296;return new d(S,0)}function T(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return Z(T(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),V=w,M=0;M<D.length;M+=8){var P=Math.min(8,D.length-M),C=parseInt(D.substring(M,M+P),S);8>P?(P=y(Math.pow(S,P)),V=V.j(P).add(y(C))):(V=V.j(R),V=V.add(y(C)))}return V}var w=g(0),I=g(1),q=g(16777216);r=d.prototype,r.m=function(){if(tt(this))return-Z(this).m();for(var D=0,S=1,R=0;R<this.g.length;R++){var V=this.i(R);D+=(0<=V?V:4294967296+V)*S,S*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(tt(this))return"-"+Z(this).toString(D);for(var S=y(Math.pow(D,6)),R=this,V="";;){var M=Lt(R,S).g;R=pt(R,M.j(S));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=M,F(R))return P+V;for(;6>P.length;)P="0"+P;V=P+V}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function tt(D){return D.h==-1}r.l=function(D){return D=pt(this,D),tt(D)?-1:F(D)?0:1};function Z(D){for(var S=D.g.length,R=[],V=0;V<S;V++)R[V]=~D.g[V];return new d(R,~D.h).add(I)}r.abs=function(){return tt(this)?Z(this):this},r.add=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],V=0,M=0;M<=S;M++){var P=V+(this.i(M)&65535)+(D.i(M)&65535),C=(P>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);V=C>>>16,P&=65535,C&=65535,R[M]=C<<16|P}return new d(R,R[R.length-1]&-2147483648?-1:0)};function pt(D,S){return D.add(Z(S))}r.j=function(D){if(F(this)||F(D))return w;if(tt(this))return tt(D)?Z(this).j(Z(D)):Z(Z(this).j(D));if(tt(D))return Z(this.j(Z(D)));if(0>this.l(q)&&0>D.l(q))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,R=[],V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<D.g.length;M++){var P=this.i(V)>>>16,C=this.i(V)&65535,pe=D.i(M)>>>16,ae=D.i(M)&65535;R[2*V+2*M]+=C*ae,lt(R,2*V+2*M),R[2*V+2*M+1]+=P*ae,lt(R,2*V+2*M+1),R[2*V+2*M+1]+=C*pe,lt(R,2*V+2*M+1),R[2*V+2*M+2]+=P*pe,lt(R,2*V+2*M+2)}for(V=0;V<S;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=S;V<2*S;V++)R[V]=0;return new d(R,0)};function lt(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function ot(D,S){this.g=D,this.h=S}function Lt(D,S){if(F(S))throw Error("division by zero");if(F(D))return new ot(w,w);if(tt(D))return S=Lt(Z(D),S),new ot(Z(S.g),Z(S.h));if(tt(S))return S=Lt(D,Z(S)),new ot(Z(S.g),S.h);if(30<D.g.length){if(tt(D)||tt(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,V=S;0>=V.l(D);)R=vt(R),V=vt(V);var M=gt(R,1),P=gt(V,1);for(V=gt(V,2),R=gt(R,2);!F(V);){var C=P.add(V);0>=C.l(D)&&(M=M.add(R),P=C),V=gt(V,1),R=gt(R,1)}return S=pt(D,M.j(S)),new ot(M,S)}for(M=w;0<=D.l(S);){for(R=Math.max(1,Math.floor(D.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),P=y(R),C=P.j(S);tt(C)||0<C.l(D);)R-=V,P=y(R),C=P.j(S);F(P)&&(P=I),M=M.add(P),D=pt(D,C)}return new ot(M,D)}r.A=function(D){return Lt(this,D).h},r.and=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)&D.i(V);return new d(R,this.h&D.h)},r.or=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)|D.i(V);return new d(R,this.h|D.h)},r.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)^D.i(V);return new d(R,this.h^D.h)};function vt(D){for(var S=D.g.length+1,R=[],V=0;V<S;V++)R[V]=D.i(V)<<1|D.i(V-1)>>>31;return new d(R,D.h)}function gt(D,S){var R=S>>5;S%=32;for(var V=D.g.length-R,M=[],P=0;P<V;P++)M[P]=0<S?D.i(P+R)>>>S|D.i(P+R+1)<<32-S:D.i(P+R);return new d(M,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,dT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,zr=d}).apply(typeof mv<"u"?mv:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,Al,pT,zc,lm,gT,yT,_T;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var k=u[A];if(!(k in _))break t;_=_[k]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,k={next:function(){if(!A&&_<u.length){var j=_++;return{value:m(j,u[j]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function w(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,I.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function F(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,k,j){for(var W=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)W[Mt-2]=arguments[Mt];return m.prototype[k].apply(A,W)}}function tt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function Z(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const k=u.length||0,j=A.length||0;u.length=k+j;for(let W=0;W<j;W++)u[k+W]=A[W]}else u.push(A)}}class pt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function lt(u){return/^[\s\xa0]*$/.test(u)}function ot(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function Lt(u){return Lt[" "](u),u}Lt[" "]=function(){};var vt=ot().indexOf("Gecko")!=-1&&!(ot().toLowerCase().indexOf("webkit")!=-1&&ot().indexOf("Edge")==-1)&&!(ot().indexOf("Trident")!=-1||ot().indexOf("MSIE")!=-1)&&ot().indexOf("Edge")==-1;function gt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let _,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(_ in A)u[_]=A[_];for(let j=0;j<R.length;j++)_=R[j],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){p.setTimeout(()=>{throw u},0)}function C(){var u=Bt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class pe{constructor(){this.h=this.g=null}add(m,_){const A=ae.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new pt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ht=!1,Bt=new pe,N=()=>{const u=p.Promise.resolve(void 0);et=()=>{u.then($)}};var $=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){P(_)}var m=ae;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ht=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ft=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Rt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(vt){t:{try{Lt(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:At[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rt.aa.h.call(this)}}F(Rt,J);var At={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Qn(u,m,_,A,k){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=k,this.key=++Wt,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yi(u){this.src=u,this.g={},this.h=0}yi.prototype.add=function(u,m,_,A,k){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var W=ts(u,m,A,k);return-1<W?(m=u[W],_||(m.fa=!1)):(m=new Qn(m,this.src,j,!!A,k),m.fa=_,u.push(m)),m};function Wr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],k=Array.prototype.indexOf.call(A,m,void 0),j;(j=0<=k)&&Array.prototype.splice.call(A,k,1),j&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ts(u,m,_,A){for(var k=0;k<u.length;++k){var j=u[k];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==A)return k}return-1}var es="closure_lm_"+(1e6*Math.random()|0),ho={};function su(u,m,_,A,k){if(Array.isArray(m)){for(var j=0;j<m.length;j++)su(u,m[j],_,A,k);return null}return _=au(_),u&&u[De]?u.K(m,_,y(A)?!!A.capture:!1,k):Sn(u,m,_,!1,A,k)}function Sn(u,m,_,A,k,j){if(!m)throw Error("Invalid event type");var W=y(k)?!!k.capture:!!k,Mt=Xs(u);if(Mt||(u[es]=Mt=new yi(u)),_=Mt.add(m,_,A,W,j),_.proxy)return _;if(A=kh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)ft||(k=W),k===void 0&&(k=!1),u.addEventListener(m.toString(),A,k);else if(u.attachEvent)u.attachEvent(ns(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function kh(){function u(_){return m.call(u.src,u.listener,_)}const m=Uh;return u}function fo(u,m,_,A,k){if(Array.isArray(m))for(var j=0;j<m.length;j++)fo(u,m[j],_,A,k);else A=y(A)?!!A.capture:!!A,_=au(_),u&&u[De]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],_=ts(j,_,A,k),-1<_&&(Wi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ts(m,_,A,k)),(_=-1<u?m[u]:null)&&Ks(_))}function Ks(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])Wr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(ns(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Xs(m))?(Wr(_,u),_.h==0&&(_.src=null,m[es]=null)):Wi(u)}}}function ns(u){return u in ho?ho[u]:ho[u]="on"+u}function Uh(u,m){if(u.da)u=!0;else{m=new Rt(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Ks(u),u=_.call(A,m)}return u}function Xs(u){return u=u[es],u instanceof yi?u:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function au(u){return typeof u=="function"?u:(u[mo]||(u[mo]=function(m){return u.handleEvent(m)}),u[mo])}function oe(){nt.call(this),this.i=new yi(this),this.M=this,this.F=null}F(oe,nt),oe.prototype[De]=!0,oe.prototype.removeEventListener=function(u,m,_,A){fo(this,u,m,_,A)};function Ht(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var k=m;m=new J(A,u),V(m,k)}if(k=!0,_)for(var j=_.length-1;0<=j;j--){var W=m.g=_[j];k=hn(W,A,!0,m)&&k}if(W=m.g=u,k=hn(W,A,!0,m)&&k,k=hn(W,A,!1,m)&&k,_)for(j=0;j<_.length;j++)W=m.g=_[j],k=hn(W,A,!1,m)&&k}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Wi(_[A]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},oe.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function hn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,j=0;j<m.length;++j){var W=m[j];if(W&&!W.da&&W.capture==_){var Mt=W.listener,we=W.ha||W.src;W.fa&&Wr(u.i,W),k=Mt.call(we,A)!==!1&&k}}return k&&!A.defaultPrevented}function Xe(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function ou(u){u.g=Xe(()=>{u.g=null,u.i&&(u.i=!1,ou(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Lh extends nt{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){nt.call(this),this.h=u,this.g={}}F(is,nt);var rs=[];function ss(u){gt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ks(m)},u),u.g={}}is.prototype.N=function(){is.aa.N.call(this),ss(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=p.JSON.stringify,$s=p.JSON.parse,as=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function po(){}po.prototype.h=null;function go(u){return u.h||(u.h=u.i())}function yo(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){J.call(this,"d")}F(vi,J);function _o(){J.call(this,"c")}F(_o,J);var Yn={},vo=null;function tr(){return vo=vo||new oe}Yn.La="serverreachability";function Zs(u){J.call(this,Yn.La,u)}F(Zs,J);function er(u){const m=tr();Ht(m,new Zs(m))}Yn.STAT_EVENT="statevent";function lu(u,m){J.call(this,Yn.STAT_EVENT,u),this.stat=m}F(lu,J);function ne(u){const m=tr();Ht(m,new lu(m,u))}Yn.Ma="timingevent";function Se(u,m){J.call(this,Yn.Ma,u),this.size=m}F(Se,J);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Eo(u,m,_,A,k,j){u.info(function(){if(u.g)if(j)for(var W="",Mt=j.split("&"),we=0;we<Mt.length;we++){var Pt=Mt[we].split("=");if(1<Pt.length){var Oe=Pt[0];Pt=Pt[1];var be=Oe.split("_");W=2<=be.length&&be[1]=="type"?W+(Oe+"="+Pt+"&"):W+(Oe+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+m+`
`+_+`
`+W})}function zh(u,m,_,A,k,j,W){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+m+`
`+_+`
`+j+" "+W})}function nr(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+os(u,_)+(A?" "+A:"")})}function uu(u,m){u.info(function(){return"TIMEOUT: "+m})}wn.prototype.info=function(){};function os(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return kn(_)}catch{return m}}var ir={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Xn(){}F(Xn,po),Xn.prototype.g=function(){return new XMLHttpRequest},Xn.prototype.i=function(){return{}},Kn=new Xn;function en(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var To={},Js={};function Un(u,m,_){u.L=1,u.v=fs(fn(m)),u.m=_,u.P=!0,Ti(u,null)}function Ti(u,m){u.F=Date.now(),ls(u),u.A=fn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Io(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=bu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Lh(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(rs[0]=k.toString()),k=rs);for(var j=0;j<k.length;j++){var W=su(_,k[j],A||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),er(),Eo(u.i,u.u,u.A,u.l,u.R,u.m)}en.prototype.ca=function(u){u=u.target;const m=this.M;m&&Cn(u)==3?m.j():this.Y(u)},en.prototype.Y=function(u){try{if(u==this.g)t:{const be=Cn(this.g);var m=this.g.Ba();const Di=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||be!=4||m==7||(m==8||0>=Di?er(3):er(2)),rr(this);var _=this.g.Z();this.X=_;e:if(cu(this)){var A=yu(this.g);u="";var k=A.length,j=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),$n(this);var W="";break e}this.h.i=new p.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(j&&m==k-1)});A.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=_==200,zh(this.i,this.u,this.A,this.l,this.R,be,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Mt,we=this.g;if((Mt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(Mt)){var Pt=Mt;break e}}Pt=null}if(_=Pt)nr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,us(this,_);else{this.o=!1,this.s=3,ne(12),Be(this),$n(this);break t}}if(this.P){_=!0;let qe;for(;!this.J&&this.C<W.length;)if(qe=hu(this,W),qe==Js){be==4&&(this.s=4,ne(14),_=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==To){this.s=4,ne(15),nr(this.i,this.l,W,"[Invalid Chunk]"),_=!1;break}else nr(this.i,this.l,qe,null),us(this,qe);if(cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||W.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)nr(this.i,this.l,W,"[Invalid Chunked Response]"),Be(this),$n(this);else if(0<W.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Es(Oe),Oe.M=!0,ne(11))}}else nr(this.i,this.l,W,null),us(this,W);be==4&&Be(this),this.o&&!this.J&&(be==4?Au(this.j,this):(this.o=!1,ls(this)))}else Gh(this.g),_==400&&0<W.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Be(this),$n(this)}}}catch{}finally{}};function cu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function hu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Js:(_=Number(m.substring(_,A)),isNaN(_)?To:(A+=1,A+_>m.length?Js:(m=m.slice(A,A+_),u.C=A+_,m)))}en.prototype.cancel=function(){this.J=!0,Be(this)};function ls(u){u.S=Date.now()+u.I,fu(u,u.I)}function fu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(I(u.ba,u),m)}function rr(u){u.B&&(p.clearTimeout(u.B),u.B=null)}en.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(uu(this.i,this.A),this.L!=2&&(er(),ne(17)),Be(this),this.s=2,$n(this)):fu(this,this.S-u)};function $n(u){u.j.G==0||u.J||Au(u.j,u)}function Be(u){rr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ss(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function us(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Ao(_.h,u))){if(!u.K&&Ao(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ca(_),la(_);else break t;Vo(_),ne(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&_.v==0&&!_.C&&(_.C=ge(I(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ci(_,11)}else if((u.K||_.g==u)&&ca(_),!lt(m))for(k=_.Da.g.parse(m),m=0;m<k.length;m++){let Pt=k[m];if(_.T=Pt[0],Pt=Pt[1],_.G==2)if(Pt[0]=="c"){_.K=Pt[1],_.ia=Pt[2];const Oe=Pt[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const be=Pt[4];be!=null&&(_.Aa=be,_.j.info("SVER="+_.Aa));const Di=Pt[5];Di!=null&&typeof Di=="number"&&0<Di&&(A=1.5*Di,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const qe=u.g;if(qe){const ii=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var j=A.h;j.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ea(j,j.h),j.h=null))}if(A.D){const Po=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(A.ya=Po,Yt(A.I,A.D,Po))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var W=u;if(A.qa=wu(A,A.J?A.ia:null,A.W),W.K){nn(A.h,W);var Mt=W,we=A.L;we&&(Mt.I=we),Mt.B&&(rr(Mt),ls(Mt)),A.g=W}else Eu(A);0<_.i.length&&ua(_)}else Pt[0]!="stop"&&Pt[0]!="close"||Ci(_,7);else _.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Ci(_,7):No(_):Pt[0]!="noop"&&_.l&&_.l.ta(Pt),_.v=0)}}er(4)}catch{}}var du=class{constructor(u,m){this.g=u,this.map=m}};function Ai(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ws(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function nn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ai.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function So(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return tt(u.i)}function Bh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function wo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=na(u),A=Bh(u),k=A.length,j=0;j<k;j++)m.call(void 0,A[j],_&&_[j],u)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),k=null;if(0<=A){var j=u[_].substring(0,A);k=u[_].substring(A+1)}else j=u[_];m(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ye(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ye){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,sr(this,u.s),this.l=u.l;var m=u.i,_=new wi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Si(this,_),this.m=u.m}else u&&(m=String(u).match(cs))?(this.h=!1,hs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),sr(this,m[4]),this.l=bn(m[5]||"",!0),Si(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}ye.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ds(m,bo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ds(m,bo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ds(_,_.charAt(0)=="/"?jh:Ro,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ds(_,ia)),u.join("")};function fn(u){return new ye(u)}function hs(u,m,_){u.j=_?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function sr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Si(u,m,_){m instanceof wi?(u.i=m,pu(u.i,u.h)):(_||(m=ds(m,Hh)),u.i=new wi(m,u.h))}function Yt(u,m,_){u.i.set(m,_)}function fs(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ds(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,mu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bo=/[#\/\?@]/g,Ro=/[#\?:]/g,jh=/[#\?]/g,Hh=/[#\?@]/g,ia=/#/g;function wi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rn(u){u.g||(u.g=new Map,u.h=0,u.i&&qh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=wi.prototype,r.add=function(u,m){Rn(this),this.i=null,u=Zn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function bi(u,m){Rn(u),m=Zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ri(u,m){return Rn(u),m=Zn(u,m),u.g.has(m)}r.forEach=function(u,m){Rn(this),this.g.forEach(function(_,A){_.forEach(function(k){u.call(m,k,A,this)},this)},this)},r.na=function(){Rn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const k=u[A];for(let j=0;j<k.length;j++)_.push(m[A])}return _},r.V=function(u){Rn(this);let m=[];if(typeof u=="string")Ri(this,u)&&(m=m.concat(this.g.get(Zn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Rn(this),this.i=null,u=Zn(this,u),Ri(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Io(u,m,_){bi(u,m),0<_.length&&(u.i=null,u.g.set(Zn(u,m),tt(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const j=encodeURIComponent(String(A)),W=this.V(A);for(A=0;A<W.length;A++){var k=j;W[A]!==""&&(k+="="+encodeURIComponent(String(W[A]))),u.push(k)}}return this.i=u.join("&")};function Zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function pu(u,m){m&&!u.j&&(Rn(u),u.i=null,u.g.forEach(function(_,A){var k=A.toLowerCase();A!=k&&(bi(this,A),Io(this,k,_))},u)),u.j=m}function ms(u,m){const _=new wn;if(p.Image){const A=new Image;A.onload=q(In,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(In,_,"TestLoadImage: error",!1,m,A),A.onabort=q(In,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(In,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Ln(u,m){const _=new wn,A=new AbortController,k=setTimeout(()=>{A.abort(),In(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(j=>{clearTimeout(k),j.ok?In(_,"TestPingServer: ok",!0,m):In(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),In(_,"TestPingServer: error",!1,m)})}function In(u,m,_,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(_)}catch{}}function ps(){this.g=new as}function Jn(u,m,_){const A=_||"";try{wo(u,function(k,j){let W=k;y(k)&&(W=kn(k)),m.push(A+j+"="+encodeURIComponent(W))})}catch(k){throw m.push(A+"type="+encodeURIComponent("_badmap")),k}}function ar(u){this.l=u.Ub||null,this.j=u.eb||!1}F(ar,po),ar.prototype.g=function(){return new Ii(this.l,this.j)},ar.prototype.i=(function(u){return function(){return u}})({});function Ii(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Ii,oe),r=Ii.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ti(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Co(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Co(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):ti(this),this.readyState==3&&Co(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},r.Qa=function(u){this.g&&(this.response=u,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ti(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ti(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Do(u){let m="";return gt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Ne(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Do(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Yt(u,m,_))}function jt(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(jt,oe);var ra=/^https?$/i,gs=["POST","PUT"];r=jt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?go(this.o):go(Kn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){gu(this,j);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)_.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const j of A.keys())_.set(j,A.get(j));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),k=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(gs,m,void 0))||A||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of _)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){gu(this,j)}};function gu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,sa(u),ei(u)}function sa(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),jt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},r.bb=function(){aa(this)};function aa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Xe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const W=u.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=W===0){var k=String(u.D).match(cs)[1]||null;!k&&p.self&&p.self.location&&(k=p.self.location.protocol.slice(0,-1)),A=!ra.test(k?k.toLowerCase():"")}_=A}if(_)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<Cn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",sa(u)}}finally{ei(u)}}}}function ei(u,m){if(u.g){ys(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{_.onreadystatechange=A}catch{}}}function ys(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),$s(m)}};function yu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Gh(u){const m={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(lt(u[A]))continue;var _=M(u[A]);const k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[k]||[];m[k]=j,j.push(_)}D(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function oa(u){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,u),this.cb=_s("retryDelaySeedMs",1e4,u),this.Wa=_s("forwardChannelMaxRetries",2,u),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new ps,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=oa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ne(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=wu(this,null,this.W),ua(this)};function No(u){if(_u(u),u.G==3){var m=u.U++,_=fn(u.I);if(Yt(_,"SID",u.K),Yt(_,"RID",m),Yt(_,"TYPE","terminate"),vs(u,_),m=new en(u,u.j,m),m.L=2,m.v=fs(fn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=bu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ls(m)}Su(u)}function la(u){u.g&&(Es(u),u.g.cancel(),u.g=null)}function _u(u){la(u),u.u&&(p.clearTimeout(u.u),u.u=null),ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ua(u){if(!Ws(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||N(),ht||(et(),ht=!0),Bt.add(m,u),u.B=0}}function Fh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(I(u.Ga,u,m),Mo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new en(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),V(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=vu(this,k,m),_=fn(this.I),Yt(_,"RID",u),Yt(_,"CVER",22),this.D&&Yt(_,"X-HTTP-Session-Id",this.D),vs(this,_),j&&(this.O?m="headers="+encodeURIComponent(String(Do(j)))+"&"+m:this.m&&Ne(_,this.m,j)),ea(this.h,k),this.Ua&&Yt(_,"TYPE","init"),this.P?(Yt(_,"$req",m),Yt(_,"SID","null"),k.T=!0,Un(k,_,null)):Un(k,_,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||Ws(this.h)||Oo(this))};function Oo(u,m){var _;m?_=m.l:_=u.U++;const A=fn(u.I);Yt(A,"SID",u.K),Yt(A,"RID",_),Yt(A,"AID",u.T),vs(u,A),u.m&&u.o&&Ne(A,u.m,u.o),_=new en(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=vu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,_),Un(_,A,m)}function vs(u,m){u.H&&gt(u.H,function(_,A){Yt(m,A,_)}),u.l&&wo({},function(_,A){Yt(m,A,_)})}function vu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?I(u.l.Na,u.l,u):null;t:{var k=u.i;let j=-1;for(;;){const W=["count="+_];j==-1?0<_?(j=k[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Mt=!0;for(let we=0;we<_;we++){let Pt=k[we].g;const Oe=k[we].map;if(Pt-=j,0>Pt)j=Math.max(0,k[we].g-100),Mt=!1;else try{Jn(Oe,W,"req"+Pt+"_")}catch{A&&A(Oe)}}if(Mt){A=W.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function Eu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||N(),ht||(et(),ht=!0),Bt.add(m,u),u.v=0}}function Vo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(I(u.Fa,u),Mo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),la(this),Tu(this))};function Es(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Tu(u){u.g=new en(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=fn(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),vs(u,m),u.m&&u.o&&Ne(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=fs(fn(m)),_.m=null,_.P=!0,Ti(_,u)}r.Za=function(){this.C!=null&&(this.C=null,la(this),Vo(this),ne(19))};function ca(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Au(u,m){var _=null;if(u.g==m){ca(u),Es(u),u.g=null;var A=2}else if(Ao(u.h,m))_=m.D,nn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;A=tr(),Ht(A,new Se(A,_)),ua(u)}else Eu(u);else if(k=m.s,k==3||k==0&&0<m.X||!(A==1&&Fh(u,m)||A==2&&Vo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),k){case 1:Ci(u,5);break;case 4:Ci(u,10);break;case 3:Ci(u,6);break;default:Ci(u,2)}}}function Mo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ci(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),A=u.Xa;const k=!A;A=new ye(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hs(A,"https"),fs(A),k?ms(A.toString(),_):Ln(A.toString(),_)}else ne(2);u.G=0,u.l&&u.l.sa(m),Su(u),_u(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Su(u){if(u.G=0,u.ka=[],u.l){const m=So(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function wu(u,m,_){var A=_ instanceof ye?fn(_):new ye(_);if(A.g!="")m&&(A.g=m+"."+A.g),sr(A,A.s);else{var k=p.location;A=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var j=new ye(null);A&&hs(j,A),m&&(j.g=m),k&&sr(j,k),_&&(j.l=_),A=j}return _=u.D,m=u.ya,_&&m&&Yt(A,_,m),Yt(A,"VER",u.la),vs(u,A),A}function bu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new jt(new ar({eb:_})):new jt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}r=Ru.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ha(){}ha.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){oe.call(this),this.g=new oa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!lt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!lt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ni(this)}F(rn,oe),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){No(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=kn(u),u=_);m.i.push(new du(m.Ya++,u)),m.G==3&&ua(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,rn.aa.N.call(this)};function Iu(u){vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(Iu,vi);function Cu(){_o.call(this),this.status=1}F(Cu,_o);function ni(u){this.g=u}F(ni,Ru),ni.prototype.ua=function(){Ht(this.g,"a")},ni.prototype.ta=function(u){Ht(this.g,new Iu(u))},ni.prototype.sa=function(u){Ht(this.g,new Cu)},ni.prototype.ra=function(){Ht(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,_T=function(){return new ha},yT=function(){return tr()},gT=Yn,lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,zc=ir,Ei.COMPLETE="complete",pT=Ei,yo.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Al=yo,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,mT=jt}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const pv="@firebase/firestore",gv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Cm("@firebase/firestore");function Ba(){return js.logLevel}function st(r,...t){if(js.logLevel<=Nt.DEBUG){const n=t.map(Lm);js.debug(`Firestore (${oo}): ${r}`,...n)}}function Xi(r,...t){if(js.logLevel<=Nt.ERROR){const n=t.map(Lm);js.error(`Firestore (${oo}): ${r}`,...n)}}function Ja(r,...t){if(js.logLevel<=Nt.WARN){const n=t.map(Lm);js.warn(`Firestore (${oo}): ${r}`,...n)}}function Lm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,vT(r,s,n)}function vT(r,t,n){let s=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Xi(s),new Error(s)}function Ut(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||vT(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Ji{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(We.UNAUTHENTICATED)))}shutdown(){}}class dR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mR{constructor(t){this.t=t,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ut(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ut(typeof s.accessToken=="string",31837,{l:s}),new ET(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ut(t===null||typeof t=="string",2055,{h:t}),new We(t)}}class pR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(We.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ut(this.o===void 0,3512);const s=c=>{c.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=_R(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Ot(r,t){return r<t?-1:r>t?1:0}function um(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return $d(l)===$d(c)?Ot(l,c):$d(l)?1:-1}return Ot(r.length,t.length)}const vR=55296,ER=57343;function $d(r){const t=r.charCodeAt(0);return t>=vR&&t<=ER}function Wa(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="__name__";class ui{constructor(t,n,s){n===void 0?n=0:n>t.length&&dt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&dt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ui.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ui?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ui.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Ot(t.length,n.length)}static compareSegments(t,n){const s=ui.isNumericId(t),l=ui.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ui.extractNumericId(t).compare(ui.extractNumericId(n)):um(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return zr.fromString(t.substring(4,t.length-2))}}class Zt extends ui{construct(t,n,s){return new Zt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new it(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends ui{construct(t,n,s){return new Ye(t,n,s)}static isValidIdentifier(t){return TR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_v}static keyField(){return new Ye([_v])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new it(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new it(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new it(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new it(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(Zt.fromString(t))}static fromName(t){return new ct(Zt.fromString(t).popFirst(5))}static empty(){return new ct(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Zt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Zt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new Zt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r,t,n){if(!n)throw new it(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function AR(r,t,n,s){if(t===!0&&s===!0)throw new it(Q.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function vv(r){if(!ct.isDocumentKey(r))throw new it(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ev(r){if(ct.isDocumentKey(r))throw new it(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function AT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":dt(12329,{type:typeof r})}function Gn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new it(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(r);throw new it(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,t){const n={typeString:r};return t&&(n.value=t),n}function Yl(r,t){if(!AT(r))throw new it(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new it(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=-62135596800,Av=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Av);return new ee(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new it(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Tv)throw new it(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Av}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yl(t,ee._jsonSchema))return new ee(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Tv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:Ae("string",ee._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new ee(0,0))}static max(){return new _t(new ee(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function SR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=_t.fromTimestamp(s===1e9?new ee(n+1,0):new ee(n,s));return new Hr(l,ct.empty(),t)}function wR(r){return new Hr(r.readTime,r.key,xl)}class Hr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(_t.min(),ct.empty(),xl)}static max(){return new Hr(_t.max(),ct.empty(),xl)}}function bR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(r.documentKey,t.documentKey),n!==0?n:Ot(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==RR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new X(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function CR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function Kl(r){return r==null}function Wc(r){return r===0&&1/r==-1/0}function DR(r){return typeof r=="number"&&Number.isInteger(r)&&!Wc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function NR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Sv(t)),t=OR(r.get(n),t);return Sv(t)}function OR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case ST:n+="";break;default:n+=c}}return n}function Sv(r){return r+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function $r(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function wT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||Fe.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Oc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Oc(this.root,t,this.comparator,!0)}}class Oc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Fe.RED,this.left=l??Fe.EMPTY,this.right=c??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Fe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Fe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw dt(27949);return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Fe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(t){return new bv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class bv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(Ye.comparator)}static empty(){return new Tn([])}unionWith(t){let n=new Ce(Ye.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wa(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new bT("Invalid base64 string: "+c):c}})(t);return new Ke(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ke(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(r){if(Ut(!!r,39018),typeof r=="string"){let t=0;const n=VR.exec(r);if(Ut(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?Ke.fromBase64String(r):Ke.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="server_timestamp",IT="__type__",CT="__previous_value__",DT="__local_write_time__";function qm(r){return(r?.mapValue?.fields||{})[IT]?.stringValue===RT}function vh(r){const t=r.mapValue.fields[CT];return qm(t)?vh(t):t}function kl(r){const t=Gr(r.mapValue.fields[DT].timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t,n,s,l,c,d,p,g,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const th="(default)";class Ul{constructor(t,n){this.projectId=t,this.database=n||th}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===th}isEqual(t){return t instanceof Ul&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__type__",PR="__max__",Vc={mapValue:{}},OT="__vector__",eh="value";function Qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qm(r)?4:kR(r)?9007199254740991:xR(r)?10:11:dt(28295,{value:r})}function gi(r,t){if(r===t)return!0;const n=Qr(r);if(n!==Qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return kl(r).isEqual(kl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Gr(l.timestampValue),p=Gr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),p=de(c.doubleValue);return d===p?Wc(d)===Wc(p):isNaN(d)&&isNaN(p)}return!1})(r,t);case 9:return Wa(r.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(wv(d)!==wv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!gi(d[g],p[g])))return!1;return!0})(r,t);default:return dt(52216,{left:r})}}function Ll(r,t){return(r.values||[]).find((n=>gi(n,t)))!==void 0}function to(r,t){if(r===t)return 0;const n=Qr(r),s=Qr(t);if(n!==s)return Ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=de(c.integerValue||c.doubleValue),g=de(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Rv(r.timestampValue,t.timestampValue);case 4:return Rv(kl(r),kl(t));case 5:return um(r.stringValue,t.stringValue);case 6:return(function(c,d){const p=Fr(c),g=Fr(d);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Ot(p[y],g[y]);if(T!==0)return T}return Ot(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Ot(de(c.latitude),de(d.latitude));return p!==0?p:Ot(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Iv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[eh]?.arrayValue,T=g[eh]?.arrayValue,w=Ot(y?.values?.length||0,T?.values?.length||0);return w!==0?w:Iv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Vc.mapValue&&d===Vc.mapValue)return 0;if(c===Vc.mapValue)return 1;if(d===Vc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let w=0;w<g.length&&w<T.length;++w){const I=um(g[w],T[w]);if(I!==0)return I;const q=to(p[g[w]],y[T[w]]);if(q!==0)return q}return Ot(g.length,T.length)})(r.mapValue,t.mapValue);default:throw dt(23264,{he:n})}}function Rv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ot(r,t);const n=Gr(r),s=Gr(t),l=Ot(n.seconds,s.seconds);return l!==0?l:Ot(n.nanos,s.nanos)}function Iv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=to(n[l],s[l]);if(c)return c}return Ot(n.length,s.length)}function eo(r){return cm(r)}function cm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Gr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Fr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ct.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=cm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${cm(n.fields[d])}`;return l+"}"})(r.mapValue):dt(61005,{value:r})}function Bc(r){switch(Qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=vh(r);return t?16+Bc(t):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Bc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return $r(s.fields,((c,d)=>{l+=c.length+Bc(d)})),l})(r.mapValue);default:throw dt(13486,{value:r})}}function Cv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function hm(r){return!!r&&"integerValue"in r}function jm(r){return!!r&&"arrayValue"in r}function Dv(r){return!!r&&"nullValue"in r}function Nv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qc(r){return!!r&&"mapValue"in r}function xR(r){return(r?.mapValue?.fields||{})[NT]?.stringValue===OT}function Il(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return $r(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Il(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Il(r.arrayValue.values[n]);return t}return{...r}}function kR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.value=t}static empty(){return new an({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!qc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Il(n)}setAll(t){let n=Ye.emptyPath(),s={},l=[];t.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Il(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];qc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){$r(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new an(Il(this.value))}}function VT(r){const t=[];return $r(r.fields,((n,s)=>{const l=new Ye([n]);if(qc(s)){const c=VT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t,n,s,l,c,d,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new ke(t,0,_t.min(),_t.min(),_t.min(),an.empty(),0)}static newFoundDocument(t,n,s,l){return new ke(t,1,n,_t.min(),s,l,0)}static newNoDocument(t,n){return new ke(t,2,n,_t.min(),_t.min(),an.empty(),0)}static newUnknownDocument(t,n){return new ke(t,3,n,_t.min(),_t.min(),an.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,n){this.position=t,this.inclusive=n}}function Ov(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ct.comparator(ct.fromName(d.referenceValue),n.key):s=to(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Vv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!gi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n="asc"){this.field=t,this.dir=n}}function UR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class Te extends MT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new zR(t,n,s):n==="array-contains"?new jR(t,s):n==="in"?new HR(t,s):n==="not-in"?new GR(t,s):n==="array-contains-any"?new FR(t,s):new Te(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new BR(t,s):new qR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends MT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Fn(t,n)}matches(t){return PT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PT(r){return r.op==="and"}function xT(r){return LR(r)&&PT(r)}function LR(r){for(const t of r.filters)if(t instanceof Fn)return!1;return!0}function fm(r){if(r instanceof Te)return r.field.canonicalString()+r.op.toString()+eo(r.value);if(xT(r))return r.filters.map((t=>fm(t))).join(",");{const t=r.filters.map((n=>fm(n))).join(",");return`${r.op}(${t})`}}function kT(r,t){return r instanceof Te?(function(s,l){return l instanceof Te&&s.op===l.op&&s.field.isEqual(l.field)&&gi(s.value,l.value)})(r,t):r instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&kT(d,l.filters[p])),!0):!1})(r,t):void dt(19439)}function UT(r){return r instanceof Te?(function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`})(r):r instanceof Fn?(function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"})(r):"Filter"}class zR extends Te{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class BR extends Te{constructor(t,n){super(t,"in",n),this.keys=LT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class qR extends Te{constructor(t,n){super(t,"not-in",n),this.keys=LT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function LT(r,t){return(t.arrayValue?.values||[]).map((n=>ct.fromName(n.referenceValue)))}class jR extends Te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return jm(n)&&Ll(n.arrayValue,this.value)}}class HR extends Te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class GR extends Te{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ll(this.value.arrayValue,n)}}class FR extends Te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ll(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t,n=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Mv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new QR(r,t,n,s,l,c,d)}function Hm(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>fm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Kl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>eo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>eo(s))).join(",")),t.Te=n}return t.Te}function Gm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!UR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!kT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Vv(r.startAt,t.startAt)&&Vv(r.endAt,t.endAt)}function dm(r){return ct.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YR(r,t,n,s,l,c,d,p){return new Xl(r,t,n,s,l,c,d,p)}function Fm(r){return new Xl(r)}function Pv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zT(r){return r.collectionGroup!==null}function Cl(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ce(Ye.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new ih(c,s))})),n.has(Ye.keyField().canonicalString())||t.Ie.push(new ih(Ye.keyField(),s))}return t.Ie}function fi(r){const t=St(r);return t.Ee||(t.Ee=KR(t,Cl(r))),t.Ee}function KR(r,t){if(r.limitType==="F")return Mv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ih(l.field,c)}));const n=r.endAt?new nh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new nh(r.startAt.position,r.startAt.inclusive):null;return Mv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function mm(r,t){const n=r.filters.concat([t]);return new Xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function pm(r,t,n){return new Xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Eh(r,t){return Gm(fi(r),fi(t))&&r.limitType===t.limitType}function BT(r){return`${Hm(fi(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>UT(l))).join(", ")}]`),Kl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>eo(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>eo(l))).join(",")),`Target(${s})`})(fi(r))}; limitType=${r.limitType})`}function Th(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ct.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Cl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Ov(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Cl(s),l)||s.endAt&&!(function(d,p,g){const y=Ov(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Cl(s),l))})(r,t)}function XR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function qT(r){return(t,n)=>{let s=!1;for(const l of Cl(r)){const c=$R(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function $R(r,t,n){const s=r.field.isKeyField()?ct.comparator(t.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?to(g,y):dt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return dt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return wT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new se(ct.comparator);function $i(){return ZR}const jT=new se(ct.comparator);function Sl(...r){let t=jT;for(const n of r)t=t.insert(n.key,n);return t}function HT(r){let t=jT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Us(){return Dl()}function GT(){return Dl()}function Dl(){return new Gs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const JR=new se(ct.comparator),WR=new Ce(ct.comparator);function Vt(...r){let t=WR;for(const n of r)t=t.add(n);return t}const tI=new Ce(Ot);function eI(){return tI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(t)?"-0":t}}function FT(r){return{integerValue:""+r}}function nI(r,t){return DR(t)?FT(t):Qm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function iI(r,t,n){return r instanceof zl?(function(l,c){const d={fields:{[IT]:{stringValue:RT},[DT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&qm(c)&&(c=vh(c)),c&&(d.fields[CT]=c),{mapValue:d}})(n,t):r instanceof Bl?YT(r,t):r instanceof ql?KT(r,t):(function(l,c){const d=QT(l,c),p=xv(d)+xv(l.Ae);return hm(d)&&hm(l.Ae)?FT(p):Qm(l.serializer,p)})(r,t)}function rI(r,t,n){return r instanceof Bl?YT(r,t):r instanceof ql?KT(r,t):n}function QT(r,t){return r instanceof rh?(function(s){return hm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class zl extends Ah{}class Bl extends Ah{constructor(t){super(),this.elements=t}}function YT(r,t){const n=XT(t);for(const s of r.elements)n.some((l=>gi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class ql extends Ah{constructor(t){super(),this.elements=t}}function KT(r,t){let n=XT(t);for(const s of r.elements)n=n.filter((l=>!gi(l,s)));return{arrayValue:{values:n}}}class rh extends Ah{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function xv(r){return de(r.integerValue||r.doubleValue)}function XT(r){return jm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n){this.field=t,this.transform=n}}function aI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof Bl&&l instanceof Bl||s instanceof ql&&l instanceof ql?Wa(s.elements,l.elements,gi):s instanceof rh&&l instanceof rh?gi(s.Ae,l.Ae):s instanceof zl&&l instanceof zl})(r.transform,t.transform)}class oI{constructor(t,n){this.version=t,this.transformResults=n}}class Ue{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ue}static exists(t){return new Ue(void 0,t)}static updateTime(t){return new Ue(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Sh{}function $T(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new wh(r.key,Ue.none()):new $l(r.key,r.data,Ue.none());{const n=r.data,s=an.empty();let l=new Ce(Ye.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Zr(r.key,s,new Tn(l.toArray()),Ue.none())}}function lI(r,t,n){r instanceof $l?(function(l,c,d){const p=l.value.clone(),g=Uv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):r instanceof Zr?(function(l,c,d){if(!jc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Uv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ZT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Nl(r,t,n,s){return r instanceof $l?(function(c,d,p,g){if(!jc(c.precondition,d))return p;const y=c.value.clone(),T=Lv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Zr?(function(c,d,p,g){if(!jc(c.precondition,d))return p;const y=Lv(c.fieldTransforms,g,d),T=d.data;return T.setAll(ZT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,d,p){return jc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,t,n)}function uI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=QT(s.transform,l||null);c!=null&&(n===null&&(n=an.empty()),n.set(s.field,c))}return n||null}function kv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Wa(s,l,((c,d)=>aI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class $l extends Sh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zr extends Sh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Uv(r,t,n){const s=new Map;Ut(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,rI(d,p,n[l]))}return s}function Lv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,iI(c,d,t))}return s}class wh extends Sh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JT extends Sh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&lI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Nl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Nl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=GT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=$T(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(_t.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&Wa(this.mutations,t.mutations,((n,s)=>kv(n,s)))&&Wa(this.baseMutations,t.baseMutations,((n,s)=>kv(n,s)))}}class Ym{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ut(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return JR})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Ym(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,kt;function WT(r){switch(r){case Q.OK:return dt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return dt(15467,{code:r})}}function t0(r){if(r===void 0)return Xi("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Ee.OK:return Q.OK;case Ee.CANCELLED:return Q.CANCELLED;case Ee.UNKNOWN:return Q.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return Q.INTERNAL;case Ee.UNAVAILABLE:return Q.UNAVAILABLE;case Ee.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ee.NOT_FOUND:return Q.NOT_FOUND;case Ee.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ee.ABORTED:return Q.ABORTED;case Ee.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ee.DATA_LOSS:return Q.DATA_LOSS;default:return dt(39323,{code:r})}}(kt=Ee||(Ee={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new zr([4294967295,4294967295],0);function zv(r){const t=dI().encode(r),n=new dT;return n.update(t),new Uint8Array(n.digest())}function Bv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new zr([n,s],0),new zr([l,c],0)]}class Km{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=zr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(zr.fromNumber(s)));return l.compare(mI)===1&&(l=new zr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=zv(t),[s,l]=Bv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Km(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const n=zv(t),[s,l]=Bv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Zl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new bh(_t.min(),l,new se(Ot),$i(),Vt())}}class Zl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Zl(s,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class e0{constructor(t,n){this.targetId=t,this.Ce=n}}class n0{constructor(t,n,s=Ke.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class qv{constructor(){this.ve=0,this.Fe=jv(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),n=Vt(),s=Vt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:dt(38017,{changeType:c})}})),new Zl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=jv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pI{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=Mc(),this.He=Mc(),this.Ye=new se(Ot)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:dt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(dm(c))if(s===0){const d=new ct(c.path);this.et(n,d,ke.newNoDocument(d,_t.min()))}else Ut(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Fr(s).toUint8Array()}catch(g){if(g instanceof bT)return Ja("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Km(d,l,c)}catch(g){return Ja(g instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&dm(p.target)){const g=new ct(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,ke.newNoDocument(g,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Vt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new bh(t,n,this.Ye,this.je,s);return this.je=$i(),this.Je=Mc(),this.He=Mc(),this.Ye=new se(Ot),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new qv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Ot),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Ot),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Mc(){return new se(ct.comparator)}function jv(){return new se(ct.comparator)}const gI={asc:"ASCENDING",desc:"DESCENDING"},yI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_I={and:"AND",or:"OR"};class vI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gm(r,t){return r.useProto3Json||Kl(t)?t:{value:t}}function sh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function i0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function EI(r,t){return sh(r,t.toTimestamp())}function An(r){return Ut(!!r,49232),_t.fromTimestamp((function(n){const s=Gr(n);return new ee(s.seconds,s.nanos)})(r))}function Xm(r,t){return ym(r,t).canonicalString()}function ym(r,t){const n=(function(l){return new Zt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function r0(r){const t=Zt.fromString(r);return Ut(c0(t),10190,{key:t.toString()}),t}function ah(r,t){return Xm(r.databaseId,t.path)}function Ol(r,t){const n=r0(t);if(n.get(1)!==r.databaseId.projectId)throw new it(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new it(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ct(a0(n))}function s0(r,t){return Xm(r.databaseId,t)}function TI(r){const t=r0(r);return t.length===4?Zt.emptyPath():a0(t)}function _m(r){return new Zt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function a0(r){return Ut(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Hv(r,t,n){return{name:ah(r,t),fields:n.value.mapValue.fields}}function AI(r,t){return"found"in t?(function(s,l){Ut(!!l.found,43571),l.found.name,l.found.updateTime;const c=Ol(s,l.found.name),d=An(l.found.updateTime),p=l.found.createTime?An(l.found.createTime):_t.min(),g=new an({mapValue:{fields:l.found.fields}});return ke.newFoundDocument(c,d,p,g)})(r,t):"missing"in t?(function(s,l){Ut(!!l.missing,3894),Ut(!!l.readTime,22933);const c=Ol(s,l.missing),d=An(l.readTime);return ke.newNoDocument(c,d)})(r,t):dt(7234,{result:t})}function SI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:dt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Ut(T===void 0||typeof T=="string",58123),Ke.fromBase64String(T||"")):(Ut(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ke.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?Q.UNKNOWN:t0(y.code);return new it(T,y.message||"")})(d);n=new n0(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Ol(r,s.document.name),c=An(s.document.updateTime),d=s.document.createTime?An(s.document.createTime):_t.min(),p=new an({mapValue:{fields:s.document.fields}}),g=ke.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Hc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Ol(r,s.document),c=s.readTime?An(s.readTime):_t.min(),d=ke.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Hc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Ol(r,s.document),c=s.removedTargetIds||[];n=new Hc([],c,l,null)}else{if(!("filter"in t))return dt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new fI(l,c),p=s.targetId;n=new e0(p,d)}}return n}function o0(r,t){let n;if(t instanceof $l)n={update:Hv(r,t.key,t.value)};else if(t instanceof wh)n={delete:ah(r,t.key)};else if(t instanceof Zr)n={update:Hv(r,t.key,t.data),updateMask:VI(t.fieldMask)};else{if(!(t instanceof JT))return dt(16599,{Vt:t.type});n={verify:ah(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof zl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Bl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ql)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof rh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw dt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:EI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:dt(27497)})(r,t.precondition)),n}function wI(r,t){return r&&r.length>0?(Ut(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?An(l.updateTime):An(c);return d.isEqual(_t.min())&&(d=An(c)),new oI(d,l.transformResults||[])})(n,t)))):[]}function bI(r,t){return{documents:[s0(r,t.path)]}}function RI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=s0(r,l);const c=(function(y){if(y.length!==0)return u0(Fn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(I){return{field:ja(I.field),direction:DI(I.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const p=gm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function II(r){let t=TI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ut(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const I=l0(w);return I instanceof Fn&&xT(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((I=>(function(F){return new ih(Ha(F.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let I;return I=typeof w=="object"?w.value:w,Kl(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(w){const I=!!w.before,q=w.values||[];return new nh(q,I)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const I=!w.before,q=w.values||[];return new nh(q,I)})(n.endAt)),YR(t,l,d,c,p,"F",g,y)}function CI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function l0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ha(n.unaryFilter.field);return Te.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ha(n.unaryFilter.field);return Te.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ha(n.unaryFilter.field);return Te.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ha(n.unaryFilter.field);return Te.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Te.create(Ha(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Fn.create(n.compositeFilter.filters.map((s=>l0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(n.compositeFilter.op))})(r):dt(30097,{filter:r})}function DI(r){return gI[r]}function NI(r){return yI[r]}function OI(r){return _I[r]}function ja(r){return{fieldPath:r.canonicalString()}}function Ha(r){return Ye.fromServerFormat(r.fieldPath)}function u0(r){return r instanceof Te?(function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(Dv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(Dv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:NI(n.op),value:n.value}}})(r):r instanceof Fn?(function(n){const s=n.getFilters().map((l=>u0(l)));return s.length===1?s[0]:{compositeFilter:{op:OI(n.op),filters:s}}})(r):dt(54877,{filter:r})}function VI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function c0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n,s,l,c=_t.min(),d=_t.min(),p=Ke.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Mr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t){this.yt=t}}function PI(r){const t=II({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.Cn=new kI}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(Hr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(Hr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class kI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(Zt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h0=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(h0,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="LruGarbageCollector",UI=1048576;function Qv([r,t],[n,s]){const l=Ot(r,n);return l===0?Ot(t,s):l}class LI{constructor(t){this.Ir=t,this.buffer=new Ce(Qv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Qv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Fv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uo(n)?st(Fv,"Ignoring IndexedDB error during garbage collection: ",n):await lo(n)}await this.Vr(3e5)}))}}class BI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(_h.ce);const s=new LI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Gv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,p=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(y=Date.now(),Ba()<=Nt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function qI(r,t){return new BI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.changes=new Gs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ke.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Nl(s.mutation,l,Tn.empty(),ee.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Vt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Vt()){const l=Us();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=Sl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=Us();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Vt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(t,n,s,l){let c=$i();const d=Dl(),p=(function(){return Dl()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Zr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Nl(T.mutation,y,T.mutation.getFieldMask(),ee.now())):d.set(y.key,Tn.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new HI(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Dl();let l=new se(((d,p)=>d-p)),c=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||Tn.empty();T=p.applyToLocalView(y,T),s.set(g,T);const w=(l.get(p.batchId)||Vt()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,w=GT();T.forEach((I=>{if(!c.has(I)){const q=$T(n.get(I),s.get(I));q!==null&&w.set(I,q),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,w))}return X.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ct.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(Us());let p=xl,g=c;return d.next((y=>X.forEach(y,((T,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(T)?X.resolve():this.remoteDocumentCache.getEntry(t,T).next((I=>{g=g.insert(T,I)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,Vt()))).next((T=>({batchId:p,changes:HT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next((s=>{let l=Sl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=Sl();return this.indexManager.getCollectionParents(t,c).next((p=>X.forEach(p,(g=>{const y=(function(w,I){return new Xl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((w,I)=>{d=d.insert(w,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,ke.newInvalidDocument(T)))}));let p=Sl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Nl(T.mutation,y,Tn.empty(),ee.now()),Th(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:An(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:PI(l.bundledQuery),readTime:An(l.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.overlays=new se(ct.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Us();return X.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Us(),c=n.length+1,d=new ct(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new se(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Us(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=Us(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return X.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new hI(n,s));let c=this.qr.get(n);c===void 0&&(c=Vt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Qr=new Ce(xe.$r),this.Ur=new Ce(xe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new xe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new xe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ct(new Zt([])),s=new xe(n,t),l=new xe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ct(new Zt([])),s=new xe(n,t),l=new xe(n,t+1);let c=Vt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new xe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class xe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ct.comparator(t.key,n.key)||Ot(t.Yr,n.Yr)}static Kr(t,n){return Ot(t.Yr,n.Yr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(xe.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new cI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new xe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Bm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new xe(n,0),l=new xe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Ot);return n.forEach((l=>{const c=new xe(l,0),d=new xe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ct.isDocumentKey(c)||(c=c.child(""));const d=new xe(new ct(c),0);let p=new Ce(Ot);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),X.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Ut(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(l=>{const c=new xe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new xe(n,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.ri=t,this.docs=(function(){return new se(ct.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():ke.newInvalidDocument(n))}getEntries(t,n){let s=$i();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():ke.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=$i();const d=n.path,p=new ct(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||bR(wR(T),s)<=0||(l.has(T.key)||Th(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){dt(9500)}ii(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new $I(this)}getSize(t){return X.resolve(this.size)}}class $I extends jI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t){this.persistence=t,this.si=new Gs((n=>Hm(n)),Gm),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=no.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new no(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new YI,this.referenceDelegate=t(this),this.Pi=new ZI(this),this.indexManager=new xI,this.remoteDocumentCache=(function(l){return new XI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new MI(n),this.Ii=new FI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new KI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new JI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class JI extends IR{constructor(t){super(),this.currentSequenceNumber=t}}class Zm{constructor(t){this.persistence=t,this.Ri=new $m,this.Vi=null}static mi(t){return new Zm(t)}get fi(){if(this.Vi)return this.Vi;throw dt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ct.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,_t.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class oh{constructor(t,n){this.persistence=t,this.pi=new Gs((s=>NR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=qI(this,n)}static mi(t,n){return new oh(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((p=>{p||(s++,c.removeEntry(d,_t.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Bc(t.data.value)),n}br(t,n,s){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Vt(),l=Vt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Jm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YS()?8:CR(tn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new WI;return this.Ss(t,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,d,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ba()<=Nt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ba()<=Nt.DEBUG&&st("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=Nt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fi(n))):X.resolve())}ys(t,n){if(Pv(n))return X.resolve(null);let s=fi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=pm(n,null,"F"),s=fi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Vt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(t,pm(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return Pv(n)||l.isEqual(_t.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?X.resolve(null):(Ba()<=Nt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(n)),this.vs(t,d,n,SR(l,xl)).next((p=>p)))}))}Ds(t,n){let s=new Ce(qT(t));return n.forEach(((l,c)=>{Th(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ba()<=Nt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(t,n,Hr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",eC=3e8;class nC{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new se(Ot),this.xs=new Gs((c=>Hm(c)),Gm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function iC(r,t,n,s){return new nC(r,t,n,s)}async function d0(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Vt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function rC(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const w=y.batch,I=w.keys();let q=X.resolve();return I.forEach((F=>{q=q.next((()=>T.getEntry(g,F))).next((tt=>{const Z=y.docVersions.get(F);Ut(Z!==null,48541),tt.version.compareTo(Z)<0&&(w.applyToRemoteDocument(tt,y),tt.isValidDocument()&&(tt.setReadTime(y.commitVersion),T.addEntry(tt)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Vt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function m0(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function sC(r,t){const n=St(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,w)=>{const I=l.get(w);if(!I)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let q=I.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?q=q.withResumeToken(Ke.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(w,q),(function(tt,Z,pt){return tt.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=eC?!0:pt.addedDocuments.size+pt.modifiedDocuments.size+pt.removedDocuments.size>0})(I,q,T)&&p.push(n.Pi.updateTargetData(c,q))}));let g=$i(),y=Vt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(aC(c,d,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(_t.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return X.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function aC(r,t,n){let s=Vt(),l=Vt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=$i();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(_t.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):st(Wm,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function oC(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function lC(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Mr(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function vm(r,t,n){const s=St(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!uo(d))throw d;st(Wm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Yv(r,t,n){const s=St(r);let l=_t.min(),c=Vt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const w=St(g),I=w.xs.get(T);return I!==void 0?X.resolve(w.Ms.get(I)):w.Pi.getTargetData(y,T)})(s,d,fi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:_t.min(),n?c:Vt()))).next((p=>(uC(s,XR(t),p),{documents:p,Qs:c})))))}function uC(r,t,n){let s=r.Os.get(t)||_t.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Kv{constructor(){this.activeTargetIds=eI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cC{constructor(){this.Mo=new Kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Kv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="ConnectivityMonitor";class $v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Xv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Xv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc=null;function Em(){return Pc===null?Pc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pc++,"0x"+Pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="RestConnection",fC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===th?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=Em(),p=this.zo(t,n.toUriEncodedString());st(Zd,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=ro(y);return this.Jo(t,p,g,s,T).then((w=>(st(Zd,`Received RPC '${t}' ${d}: `,w),w)),(w=>{throw Ja(Zd,`RPC '${t}' ${d} failed with error: `,w,"url: ",p,"request:",s),w}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=fC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class pC extends dC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=Em();return new Promise(((p,g)=>{const y=new mT;y.setWithCredentials(!0),y.listenOnce(pT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case zc.NO_ERROR:const w=y.getResponseJson();st(Je,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(w)),p(w);break;case zc.TIMEOUT:st(Je,`RPC '${t}' ${d} timed out`),g(new it(Q.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const I=y.getStatus();if(st(Je,`RPC '${t}' ${d} failed with status:`,I,"response text:",y.getResponseText()),I>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const F=q?.error;if(F&&F.status&&F.message){const tt=(function(pt){const lt=pt.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(lt)>=0?lt:Q.UNKNOWN})(F.status);g(new it(tt,F.message))}else g(new it(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new it(Q.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(Je,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);st(Je,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=Em(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=_T(),p=yT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");st(Je,`Creating RPC '${t}' stream ${l}: ${T}`,g);const w=d.createWebChannel(T,g);this.I_(w);let I=!1,q=!1;const F=new mC({Yo:Z=>{q?st(Je,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(I||(st(Je,`Opening RPC '${t}' stream ${l} transport.`),w.open(),I=!0),st(Je,`RPC '${t}' stream ${l} sending:`,Z),w.send(Z))},Zo:()=>w.close()}),tt=(Z,pt,lt)=>{Z.listen(pt,(ot=>{try{lt(ot)}catch(Lt){setTimeout((()=>{throw Lt}),0)}}))};return tt(w,Al.EventType.OPEN,(()=>{q||(st(Je,`RPC '${t}' stream ${l} transport opened.`),F.o_())})),tt(w,Al.EventType.CLOSE,(()=>{q||(q=!0,st(Je,`RPC '${t}' stream ${l} transport closed`),F.a_(),this.E_(w))})),tt(w,Al.EventType.ERROR,(Z=>{q||(q=!0,Ja(Je,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),F.a_(new it(Q.UNAVAILABLE,"The operation could not be completed")))})),tt(w,Al.EventType.MESSAGE,(Z=>{if(!q){const pt=Z.data[0];Ut(!!pt,16349);const lt=pt,ot=lt?.error||lt[0]?.error;if(ot){st(Je,`RPC '${t}' stream ${l} received error:`,ot);const Lt=ot.status;let vt=(function(S){const R=Ee[S];if(R!==void 0)return t0(R)})(Lt),gt=ot.message;vt===void 0&&(vt=Q.INTERNAL,gt="Unknown error status: "+Lt+" with message "+ot.message),q=!0,F.a_(new it(vt,gt)),w.close()}else st(Je,`RPC '${t}' stream ${l} received:`,pt),F.u_(pt)}})),tt(p,gT.STAT_EVENT,(Z=>{Z.stat===lm.PROXY?st(Je,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===lm.NOPROXY&&st(Je,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(r){return new vI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="PersistentStream";class p0{constructor(t,n,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Xi(n.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new it(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(Zv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gC extends p0{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=SI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return _t.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?_t.min():d.readTime?An(d.readTime):_t.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=_m(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=dm(g)?{documents:bI(c,g)}:{query:RI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=i0(c,d.resumeToken);const y=gm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(_t.min())>0){p.readTime=sh(c,d.snapshotVersion.toTimestamp());const y=gm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=CI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=_m(this.serializer),n.removeTarget=t,this.q_(n)}}class yC extends p0{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ut(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ut(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ut(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=wI(t.writeResults,t.commitTime),s=An(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=_m(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>o0(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{}class vC extends _C{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new it(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,ym(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it(Q.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,ym(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new it(Q.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class TC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Fs(this)&&(st(Hs,"Restarting streams for network reachability change."),await(async function(g){const y=St(g);y.Ea.add(4),await Jl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ih(y)})(this))}))})),this.Ra=new EC(s,l)}}async function Ih(r){if(Fs(r))for(const t of r.da)await t(!0)}async function Jl(r){for(const t of r.da)await t(!1)}function g0(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),rp(n)?ip(n):co(n).O_()&&np(n,t))}function ep(r,t){const n=St(r),s=co(n);n.Ia.delete(t),s.O_()&&y0(n,t),n.Ia.size===0&&(s.O_()?s.L_():Fs(n)&&n.Ra.set("Unknown"))}function np(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}co(r).Y_(t)}function y0(r,t){r.Va.Ue(t),co(r).Z_(t)}function ip(r){r.Va=new pI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),co(r).start(),r.Ra.ua()}function rp(r){return Fs(r)&&!co(r).x_()&&r.Ia.size>0}function Fs(r){return St(r).Ea.size===0}function _0(r){r.Va=void 0}async function AC(r){r.Ra.set("Online")}async function SC(r){r.Ia.forEach(((t,n)=>{np(r,t)}))}async function wC(r,t){_0(r),rp(r)?(r.Ra.ha(t),ip(r)):r.Ra.set("Unknown")}async function bC(r,t,n){if(r.Ra.set("Online"),t instanceof n0&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){st(Hs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await lh(r,s)}else if(t instanceof Hc?r.Va.Ze(t):t instanceof e0?r.Va.st(t):r.Va.tt(t),!n.isEqual(_t.min()))try{const s=await m0(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Ke.EMPTY_BYTE_STRING,T.snapshotVersion)),y0(c,g);const w=new Mr(T.target,g,y,T.sequenceNumber);np(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){st(Hs,"Failed to raise snapshot:",s),await lh(r,s)}}async function lh(r,t,n){if(!uo(t))throw t;r.Ea.add(1),await Jl(r),r.Ra.set("Offline"),n||(n=()=>m0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(Hs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ih(r)}))}function v0(r,t){return t().catch((n=>lh(r,n,t)))}async function Ch(r){const t=St(r),n=Yr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Bm;for(;RC(t);)try{const l=await oC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,IC(t,l)}catch(l){await lh(t,l)}E0(t)&&T0(t)}function RC(r){return Fs(r)&&r.Ta.length<10}function IC(r,t){r.Ta.push(t);const n=Yr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function E0(r){return Fs(r)&&!Yr(r).x_()&&r.Ta.length>0}function T0(r){Yr(r).start()}async function CC(r){Yr(r).ra()}async function DC(r){const t=Yr(r);for(const n of r.Ta)t.ea(n.mutations)}async function NC(r,t,n){const s=r.Ta.shift(),l=Ym.from(s,t,n);await v0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Ch(r)}async function OC(r,t){t&&Yr(r).X_&&await(async function(s,l){if((function(d){return WT(d)&&d!==Q.ABORTED})(l.code)){const c=s.Ta.shift();Yr(s).B_(),await v0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Ch(s)}})(r,t),E0(r)&&T0(r)}async function Jv(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),st(Hs,"RemoteStore received new credentials");const s=Fs(n);n.Ea.add(3),await Jl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ih(n)}async function VC(r,t){const n=St(r);t?(n.Ea.delete(2),await Ih(n)):t||(n.Ea.add(2),await Jl(n),n.Ra.set("Unknown"))}function co(r){return r.ma||(r.ma=(function(n,s,l){const c=St(n);return c.sa(),new gC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:AC.bind(null,r),t_:SC.bind(null,r),r_:wC.bind(null,r),H_:bC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),rp(r)?ip(r):r.Ra.set("Unknown")):(await r.ma.stop(),_0(r))}))),r.ma}function Yr(r){return r.fa||(r.fa=(function(n,s,l){const c=St(n);return c.sa(),new yC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:CC.bind(null,r),r_:OC.bind(null,r),ta:DC.bind(null,r),na:NC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Ch(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Hs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,p=new sp(t,n,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(r,t){if(Xi("AsyncQueue",`${t}: ${r}`),uo(r))return new it(Q.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(t){return new $a(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=Sl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof $a)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new $a;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.ga=new se(ct.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):dt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class io{constructor(t,n,s,l,c,d,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new io(t,n,$a.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class PC{constructor(){this.queries=tE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=St(n),c=l.queries;l.queries=tE(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new it(Q.ABORTED,"Firestore shutting down"))}}function tE(){return new Gs((r=>BT(r)),Eh)}async function A0(r,t){const n=St(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new MC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=ap(d,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&op(n)}async function S0(r,t){const n=St(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function xC(r,t){const n=St(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&op(n)}function kC(r,t,n){const s=St(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function op(r){r.Ca.forEach((t=>{t.next()}))}var Tm,eE;(eE=Tm||(Tm={})).Ma="default",eE.Cache="cache";class w0{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new io(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=io.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(t){this.key=t}}class R0{constructor(t){this.key=t}}class UC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=qT(t),this.tu=new $a(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new Wv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,w)=>{const I=l.get(T),q=Th(this.query,w)?w:null,F=!!I&&this.mutatedKeys.has(I.key),tt=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Z=!1;I&&q?I.data.isEqual(q.data)?F!==tt&&(s.track({type:3,doc:q}),Z=!0):this.su(I,q)||(s.track({type:2,doc:q}),Z=!0,(g&&this.eu(q,g)>0||y&&this.eu(q,y)<0)&&(p=!0)):!I&&q?(s.track({type:0,doc:q}),Z=!0):I&&!q&&(s.track({type:1,doc:I}),Z=!0,(g||y)&&(p=!0)),Z&&(q?(d=d.add(q),c=tt?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,w)=>(function(q,F){const tt=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{Rt:Z})}};return tt(q)-tt(F)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new io(this.query,t.tu,c,d,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new R0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new b0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lp="SyncEngine";class LC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class zC{constructor(t){this.key=t,this.hu=!1}}class BC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Gs((p=>BT(p)),Eh),this.Iu=new Map,this.Eu=new Set,this.du=new se(ct.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qC(r,t,n=!0){const s=V0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await I0(s,t,n,!0),l}async function jC(r,t){const n=V0(r);await I0(n,t,!0,!1)}async function I0(r,t,n,s){const l=await lC(r.localStore,fi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await HC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&g0(r.remoteStore,l),p}async function HC(r,t,n,s,l){r.pu=(w,I,q)=>(async function(tt,Z,pt,lt){let ot=Z.view.ru(pt);ot.Cs&&(ot=await Yv(tt.localStore,Z.query,!1).then((({documents:D})=>Z.view.ru(D,ot))));const Lt=lt&&lt.targetChanges.get(Z.targetId),vt=lt&&lt.targetMismatches.get(Z.targetId)!=null,gt=Z.view.applyChanges(ot,tt.isPrimaryClient,Lt,vt);return iE(tt,Z.targetId,gt.au),gt.snapshot})(r,w,I,q);const c=await Yv(r.localStore,t,!0),d=new UC(t,c.Qs),p=d.ru(c.documents),g=Zl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);iE(r,n,y.au);const T=new LC(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function GC(r,t,n){const s=St(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Eh(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await vm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&ep(s.remoteStore,l.targetId),Am(s,l.targetId)})).catch(lo)):(Am(s,l.targetId),await vm(s.localStore,l.targetId,!0))}async function FC(r,t){const n=St(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ep(n.remoteStore,s.targetId))}async function QC(r,t,n){const s=WC(r);try{const l=await(function(d,p){const g=St(d),y=ee.now(),T=p.reduce(((q,F)=>q.add(F.key)),Vt());let w,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let F=$i(),tt=Vt();return g.Ns.getEntries(q,T).next((Z=>{F=Z,F.forEach(((pt,lt)=>{lt.isValidDocument()||(tt=tt.add(pt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(q,F))).next((Z=>{w=Z;const pt=[];for(const lt of p){const ot=uI(lt,w.get(lt.key).overlayedDocument);ot!=null&&pt.push(new Zr(lt.key,ot,VT(ot.value.mapValue),Ue.exists(!0)))}return g.mutationQueue.addMutationBatch(q,y,pt,p)})).next((Z=>{I=Z;const pt=Z.applyToLocalDocumentSet(w,tt);return g.documentOverlayCache.saveOverlays(q,Z.batchId,pt)}))})).then((()=>({batchId:I.batchId,changes:HT(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new se(Ot)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await Wl(s,l.changes),await Ch(s.remoteStore)}catch(l){const c=ap(l,"Failed to persist write");n.reject(c)}}async function C0(r,t){const n=St(r);try{const s=await sC(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Ut(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ut(d.hu,14607):l.removedDocuments.size>0&&(Ut(d.hu,42227),d.hu=!1))})),await Wl(n,s,t)}catch(s){await lo(s)}}function nE(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=St(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,w)=>{for(const I of w.Sa)I.va(p)&&(y=!0)})),y&&op(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function YC(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new se(ct.comparator);d=d.insert(c,ke.newNoDocument(c,_t.min()));const p=Vt().add(c),g=new bh(_t.min(),new Map,new se(Ot),d,p);await C0(s,g),s.du=s.du.remove(c),s.Au.delete(t),up(s)}else await vm(s.localStore,t,!1).then((()=>Am(s,t,n))).catch(lo)}async function KC(r,t){const n=St(r),s=t.batch.batchId;try{const l=await rC(n.localStore,t);N0(n,s,null),D0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(n,l)}catch(l){await lo(l)}}async function XC(r,t,n){const s=St(r);try{const l=await(function(d,p){const g=St(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(Ut(w!==null,37113),T=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);N0(s,t,n),D0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Wl(s,l)}catch(l){await lo(l)}}function D0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function N0(r,t,n){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Am(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||O0(r,s)}))}function O0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(ep(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),up(r))}function iE(r,t,n){for(const s of n)s instanceof b0?(r.Ru.addReference(s.key,t),$C(r,s)):s instanceof R0?(st(lp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||O0(r,s.key)):dt(19791,{wu:s})}function $C(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(st(lp,"New document in limbo: "+n),r.Eu.add(s),up(r))}function up(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ct(Zt.fromString(t)),s=r.fu.next();r.Au.set(s,new zC(n)),r.du=r.du.insert(n,s),g0(r.remoteStore,new Mr(fi(Fm(n.path)),s,"TargetPurposeLimboResolution",_h.ce))}}async function Wl(r,t,n){const s=St(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Jm.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=St(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>X.forEach(y,(I=>X.forEach(I.Es,(q=>T.persistence.referenceDelegate.addReference(w,I.targetId,q))).next((()=>X.forEach(I.ds,(q=>T.persistence.referenceDelegate.removeReference(w,I.targetId,q)))))))))}catch(w){if(!uo(w))throw w;st(Wm,"Failed to update sequence numbers: "+w)}for(const w of y){const I=w.targetId;if(!w.fromCache){const q=T.Ms.get(I),F=q.snapshotVersion,tt=q.withLastLimboFreeSnapshotVersion(F);T.Ms=T.Ms.insert(I,tt)}}})(s.localStore,c))}async function ZC(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){st(lp,"User change. New user:",t.toKey());const s=await d0(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new it(Q.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Wl(n,s.Ls)}}function JC(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Vt().add(s.key);{let l=Vt();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function V0(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=C0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YC.bind(null,t),t.Pu.H_=xC.bind(null,t.eventManager),t.Pu.yu=kC.bind(null,t.eventManager),t}function WC(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XC.bind(null,t),t}class uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return iC(this.persistence,new tC,t.initialUser,this.serializer)}Cu(t){return new f0(Zm.mi,this.serializer)}Du(t){return new cC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uh.provider={build:()=>new uh};class t2 extends uh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ut(this.persistence.referenceDelegate instanceof oh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new f0((s=>oh.mi(s,n)),this.serializer)}}class Sm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZC.bind(null,this.syncEngine),await VC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new PC})()}createDatastore(t){const n=Rh(t.databaseInfo.databaseId),s=(function(c){return new pC(c)})(t.databaseInfo);return(function(c,d,p,g){return new vC(c,d,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,p){return new TC(s,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>nE(this.syncEngine,n,0)),(function(){return $v.v()?new $v:new hC})())}createSyncEngine(t,n){return(function(l,c,d,p,g,y,T){const w=new BC(l,c,d,p,g,y);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=St(n);st(Hs,"RemoteStore shutting down."),s.Ea.add(5),await Jl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new it(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,c){const d=St(l),p={documents:c.map((w=>ah(d.serializer,w)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,Zt.emptyPath(),p,c.length),y=new Map;g.forEach((w=>{const I=AI(d.serializer,w);y.set(I.key.toString(),I)}));const T=[];return c.forEach((w=>{const I=y.get(w.toString());Ut(!!I,55234,{key:w}),T.push(I)})),T})(this.datastore,t);return n.forEach((s=>this.recordVersion(s))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(t.toString())}delete(t){this.write(new wh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,s)=>{const l=ct.fromPath(s);this.mutations.push(new JT(l,this.precondition(l)))})),await(async function(s,l){const c=St(s),d={writes:l.map((p=>o0(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,Zt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw dt(50498,{Gu:t.constructor.name});n=_t.min()}const s=this.readVersions.get(t.key.toString());if(s){if(!n.isEqual(s))throw new it(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(_t.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(_t.min()))throw new it(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t,n,s,l,c){this.asyncQueue=t,this.datastore=n,this.options=s,this.updateFunction=l,this.deferred=c,this.zu=s.maxAttempts,this.M_=new tp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new e2(this.datastore),n=this.Hu(t);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(s)})).catch((l=>{this.Yu(l)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(t){try{const n=this.updateFunction(t);return!Kl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!WT(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class i2{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=We.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{st(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(st(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=ap(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Wd(r,t){r.asyncQueue.verifyOperationInProgress(),st(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await d0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function rE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await r2(r);st(Kr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Jv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Jv(t.remoteStore,l))),r._onlineComponents=t}async function r2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Kr,"Using user provided OfflineComponentProvider");try{await Wd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ja("Error using user provided cache. Falling back to memory cache: "+n),await Wd(r,new uh)}}else st(Kr,"Using default OfflineComponentProvider"),await Wd(r,new t2(void 0));return r._offlineComponents}async function cp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Kr,"Using user provided OnlineComponentProvider"),await rE(r,r._uninitializedComponentsProvider._online)):(st(Kr,"Using default OnlineComponentProvider"),await rE(r,new Sm))),r._onlineComponents}function s2(r){return cp(r).then((t=>t.syncEngine))}function a2(r){return cp(r).then((t=>t.datastore))}async function wm(r){const t=await cp(r),n=t.eventManager;return n.onListen=qC.bind(null,t.syncEngine),n.onUnlisten=GC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=FC.bind(null,t.syncEngine),n}function o2(r,t,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new M0({next:I=>{T.Nu(),d.enqueueAndForget((()=>S0(c,w))),I.fromCache&&g.source==="server"?y.reject(new it(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),w=new w0(p,T,{includeMetadataChanges:!0,qa:!0});return A0(c,w)})(await wm(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="firestore.googleapis.com",aE=!0;class oE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new it(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=aE}else this.host=t.host,this.ssl=t.ssl??aE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=h0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UI)throw new it(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new it(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new it(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new it(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fR;switch(s.type){case"firstParty":return new gR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new it(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=sE.get(n);s&&(st("ComponentProvider","Removing Datastore"),sE.delete(n),s.terminate())})(this),Promise.resolve()}}function l2(r,t,n,s={}){r=Gn(r,Dh);const l=ro(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(IE(`https://${p}`),CE("Firestore",!0)),c.host!==x0&&c.host!==p&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!zs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=We.MOCK_USER;else{y=LS(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new it(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new We(w)}r._authCredentials=new dR(new ET(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Qs(this.firestore,t,this._query)}}class me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Yl(n,me._jsonSchema))return new me(t,s||null,new ct(Zt.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Ae("string",me._jsonSchemaVersion),referencePath:Ae("string")};class Br extends Qs{constructor(t,n,s){super(t,n,Fm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new ct(t))}withConverter(t){return new Br(this.firestore,t,this._path)}}function Jr(r,t,...n){if(r=ze(r),TT("collection","path",t),r instanceof Dh){const s=Zt.fromString(t,...n);return Ev(s),new Br(r,null,s)}{if(!(r instanceof me||r instanceof Br))throw new it(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Zt.fromString(t,...n));return Ev(s),new Br(r.firestore,null,s)}}function Le(r,t,...n){if(r=ze(r),arguments.length===1&&(t=zm.newId()),TT("doc","path",t),r instanceof Dh){const s=Zt.fromString(t,...n);return vv(s),new me(r,null,new ct(s))}{if(!(r instanceof me||r instanceof Br))throw new it(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Zt.fromString(t,...n));return vv(s),new me(r.firestore,r instanceof Br?r.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="AsyncQueue";class uE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tp(this,"async_queue_retry"),this._c=()=>{const s=Jd();s&&st(lE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!uo(t))throw t;st(lE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",cE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=sp.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&dt(47125,{Pc:cE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function cE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Xr extends Dh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new uE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uE(t),this._firestoreClient=void 0,await t}}}function u2(r,t){const n=typeof r=="object"?r:VE(),s=typeof r=="string"?r:th,l=Nm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=kS("firestore");c&&l2(l,...c)}return l}function tu(r){if(r._terminated)throw new it(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||c2(r),r._firestoreClient}function c2(r){const t=r._freezeSettings(),n=(function(l,c,d,p){return new MR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,P0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new i2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this._byteString=t}static fromBase64String(t){try{return new En(Ke.fromBase64String(t))}catch(n){throw new it(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new En(Ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yl(t,En._jsonSchema))return En.fromBase64String(t.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:Ae("string",En._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new it(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new it(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new it(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(t){if(Yl(t,di._jsonSchema))return new di(t.latitude,t.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Ae("string",di._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yl(t,mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mi(t.vectorValues);throw new it(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Ae("string",mi._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=/^__.*__$/;class f2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms):new $l(t,this.data,n,this.fieldTransforms)}}class k0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function U0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ac:r})}}class hp{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new hp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ch(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(U0(this.Ac)&&h2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class d2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Rh(t)}Cc(t,n,s,l=!1){return new hp({Ac:t,methodName:n,Dc:s,path:Ye.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nu(r){const t=r._freezeSettings(),n=Rh(r._databaseId);return new d2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function Oh(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);dp("Data must be an object, but it was:",d,s);const p=B0(s,d);let g,y;if(c.merge)g=new Tn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const I=bm(t,w,n);if(!d.contains(I))throw new it(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);j0(T,I)||T.push(I)}g=new Tn(T),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new f2(new an(p),g,y)}class Vh extends Nh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vh}}class fp extends Nh{_toFieldTransform(t){return new sI(t.path,new zl)}isEqual(t){return t instanceof fp}}function L0(r,t,n,s){const l=r.Cc(1,t,n);dp("Data must be an object, but it was:",l,s);const c=[],d=an.empty();$r(s,((g,y)=>{const T=mp(t,g,n);y=ze(y);const w=l.yc(T);if(y instanceof Vh)c.push(T);else{const I=iu(y,w);I!=null&&(c.push(T),d.set(T,I))}}));const p=new Tn(c);return new k0(d,p,l.fieldTransforms)}function z0(r,t,n,s,l,c){const d=r.Cc(1,t,n),p=[bm(t,s,n)],g=[l];if(c.length%2!=0)throw new it(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(bm(t,c[I])),g.push(c[I+1]);const y=[],T=an.empty();for(let I=p.length-1;I>=0;--I)if(!j0(y,p[I])){const q=p[I];let F=g[I];F=ze(F);const tt=d.yc(q);if(F instanceof Vh)y.push(q);else{const Z=iu(F,tt);Z!=null&&(y.push(q),T.set(q,Z))}}const w=new Tn(y);return new k0(T,w,d.fieldTransforms)}function m2(r,t,n,s=!1){return iu(n,r.Cc(s?4:3,t))}function iu(r,t){if(q0(r=ze(r)))return dp("Unsupported field value:",t,r),B0(r,t);if(r instanceof Nh)return(function(s,l){if(!U0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=iu(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=ze(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ee.fromDate(s);return{timestampValue:sh(l.serializer,c)}}if(s instanceof ee){const c=new ee(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sh(l.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof En)return{bytesValue:i0(l.serializer,s._byteString)};if(s instanceof me){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof mi)return(function(d,p){return{mapValue:{fields:{[NT]:{stringValue:OT},[eh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Qm(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${yh(s)}`)})(r,t)}function B0(r,t){const n={};return wT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(r,((s,l)=>{const c=iu(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function q0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ee||r instanceof di||r instanceof En||r instanceof me||r instanceof Nh||r instanceof mi)}function dp(r,t,n){if(!q0(n)||!AT(n)){const s=yh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function bm(r,t,n){if((t=ze(t))instanceof eu)return t._internalPath;if(typeof t=="string")return mp(r,t);throw ch("Field path arguments must be of type string or ",r,!1,void 0,n)}const p2=new RegExp("[~\\*/\\[\\]]");function mp(r,t,n){if(t.search(p2)>=0)throw ch(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new eu(...t.split("."))._internalPath}catch{throw ch(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ch(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new it(Q.INVALID_ARGUMENT,p+r+g)}function j0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new g2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g2 extends hh{data(){return super.data()}}function pp(r,t){return typeof t=="string"?mp(r,t):t instanceof eu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gp{}class y2 extends gp{}function _2(r,t,...n){let s=[];t instanceof gp&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof yp)).length,p=c.filter((g=>g instanceof Mh)).length;if(d>1||d>0&&p>0)throw new it(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Mh extends y2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Mh(t,n,s)}_apply(t){const n=this._parse(t);return G0(t._query,n),new Qs(t.firestore,t.converter,mm(t._query,n))}_parse(t){const n=nu(t.firestore);return(function(c,d,p,g,y,T,w){let I;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new it(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){dE(w,T);const F=[];for(const tt of w)F.push(fE(g,c,tt));I={arrayValue:{values:F}}}else I=fE(g,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||dE(w,T),I=m2(p,d,w,T==="in"||T==="not-in");return Te.create(y,T,I)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function v2(r,t,n){const s=t,l=pp("where",r);return Mh._create(l,s,n)}class yp extends gp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new yp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)G0(d,g),d=mm(d,g)})(t._query,n),new Qs(t.firestore,t.converter,mm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function fE(r,t,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new it(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(t)&&n.indexOf("/")!==-1)throw new it(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Zt.fromString(n));if(!ct.isDocumentKey(s))throw new it(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cv(r,new ct(s))}if(n instanceof me)return Cv(r,n._key);throw new it(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function dE(r,t){if(!Array.isArray(r)||r.length===0)throw new it(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function G0(r,t){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new it(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new it(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class F0{convertValue(t,n="none"){switch(Qr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return $r(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[eh].arrayValue?.values?.map((s=>de(s.doubleValue)));return new mi(n)}convertGeoPoint(t){return new di(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=vh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(kl(t));default:return null}}convertTimestamp(t){const n=Gr(t);return new ee(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Zt.fromString(t);Ut(c0(s),9688,{name:t});const l=new Ul(s.get(1),s.get(3)),c=new ct(s.popFirst(5));return l.isEqual(n)||Xi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class E2 extends F0{constructor(t){super(),this.firestore=t}convertBytes(t){return new En(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}class Fa{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qr extends hh{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(pp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=qr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qr._jsonSchemaVersion="firestore/documentSnapshot/1.0",qr._jsonSchema={type:Ae("string",qr._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Gc extends qr{data(t={}){return super.data(t)}}class Ls{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Fa(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Gc(this._firestore,this._userDataWriter,s.key,s,new Fa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Gc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Fa(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Gc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Fa(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:T2(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ls._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function T2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:r})}}Ls._jsonSchemaVersion="firestore/querySnapshot/1.0",Ls._jsonSchema={type:Ae("string",Ls._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class xh extends F0{constructor(t){super(),this.firestore=t}convertBytes(t){return new En(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function ru(r){r=Gn(r,Qs);const t=Gn(r.firestore,Xr),n=tu(t),s=new xh(t);return H0(r._query),o2(n,r._query).then((l=>new Ls(t,s,r,l)))}function Q0(r,t,n){r=Gn(r,me);const s=Gn(r.firestore,Xr),l=Ph(r.converter,t,n);return _p(s,[Oh(nu(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Ue.none())])}function A2(r,t){const n=Gn(r.firestore,Xr),s=Le(r),l=Ph(r.converter,t);return _p(n,[Oh(nu(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Ue.exists(!1))]).then((()=>s))}function Vl(r,...t){r=ze(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||hE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof me)d=Gn(r.firestore,Xr),p=Fm(r._key.path),c={next:g=>{t[s]&&t[s](S2(d,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Gn(r,Qs);d=Gn(g.firestore,Xr),p=g._query;const y=new xh(d);c={next:T=>{t[s]&&t[s](new Ls(d,y,g,T))},error:t[s+1],complete:t[s+2]},H0(r._query)}return(function(y,T,w,I){const q=new M0(I),F=new w0(T,q,w);return y.asyncQueue.enqueueAndForget((async()=>A0(await wm(y),F))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>S0(await wm(y),F)))}})(tu(d),p,l,c)}function _p(r,t){return(function(s,l){const c=new Fi;return s.asyncQueue.enqueueAndForget((async()=>QC(await s2(s),l,c))),c.promise})(tu(r),t)}function S2(r,t,n){const s=n.docs.get(t._key),l=new xh(r);return new qr(r,l,t._key,s,new Fa(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nu(t)}set(t,n,s){this._verifyNotCommitted();const l=Pr(t,this._firestore),c=Ph(l.converter,n,s),d=Oh(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,Ue.none())),this}update(t,n,s,...l){this._verifyNotCommitted();const c=Pr(t,this._firestore);let d;return d=typeof(n=ze(n))=="string"||n instanceof eu?z0(this._dataReader,"WriteBatch.update",c._key,n,s,l):L0(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Ue.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Pr(t,this._firestore);return this._mutations=this._mutations.concat(new wh(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pr(r,t){if((r=ze(r)).firestore!==t)throw new it(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=nu(t)}get(t){const n=Pr(t,this._firestore),s=new E2(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return dt(24041);const c=l[0];if(c.isFoundDocument())return new hh(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new hh(this._firestore,s,n._key,null,n.converter);throw dt(18433,{doc:c})}))}set(t,n,s){const l=Pr(t,this._firestore),c=Ph(l.converter,n,s),d=Oh(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,s);return this._transaction.set(l._key,d),this}update(t,n,s,...l){const c=Pr(t,this._firestore);let d;return d=typeof(n=ze(n))=="string"||n instanceof eu?z0(this._dataReader,"Transaction.update",c._key,n,s,l):L0(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(t){const n=Pr(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends R2{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Pr(t,this._firestore),s=new xh(this._firestore);return super.get(t).then((l=>new qr(this._firestore,s,n._key,l._document,new Fa(!1,!1),n.converter)))}}function vp(r,t,n){r=Gn(r,Xr);const s={...w2,...n};return(function(c){if(c.maxAttempts<1)throw new it(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,d,p){const g=new Fi;return c.asyncQueue.enqueueAndForget((async()=>{const y=await a2(c);new n2(c.asyncQueue,y,p,d,g).ju()})),g.promise})(tu(r),(l=>t(new I2(r,l))),s)}function pi(){return new fp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(r){return tu(r=Gn(r,Xr)),new b2(r,(t=>_p(r,t)))}(function(t,n=!0){(function(l){oo=l})(so),Za(new Bs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Xr(new mR(s.getProvider("auth-internal")),new yR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new it(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ur(pv,gv,t),Ur(pv,gv,"esm2020")})();const D2={apiKey:"AIzaSyBewBUk6Oj4PjB6rVr8iVfZ6Zcyqm7CbXs",authDomain:"uno-game-e3329.firebaseapp.com",projectId:"uno-game-e3329",storageBucket:"uno-game-e3329.appspot.com",messagingSenderId:"793495202186",appId:"1:793495202186:web:705f97f5e200bf41120073",measurementId:"G-6PuJ7DGC39"},Y0=OE(D2),Zi=cR(Y0),Qt=u2(Y0);async function Ys(){Zi.currentUser||await K1(Zi)}async function N2(r){await Ys();const t=Zi.currentUser.uid,n=Math.random().toString(36).slice(2,8).toUpperCase(),s=await A2(Jr(Qt,"rooms"),{code:n,hostUid:t,status:"lobby",createdAt:pi()});return await Q0(Le(Qt,"rooms",s.id,"players",t),{displayName:r,joinedAt:pi(),isReady:!1,isHost:!0,handCount:0}),{roomId:s.id,code:n}}async function O2(r,t){await Ys();const n=Zi.currentUser.uid,s=_2(Jr(Qt,"rooms"),v2("code","==",r)),l=await ru(s);if(l.empty)throw new Error("Room not found");const c=l.docs[0].id;return await Q0(Le(Qt,"rooms",c,"players",n),{displayName:t,joinedAt:pi(),isReady:!1,isHost:!1,handCount:0},{merge:!0}),{roomId:c}}function V2(r,t,n){const s=Vl(Le(Qt,"rooms",r),c=>t({id:c.id,...c.data()})),l=Vl(Jr(Qt,"rooms",r,"players"),c=>n(c.docs.map(d=>({id:d.id,...d.data()}))));return()=>{s(),l()}}function M2({onEnterRoom:r}){const[t,n]=Qe.useState("Player"),[s,l]=Qe.useState(null),[c,d]=Qe.useState(""),[p,g]=Qe.useState(null),[y,T]=Qe.useState([]);Qe.useEffect(()=>{Ys()},[]),Qe.useEffect(()=>{if(!s)return;const q=V2(s,g,T);return()=>q()},[s]);async function w(){const{roomId:q,code:F}=await N2(t||"Player");l(q),r(q,!0),console.log("Invite code:",F)}async function I(){if(!c.trim())return;const{roomId:q}=await O2(c.trim().toUpperCase(),t||"Player");l(q),r(q,!1)}return rt.jsxs("div",{className:"p-3 rounded border border-slate-300 mb-4",children:[rt.jsxs("div",{className:"mb-2",children:[rt.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),rt.jsx("input",{value:t,onChange:q=>n(q.target.value),className:"border px-2 py-1 rounded w-full"})]}),rt.jsxs("div",{className:"flex gap-2",children:[rt.jsx("button",{onClick:w,className:"px-3 py-2 rounded bg-emerald-600 text-white",children:"Create room"}),rt.jsx("input",{value:c,onChange:q=>d(q.target.value),placeholder:"Enter code",className:"border px-2 py-1 rounded"}),rt.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Join"})]}),p&&rt.jsxs("div",{className:"mt-3 text-sm",children:[rt.jsxs("div",{children:[rt.jsx("b",{children:"Room"})," ",s]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Code"})," ",p.code]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Status"})," ",p.status]}),rt.jsx("div",{className:"mt-1",children:rt.jsx("b",{children:"Players"})}),rt.jsx("ul",{className:"list-disc ml-6",children:y.map(q=>rt.jsxs("li",{children:[q.displayName,q.isHost?" (host)":""]},q.id))})]})]})}function P2(r){return r.kind==="number"?`${r.color}_${r.value}.png`:r.kind==="action"?`${r.color}_${r.action}.png`:r.action==="wildDraw4"?"wildDraw4.png":"wild.png"}function mE(r){return r.kind==="number"?`${r.color} ${r.value}`:r.kind==="action"?`${r.color} ${r.action}`:r.action==="wildDraw4"?"+4":"wild"}function pE({card:r,onPlay:t,size:n="md"}){const[s,l]=Qe.useState(!1),c=`/UNO-WEB3/cards/${P2(r)}`,d=n==="lg"?{w:96,h:144}:n==="sm"?{w:48,h:72}:{w:64,h:96};return rt.jsx("button",{onClick:()=>t?.(r),title:JSON.stringify(r),className:"m-1 p-0 rounded-lg border border-slate-400 overflow-hidden bg-white hover:shadow transition disabled:opacity-100",style:{width:d.w,height:d.h,cursor:t?"pointer":"default"},disabled:!t,children:s?rt.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs px-1",children:mE(r)}):rt.jsx("img",{src:c,alt:mE(r),className:"w-full h-full object-contain",onError:()=>l(!0)})})}const gE=["red","yellow","green","blue"];function x2(){const r=[];for(const t of gE){r.push({kind:"number",color:t,value:0});for(let n=1;n<=9;n++)r.push({kind:"number",color:t,value:n}),r.push({kind:"number",color:t,value:n})}for(const t of gE)for(let n=0;n<2;n++)r.push({kind:"action",color:t,action:"skip"}),r.push({kind:"action",color:t,action:"reverse"}),r.push({kind:"action",color:t,action:"draw2",drawAmount:2});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wild"});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wildDraw4",drawAmount:4});return r}function k2(r){for(let t=r.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[r[t],r[n]]=[r[n],r[t]]}return r}function Rm(r,t){if(t.kind==="wild")return!0;if(r.kind==="wild"){const n=r.chosenColor;return n?t.color===n:!0}return t.kind==="number"&&r.kind==="number"?t.color===r.color||t.value===r.value:t.kind==="action"&&r.kind==="action"?t.color===r.color||t.action===r.action:t.color===r.color}function U2(r){return r.kind==="action"&&r.action==="skip"}function L2(r){return r.kind==="action"&&r.action==="reverse"}function yE(r){return r.kind==="action"&&(r.action==="draw2"||r.drawAmount===2)}function _E(r){return r.kind==="wild"&&(r.action==="wildDraw4"||r.drawAmount===4)}function z2(r,t){return r.kind!==t.kind?!1:r.kind==="number"&&t.kind==="number"?r.color===t.color&&r.value===t.value:r.kind==="action"&&t.kind==="action"?r.color===t.color&&r.action===t.action:r.kind==="wild"&&t.kind==="wild"?r.action===t.action:!1}function B2(r,t){const n=Vl(Le(Qt,"rooms",r),d=>t.onRoom({id:d.id,...d.data()})),s=Vl(Jr(Qt,"rooms",r,"players"),d=>t.onPlayers(d.docs.map(p=>({id:p.id,...p.data()})))),l=Zi.currentUser?.uid,c=l?Vl(Le(Qt,"rooms",r,"hands",l),d=>t.onMyHand(d.data()?.cards??[])):()=>{};return()=>{n(),s(),c()}}async function vE(r){await Ys();const n=(await ru(Jr(Qt,"rooms",r,"players"))).docs.map(p=>p.id);if(n.length<2)throw new Error("Need at least 2 players");const s=k2(x2()),l={};for(const p of n)l[p]=s.splice(0,7);let c=s.pop();for(;c.kind==="wild";)s.unshift(c),c=s.pop();const d=C2(Qt);d.set(Le(Qt,"rooms",r),{status:"playing",currentTurn:n[0],direction:1,topCard:c,drawPile:s,discardPile:[c],pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,winnerUid:null,finishedAt:null,updatedAt:pi()},{merge:!0});for(const p of n)d.set(Le(Qt,"rooms",r,"hands",p),{cards:l[p]}),d.set(Le(Qt,"rooms",r,"players",p),{handCount:l[p].length},{merge:!0});await d.commit()}function Qa(r,t,n){return(t+n+r.length)%r.length}async function EE(r,t){await Ys();const n=Zi.currentUser.uid,s=Le(Qt,"rooms",r),l=Le(Qt,"rooms",r,"hands",n);await vp(Qt,async c=>{const d=await c.get(s),p=await c.get(l);if(!d.exists())throw new Error("Room missing");const g=d.data(),y=p.data()?.cards??[];if(g.status!=="playing")throw new Error("Game not started");if(g.currentTurn!==n)throw new Error("Not your turn");const w=(await ru(Jr(Qt,"rooms",r,"players"))).docs.map(P=>P.id);let I=g.direction??1;const q=w.indexOf(n),F=Qa(w,q,I),tt=[...g.drawPile??[]],Z=[...g.discardPile??[]],pt=g.pendingDraw??0,lt=g.pendingType??null,ot=g.chainValue??null,Lt=g.chainPlayer??null;if(pt>0){if(!(lt==="draw2"&&yE(t)||lt==="draw4"&&_E(t)))throw new Error(`You must draw ${pt} or stack another ${lt==="draw2"?"+2":"+4"}`)}else if(ot!==null){if(Lt!==n)throw new Error("Other player must end their chain");if(!(t.kind==="number"&&t.value===ot))throw new Error(`You can only play another ${ot} or end your turn`)}else if(!Rm(g.topCard,t))throw new Error("Illegal play");const vt=y.findIndex(P=>z2(P,t));if(vt<0)throw new Error("Card not in hand");if(y.splice(vt,1),Z.push(t),y.length===0){c.set(l,{cards:[]},{merge:!0}),c.set(Le(Qt,"rooms",r,"players",n),{handCount:0},{merge:!0}),c.set(s,{topCard:t,discardPile:Z,status:"finished",winnerUid:n,pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,finishedAt:pi(),updatedAt:pi()},{merge:!0});return}let gt=F,D=pt,S=lt,R=null,V=null;if(pt>0)lt==="draw2"&&(D+=2),lt==="draw4"&&(D+=4),gt=F;else if(ot!==null)y.some(C=>C.kind==="number"&&C.value===ot)?(gt=q,R=ot,V=n):gt=F;else if(U2(t))gt=Qa(w,F,I);else if(L2(t))I=-I,gt=w.length===2?Qa(w,F,I):Qa(w,q,I);else if(yE(t))D=2,S="draw2",gt=F;else if(_E(t))D=4,S="draw4",gt=F;else if(t.kind==="wild")gt=F;else if(t.kind==="number"){const P=t.value;y.some(pe=>pe.kind==="number"&&pe.value===P)?(gt=q,R=P,V=n):gt=F}const M=w[gt];c.set(l,{cards:y},{merge:!0}),c.set(Le(Qt,"rooms",r,"players",n),{handCount:y.length},{merge:!0}),c.set(s,{topCard:t,discardPile:Z,drawPile:tt,currentTurn:M,direction:I,pendingDraw:D,pendingType:S,chainValue:R,chainPlayer:V,updatedAt:pi()},{merge:!0})})}async function q2(r){await Ys();const t=Zi.currentUser.uid,n=Le(Qt,"rooms",r),s=Le(Qt,"rooms",r,"hands",t);await vp(Qt,async l=>{const c=await l.get(n),d=await l.get(s);if(!c.exists())throw new Error("Room missing");const p=c.data(),g=d.data()?.cards??[];if(p.currentTurn!==t)throw new Error("Not your turn");const y=[...p.drawPile??[]],w=(await ru(Jr(Qt,"rooms",r,"players"))).docs.map(Z=>Z.id),I=p.direction??1,q=w.indexOf(t),F=w[Qa(w,q,I)],tt=p.pendingDraw??0;if(tt>0){for(let Z=0;Z<tt;Z++){if(!y.length)throw new Error("No cards to draw");g.push(y.pop())}l.set(s,{cards:g},{merge:!0}),l.set(Le(Qt,"rooms",r,"players",t),{handCount:g.length},{merge:!0}),l.set(n,{drawPile:y,currentTurn:F,pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0});return}if(!y.length)throw new Error("No cards to draw");g.push(y.pop()),l.set(s,{cards:g},{merge:!0}),l.set(Le(Qt,"rooms",r,"players",t),{handCount:g.length},{merge:!0}),l.set(n,{drawPile:y,currentTurn:F,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0})})}async function j2(r){await Ys();const t=Zi.currentUser.uid,n=Le(Qt,"rooms",r);await vp(Qt,async s=>{const l=await s.get(n);if(!l.exists())throw new Error("Room missing");const c=l.data();if(c.currentTurn!==t)throw new Error("Not your turn");if(c.chainPlayer!==t||c.chainValue===null)throw new Error("You have nothing to end");const p=(await ru(Jr(Qt,"rooms",r,"players"))).docs.map(w=>w.id),g=c.direction??1,y=p.indexOf(t),T=p[Qa(p,y,g)];s.set(n,{currentTurn:T,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0})})}function H2({roomId:r,isHost:t}){const[n,s]=Qe.useState(null),[l,c]=Qe.useState([]),[d,p]=Qe.useState([]),[g,y]=Qe.useState(null);Qe.useEffect(()=>{const D=B2(r,{onRoom:s,onPlayers:c,onMyHand:p});return()=>D()},[r]);const T=n?.topCard??null,w=Zi.currentUser?.uid??null,I=n?.currentTurn===w&&n?.status==="playing",q=t||n?.hostUid===w||l.length>0&&l[0]?.id===w,F=n?.pendingType??null,tt=n?.chainPlayer===w&&n?.chainValue!==null,Z=Qe.useMemo(()=>!!T&&d.some(D=>Rm(T,D)),[d,T]);if(!n)return rt.jsx("div",{className:"p-6",children:"Loading room…"});const pt=n?.winnerUid?l.find(D=>D.id===n.winnerUid)?.displayName??n.winnerUid:null,lt=T&&T.kind==="wild"?T.chosenColor??null:null,ot=async D=>{const S=g;if(!S)return;const R={...S.card,chosenColor:D};try{await EE(r,R)}catch(V){alert(V.message??String(V))}finally{y(null)}},Lt=D=>F==="draw2"?D.kind==="action"&&D.action==="draw2":F==="draw4"?D.kind==="wild"&&D.action==="wildDraw4":!1,vt=D=>tt&&D.kind==="number"&&D.value===n?.chainValue,gt=n?.pendingDraw?{n:n.pendingDraw,type:n.pendingType}:null;return rt.jsxs("div",{className:"p-6 space-y-3",children:[rt.jsx("h1",{className:"text-3xl font-extrabold",children:"UNO (Online)"}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Room:"})," ",r]}),rt.jsxs("div",{className:"flex items-center gap-2",children:[rt.jsxs("div",{children:[rt.jsx("b",{children:"Code:"})," ",rt.jsx("code",{children:n.code??"—"})]}),n.code&&rt.jsx("button",{onClick:()=>navigator.clipboard.writeText(n.code).catch(()=>{}),className:"px-2 py-1 text-sm rounded border",children:"Copy"})]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Status:"})," ",n.status]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Turn:"})," ",n.status==="finished"?"—":I?"You":n.currentTurn??"—"]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Players:"})," ",l.map(D=>D.displayName).join(", ")]}),(n.status==="lobby"||n.status==="finished")&&rt.jsx("div",{className:"mt-2",children:q?rt.jsx("button",{className:"px-4 py-2 rounded bg-emerald-600 text-white disabled:opacity-50",onClick:()=>vE(r),disabled:l.length<2,title:l.length<2?"Need at least 2 players":"Start game",children:"Start game"}):rt.jsx("div",{children:"Waiting for host to start…"})}),n.status==="playing"&&rt.jsxs(rt.Fragment,{children:[rt.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[rt.jsx("div",{className:"text-sm font-semibold",children:"Top card:"}),T&&rt.jsx(pE,{card:T,size:"lg"}),lt&&rt.jsxs("div",{className:"ml-2 px-2 py-1 rounded text-sm font-semibold border",title:"Current color chosen for wild",style:{background:lt==="red"?"#fee2e2":lt==="yellow"?"#fef9c3":lt==="green"?"#dcfce7":"#dbeafe"},children:["Current color: ",lt]}),gt&&rt.jsxs("div",{className:"ml-2 px-2 py-1 rounded text-sm font-semibold border",children:[gt.type==="draw4"?"+4":"+2"," stack: draw ",gt.n]})]}),rt.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[rt.jsx("button",{onClick:async()=>{try{await q2(r)}catch(D){alert(D.message??String(D))}},disabled:!I,className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50",title:gt?`Draw ${gt.n} and pass`:Z?"You already have a playable card":"Draw one",children:gt?`Draw ${gt.n}`:"Draw"}),tt&&rt.jsx("button",{onClick:async()=>{try{await j2(r)}catch(D){alert(D.message??String(D))}},className:"px-4 py-2 rounded bg-gray-700 text-white",title:"Finish your number chain and pass the turn",children:"End turn"})]}),rt.jsxs("div",{className:"mt-4",children:[rt.jsxs("h3",{className:"font-semibold mb-1",children:["Your hand (",d.length,")"]}),g&&rt.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[rt.jsx("span",{className:"text-sm",children:"Pick color:"}),rt.jsx("button",{type:"button",onClick:()=>ot("red"),className:"px-3 py-1 rounded border",style:{background:"#ef4444",color:"white"},children:"red"}),rt.jsx("button",{type:"button",onClick:()=>ot("yellow"),className:"px-3 py-1 rounded border",style:{background:"#eab308"},children:"yellow"}),rt.jsx("button",{type:"button",onClick:()=>ot("green"),className:"px-3 py-1 rounded border",style:{background:"#22c55e",color:"white"},children:"green"}),rt.jsx("button",{type:"button",onClick:()=>ot("blue"),className:"px-3 py-1 rounded border",style:{background:"#3b82f6",color:"white"},children:"blue"}),rt.jsx("button",{type:"button",onClick:()=>y(null),className:"px-2 py-1 rounded border",title:"Cancel",children:"Cancel"})]}),rt.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((D,S)=>{const R=!!T&&Rm(T,D),V=I&&(F?Lt(D):R||vt(D));return rt.jsxs("button",{type:"button",onClick:async()=>{if(V){if(D.kind==="wild"&&!D.chosenColor){y({index:S,card:D});return}try{await EE(r,D)}catch(M){alert(M.message??String(M))}}},disabled:!V,className:["relative inline-block p-0 border-0 bg-transparent",V?"cursor-pointer":"opacity-60 cursor-not-allowed"].join(" "),"aria-disabled":!V,title:I?F?F==="draw4"?"Only +4 can be played (or Draw)":"Only +2 can be played (or Draw)":void 0:"Not your turn",children:[rt.jsx(pE,{card:D,size:"md"}),rt.jsx("span",{className:"absolute inset-0"})]},S)})})]})]}),n.status==="finished"&&rt.jsxs("div",{className:"mt-4 p-4 rounded-xl border bg-white/70 backdrop-blur",children:[rt.jsxs("div",{className:"text-xl font-bold mb-1",children:["🎉 ",pt??"A player"," won!"]}),rt.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Game over",lt?` — final color: ${lt}`:"","."]}),q?rt.jsx("button",{className:"px-4 py-2 rounded bg-emerald-600 text-white",onClick:()=>vE(r),children:"Start new game"}):rt.jsx("div",{children:"Waiting for host to start a new game…"})]})]})}function G2(){const[r,t]=Qe.useState(null),[n,s]=Qe.useState(!1);return r?rt.jsx(H2,{roomId:r,isHost:n}):rt.jsx(M2,{onEnterRoom:(l,c)=>{t(l),s(c)}})}IS.createRoot(document.getElementById("root")).render(rt.jsx(Qe.StrictMode,{children:rt.jsx(G2,{})}));
