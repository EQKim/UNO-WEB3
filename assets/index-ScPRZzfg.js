(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Nd={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function uS(){if(D_)return pl;D_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return pl.Fragment=t,pl.jsx=n,pl.jsxs=n,pl}var N_;function cS(){return N_||(N_=1,Nd.exports=uS()),Nd.exports}var dt=cS(),Od={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function hS(){if(O_)return St;O_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,it={};function Z(D,X,et){this.props=D,this.context=X,this.refs=it,this.updater=et||q}Z.prototype.isReactComponent={},Z.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},Z.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Tt(){}Tt.prototype=Z.prototype;function pt(D,X,et){this.props=D,this.context=X,this.refs=it,this.updater=et||q}var ct=pt.prototype=new Tt;ct.constructor=pt,$(ct,Z.prototype),ct.isPureReactComponent=!0;var jt=Array.isArray,At={H:null,A:null,T:null,S:null,V:null},zt=Object.prototype.hasOwnProperty;function M(D,X,et,J,ut,wt){return et=wt.ref,{$$typeof:r,type:D,key:X,ref:et!==void 0?et:null,props:wt}}function S(D,X){return M(D.type,X,void 0,void 0,void 0,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(et){return X[et]})}var V=/\/+/g;function U(D,X){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):X.toString(36)}function w(){}function Ue(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(w,w):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function se(D,X,et,J,ut){var wt=typeof D;(wt==="undefined"||wt==="boolean")&&(D=null);var _t=!1;if(D===null)_t=!0;else switch(wt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(D.$$typeof){case r:case t:_t=!0;break;case T:return _t=D._init,se(_t(D._payload),X,et,J,ut)}}if(_t)return ut=ut(D),_t=J===""?"."+U(D,0):J,jt(ut)?(et="",_t!=null&&(et=_t.replace(V,"$&/")+"/"),se(ut,X,et,"",function(Fn){return Fn})):ut!=null&&(R(ut)&&(ut=S(ut,et+(ut.key==null||D&&D.key===ut.key?"":(""+ut.key).replace(V,"$&/")+"/")+_t)),X.push(ut)),1;_t=0;var Ce=J===""?".":J+":";if(jt(D))for(var Zt=0;Zt<D.length;Zt++)J=D[Zt],wt=Ce+U(J,Zt),_t+=se(J,X,et,wt,ut);else if(Zt=C(D),typeof Zt=="function")for(D=Zt.call(D),Zt=0;!(J=D.next()).done;)J=J.value,wt=Ce+U(J,Zt++),_t+=se(J,X,et,wt,ut);else if(wt==="object"){if(typeof D.then=="function")return se(Ue(D),X,et,J,ut);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return _t}function H(D,X,et){if(D==null)return D;var J=[],ut=0;return se(D,J,"","",function(wt){return X.call(et,wt,ut++)}),J}function tt(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(et){(D._status===0||D._status===-1)&&(D._status=1,D._result=et)},function(et){(D._status===0||D._status===-1)&&(D._status=2,D._result=et)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var ot=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function kt(){}return St.Children={map:H,forEach:function(D,X,et){H(D,function(){X.apply(this,arguments)},et)},count:function(D){var X=0;return H(D,function(){X++}),X},toArray:function(D){return H(D,function(X){return X})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},St.Component=Z,St.Fragment=n,St.Profiler=l,St.PureComponent=pt,St.StrictMode=s,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=At,St.__COMPILER_RUNTIME={__proto__:null,c:function(D){return At.H.useMemoCache(D)}},St.cache=function(D){return function(){return D.apply(null,arguments)}},St.cloneElement=function(D,X,et){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=$({},D.props),ut=D.key,wt=void 0;if(X!=null)for(_t in X.ref!==void 0&&(wt=void 0),X.key!==void 0&&(ut=""+X.key),X)!zt.call(X,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&X.ref===void 0||(J[_t]=X[_t]);var _t=arguments.length-2;if(_t===1)J.children=et;else if(1<_t){for(var Ce=Array(_t),Zt=0;Zt<_t;Zt++)Ce[Zt]=arguments[Zt+2];J.children=Ce}return M(D.type,ut,void 0,void 0,wt,J)},St.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},St.createElement=function(D,X,et){var J,ut={},wt=null;if(X!=null)for(J in X.key!==void 0&&(wt=""+X.key),X)zt.call(X,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ut[J]=X[J]);var _t=arguments.length-2;if(_t===1)ut.children=et;else if(1<_t){for(var Ce=Array(_t),Zt=0;Zt<_t;Zt++)Ce[Zt]=arguments[Zt+2];ut.children=Ce}if(D&&D.defaultProps)for(J in _t=D.defaultProps,_t)ut[J]===void 0&&(ut[J]=_t[J]);return M(D,wt,void 0,void 0,null,ut)},St.createRef=function(){return{current:null}},St.forwardRef=function(D){return{$$typeof:g,render:D}},St.isValidElement=R,St.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:tt}},St.memo=function(D,X){return{$$typeof:y,type:D,compare:X===void 0?null:X}},St.startTransition=function(D){var X=At.T,et={};At.T=et;try{var J=D(),ut=At.S;ut!==null&&ut(et,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(kt,ot)}catch(wt){ot(wt)}finally{At.T=X}},St.unstable_useCacheRefresh=function(){return At.H.useCacheRefresh()},St.use=function(D){return At.H.use(D)},St.useActionState=function(D,X,et){return At.H.useActionState(D,X,et)},St.useCallback=function(D,X){return At.H.useCallback(D,X)},St.useContext=function(D){return At.H.useContext(D)},St.useDebugValue=function(){},St.useDeferredValue=function(D,X){return At.H.useDeferredValue(D,X)},St.useEffect=function(D,X,et){var J=At.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(D,X)},St.useId=function(){return At.H.useId()},St.useImperativeHandle=function(D,X,et){return At.H.useImperativeHandle(D,X,et)},St.useInsertionEffect=function(D,X){return At.H.useInsertionEffect(D,X)},St.useLayoutEffect=function(D,X){return At.H.useLayoutEffect(D,X)},St.useMemo=function(D,X){return At.H.useMemo(D,X)},St.useOptimistic=function(D,X){return At.H.useOptimistic(D,X)},St.useReducer=function(D,X,et){return At.H.useReducer(D,X,et)},St.useRef=function(D){return At.H.useRef(D)},St.useState=function(D){return At.H.useState(D)},St.useSyncExternalStore=function(D,X,et){return At.H.useSyncExternalStore(D,X,et)},St.useTransition=function(){return At.H.useTransition()},St.version="19.1.1",St}var V_;function Tm(){return V_||(V_=1,Od.exports=hS()),Od.exports}var $e=Tm(),Vd={exports:{}},yl={},Md={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function fS(){return M_||(M_=1,(function(r){function t(H,tt){var ot=H.length;H.push(tt);t:for(;0<ot;){var kt=ot-1>>>1,D=H[kt];if(0<l(D,tt))H[kt]=tt,H[ot]=D,ot=kt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var tt=H[0],ot=H.pop();if(ot!==tt){H[0]=ot;t:for(var kt=0,D=H.length,X=D>>>1;kt<X;){var et=2*(kt+1)-1,J=H[et],ut=et+1,wt=H[ut];if(0>l(J,ot))ut<D&&0>l(wt,J)?(H[kt]=wt,H[ut]=ot,kt=ut):(H[kt]=J,H[et]=ot,kt=et);else if(ut<D&&0>l(wt,ot))H[kt]=wt,H[ut]=ot,kt=ut;else break t}}return tt}function l(H,tt){var ot=H.sortIndex-tt.sortIndex;return ot!==0?ot:H.id-tt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],y=[],T=1,I=null,C=3,q=!1,$=!1,it=!1,Z=!1,Tt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function jt(H){for(var tt=n(y);tt!==null;){if(tt.callback===null)s(y);else if(tt.startTime<=H)s(y),tt.sortIndex=tt.expirationTime,t(p,tt);else break;tt=n(y)}}function At(H){if(it=!1,jt(H),!$)if(n(p)!==null)$=!0,zt||(zt=!0,U());else{var tt=n(y);tt!==null&&se(At,tt.startTime-H)}}var zt=!1,M=-1,S=5,R=-1;function O(){return Z?!0:!(r.unstable_now()-R<S)}function V(){if(Z=!1,zt){var H=r.unstable_now();R=H;var tt=!0;try{t:{$=!1,it&&(it=!1,pt(M),M=-1),q=!0;var ot=C;try{e:{for(jt(H),I=n(p);I!==null&&!(I.expirationTime>H&&O());){var kt=I.callback;if(typeof kt=="function"){I.callback=null,C=I.priorityLevel;var D=kt(I.expirationTime<=H);if(H=r.unstable_now(),typeof D=="function"){I.callback=D,jt(H),tt=!0;break e}I===n(p)&&s(p),jt(H)}else s(p);I=n(p)}if(I!==null)tt=!0;else{var X=n(y);X!==null&&se(At,X.startTime-H),tt=!1}}break t}finally{I=null,C=ot,q=!1}tt=void 0}}finally{tt?U():zt=!1}}}var U;if(typeof ct=="function")U=function(){ct(V)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Ue=w.port2;w.port1.onmessage=V,U=function(){Ue.postMessage(null)}}else U=function(){Tt(V,0)};function se(H,tt){M=Tt(function(){H(r.unstable_now())},tt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(H){switch(C){case 1:case 2:case 3:var tt=3;break;default:tt=C}var ot=C;C=tt;try{return H()}finally{C=ot}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(H,tt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ot=C;C=H;try{return tt()}finally{C=ot}},r.unstable_scheduleCallback=function(H,tt,ot){var kt=r.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?kt+ot:kt):ot=kt,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ot+D,H={id:T++,callback:tt,priorityLevel:H,startTime:ot,expirationTime:D,sortIndex:-1},ot>kt?(H.sortIndex=ot,t(y,H),n(p)===null&&H===n(y)&&(it?(pt(M),M=-1):it=!0,se(At,ot-kt))):(H.sortIndex=D,t(p,H),$||q||($=!0,zt||(zt=!0,U()))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var tt=C;return function(){var ot=C;C=tt;try{return H.apply(this,arguments)}finally{C=ot}}}})(Pd)),Pd}var P_;function dS(){return P_||(P_=1,Md.exports=fS()),Md.exports}var Ud={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function mS(){if(U_)return Ke;U_=1;var r=Tm();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:p,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,T)},Ke.flushSync=function(p){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ke.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ke.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,I=g(T,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:C,fetchPriority:q}):T==="script"&&s.d.X(p,{crossOrigin:I,integrity:C,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ke.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=g(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ke.requestFormReset=function(p){s.d.r(p)},Ke.unstable_batchedUpdates=function(p,y){return p(y)},Ke.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},Ke.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var x_;function gS(){if(x_)return Ud.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ud.exports=mS(),Ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function pS(){if(k_)return yl;k_=1;var r=dS(),t=Tm(),n=gS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),e;if(f===o)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),it=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),pt=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),zt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case Z:return"Profiler";case it:return"StrictMode";case At:return"Suspense";case zt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case pt:return(e._context.displayName||"Context")+".Consumer";case jt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return i=e.displayName||null,i!==null?i:Ue(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return Ue(e(i))}catch{}}return null}var se=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},kt=[],D=-1;function X(e){return{current:e}}function et(e){0>D||(e.current=kt[D],kt[D]=null,D--)}function J(e,i){D++,kt[D]=e.current,e.current=i}var ut=X(null),wt=X(null),_t=X(null),Ce=X(null);function Zt(e,i){switch(J(_t,i),J(wt,e),J(ut,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?i_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=i_(i),e=r_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}et(ut),J(ut,e)}function Fn(){et(ut),et(wt),et(_t)}function Zi(e){e.memoizedState!==null&&J(Ce,e);var i=ut.current,a=r_(i,e.type);i!==a&&(J(wt,e),J(ut,a))}function pi(e){wt.current===e&&(et(ut),et(wt)),Ce.current===e&&(et(Ce),hl._currentValue=ot)}var Yr=Object.prototype.hasOwnProperty,Xr=r.unstable_scheduleCallback,$r=r.unstable_cancelCallback,oo=r.unstable_shouldYield,Jl=r.unstable_requestPaint,Tn=r.unstable_now,Dh=r.unstable_getCurrentPriorityLevel,lo=r.unstable_ImmediatePriority,Gs=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Nh=r.unstable_LowPriority,Fs=r.unstable_IdlePriority,uo=r.log,Wl=r.unstable_setDisableYieldValue,ae=null,Ht=null;function cn(e){if(typeof uo=="function"&&Wl(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(ae,e)}catch{}}var Fe=Math.clz32?Math.clz32:Jr,tu=Math.log,Oh=Math.LN2;function Jr(e){return e>>>=0,e===0?32:31-(tu(e)/Oh|0)|0}var Wr=256,ts=4194304;function xn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qs(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=xn(o):(v&=E,v!==0?h=xn(v):a||(a=E&~e,a!==0&&(h=xn(a))))):(E=o&~f,E!==0?h=xn(E):v!==0?h=xn(v):a||(a=o&~e,a!==0&&(h=xn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function es(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function co(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=Wr;return Wr<<=1,(Wr&4194048)===0&&(Wr=256),e}function fo(){var e=ts;return ts<<=1,(ts&62914560)===0&&(ts=4194304),e}function yi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function _i(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mo(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Fe(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Qn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Qn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Fe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function go(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Fe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ks(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wi(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:S_(e.type))}function eu(e,i){var a=tt.p;try{return tt.p=e,i()}finally{tt.p=a}}var ee=Math.random().toString(36).slice(2),Ae="__reactFiber$"+ee,ge="__reactProps$"+ee,An="__reactContainer$"+ee,po="__reactEvents$"+ee,Vh="__reactListeners$"+ee,tr="__reactHandles$"+ee,nu="__reactResources$"+ee,ns="__reactMarker$"+ee;function er(e){delete e[Ae],delete e[ge],delete e[po],delete e[Vh],delete e[tr]}function vi(e){var i=e[Ae];if(i)return i;for(var a=e.parentNode;a;){if(i=a[An]||a[Ae]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=l_(e);e!==null;){if(a=e[Ae])return a;e=l_(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Ae]||e[An]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Yn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[nu];return i||(i=e[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[ns]=!0}var yo=new Set,Ys={};function kn(e,i){Ei(e,i),Ei(e+"Capture",i)}function Ei(e,i){for(Ys[e]=i,e=0;e<i.length;e++)yo.add(i[e])}var iu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ru={},is={};function su(e){return Yr.call(is,e)?!0:Yr.call(ru,e)?!1:iu.test(e)?is[e]=!0:(ru[e]=!0,!1)}function nr(e,i,a){if(su(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Xn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function xe(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var rs,au;function Ti(e){if(rs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);rs=i&&i[1]||"",au=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rs+e+au}var Xs=!1;function $s(e,i){if(!e||Xs)return"";Xs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{Xs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ti(a):""}function _o(e){switch(e.tag){case 26:case 27:case 5:return Ti(e.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return $s(e.type,!1);case 11:return $s(e.type.render,!1);case 1:return $s(e.type,!0);case 31:return Ti("Activity");default:return""}}function Zs(e){try{var i="";do i+=_o(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Mh(e){var i=vo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Js(e){e._valueTracker||(e._valueTracker=Mh(e))}function Eo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=vo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ph=/[\n"\\]/g;function pe(e){return e.replace(Ph,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hn(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+tn(i)):e.value!==""+tn(i)&&(e.value=""+tn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?ir(e,v,tn(i)):a!=null?ir(e,v,tn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+tn(E):e.removeAttribute("name")}function as(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function ir(e,i,a){i==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ai(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Qt(e,i,a){if(i!=null&&(i=""+tn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+tn(a):""}function os(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(se(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=tn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Sn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ls=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ls.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function To(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&ou(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&ou(e,f,i[f])}function Ao(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(e){return xh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Si=null;function bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bi=null,wi=null;function So(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[ge]||null;t:switch(e=i.stateNode,i.type){case"input":if(hn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ge]||null;if(!h)throw Error(s(90));hn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Eo(o)}break t;case"textarea":Qt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ai(e,!!a.multiple,i,!1)}}}var $n=!1;function lu(e,i,a){if($n)return e(i,a);$n=!0;try{var o=e(i);return o}finally{if($n=!1,(bi!==null||wi!==null)&&(ec(),bi&&(i=bi,e=wi,wi=bi=null,So(i),e)))for(i=0;i<e.length;i++)So(e[i])}}function us(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ge]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(Ln)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){wn=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{wn=!1}var Zn=null,rr=null,Ri=null;function bo(){if(Ri)return Ri;var e,i=rr,a=i.length,o,h="value"in Zn?Zn.value:Zn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ri=h.slice(e,1<o?1-o:void 0)}function Jn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function wo(){return!1}function De(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:wo,this.isPropagationStopped=wo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var Bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ta=De(Bt),hs=T({},Bt,{view:0,detail:0}),uu=De(hs),ea,na,ti,fs=T({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(ea=e.screenX-ti.screenX,na=e.screenY-ti.screenY):na=ea=0,ti=e),ea)},movementY:function(e){return"movementY"in e?e.movementY:na}}),Rn=De(fs),cu=T({},fs,{dataTransfer:0}),kh=De(cu),ds=T({},hs,{relatedTarget:0}),ia=De(ds),Ro=T({},Bt,{animationName:0,elapsedTime:0,pseudoElement:0}),ra=De(Ro),hu=T({},Bt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sa=De(hu),Lh=T({},Bt,{data:0}),Io=De(Lh),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=du[e])?!!i[e]:!1}function gs(){return Co}var mu=T({},hs,{key:function(e){if(e.key){var i=ms[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Jn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(e){return e.type==="keypress"?Jn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aa=De(mu),gu=T({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=De(gu),Ii=T({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),pu=De(Ii),yu=T({},Bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),_u=De(yu),vu=T({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oa=De(vu),en=T({},Bt,{newState:0,oldState:0}),Eu=De(en),Tu=[9,13,27,32],ei=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var m=Ln&&"TextEvent"in window&&!u,_=Ln&&(!ei||u&&8<u&&11>=u),A=" ",x=!1;function j(e,i){switch(e){case"keyup":return Tu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vt=!1;function Se(e,i){switch(e){case"compositionend":return W(i);case"keypress":return i.which!==32?null:(x=!0,A);case"textInput":return e=i.data,e===A&&x?null:e;default:return null}}function Mt(e,i){if(Vt)return e==="compositionend"||!ei&&j(e,i)?(e=bo(),Ri=rr=Zn=null,Vt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ne[e.type]:i==="textarea"}function Ci(e,i,a,o){bi?wi?wi.push(o):wi=[o]:bi=o,i=oc(i,"onChange"),0<i.length&&(a=new ta("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var ke=null,ni=null;function No(e){Jy(e,0)}function Au(e){var i=Yn(e);if(Eo(i))return e}function vg(e,i){if(e==="change")return i}var Eg=!1;if(Ln){var zh;if(Ln){var Bh="oninput"in document;if(!Bh){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),Bh=typeof Tg.oninput=="function"}zh=Bh}else zh=!1;Eg=zh&&(!document.documentMode||9<document.documentMode)}function Ag(){ke&&(ke.detachEvent("onpropertychange",Sg),ni=ke=null)}function Sg(e){if(e.propertyName==="value"&&Au(ni)){var i=[];Ci(i,ni,e,bn(e)),lu(No,i)}}function z0(e,i,a){e==="focusin"?(Ag(),ke=i,ni=a,ke.attachEvent("onpropertychange",Sg)):e==="focusout"&&Ag()}function B0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Au(ni)}function q0(e,i){if(e==="click")return Au(i)}function j0(e,i){if(e==="input"||e==="change")return Au(i)}function H0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var fn=typeof Object.is=="function"?Object.is:H0;function Oo(e,i){if(fn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Yr.call(i,h)||!fn(e[h],i[h]))return!1}return!0}function bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wg(e,i){var a=bg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=bg(a)}}function Rg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Rg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ig(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ss(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ss(e.document)}return i}function qh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var G0=Ln&&"documentMode"in document&&11>=document.documentMode,la=null,jh=null,Vo=null,Hh=!1;function Cg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||la==null||la!==ss(o)||(o=la,"selectionStart"in o&&qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&Oo(Vo,o)||(Vo=o,o=oc(jh,"onSelect"),0<o.length&&(i=new ta("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=la)))}function ps(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ua={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},Gh={},Dg={};Ln&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function ys(e){if(Gh[e])return Gh[e];if(!ua[e])return e;var i=ua[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Dg)return Gh[e]=i[a];return e}var Ng=ys("animationend"),Og=ys("animationiteration"),Vg=ys("animationstart"),F0=ys("transitionrun"),Q0=ys("transitionstart"),K0=ys("transitioncancel"),Mg=ys("transitionend"),Pg=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function zn(e,i){Pg.set(e,i),kn(i,[e])}var Ug=new WeakMap;function In(e,i){if(typeof e=="object"&&e!==null){var a=Ug.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Zs(i)},Ug.set(e,i),i)}return{value:e,source:i,stack:Zs(i)}}var Cn=[],ca=0,Qh=0;function Su(){for(var e=ca,i=Qh=ca=0;i<e;){var a=Cn[i];Cn[i++]=null;var o=Cn[i];Cn[i++]=null;var h=Cn[i];Cn[i++]=null;var f=Cn[i];if(Cn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&xg(a,h,f)}}function bu(e,i,a,o){Cn[ca++]=e,Cn[ca++]=i,Cn[ca++]=a,Cn[ca++]=o,Qh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Kh(e,i,a,o){return bu(e,i,a,o),wu(e)}function ha(e,i){return bu(e,null,null,i),wu(e)}function xg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Fe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function wu(e){if(50<il)throw il=0,td=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var fa={};function Y0(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,i,a,o){return new Y0(e,i,a,o)}function Yh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Di(e,i){var a=e.alternate;return a===null?(a=dn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ru(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")Yh(e)&&(v=1);else if(typeof e=="string")v=$A(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=dn(31,a,i,h),e.elementType=R,e.lanes=f,e;case $:return _s(a.children,h,f,i);case it:v=8,h|=24;break;case Z:return e=dn(12,a,i,h|2),e.elementType=Z,e.lanes=f,e;case At:return e=dn(13,a,i,h),e.elementType=At,e.lanes=f,e;case zt:return e=dn(19,a,i,h),e.elementType=zt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case ct:v=10;break t;case pt:v=9;break t;case jt:v=11;break t;case M:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=dn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function _s(e,i,a,o){return e=dn(7,e,o,i),e.lanes=a,e}function Xh(e,i,a){return e=dn(6,e,null,i),e.lanes=a,e}function $h(e,i,a){return i=dn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var da=[],ma=0,Iu=null,Cu=0,Dn=[],Nn=0,vs=null,Ni=1,Oi="";function Es(e,i){da[ma++]=Cu,da[ma++]=Iu,Iu=e,Cu=i}function Lg(e,i,a){Dn[Nn++]=Ni,Dn[Nn++]=Oi,Dn[Nn++]=vs,vs=e;var o=Ni;e=Oi;var h=32-Fe(o)-1;o&=~(1<<h),a+=1;var f=32-Fe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ni=1<<32-Fe(i)+h|a<<h|o,Oi=f+e}else Ni=1<<f|a<<h|o,Oi=e}function Zh(e){e.return!==null&&(Es(e,1),Lg(e,1,0))}function Jh(e){for(;e===Iu;)Iu=da[--ma],da[ma]=null,Cu=da[--ma],da[ma]=null;for(;e===vs;)vs=Dn[--Nn],Dn[Nn]=null,Oi=Dn[--Nn],Dn[Nn]=null,Ni=Dn[--Nn],Dn[Nn]=null}var nn=null,oe=null,Lt=!1,Ts=null,ii=!1,Wh=Error(s(519));function As(e){var i=Error(s(418,""));throw Uo(In(i,e)),Wh}function zg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ae]=e,i[ge]=o,a){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(a=0;a<sl.length;a++)Ct(sl[a],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),as(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Js(i);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),os(i,o.value,o.defaultValue,o.children),Js(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||n_(i.textContent,a)?(o.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),o.onScroll!=null&&Ct("scroll",i),o.onScrollEnd!=null&&Ct("scrollend",i),o.onClick!=null&&(i.onclick=lc),i=!0):i=!1,i||As(e)}function Bg(e){for(nn=e.return;nn;)switch(nn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:nn=nn.return}}function Mo(e){if(e!==nn)return!1;if(!Lt)return Bg(e),Lt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pd(e.type,e.memoizedProps)),a=!a),a&&oe&&As(e),Bg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){oe=qn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}oe=null}}else i===27?(i=oe,Er(e.type)?(e=Ed,Ed=null,oe=e):oe=i):oe=nn?qn(e.stateNode.nextSibling):null;return!0}function Po(){oe=nn=null,Lt=!1}function qg(){var e=Ts;return e!==null&&(on===null?on=e:on.push.apply(on,e),Ts=null),e}function Uo(e){Ts===null?Ts=[e]:Ts.push(e)}var tf=X(null),Ss=null,Vi=null;function sr(e,i,a){J(tf,i._currentValue),i._currentValue=a}function Mi(e){e._currentValue=tf.current,et(tf)}function ef(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function nf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),ef(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),ef(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function xo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;fn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ce.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hl):e=[hl])}h=h.return}e!==null&&nf(i,e,a,o),i.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!fn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function bs(e){Ss=e,Vi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return jg(Ss,e)}function Nu(e,i){return Ss===null&&bs(e),jg(e,i)}function jg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Vi===null){if(e===null)throw Error(s(308));Vi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Vi=Vi.next=i;return a}var X0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},$0=r.unstable_scheduleCallback,Z0=r.unstable_NormalPriority,we={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rf(){return{controller:new X0,data:new Map,refCount:0}}function ko(e){e.refCount--,e.refCount===0&&$0(Z0,function(){e.controller.abort()})}var Lo=null,sf=0,ga=0,pa=null;function J0(e,i){if(Lo===null){var a=Lo=[];sf=0,ga=od(),pa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return sf++,i.then(Hg,Hg),i}function Hg(){if(--sf===0&&Lo!==null){pa!==null&&(pa.status="fulfilled");var e=Lo;Lo=null,ga=0,pa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function W0(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Gg=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&J0(e,i),Gg!==null&&Gg(e,i)};var ws=X(null);function af(){var e=ws.current;return e!==null?e:Jt.pooledCache}function Ou(e,i){i===null?J(ws,ws.current):J(ws,i.pool)}function Fg(){var e=af();return e===null?null:{parent:we._currentValue,pool:e}}var zo=Error(s(460)),Qg=Error(s(474)),Vu=Error(s(542)),of={then:function(){}};function Kg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Mu(){}function Yg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Mu,Mu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,$g(e),e;default:if(typeof i.status=="string")i.then(Mu,Mu);else{if(e=Jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,$g(e),e}throw Bo=i,zo}}var Bo=null;function Xg(){if(Bo===null)throw Error(s(459));var e=Bo;return Bo=null,e}function $g(e){if(e===zo||e===Vu)throw Error(s(483))}var ar=!1;function lf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function or(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function lr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=wu(e),xg(e,null,a),i}return bu(e,o,i,a),wu(e)}function qo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,go(e,a)}}function cf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var hf=!1;function jo(){if(hf){var e=pa;if(e!==null)throw e}}function Ho(e,i,a,o){hf=!1;var h=e.updateQueue;ar=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Pt&z)===z:(o&z)===z){z!==0&&z===ga&&(hf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var gt=e,ht=E;z=i;var Xt=a;switch(ht.tag){case 1:if(gt=ht.payload,typeof gt=="function"){K=gt.call(Xt,K,z);break t}K=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=ht.payload,z=typeof gt=="function"?gt.call(Xt,K,z):gt,z==null)break t;K=T({},K,z);break t;case 2:ar=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),pr|=v,e.lanes=v,e.memoizedState=K}}function Zg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Jg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Zg(a[e],i)}var ya=X(null),Pu=X(0);function Wg(e,i){e=Bi,J(Pu,e),J(ya,i),Bi=e|i.baseLanes}function ff(){J(Pu,Bi),J(ya,ya.current)}function df(){Bi=Pu.current,et(ya),et(Pu)}var ur=0,bt=null,Kt=null,ye=null,Uu=!1,_a=!1,Rs=!1,xu=0,Go=0,va=null,tA=0;function he(){throw Error(s(321))}function mf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!fn(e[a],i[a]))return!1;return!0}function gf(e,i,a,o,h,f){return ur=f,bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?xp:kp,Rs=!1,f=a(o,h),Rs=!1,_a&&(f=ep(i,a,o,h)),tp(e),f}function tp(e){H.H=ju;var i=Kt!==null&&Kt.next!==null;if(ur=0,ye=Kt=bt=null,Uu=!1,Go=0,va=null,i)throw Error(s(300));e===null||Oe||(e=e.dependencies,e!==null&&Du(e)&&(Oe=!0))}function ep(e,i,a,o){bt=e;var h=0;do{if(_a&&(va=null),Go=0,_a=!1,25<=h)throw Error(s(301));if(h+=1,ye=Kt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=oA,f=i(a,o)}while(_a);return f}function eA(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Fo(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(bt.flags|=1024),i}function pf(){var e=xu!==0;return xu=0,e}function yf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function _f(e){if(Uu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Uu=!1}ur=0,ye=Kt=bt=null,_a=!1,Go=xu=0,va=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?bt.memoizedState=ye=e:ye=ye.next=e,ye}function _e(){if(Kt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=ye===null?bt.memoizedState:ye.next;if(i!==null)ye=i,Kt=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},ye===null?bt.memoizedState=ye=e:ye=ye.next=e}return ye}function vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(e){var i=Go;return Go+=1,va===null&&(va=[]),e=Yg(va,e,i),i=bt,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?xp:kp),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fo(e);if(e.$$typeof===ct)return Qe(e)}throw Error(s(438,String(e)))}function Ef(e){var i=null,a=bt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=vf(),bt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function Pi(e,i){return typeof i=="function"?i(e):i}function Lu(e){var i=_e();return Tf(i,Kt,e)}function Tf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,b=null,L=i,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(Pt&K)===K:(ur&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===ga&&(G=!0);else if((ur&z)===z){L=L.next,z===ga&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,bt.lanes|=z,pr|=z;K=L.action,Rs&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,bt.lanes|=K,pr|=K;L=L.next}while(L!==null&&L!==i);if(b===null?v=f:b.next=E,!fn(f,e.memoizedState)&&(Oe=!0,G&&(a=pa,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Af(e){var i=_e(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);fn(f,i.memoizedState)||(Oe=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function np(e,i,a){var o=bt,h=_e(),f=Lt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!fn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Oe=!0),h=h.queue;var E=sp.bind(null,o,h,e);if(Qo(2048,8,E,[e]),h.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(o.flags|=2048,Ea(9,zu(),rp.bind(null,o,h,a,i),null),Jt===null)throw Error(s(349));f||(ur&124)!==0||ip(o,i,a)}return a}function ip(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=bt.updateQueue,i===null?(i=vf(),bt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function rp(e,i,a,o){i.value=a,i.getSnapshot=o,ap(i)&&op(e)}function sp(e,i,a){return a(function(){ap(i)&&op(e)})}function ap(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!fn(e,a)}catch{return!0}}function op(e){var i=ha(e,2);i!==null&&_n(i,e,2)}function Sf(e){var i=sn();if(typeof e=="function"){var a=e;if(e=a(),Rs){cn(!0);try{a()}finally{cn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},i}function lp(e,i,a,o){return e.baseState=a,Tf(e,Kt,typeof o=="function"?o:Pi)}function nA(e,i,a,o,h){if(qu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,up(i,f)):(f.next=a.next,i.pending=a.next=f)}}function up(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),cp(e,i,E)}catch(L){bf(e,i,L)}finally{H.T=f}}else try{f=a(h,o),cp(e,i,f)}catch(L){bf(e,i,L)}}function cp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){hp(e,i,o)},function(o){return bf(e,i,o)}):hp(e,i,a)}function hp(e,i,a){i.status="fulfilled",i.value=a,fp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,up(e,a)))}function bf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,fp(i),i=i.next;while(i!==o)}e.action=null}function fp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function dp(e,i){return i}function mp(e,i){if(Lt){var a=Jt.formState;if(a!==null){t:{var o=bt;if(Lt){if(oe){e:{for(var h=oe,f=ii;h.nodeType!==8;){if(!f){h=null;break e}if(h=qn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){oe=qn(h.nextSibling),o=h.data==="F!";break t}}As(o)}o=!1}o&&(i=a[0])}}return a=sn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:i},a.queue=o,a=Mp.bind(null,bt,o),o.dispatch=a,o=Sf(!1),f=Df.bind(null,bt,!1,o.queue),o=sn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=nA.bind(null,bt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function gp(e){var i=_e();return pp(i,Kt,e)}function pp(e,i,a){if(i=Tf(e,i,dp)[0],e=Lu(Pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Fo(i)}catch(v){throw v===zo?Vu:v}else o=i;i=_e();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(bt.flags|=2048,Ea(9,zu(),iA.bind(null,h,a),null)),[o,f,e]}function iA(e,i){e.action=i}function yp(e){var i=_e(),a=Kt;if(a!==null)return pp(i,a,e);_e(),i=i.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Ea(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=bt.updateQueue,i===null&&(i=vf(),bt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function zu(){return{destroy:void 0,resource:void 0}}function _p(){return _e().memoizedState}function Bu(e,i,a,o){var h=sn();o=o===void 0?null:o,bt.flags|=e,h.memoizedState=Ea(1|i,zu(),a,o)}function Qo(e,i,a,o){var h=_e();o=o===void 0?null:o;var f=h.memoizedState.inst;Kt!==null&&o!==null&&mf(o,Kt.memoizedState.deps)?h.memoizedState=Ea(i,f,a,o):(bt.flags|=e,h.memoizedState=Ea(1|i,f,a,o))}function vp(e,i){Bu(8390656,8,e,i)}function Ep(e,i){Qo(2048,8,e,i)}function Tp(e,i){return Qo(4,2,e,i)}function Ap(e,i){return Qo(4,4,e,i)}function Sp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function bp(e,i,a){a=a!=null?a.concat([e]):null,Qo(4,4,Sp.bind(null,i,e),a)}function wf(){}function wp(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&mf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Rp(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&mf(i,o[1]))return o[0];if(o=e(),Rs){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[o,i],o}function Rf(e,i,a){return a===void 0||(ur&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Dy(),bt.lanes|=e,pr|=e,a)}function Ip(e,i,a,o){return fn(a,i)?a:ya.current!==null?(e=Rf(e,a,o),fn(e,i)||(Oe=!0),e):(ur&42)===0?(Oe=!0,e.memoizedState=a):(e=Dy(),bt.lanes|=e,pr|=e,i)}function Cp(e,i,a,o,h){var f=tt.p;tt.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,Df(e,!1,i,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=W0(b,o);Ko(e,i,G,yn(e))}else Ko(e,i,o,yn(e))}catch(K){Ko(e,i,{then:function(){},status:"rejected",reason:K},yn())}finally{tt.p=f,H.T=v}}function rA(){}function If(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Dp(e).queue;Cp(e,h,i,ot,a===null?rA:function(){return Np(e),a(o)})}function Dp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:ot},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Np(e){var i=Dp(e).next.queue;Ko(e,i,{},yn())}function Cf(){return Qe(hl)}function Op(){return _e().memoizedState}function Vp(){return _e().memoizedState}function sA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();e=or(a);var o=lr(i,e,a);o!==null&&(_n(o,i,a),qo(o,i,a)),i={cache:rf()},e.payload=i;return}i=i.return}}function aA(e,i,a){var o=yn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},qu(e)?Pp(i,a):(a=Kh(e,i,a,o),a!==null&&(_n(a,e,o),Up(a,i,o)))}function Mp(e,i,a){var o=yn();Ko(e,i,a,o)}function Ko(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(e))Pp(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,v))return bu(e,i,h,0),Jt===null&&Su(),!1}catch{}finally{}if(a=Kh(e,i,h,o),a!==null)return _n(a,e,o),Up(a,i,o),!0}return!1}function Df(e,i,a,o){if(o={lane:2,revertLane:od(),action:o,hasEagerState:!1,eagerState:null,next:null},qu(e)){if(i)throw Error(s(479))}else i=Kh(e,a,o,2),i!==null&&_n(i,e,2)}function qu(e){var i=e.alternate;return e===bt||i!==null&&i===bt}function Pp(e,i){_a=Uu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Up(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,go(e,a)}}var ju={readContext:Qe,use:ku,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},xp={readContext:Qe,use:ku,useCallback:function(e,i){return sn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:vp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Bu(4194308,4,Sp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Bu(4194308,4,e,i)},useInsertionEffect:function(e,i){Bu(4,2,e,i)},useMemo:function(e,i){var a=sn();i=i===void 0?null:i;var o=e();if(Rs){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=sn();if(a!==void 0){var h=a(i);if(Rs){cn(!0);try{a(i)}finally{cn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=aA.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var i=sn();return e={current:e},i.memoizedState=e},useState:function(e){e=Sf(e);var i=e.queue,a=Mp.bind(null,bt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:wf,useDeferredValue:function(e,i){var a=sn();return Rf(a,e,i)},useTransition:function(){var e=Sf(!1);return e=Cp.bind(null,bt,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=bt,h=sn();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Jt===null)throw Error(s(349));(Pt&124)!==0||ip(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,vp(sp.bind(null,o,f,e),[e]),o.flags|=2048,Ea(9,zu(),rp.bind(null,o,f,a,i),null),a},useId:function(){var e=sn(),i=Jt.identifierPrefix;if(Lt){var a=Oi,o=Ni;a=(o&~(1<<32-Fe(o)-1)).toString(32)+a,i=""+i+"R"+a,a=xu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=tA++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Cf,useFormState:mp,useActionState:mp,useOptimistic:function(e){var i=sn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Df.bind(null,bt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Ef,useCacheRefresh:function(){return sn().memoizedState=sA.bind(null,bt)}},kp={readContext:Qe,use:ku,useCallback:wp,useContext:Qe,useEffect:Ep,useImperativeHandle:bp,useInsertionEffect:Tp,useLayoutEffect:Ap,useMemo:Rp,useReducer:Lu,useRef:_p,useState:function(){return Lu(Pi)},useDebugValue:wf,useDeferredValue:function(e,i){var a=_e();return Ip(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Lu(Pi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:np,useId:Op,useHostTransitionStatus:Cf,useFormState:gp,useActionState:gp,useOptimistic:function(e,i){var a=_e();return lp(a,Kt,e,i)},useMemoCache:Ef,useCacheRefresh:Vp},oA={readContext:Qe,use:ku,useCallback:wp,useContext:Qe,useEffect:Ep,useImperativeHandle:bp,useInsertionEffect:Tp,useLayoutEffect:Ap,useMemo:Rp,useReducer:Af,useRef:_p,useState:function(){return Af(Pi)},useDebugValue:wf,useDeferredValue:function(e,i){var a=_e();return Kt===null?Rf(a,e,i):Ip(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Af(Pi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:np,useId:Op,useHostTransitionStatus:Cf,useFormState:yp,useActionState:yp,useOptimistic:function(e,i){var a=_e();return Kt!==null?lp(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:Vp},Ta=null,Yo=0;function Hu(e){var i=Yo;return Yo+=1,Ta===null&&(Ta=[]),Yg(Ta,e,i)}function Xo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Gu(e,i){throw i.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Lp(e){var i=e._init;return i(e._payload)}function zp(e){function i(P,N){if(e){var k=P.deletions;k===null?(P.deletions=[N],P.flags|=16):k.push(N)}}function a(P,N){if(!e)return null;for(;N!==null;)i(P,N),N=N.sibling;return null}function o(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function h(P,N){return P=Di(P,N),P.index=0,P.sibling=null,P}function f(P,N,k){return P.index=k,e?(k=P.alternate,k!==null?(k=k.index,k<N?(P.flags|=67108866,N):k):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,N,k,F){return N===null||N.tag!==6?(N=Xh(k,P.mode,F),N.return=P,N):(N=h(N,k),N.return=P,N)}function b(P,N,k,F){var st=k.type;return st===$?G(P,N,k.props.children,F,k.key):N!==null&&(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Lp(st)===N.type)?(N=h(N,k.props),Xo(N,k),N.return=P,N):(N=Ru(k.type,k.key,k.props,null,P.mode,F),Xo(N,k),N.return=P,N)}function L(P,N,k,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=$h(k,P.mode,F),N.return=P,N):(N=h(N,k.children||[]),N.return=P,N)}function G(P,N,k,F,st){return N===null||N.tag!==7?(N=_s(k,P.mode,F,st),N.return=P,N):(N=h(N,k),N.return=P,N)}function K(P,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Xh(""+N,P.mode,k),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return k=Ru(N.type,N.key,N.props,null,P.mode,k),Xo(k,N),k.return=P,k;case q:return N=$h(N,P.mode,k),N.return=P,N;case S:var F=N._init;return N=F(N._payload),K(P,N,k)}if(se(N)||U(N))return N=_s(N,P.mode,k,null),N.return=P,N;if(typeof N.then=="function")return K(P,Hu(N),k);if(N.$$typeof===ct)return K(P,Nu(P,N),k);Gu(P,N)}return null}function z(P,N,k,F){var st=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return st!==null?null:E(P,N,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===st?b(P,N,k,F):null;case q:return k.key===st?L(P,N,k,F):null;case S:return st=k._init,k=st(k._payload),z(P,N,k,F)}if(se(k)||U(k))return st!==null?null:G(P,N,k,F,null);if(typeof k.then=="function")return z(P,N,Hu(k),F);if(k.$$typeof===ct)return z(P,N,Nu(P,k),F);Gu(P,k)}return null}function B(P,N,k,F,st){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(k)||null,E(N,P,""+F,st);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return P=P.get(F.key===null?k:F.key)||null,b(N,P,F,st);case q:return P=P.get(F.key===null?k:F.key)||null,L(N,P,F,st);case S:var Rt=F._init;return F=Rt(F._payload),B(P,N,k,F,st)}if(se(F)||U(F))return P=P.get(k)||null,G(N,P,F,st,null);if(typeof F.then=="function")return B(P,N,k,Hu(F),st);if(F.$$typeof===ct)return B(P,N,k,Nu(N,F),st);Gu(N,F)}return null}function gt(P,N,k,F){for(var st=null,Rt=null,at=N,ft=N=0,Me=null;at!==null&&ft<k.length;ft++){at.index>ft?(Me=at,at=null):Me=at.sibling;var xt=z(P,at,k[ft],F);if(xt===null){at===null&&(at=Me);break}e&&at&&xt.alternate===null&&i(P,at),N=f(xt,N,ft),Rt===null?st=xt:Rt.sibling=xt,Rt=xt,at=Me}if(ft===k.length)return a(P,at),Lt&&Es(P,ft),st;if(at===null){for(;ft<k.length;ft++)at=K(P,k[ft],F),at!==null&&(N=f(at,N,ft),Rt===null?st=at:Rt.sibling=at,Rt=at);return Lt&&Es(P,ft),st}for(at=o(at);ft<k.length;ft++)Me=B(at,P,ft,k[ft],F),Me!==null&&(e&&Me.alternate!==null&&at.delete(Me.key===null?ft:Me.key),N=f(Me,N,ft),Rt===null?st=Me:Rt.sibling=Me,Rt=Me);return e&&at.forEach(function(wr){return i(P,wr)}),Lt&&Es(P,ft),st}function ht(P,N,k,F){if(k==null)throw Error(s(151));for(var st=null,Rt=null,at=N,ft=N=0,Me=null,xt=k.next();at!==null&&!xt.done;ft++,xt=k.next()){at.index>ft?(Me=at,at=null):Me=at.sibling;var wr=z(P,at,xt.value,F);if(wr===null){at===null&&(at=Me);break}e&&at&&wr.alternate===null&&i(P,at),N=f(wr,N,ft),Rt===null?st=wr:Rt.sibling=wr,Rt=wr,at=Me}if(xt.done)return a(P,at),Lt&&Es(P,ft),st;if(at===null){for(;!xt.done;ft++,xt=k.next())xt=K(P,xt.value,F),xt!==null&&(N=f(xt,N,ft),Rt===null?st=xt:Rt.sibling=xt,Rt=xt);return Lt&&Es(P,ft),st}for(at=o(at);!xt.done;ft++,xt=k.next())xt=B(at,P,ft,xt.value,F),xt!==null&&(e&&xt.alternate!==null&&at.delete(xt.key===null?ft:xt.key),N=f(xt,N,ft),Rt===null?st=xt:Rt.sibling=xt,Rt=xt);return e&&at.forEach(function(lS){return i(P,lS)}),Lt&&Es(P,ft),st}function Xt(P,N,k,F){if(typeof k=="object"&&k!==null&&k.type===$&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:t:{for(var st=k.key;N!==null;){if(N.key===st){if(st=k.type,st===$){if(N.tag===7){a(P,N.sibling),F=h(N,k.props.children),F.return=P,P=F;break t}}else if(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Lp(st)===N.type){a(P,N.sibling),F=h(N,k.props),Xo(F,k),F.return=P,P=F;break t}a(P,N);break}else i(P,N);N=N.sibling}k.type===$?(F=_s(k.props.children,P.mode,F,k.key),F.return=P,P=F):(F=Ru(k.type,k.key,k.props,null,P.mode,F),Xo(F,k),F.return=P,P=F)}return v(P);case q:t:{for(st=k.key;N!==null;){if(N.key===st)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){a(P,N.sibling),F=h(N,k.children||[]),F.return=P,P=F;break t}else{a(P,N);break}else i(P,N);N=N.sibling}F=$h(k,P.mode,F),F.return=P,P=F}return v(P);case S:return st=k._init,k=st(k._payload),Xt(P,N,k,F)}if(se(k))return gt(P,N,k,F);if(U(k)){if(st=U(k),typeof st!="function")throw Error(s(150));return k=st.call(k),ht(P,N,k,F)}if(typeof k.then=="function")return Xt(P,N,Hu(k),F);if(k.$$typeof===ct)return Xt(P,N,Nu(P,k),F);Gu(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(a(P,N.sibling),F=h(N,k),F.return=P,P=F):(a(P,N),F=Xh(k,P.mode,F),F.return=P,P=F),v(P)):a(P,N)}return function(P,N,k,F){try{Yo=0;var st=Xt(P,N,k,F);return Ta=null,st}catch(at){if(at===zo||at===Vu)throw at;var Rt=dn(29,at,null,P.mode);return Rt.lanes=F,Rt.return=P,Rt}finally{}}}var Aa=zp(!0),Bp=zp(!1),On=X(null),ri=null;function cr(e){var i=e.alternate;J(Re,Re.current&1),J(On,e),ri===null&&(i===null||ya.current!==null||i.memoizedState!==null)&&(ri=e)}function qp(e){if(e.tag===22){if(J(Re,Re.current),J(On,e),ri===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ri=e)}}else hr()}function hr(){J(Re,Re.current),J(On,On.current)}function Ui(e){et(On),ri===e&&(ri=null),et(Re)}var Re=X(0);function Fu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||vd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Nf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Of={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=yn(),h=or(o);h.payload=i,a!=null&&(h.callback=a),i=lr(e,h,o),i!==null&&(_n(i,e,o),qo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=yn(),h=or(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=lr(e,h,o),i!==null&&(_n(i,e,o),qo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=yn(),o=or(a);o.tag=2,i!=null&&(o.callback=i),i=lr(e,o,a),i!==null&&(_n(i,e,a),qo(i,e,a))}};function jp(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,o)||!Oo(h,f):!0}function Hp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Of.enqueueReplaceState(i,i.state,null)}function Is(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gp(e){Qu(e)}function Fp(e){console.error(e)}function Qp(e){Qu(e)}function Ku(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Kp(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Vf(e,i,a){return a=or(a),a.tag=3,a.payload={element:null},a.callback=function(){Ku(e,i)},a}function Yp(e){return e=or(e),e.tag=3,e}function Xp(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Kp(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Kp(i,a,o),typeof h!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function lA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&xo(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return ri===null?nd():a.alternate===null&&le===0&&(le=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===of?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),rd(e,o,h)),!1;case 22:return a.flags|=65536,o===of?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),rd(e,o,h)),!1}throw Error(s(435,a.tag))}return rd(e,o,h),nd(),!1}if(Lt)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Wh&&(e=Error(s(422),{cause:o}),Uo(In(e,a)))):(o!==Wh&&(i=Error(s(423),{cause:o}),Uo(In(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=In(o,a),h=Vf(e.stateNode,o,h),cf(e,h),le!==4&&(le=2)),!1;var f=Error(s(520),{cause:o});if(f=In(f,a),nl===null?nl=[f]:nl.push(f),le!==4&&(le=2),i===null)return!0;o=In(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Vf(a.stateNode,o,e),cf(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(yr===null||!yr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Yp(h),Xp(h,e,a,o),cf(a,h),!1}a=a.return}while(a!==null);return!1}var $p=Error(s(461)),Oe=!1;function Le(e,i,a,o){i.child=e===null?Bp(i,null,a,o):Aa(i,e.child,a,o)}function Zp(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return bs(i),o=gf(e,i,a,v,f,h),E=pf(),e!==null&&!Oe?(yf(e,i,h),xi(e,i,h)):(Lt&&E&&Zh(i),i.flags|=1,Le(e,i,o,h),i.child)}function Jp(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Yh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Wp(e,i,f,o,h)):(e=Ru(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!Bf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(v,o)&&e.ref===i.ref)return xi(e,i,h)}return i.flags|=1,e=Di(f,o),e.ref=i.ref,e.return=i,i.child=e}function Wp(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Oo(f,o)&&e.ref===i.ref)if(Oe=!1,i.pendingProps=o=f,Bf(e,h))(e.flags&131072)!==0&&(Oe=!0);else return i.lanes=e.lanes,xi(e,i,h)}return Mf(e,i,a,o,h)}function ty(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return ey(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ou(i,f!==null?f.cachePool:null),f!==null?Wg(i,f):ff(),qp(i);else return i.lanes=i.childLanes=536870912,ey(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Ou(i,f.cachePool),Wg(i,f),hr(),i.memoizedState=null):(e!==null&&Ou(i,null),ff(),hr());return Le(e,i,h,a),i.child}function ey(e,i,a,o){var h=af();return h=h===null?null:{parent:we._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Ou(i,null),ff(),qp(i),e!==null&&xo(e,i,o,!0),null}function Yu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Mf(e,i,a,o,h){return bs(i),a=gf(e,i,a,o,void 0,h),o=pf(),e!==null&&!Oe?(yf(e,i,h),xi(e,i,h)):(Lt&&o&&Zh(i),i.flags|=1,Le(e,i,a,h),i.child)}function ny(e,i,a,o,h,f){return bs(i),i.updateQueue=null,a=ep(i,o,a,h),tp(e),o=pf(),e!==null&&!Oe?(yf(e,i,f),xi(e,i,f)):(Lt&&o&&Zh(i),i.flags|=1,Le(e,i,a,f),i.child)}function iy(e,i,a,o,h){if(bs(i),i.stateNode===null){var f=fa,v=a.contextType;typeof v=="object"&&v!==null&&(f=Qe(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Of,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},lf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Qe(v):fa,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Nf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Of.enqueueReplaceState(f,f.state,null),Ho(i,o,f,h),jo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=Is(a,E);f.props=b;var L=f.context,G=a.contextType;v=fa,typeof G=="object"&&G!==null&&(v=Qe(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Hp(i,f,o,v),ar=!1;var z=i.memoizedState;f.state=z,Ho(i,o,f,h),jo(),L=i.memoizedState,E||z!==L||ar?(typeof K=="function"&&(Nf(i,a,K,o),L=i.memoizedState),(b=ar||jp(i,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,uf(e,i),v=i.memoizedProps,G=Is(a,v),f.props=G,K=i.pendingProps,z=f.context,L=a.contextType,b=fa,typeof L=="object"&&L!==null&&(b=Qe(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Hp(i,f,o,b),ar=!1,z=i.memoizedState,f.state=z,Ho(i,o,f,h),jo();var B=i.memoizedState;v!==K||z!==B||ar||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof E=="function"&&(Nf(i,a,E,o),B=i.memoizedState),(G=ar||jp(i,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,Yu(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Aa(i,e.child,null,h),i.child=Aa(i,null,a,h)):Le(e,i,a,h),i.memoizedState=f.state,e=i.child):e=xi(e,i,h),e}function ry(e,i,a,o){return Po(),i.flags|=256,Le(e,i,a,o),i.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(e){return{baseLanes:e,cachePool:Fg()}}function xf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Vn),e}function sy(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Re.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Lt){if(h?cr(i):hr(),Lt){var E=oe,b;if(b=E){t:{for(b=E,E=ii;b.nodeType!==8;){if(!E){E=null;break t}if(b=qn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:vs!==null?{id:Ni,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},b=dn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,nn=i,oe=null,b=!0):b=!1}b||As(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return vd(E)?i.lanes=32:i.lanes=536870912,null;Ui(i)}return E=o.children,o=o.fallback,h?(hr(),h=i.mode,E=Xu({mode:"hidden",children:E},h),o=_s(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Uf(a),h.childLanes=xf(e,v,a),i.memoizedState=Pf,o):(cr(i),kf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(cr(i),i.flags&=-257,i=Lf(e,i,a)):i.memoizedState!==null?(hr(),i.child=e.child,i.flags|=128,i=null):(hr(),h=o.fallback,E=i.mode,o=Xu({mode:"visible",children:o.children},E),h=_s(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Aa(i,e.child,null,a),o=i.child,o.memoizedState=Uf(a),o.childLanes=xf(e,v,a),i.memoizedState=Pf,i=h);else if(cr(i),vd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),i=Lf(e,i,a)}else if(Oe||xo(e,i,a,!1),v=(a&e.childLanes)!==0,Oe||v){if(v=Jt,v!==null&&(o=a&-a,o=(o&42)!==0?1:Ji(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ha(e,o),_n(v,e,o),$p;E.data==="$?"||nd(),i=Lf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,oe=qn(E.nextSibling),nn=i,Lt=!0,Ts=null,ii=!1,e!==null&&(Dn[Nn++]=Ni,Dn[Nn++]=Oi,Dn[Nn++]=vs,Ni=e.id,Oi=e.overflow,vs=i),i=kf(i,o.children),i.flags|=4096);return i}return h?(hr(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Di(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Di(L,h):(h=_s(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Uf(a):(b=E.cachePool,b!==null?(L=we._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Fg(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=xf(e,v,a),i.memoizedState=Pf,o):(cr(i),a=e.child,e=a.sibling,a=Di(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function kf(e,i){return i=Xu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Xu(e,i){return e=dn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lf(e,i,a){return Aa(i,e.child,null,a),e=kf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ay(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),ef(e.return,i,a)}function zf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function oy(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(Le(e,i,o.children,a),o=Re.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ay(e,a,i);else if(e.tag===19)ay(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Re,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Fu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),zf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Fu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}zf(i,!0,a,null,f);break;case"together":zf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function xi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),pr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(xo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Di(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Di(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Bf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function uA(e,i,a){switch(i.tag){case 3:Zt(i,i.stateNode.containerInfo),sr(i,we,e.memoizedState.cache),Po();break;case 27:case 5:Zi(i);break;case 4:Zt(i,i.stateNode.containerInfo);break;case 10:sr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(cr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?sy(e,i,a):(cr(i),e=xi(e,i,a),e!==null?e.sibling:null);cr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(xo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return oy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Re,Re.current),o)break;return null;case 22:case 23:return i.lanes=0,ty(e,i,a);case 24:sr(i,we,e.memoizedState.cache)}return xi(e,i,a)}function ly(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Oe=!0;else{if(!Bf(e,a)&&(i.flags&128)===0)return Oe=!1,uA(e,i,a);Oe=(e.flags&131072)!==0}else Oe=!1,Lt&&(i.flags&1048576)!==0&&Lg(i,Cu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Yh(o)?(e=Is(o,e),i.tag=1,i=iy(null,i,o,e,a)):(i.tag=0,i=Mf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===jt){i.tag=11,i=Zp(null,i,o,e,a);break t}else if(h===M){i.tag=14,i=Jp(null,i,o,e,a);break t}}throw i=Ue(o)||o,Error(s(306,i,""))}}return i;case 0:return Mf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Is(o,i.pendingProps),iy(e,i,o,h,a);case 3:t:{if(Zt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,uf(e,i),Ho(i,o,null,a);var v=i.memoizedState;if(o=v.cache,sr(i,we,o),o!==f.cache&&nf(i,[we],a,!0),jo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=ry(e,i,o,a);break t}else if(o!==h){h=In(Error(s(424)),i),Uo(h),i=ry(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(oe=qn(e.firstChild),nn=i,Lt=!0,Ts=null,ii=!0,a=Bp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Po(),o===h){i=xi(e,i,a);break t}Le(e,i,o,a)}i=i.child}return i;case 26:return Yu(e,i),e===null?(a=f_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,e=i.pendingProps,o=uc(_t.current).createElement(a),o[Ae]=i,o[ge]=e,Be(o,a,e),ce(o),i.stateNode=o):i.memoizedState=f_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Zi(i),e===null&&Lt&&(o=i.stateNode=u_(i.type,i.pendingProps,_t.current),nn=i,ii=!0,h=oe,Er(i.type)?(Ed=h,oe=qn(o.firstChild)):oe=h),Le(e,i,i.pendingProps.children,a),Yu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Lt&&((h=o=oe)&&(o=kA(o,i.type,i.pendingProps,ii),o!==null?(i.stateNode=o,nn=i,oe=qn(o.firstChild),ii=!1,h=!0):h=!1),h||As(i)),Zi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,pd(h,f)?o=null:v!==null&&pd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=gf(e,i,eA,null,null,a),hl._currentValue=h),Yu(e,i),Le(e,i,o,a),i.child;case 6:return e===null&&Lt&&((e=a=oe)&&(a=LA(a,i.pendingProps,ii),a!==null?(i.stateNode=a,nn=i,oe=null,e=!0):e=!1),e||As(i)),null;case 13:return sy(e,i,a);case 4:return Zt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Aa(i,null,o,a):Le(e,i,o,a),i.child;case 11:return Zp(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,sr(i,i.type,o.value),Le(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,bs(i),h=Qe(h),o=o(h),i.flags|=1,Le(e,i,o,a),i.child;case 14:return Jp(e,i,i.type,i.pendingProps,a);case 15:return Wp(e,i,i.type,i.pendingProps,a);case 19:return oy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Xu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Di(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ty(e,i,a);case 24:return bs(i),o=Qe(we),e===null?(h=af(),h===null&&(h=Jt,f=rf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},lf(i),sr(i,we,h)):((e.lanes&a)!==0&&(uf(e,i),Ho(i,null,null,a),jo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),sr(i,we,o)):(o=f.cache,sr(i,we,o),o!==h.cache&&nf(i,[we],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function uy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!y_(i)){if(i=On.current,i!==null&&((Pt&4194048)===Pt?ri!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||i!==ri))throw Bo=of,Qg;e.flags|=8192}}function $u(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?fo():536870912,e.lanes|=i,Ra|=i)}function $o(e,i){if(!Lt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ie(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function cA(e,i,a){var o=i.pendingProps;switch(Jh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(i),null;case 1:return ie(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Mi(we),Fn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Mo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qg())),ie(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(ie(i),uy(i,a)):(ie(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),ie(i),uy(i,a)):(ie(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),ie(i),i.flags&=-16777217),null;case 27:pi(i),a=_t.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ie(i),null}e=ut.current,Mo(i)?zg(i):(e=u_(h,o,a),i.stateNode=e,ki(i))}return ie(i),null;case 5:if(pi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ie(i),null}if(e=ut.current,Mo(i))zg(i);else{switch(h=uc(_t.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Ae]=i,e[ge]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Be(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return ie(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=_t.current,Mo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ae]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||n_(e.nodeValue,a)),e||As(i)}else e=uc(e).createTextNode(o),e[Ae]=i,i.stateNode=e}return ie(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Mo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ae]=i}else Po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ie(i),h=!1}else h=qg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ui(i),i):(Ui(i),null)}if(Ui(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),$u(i,i.updateQueue),ie(i),null;case 4:return Fn(),e===null&&hd(i.stateNode.containerInfo),ie(i),null;case 10:return Mi(i.type),ie(i),null;case 19:if(et(Re),h=i.memoizedState,h===null)return ie(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)$o(h,!1);else{if(le!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Fu(e),f!==null){for(i.flags|=128,$o(h,!1),e=f.updateQueue,i.updateQueue=e,$u(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)kg(a,e),a=a.sibling;return J(Re,Re.current&1|2),i.child}e=e.sibling}h.tail!==null&&Tn()>Wu&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304)}else{if(!o)if(e=Fu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,$u(i,e),$o(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Lt)return ie(i),null}else 2*Tn()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Tn(),i.sibling=null,e=Re.current,J(Re,o?e&1|2:e&1),i):(ie(i),null);case 22:case 23:return Ui(i),df(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ie(i),i.subtreeFlags&6&&(i.flags|=8192)):ie(i),a=i.updateQueue,a!==null&&$u(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&et(ws),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Mi(we),ie(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function hA(e,i){switch(Jh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Mi(we),Fn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return pi(i),null;case 13:if(Ui(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Po()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return et(Re),null;case 4:return Fn(),null;case 10:return Mi(i.type),null;case 22:case 23:return Ui(i),df(),e!==null&&et(ws),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Mi(we),null;case 25:return null;default:return null}}function cy(e,i){switch(Jh(i),i.tag){case 3:Mi(we),Fn();break;case 26:case 27:case 5:pi(i);break;case 4:Fn();break;case 13:Ui(i);break;case 19:et(Re);break;case 10:Mi(i.type);break;case 22:case 23:Ui(i),df(),e!==null&&et(ws);break;case 24:Mi(we)}}function Zo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){$t(i,i.return,E)}}function fr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(G){$t(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){$t(i,i.return,G)}}function hy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Jg(i,a)}catch(o){$t(e,e.return,o)}}}function fy(e,i,a){a.props=Is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){$t(e,i,o)}}function Jo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){$t(e,i,h)}}function si(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){$t(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$t(e,i,h)}else a.current=null}function dy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){$t(e,e.return,h)}}function qf(e,i,a){try{var o=e.stateNode;VA(o,e.type,a,i),o[ge]=i}catch(h){$t(e,e.return,h)}}function my(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Er(e.type)||e.tag===4}function jf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||my(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Er(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=lc));else if(o!==4&&(o===27&&Er(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Hf(e,i,a),e=e.sibling;e!==null;)Hf(e,i,a),e=e.sibling}function Zu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Er(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Zu(e,i,a),e=e.sibling;e!==null;)Zu(e,i,a),e=e.sibling}function gy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Be(i,o,a),i[Ae]=e,i[ge]=a}catch(f){$t(e,e.return,f)}}var Li=!1,fe=!1,Gf=!1,py=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function fA(e,i){if(e=e.containerInfo,md=gc,e=Ig(e),qh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:e,selectionRange:a},gc=!1,Ve=i;Ve!==null;)if(i=Ve,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ve=e;else for(;Ve!==null;){switch(i=Ve,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var gt=Is(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(gt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ht){$t(a,a.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)_d(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ve=e;break}Ve=i.return}}function yy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:dr(e,a),o&4&&Zo(5,a);break;case 1:if(dr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){$t(a,a.return,v)}else{var h=Is(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){$t(a,a.return,v)}}o&64&&hy(a),o&512&&Jo(a,a.return);break;case 3:if(dr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Jg(e,i)}catch(v){$t(a,a.return,v)}}break;case 27:i===null&&o&4&&gy(a);case 26:case 5:dr(e,a),i===null&&o&4&&dy(a),o&512&&Jo(a,a.return);break;case 12:dr(e,a);break;case 13:dr(e,a),o&4&&Ey(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=TA.bind(null,a),zA(e,a))));break;case 22:if(o=a.memoizedState!==null||Li,!o){i=i!==null&&i.memoizedState!==null||fe,h=Li;var f=fe;Li=o,(fe=i)&&!f?mr(e,a,(a.subtreeFlags&8772)!==0):dr(e,a),Li=h,fe=f}break;case 30:break;default:dr(e,a)}}function _y(e){var i=e.alternate;i!==null&&(e.alternate=null,_y(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&er(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ne=null,an=!1;function zi(e,i,a){for(a=a.child;a!==null;)vy(e,i,a),a=a.sibling}function vy(e,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ae,a)}catch{}switch(a.tag){case 26:fe||si(a,i),zi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||si(a,i);var o=ne,h=an;Er(a.type)&&(ne=a.stateNode,an=!1),zi(e,i,a),ol(a.stateNode),ne=o,an=h;break;case 5:fe||si(a,i);case 6:if(o=ne,h=an,ne=null,zi(e,i,a),ne=o,an=h,ne!==null)if(an)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(a.stateNode)}catch(f){$t(a,i,f)}else try{ne.removeChild(a.stateNode)}catch(f){$t(a,i,f)}break;case 18:ne!==null&&(an?(e=ne,o_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gl(e)):o_(ne,a.stateNode));break;case 4:o=ne,h=an,ne=a.stateNode.containerInfo,an=!0,zi(e,i,a),ne=o,an=h;break;case 0:case 11:case 14:case 15:fe||fr(2,a,i),fe||fr(4,a,i),zi(e,i,a);break;case 1:fe||(si(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&fy(a,i,o)),zi(e,i,a);break;case 21:zi(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,zi(e,i,a),fe=o;break;default:zi(e,i,a)}}function Ey(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gl(e)}catch(a){$t(i,i.return,a)}}function dA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new py),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new py),i;default:throw Error(s(435,e.tag))}}function Ff(e,i){var a=dA(e);i.forEach(function(o){var h=AA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function mn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Er(E.type)){ne=E.stateNode,an=!1;break t}break;case 5:ne=E.stateNode,an=!1;break t;case 3:case 4:ne=E.stateNode.containerInfo,an=!0;break t}E=E.return}if(ne===null)throw Error(s(160));vy(f,v,h),ne=null,an=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ty(i,e),i=i.sibling}var Bn=null;function Ty(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mn(i,e),gn(e),o&4&&(fr(3,e,e.return),Zo(3,e),fr(5,e,e.return));break;case 1:mn(i,e),gn(e),o&512&&(fe||a===null||si(a,a.return)),o&64&&Li&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Bn;if(mn(i,e),gn(e),o&512&&(fe||a===null||si(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ns]||f[Ae]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Be(f,o,a),f[Ae]=e,ce(f),o=f;break t;case"link":var v=g_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;case"meta":if(v=g_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Ae]=e,ce(f),o=f}e.stateNode=o}else p_(h,e.type,e.stateNode);else e.stateNode=m_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?p_(h,e.type,e.stateNode):m_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&qf(e,e.memoizedProps,a.memoizedProps)}break;case 27:mn(i,e),gn(e),o&512&&(fe||a===null||si(a,a.return)),a!==null&&o&4&&qf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,e),gn(e),o&512&&(fe||a===null||si(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(B){$t(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,qf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Gf=!0);break;case 6:if(mn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){$t(e,e.return,B)}}break;case 3:if(fc=null,h=Bn,Bn=cc(i.containerInfo),mn(i,e),Bn=h,gn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(i.containerInfo)}catch(B){$t(e,e.return,B)}Gf&&(Gf=!1,Ay(e));break;case 4:o=Bn,Bn=cc(e.stateNode.containerInfo),mn(i,e),gn(e),Bn=o;break;case 12:mn(i,e),gn(e);break;case 13:mn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zf=Tn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ff(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Li,G=fe;if(Li=L||h,fe=G||b,mn(i,e),fe=G,Li=L,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||Li||fe||Cs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){$t(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){$t(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ff(e,a))));break;case 19:mn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ff(e,o)));break;case 30:break;case 21:break;default:mn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(my(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=jf(e);Zu(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var E=jf(e);Zu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=jf(e);Hf(e,L,b);break;default:throw Error(s(161))}}catch(G){$t(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ay(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ay(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function dr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yy(e,i.alternate,i),i=i.sibling}function Cs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:fr(4,i,i.return),Cs(i);break;case 1:si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&fy(i,i.return,a),Cs(i);break;case 27:ol(i.stateNode);case 26:case 5:si(i,i.return),Cs(i);break;case 22:i.memoizedState===null&&Cs(i);break;case 30:Cs(i);break;default:Cs(i)}e=e.sibling}}function mr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:mr(h,f,a),Zo(4,f);break;case 1:if(mr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){$t(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Zg(b[h],E)}catch(L){$t(o,o.return,L)}}a&&v&64&&hy(f),Jo(f,f.return);break;case 27:gy(f);case 26:case 5:mr(h,f,a),a&&o===null&&v&4&&dy(f),Jo(f,f.return);break;case 12:mr(h,f,a);break;case 13:mr(h,f,a),a&&v&4&&Ey(h,f);break;case 22:f.memoizedState===null&&mr(h,f,a),Jo(f,f.return);break;case 30:break;default:mr(h,f,a)}i=i.sibling}}function Qf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ko(a))}function Kf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e))}function ai(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sy(e,i,a,o),i=i.sibling}function Sy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ai(e,i,a,o),h&2048&&Zo(9,i);break;case 1:ai(e,i,a,o);break;case 3:ai(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e)));break;case 12:if(h&2048){ai(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){$t(i,i.return,b)}}else ai(e,i,a,o);break;case 13:ai(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ai(e,i,a,o):Wo(e,i):f._visibility&2?ai(e,i,a,o):(f._visibility|=2,Sa(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Qf(v,i);break;case 24:ai(e,i,a,o),h&2048&&Kf(i.alternate,i);break;default:ai(e,i,a,o)}}function Sa(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Sa(f,v,E,b,h),Zo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Sa(f,v,E,b,h):Wo(f,v):(G._visibility|=2,Sa(f,v,E,b,h)),h&&L&2048&&Qf(v.alternate,v);break;case 24:Sa(f,v,E,b,h),h&&L&2048&&Kf(v.alternate,v);break;default:Sa(f,v,E,b,h)}i=i.sibling}}function Wo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:Wo(a,o),h&2048&&Qf(o.alternate,o);break;case 24:Wo(a,o),h&2048&&Kf(o.alternate,o);break;default:Wo(a,o)}i=i.sibling}}var tl=8192;function ba(e){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)by(e),e=e.sibling}function by(e){switch(e.tag){case 26:ba(e),e.flags&tl&&e.memoizedState!==null&&JA(Bn,e.memoizedState,e.memoizedProps);break;case 5:ba(e);break;case 3:case 4:var i=Bn;Bn=cc(e.stateNode.containerInfo),ba(e),Bn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,ba(e),tl=i):ba(e));break;default:ba(e)}}function wy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function el(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Iy(o,e)}wy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ry(e),e=e.sibling}function Ry(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&fr(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ju(e)):el(e);break;default:el(e)}}function Ju(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Iy(o,e)}wy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:fr(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}e=e.sibling}}function Iy(e,i){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:fr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ve=o;else t:for(a=e;Ve!==null;){o=Ve;var h=o.sibling,f=o.return;if(_y(o),o===a){Ve=null;break t}if(h!==null){h.return=f,Ve=h;break t}Ve=f}}}var mA={getCacheForType:function(e){var i=Qe(we),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},gA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,It=null,Pt=0,Ft=0,pn=null,gr=!1,wa=!1,Yf=!1,Bi=0,le=0,pr=0,Ds=0,Xf=0,Vn=0,Ra=0,nl=null,on=null,$f=!1,Zf=0,Wu=1/0,tc=null,yr=null,ze=0,_r=null,Ia=null,Ca=0,Jf=0,Wf=null,Cy=null,il=0,td=null;function yn(){if((Gt&2)!==0&&Pt!==0)return Pt&-Pt;if(H.T!==null){var e=ga;return e!==0?e:od()}return Wi()}function Dy(){Vn===0&&(Vn=(Pt&536870912)===0||Lt?ho():536870912);var e=On.current;return e!==null&&(e.flags|=32),Vn}function _n(e,i,a){(e===Jt&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Da(e,0),vr(e,Pt,Vn,!1)),_i(e,a),((Gt&2)===0||e!==Jt)&&(e===Jt&&((Gt&2)===0&&(Ds|=a),le===4&&vr(e,Pt,Vn,!1)),oi(e))}function Ny(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||es(e,i),h=o?_A(e,i):id(e,i,!0),f=o;do{if(h===0){wa&&!o&&vr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!pA(a)){h=id(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=nl;var b=E.current.memoizedState.isDehydrated;if(b&&(Da(E,v).flags|=256),v=id(E,v,!1),v!==2){if(Yf&&!b){E.errorRecoveryDisabledLanes|=f,Ds|=f,h=4;break t}f=on,on=h,f!==null&&(on===null?on=f:on.push.apply(on,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Da(e,0),vr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:vr(o,i,Vn,!gr);break t;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Zf+300-Tn(),10<h)){if(vr(o,i,Vn,!gr),Qs(o,0,!0)!==0)break t;o.timeoutHandle=s_(Oy.bind(null,o,a,on,tc,$f,i,Vn,Ds,Ra,gr,f,2,-0,0),h);break t}Oy(o,a,on,tc,$f,i,Vn,Ds,Ra,gr,f,0,-0,0)}}break}while(!0);oi(e)}function Oy(e,i,a,o,h,f,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:ZA},by(i),K=WA(),K!==null)){e.cancelPendingCommit=K(Ly.bind(null,e,i,f,a,o,h,v,E,b,G,1,z,B)),vr(e,f,v,!L);return}Ly(e,i,f,a,o,h,v,E,b)}function pA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vr(e,i,a,o){i&=~Xf,i&=~Ds,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Fe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Qn(e,a,i)}function ec(){return(Gt&6)===0?(rl(0),!1):!0}function ed(){if(It!==null){if(Ft===0)var e=It.return;else e=It,Vi=Ss=null,_f(e),Ta=null,Yo=0,e=It;for(;e!==null;)cy(e.alternate,e),e=e.return;It=null}}function Da(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,PA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ed(),Jt=e,It=a=Di(e.current,null),Pt=i,Ft=0,pn=null,gr=!1,wa=es(e,i),Yf=!1,Ra=Vn=Xf=Ds=pr=le=0,on=nl=null,$f=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Fe(o),f=1<<h;i|=e[h],o&=~f}return Bi=i,Su(),a}function Vy(e,i){bt=null,H.H=ju,i===zo||i===Vu?(i=Xg(),Ft=3):i===Qg?(i=Xg(),Ft=4):Ft=i===$p?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pn=i,It===null&&(le=1,Ku(e,In(i,e.current)))}function My(){var e=H.H;return H.H=ju,e===null?ju:e}function Py(){var e=H.A;return H.A=mA,e}function nd(){le=4,gr||(Pt&4194048)!==Pt&&On.current!==null||(wa=!0),(pr&134217727)===0&&(Ds&134217727)===0||Jt===null||vr(Jt,Pt,Vn,!1)}function id(e,i,a){var o=Gt;Gt|=2;var h=My(),f=Py();(Jt!==e||Pt!==i)&&(tc=null,Da(e,i)),i=!1;var v=le;t:do try{if(Ft!==0&&It!==null){var E=It,b=pn;switch(Ft){case 8:ed(),v=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(i=!0);var L=Ft;if(Ft=0,pn=null,Na(e,E,b,L),a&&wa){v=0;break t}break;default:L=Ft,Ft=0,pn=null,Na(e,E,b,L)}}yA(),v=le;break}catch(G){Vy(e,G)}while(!0);return i&&e.shellSuspendCounter++,Vi=Ss=null,Gt=o,H.H=h,H.A=f,It===null&&(Jt=null,Pt=0,Su()),v}function yA(){for(;It!==null;)Uy(It)}function _A(e,i){var a=Gt;Gt|=2;var o=My(),h=Py();Jt!==e||Pt!==i?(tc=null,Wu=Tn()+500,Da(e,i)):wa=es(e,i);t:do try{if(Ft!==0&&It!==null){i=It;var f=pn;e:switch(Ft){case 1:Ft=0,pn=null,Na(e,i,f,1);break;case 2:case 9:if(Kg(f)){Ft=0,pn=null,xy(i);break}i=function(){Ft!==2&&Ft!==9||Jt!==e||(Ft=7),oi(e)},f.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Kg(f)?(Ft=0,pn=null,xy(i)):(Ft=0,pn=null,Na(e,i,f,7));break;case 5:var v=null;switch(It.tag){case 26:v=It.memoizedState;case 5:case 27:var E=It;if(!v||y_(v)){Ft=0,pn=null;var b=E.sibling;if(b!==null)It=b;else{var L=E.return;L!==null?(It=L,nc(L)):It=null}break e}}Ft=0,pn=null,Na(e,i,f,5);break;case 6:Ft=0,pn=null,Na(e,i,f,6);break;case 8:ed(),le=6;break t;default:throw Error(s(462))}}vA();break}catch(G){Vy(e,G)}while(!0);return Vi=Ss=null,H.H=o,H.A=h,Gt=a,It!==null?0:(Jt=null,Pt=0,Su(),le)}function vA(){for(;It!==null&&!oo();)Uy(It)}function Uy(e){var i=ly(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,i===null?nc(e):It=i}function xy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=ny(a,i,i.pendingProps,i.type,void 0,Pt);break;case 11:i=ny(a,i,i.pendingProps,i.type.render,i.ref,Pt);break;case 5:_f(i);default:cy(a,i),i=It=kg(i,Bi),i=ly(a,i,Bi)}e.memoizedProps=e.pendingProps,i===null?nc(e):It=i}function Na(e,i,a,o){Vi=Ss=null,_f(i),Ta=null,Yo=0;var h=i.return;try{if(lA(e,h,i,a,Pt)){le=1,Ku(e,In(a,e.current)),It=null;return}}catch(f){if(h!==null)throw It=h,f;le=1,Ku(e,In(a,e.current)),It=null;return}i.flags&32768?(Lt||o===1?e=!0:wa||(Pt&536870912)!==0?e=!1:(gr=e=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),ky(i,e)):nc(i)}function nc(e){var i=e;do{if((i.flags&32768)!==0){ky(i,gr);return}e=i.return;var a=cA(i.alternate,i,Bi);if(a!==null){It=a;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);le===0&&(le=5)}function ky(e,i){do{var a=hA(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);le=6,It=null}function Ly(e,i,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do ic();while(ze!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Qh,mo(e,a,f,v,E,b),e===Jt&&(It=Jt=null,Pt=0),Ia=i,_r=e,Ca=a,Jf=f,Wf=h,Cy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,SA(Zr,function(){return Hy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=tt.p,tt.p=2,v=Gt,Gt|=4;try{fA(e,i,a)}finally{Gt=v,tt.p=h,H.T=o}}ze=1,zy(),By(),qy()}}function zy(){if(ze===1){ze=0;var e=_r,i=Ia,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=tt.p;tt.p=2;var h=Gt;Gt|=4;try{Ty(i,e);var f=gd,v=Ig(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Rg(E.ownerDocument.documentElement,E)){if(b!==null&&qh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),gt=E.textContent.length,ht=Math.min(b.start,gt),Xt=b.end===void 0?ht:Math.min(b.end,gt);!B.extend&&ht>Xt&&(v=Xt,Xt=ht,ht=v);var P=wg(E,ht),N=wg(E,Xt);if(P&&N&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var k=K.createRange();k.setStart(P.node,P.offset),B.removeAllRanges(),ht>Xt?(B.addRange(k),B.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),B.addRange(k))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var F=K[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}gc=!!md,gd=md=null}finally{Gt=h,tt.p=o,H.T=a}}e.current=i,ze=2}}function By(){if(ze===2){ze=0;var e=_r,i=Ia,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=tt.p;tt.p=2;var h=Gt;Gt|=4;try{yy(e,i.alternate,i)}finally{Gt=h,tt.p=o,H.T=a}}ze=3}}function qy(){if(ze===4||ze===3){ze=0,Jl();var e=_r,i=Ia,a=Ca,o=Cy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,Ia=_r=null,jy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(yr=null),Ks(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ae,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=tt.p,tt.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=i,tt.p=h}}(Ca&3)!==0&&ic(),oi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===td?il++:(il=0,td=e):il=0,rl(0)}}function jy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ko(i)))}function ic(e){return zy(),By(),qy(),Hy()}function Hy(){if(ze!==5)return!1;var e=_r,i=Jf;Jf=0;var a=Ks(Ca),o=H.T,h=tt.p;try{tt.p=32>a?32:a,H.T=null,a=Wf,Wf=null;var f=_r,v=Ca;if(ze=0,Ia=_r=null,Ca=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Ry(f.current),Sy(f,f.current,v,a),Gt=E,rl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ae,f)}catch{}return!0}finally{tt.p=h,H.T=o,jy(e,i)}}function Gy(e,i,a){i=In(a,i),i=Vf(e.stateNode,i,2),e=lr(e,i,2),e!==null&&(_i(e,2),oi(e))}function $t(e,i,a){if(e.tag===3)Gy(e,e,a);else for(;i!==null;){if(i.tag===3){Gy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(yr===null||!yr.has(o))){e=In(a,e),a=Yp(2),o=lr(i,a,2),o!==null&&(Xp(a,o,i,e),_i(o,2),oi(o));break}}i=i.return}}function rd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new gA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Yf=!0,h.add(a),e=EA.bind(null,e,i,a),i.then(e,e))}function EA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Jt===e&&(Pt&a)===a&&(le===4||le===3&&(Pt&62914560)===Pt&&300>Tn()-Zf?(Gt&2)===0&&Da(e,0):Xf|=a,Ra===Pt&&(Ra=0)),oi(e)}function Fy(e,i){i===0&&(i=fo()),e=ha(e,i),e!==null&&(_i(e,i),oi(e))}function TA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Fy(e,a)}function AA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Fy(e,a)}function SA(e,i){return Xr(e,i)}var rc=null,Oa=null,sd=!1,sc=!1,ad=!1,Ns=0;function oi(e){e!==Oa&&e.next===null&&(Oa===null?rc=Oa=e:Oa=Oa.next=e),sc=!0,sd||(sd=!0,wA())}function rl(e,i){if(!ad&&sc){ad=!0;do for(var a=!1,o=rc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Fe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Xy(o,f))}else f=Pt,f=Qs(o,o===Jt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||es(o,f)||(a=!0,Xy(o,f));o=o.next}while(a);ad=!1}}function bA(){Qy()}function Qy(){sc=sd=!1;var e=0;Ns!==0&&(MA()&&(e=Ns),Ns=0);for(var i=Tn(),a=null,o=rc;o!==null;){var h=o.next,f=Ky(o,i);f===0?(o.next=null,a===null?rc=h:a.next=h,h===null&&(Oa=a)):(a=o,(e!==0||(f&3)!==0)&&(sc=!0)),o=h}rl(e)}function Ky(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Fe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=co(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=Jt,a=Pt,a=Qs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&$r(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||es(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&$r(o),Ks(a)){case 2:case 8:a=Gs;break;case 32:a=Zr;break;case 268435456:a=Fs;break;default:a=Zr}return o=Yy.bind(null,e),a=Xr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&$r(o),e.callbackPriority=2,e.callbackNode=null,2}function Yy(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ic()&&e.callbackNode!==a)return null;var o=Pt;return o=Qs(e,e===Jt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ny(e,o,i),Ky(e,Tn()),e.callbackNode!=null&&e.callbackNode===a?Yy.bind(null,e):null)}function Xy(e,i){if(ic())return null;Ny(e,i,!0)}function wA(){UA(function(){(Gt&6)!==0?Xr(lo,bA):Qy()})}function od(){return Ns===0&&(Ns=ho()),Ns}function $y(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ws(""+e)}function Zy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function RA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=$y((h[ge]||null).action),v=o.submitter;v&&(i=(i=v[ge]||null)?$y(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new ta("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ns!==0){var b=v?Zy(h,v):new FormData(h);If(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Zy(h,v):new FormData(h),If(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var ld=0;ld<Fh.length;ld++){var ud=Fh[ld],IA=ud.toLowerCase(),CA=ud[0].toUpperCase()+ud.slice(1);zn(IA,"on"+CA)}zn(Ng,"onAnimationEnd"),zn(Og,"onAnimationIteration"),zn(Vg,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(F0,"onTransitionRun"),zn(Q0,"onTransitionStart"),zn(K0,"onTransitionCancel"),zn(Mg,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Jy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Qu(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Qu(G)}h.currentTarget=null,f=b}}}}function Ct(e,i){var a=i[po];a===void 0&&(a=i[po]=new Set);var o=e+"__bubble";a.has(o)||(Wy(i,e,2,!1),a.add(o))}function cd(e,i,a){var o=0;i&&(o|=4),Wy(a,e,o,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[ac]){e[ac]=!0,yo.forEach(function(a){a!=="selectionchange"&&(DA.has(a)||cd(a,!1,e),cd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[ac]||(i[ac]=!0,cd("selectionchange",!1,i))}}function Wy(e,i,a,o){switch(S_(i)){case 2:var h=nS;break;case 8:h=iS;break;default:h=wd}a=h.bind(null,i,a,e),h=void 0,!wn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function fd(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=vi(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}lu(function(){var L=f,G=bn(a),K=[];t:{var z=Pg.get(e);if(z!==void 0){var B=ta,gt=e;switch(e){case"keypress":if(Jn(a)===0)break t;case"keydown":case"keyup":B=aa;break;case"focusin":gt="focus",B=ia;break;case"focusout":gt="blur",B=ia;break;case"beforeblur":case"afterblur":B=ia;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=pu;break;case Ng:case Og:case Vg:B=ra;break;case Mg:B=_u;break;case"scroll":case"scrollend":B=uu;break;case"wheel":B=oa;break;case"copy":case"cut":case"paste":B=sa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Do;break;case"toggle":case"beforetoggle":B=Eu}var ht=(i&4)!==0,Xt=!ht&&(e==="scroll"||e==="scrollend"),P=ht?z!==null?z+"Capture":null:z;ht=[];for(var N=L,k;N!==null;){var F=N;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||P===null||(F=us(N,P),F!=null&&ht.push(al(N,F,k))),Xt)break;N=N.return}0<ht.length&&(z=new B(z,gt,null,a,G),K.push({event:z,listeners:ht}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Si&&(gt=a.relatedTarget||a.fromElement)&&(vi(gt)||gt[An]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(gt=a.relatedTarget||a.toElement,B=L,gt=gt?vi(gt):null,gt!==null&&(Xt=c(gt),ht=gt.tag,gt!==Xt||ht!==5&&ht!==27&&ht!==6)&&(gt=null)):(B=null,gt=L),B!==gt)){if(ht=Rn,F="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Do,F="onPointerLeave",P="onPointerEnter",N="pointer"),Xt=B==null?z:Yn(B),k=gt==null?z:Yn(gt),z=new ht(F,N+"leave",B,a,G),z.target=Xt,z.relatedTarget=k,F=null,vi(G)===L&&(ht=new ht(P,N+"enter",gt,a,G),ht.target=k,ht.relatedTarget=Xt,F=ht),Xt=F,B&&gt)e:{for(ht=B,P=gt,N=0,k=ht;k;k=Va(k))N++;for(k=0,F=P;F;F=Va(F))k++;for(;0<N-k;)ht=Va(ht),N--;for(;0<k-N;)P=Va(P),k--;for(;N--;){if(ht===P||P!==null&&ht===P.alternate)break e;ht=Va(ht),P=Va(P)}ht=null}else ht=null;B!==null&&t_(K,z,B,ht,!1),gt!==null&&Xt!==null&&t_(K,Xt,gt,ht,!0)}}t:{if(z=L?Yn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var st=vg;else if(be(z))if(Eg)st=j0;else{st=B0;var Rt=z0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Ao(L.elementType)&&(st=vg):st=q0;if(st&&(st=st(e,L))){Ci(K,st,a,G);break t}Rt&&Rt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&ir(z,"number",z.value)}switch(Rt=L?Yn(L):window,e){case"focusin":(be(Rt)||Rt.contentEditable==="true")&&(la=Rt,jh=L,Vo=null);break;case"focusout":Vo=jh=la=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Cg(K,a,G);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":Cg(K,a,G)}var at;if(ei)t:{switch(e){case"compositionstart":var ft="onCompositionStart";break t;case"compositionend":ft="onCompositionEnd";break t;case"compositionupdate":ft="onCompositionUpdate";break t}ft=void 0}else Vt?j(e,a)&&(ft="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ft="onCompositionStart");ft&&(_&&a.locale!=="ko"&&(Vt||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Vt&&(at=bo()):(Zn=G,rr="value"in Zn?Zn.value:Zn.textContent,Vt=!0)),Rt=oc(L,ft),0<Rt.length&&(ft=new Io(ft,e,null,a,G),K.push({event:ft,listeners:Rt}),at?ft.data=at:(at=W(a),at!==null&&(ft.data=at)))),(at=m?Se(e,a):Mt(e,a))&&(ft=oc(L,"onBeforeInput"),0<ft.length&&(Rt=new Io("onBeforeInput","beforeinput",null,a,G),K.push({event:Rt,listeners:ft}),Rt.data=at)),RA(K,e,L,a,G)}Jy(K,i)})}function al(e,i,a){return{instance:e,listener:i,currentTarget:a}}function oc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=us(e,a),h!=null&&o.unshift(al(e,h,f)),h=us(e,i),h!=null&&o.push(al(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function t_(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=us(a,f),L!=null&&v.unshift(al(a,L,b))):h||(L=us(a,f),L!=null&&v.push(al(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var NA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function e_(e){return(typeof e=="string"?e:""+e).replace(NA,`
`).replace(OA,"")}function n_(e,i){return i=e_(i),e_(e)===i}function lc(){}function Yt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Sn(e,""+o);break;case"className":Xn(e,"class",o);break;case"tabIndex":Xn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(e,a,o);break;case"style":To(e,o,f);break;case"data":if(i!=="object"){Xn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ws(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Yt(e,i,"name",h.name,h,null),Yt(e,i,"formEncType",h.formEncType,h,null),Yt(e,i,"formMethod",h.formMethod,h,null),Yt(e,i,"formTarget",h.formTarget,h,null)):(Yt(e,i,"encType",h.encType,h,null),Yt(e,i,"method",h.method,h,null),Yt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ws(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=lc);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Ws(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),nr(e,"popover",o);break;case"xlinkActuate":xe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":xe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":xe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":xe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":xe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":xe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":xe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":xe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":xe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":nr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uh.get(a)||a,nr(e,a,o))}}function dd(e,i,a,o,h,f){switch(a){case"style":To(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):nr(e,a,o)}}}function Be(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,f,v,a,null)}}h&&Yt(e,i,"srcSet",a.srcSet,a,null),o&&Yt(e,i,"src",a.src,a,null);return;case"input":Ct("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Yt(e,i,o,G,a,null)}}as(e,f,E,b,L,v,h,!1),Js(e);return;case"select":Ct("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Yt(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Ai(e,!!o,i,!1):a!=null&&Ai(e,!!o,a,!0);return;case"textarea":Ct("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Yt(e,i,v,E,a,null)}os(e,o,h,f),Js(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Yt(e,i,b,o,a,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(o=0;o<sl.length;o++)Ct(sl[o],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,L,o,a,null)}return;default:if(Ao(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&dd(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Yt(e,i,E,o,a,null))}function VA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||Yt(e,i,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&Yt(e,i,z,B,o,K)}}hn(e,v,E,b,L,G,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Yt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Yt(e,i,h,f,o,b)}i=E,a=v,o=B,z!=null?Ai(e,!!a,z,!1):!!o!=!!a&&(i!=null?Ai(e,!!a,i,!0):Ai(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Yt(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Yt(e,i,v,h,o,f)}Qt(e,z,B);return;case"option":for(var gt in a)if(z=a[gt],a.hasOwnProperty(gt)&&z!=null&&!o.hasOwnProperty(gt))switch(gt){case"selected":e.selected=!1;break;default:Yt(e,i,gt,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Yt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)z=a[ht],a.hasOwnProperty(ht)&&z!=null&&!o.hasOwnProperty(ht)&&Yt(e,i,ht,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Yt(e,i,L,z,o,B)}return;default:if(Ao(i)){for(var Xt in a)z=a[Xt],a.hasOwnProperty(Xt)&&z!==void 0&&!o.hasOwnProperty(Xt)&&dd(e,i,Xt,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||dd(e,i,G,z,o,B);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&Yt(e,i,P,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||Yt(e,i,K,z,o,B)}var md=null,gd=null;function uc(e){return e.nodeType===9?e:e.ownerDocument}function i_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function pd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yd=null;function MA(){var e=window.event;return e&&e.type==="popstate"?e===yd?!1:(yd=e,!0):(yd=null,!1)}var s_=typeof setTimeout=="function"?setTimeout:void 0,PA=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,UA=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(e){return a_.resolve(null).then(e).catch(xA)}:s_;function xA(e){setTimeout(function(){throw e})}function Er(e){return e==="head"}function o_(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ol(v.documentElement),a&2&&ol(v.body),a&4)for(a=v.head,ol(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[ns]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),gl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);gl(i)}function _d(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_d(a),er(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function kA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ns])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function LA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qn(e.nextSibling),e===null))return null;return e}function vd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function zA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Ed=null;function l_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function u_(e,i,a){switch(i=uc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ol(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);er(e)}var Mn=new Map,c_=new Set;function cc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qi=tt.d;tt.d={f:BA,r:qA,D:jA,C:HA,L:GA,m:FA,X:KA,S:QA,M:YA};function BA(){var e=qi.f(),i=ec();return e||i}function qA(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?Np(i):qi.r(e)}var Ma=typeof document>"u"?null:document;function h_(e,i,a){var o=Ma;if(o&&typeof i=="string"&&i){var h=pe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),c_.has(h)||(c_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function jA(e){qi.D(e),h_("dns-prefetch",e,null)}function HA(e,i){qi.C(e,i),h_("preconnect",e,i)}function GA(e,i,a){qi.L(e,i,a);var o=Ma;if(o&&e&&i){var h='link[rel="preload"][as="'+pe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pe(a.imageSizes)+'"]')):h+='[href="'+pe(e)+'"]';var f=h;switch(i){case"style":f=Pa(e);break;case"script":f=Ua(e)}Mn.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Mn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(ll(f))||i==="script"&&o.querySelector(ul(f))||(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function FA(e,i){qi.m(e,i);var a=Ma;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pe(o)+'"][href="'+pe(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ua(e)}if(!Mn.has(f)&&(e=T({rel:"modulepreload",href:e},i),Mn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(f)))return}o=a.createElement("link"),Be(o,"link",e),ce(o),a.head.appendChild(o)}}}function QA(e,i,a){qi.S(e,i,a);var o=Ma;if(o&&e){var h=We(o).hoistableStyles,f=Pa(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(ll(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Mn.get(f))&&Td(e,a);var b=v=o.createElement("link");ce(b),Be(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,hc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function KA(e,i){qi.X(e,i);var a=Ma;if(a&&e){var o=We(a).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=a.querySelector(ul(h)),f||(e=T({src:e,async:!0},i),(i=Mn.get(h))&&Ad(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function YA(e,i){qi.M(e,i);var a=Ma;if(a&&e){var o=We(a).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=a.querySelector(ul(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=Mn.get(h))&&Ad(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function f_(e,i,a,o){var h=(h=_t.current)?cc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Pa(a.href),a=We(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Pa(a.href);var f=We(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(ll(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Mn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(e,a),f||XA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ua(a),a=We(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Pa(e){return'href="'+pe(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function d_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function XA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Be(i,"link",a),ce(i),e.head.appendChild(i))}function Ua(e){return'[src="'+pe(e)+'"]'}function ul(e){return"script[async]"+e}function m_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+pe(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),Be(o,"style",h),hc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Pa(a.href);var f=e.querySelector(ll(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=d_(a),(h=Mn.get(h))&&Td(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Be(f,"link",o),i.state.loading|=4,hc(f,a.precedence,e),i.instance=f;case"script":return f=Ua(a.src),(h=e.querySelector(ul(f)))?(i.instance=h,ce(h),h):(o=a,(h=Mn.get(f))&&(o=T({},a),Ad(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Be(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,hc(o,a.precedence,e));return i.instance}function hc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Ad(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var fc=null;function g_(e,i,a){if(fc===null){var o=new Map,h=fc=new Map;h.set(a,o)}else h=fc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ns]||f[Ae]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function p_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function $A(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function y_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var cl=null;function ZA(){}function JA(e,i,a){if(cl===null)throw Error(s(475));var o=cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Pa(a.href),f=e.querySelector(ll(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=dc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=d_(a),(h=Mn.get(h))&&Td(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Be(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=dc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function WA(){if(cl===null)throw Error(s(475));var e=cl;return e.stylesheets&&e.count===0&&Sd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Sd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function dc(){if(this.count--,this.count===0){if(this.stylesheets)Sd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mc=null;function Sd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mc=new Map,i.forEach(tS,e),mc=null,dc.call(e))}function tS(e,i){if(!(i.state.loading&4)){var a=mc.get(e);if(a)var o=a.get(null);else{a=new Map,mc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=dc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var hl={$$typeof:ct,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function eS(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function __(e,i,a,o,h,f,v,E,b,L,G,K){return e=new eS(e,i,a,v,E,b,L,K),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),e.current=f,f.stateNode=e,i=rf(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},lf(f),e}function v_(e){return e?(e=fa,e):fa}function E_(e,i,a,o,h,f){h=v_(h),o.context===null?o.context=h:o.pendingContext=h,o=or(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=lr(e,o,i),a!==null&&(_n(a,e,i),qo(a,e,i))}function T_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function bd(e,i){T_(e,i),(e=e.alternate)&&T_(e,i)}function A_(e){if(e.tag===13){var i=ha(e,67108864);i!==null&&_n(i,e,67108864),bd(e,67108864)}}var gc=!0;function nS(e,i,a,o){var h=H.T;H.T=null;var f=tt.p;try{tt.p=2,wd(e,i,a,o)}finally{tt.p=f,H.T=h}}function iS(e,i,a,o){var h=H.T;H.T=null;var f=tt.p;try{tt.p=8,wd(e,i,a,o)}finally{tt.p=f,H.T=h}}function wd(e,i,a,o){if(gc){var h=Rd(o);if(h===null)fd(e,i,o,pc,a),b_(e,o);else if(sS(h,e,i,a,o))o.stopPropagation();else if(b_(e,o),i&4&&-1<rS.indexOf(e)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=xn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Fe(v);E.entanglements[1]|=b,v&=~b}oi(f),(Gt&6)===0&&(Wu=Tn()+500,rl(0))}}break;case 13:E=ha(f,2),E!==null&&_n(E,f,2),ec(),bd(f,2)}if(f=Rd(o),f===null&&fd(e,i,o,pc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else fd(e,i,o,null,a)}}function Rd(e){return e=bn(e),Id(e)}var pc=null;function Id(e){if(pc=null,e=vi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return pc=e,null}function S_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dh()){case lo:return 2;case Gs:return 8;case Zr:case Nh:return 32;case Fs:return 268435456;default:return 32}default:return 32}}var Cd=!1,Tr=null,Ar=null,Sr=null,fl=new Map,dl=new Map,br=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b_(e,i){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function ml(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&A_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function sS(e,i,a,o,h){switch(i){case"focusin":return Tr=ml(Tr,e,i,a,o,h),!0;case"dragenter":return Ar=ml(Ar,e,i,a,o,h),!0;case"mouseover":return Sr=ml(Sr,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return fl.set(f,ml(fl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,dl.set(f,ml(dl.get(f)||null,e,i,a,o,h)),!0}return!1}function w_(e){var i=vi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,eu(e.priority,function(){if(a.tag===13){var o=yn();o=Ji(o);var h=ha(a,o);h!==null&&_n(h,a,o),bd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Rd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Si=o,a.target.dispatchEvent(o),Si=null}else return i=Kn(a),i!==null&&A_(i),e.blockedOn=a,!1;i.shift()}return!0}function R_(e,i,a){yc(e)&&a.delete(i)}function aS(){Cd=!1,Tr!==null&&yc(Tr)&&(Tr=null),Ar!==null&&yc(Ar)&&(Ar=null),Sr!==null&&yc(Sr)&&(Sr=null),fl.forEach(R_),dl.forEach(R_)}function _c(e,i){e.blockedOn===i&&(e.blockedOn=null,Cd||(Cd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aS)))}var vc=null;function I_(e){vc!==e&&(vc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){vc===e&&(vc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Id(o||a)===null)continue;break}var f=Kn(a);f!==null&&(e.splice(i,3),i-=3,If(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function gl(e){function i(b){return _c(b,e)}Tr!==null&&_c(Tr,e),Ar!==null&&_c(Ar,e),Sr!==null&&_c(Sr,e),fl.forEach(i),dl.forEach(i);for(var a=0;a<br.length;a++){var o=br[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<br.length&&(a=br[0],a.blockedOn===null);)w_(a),a.blockedOn===null&&br.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[ge]||null;if(typeof f=="function")v||I_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[ge]||null)E=v.formAction;else if(Id(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),I_(a)}}}function Dd(e){this._internalRoot=e}Ec.prototype.render=Dd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=yn();E_(a,o,e,i,null,null)},Ec.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;E_(e.current,2,null,e,null,null),ec(),i[An]=null}};function Ec(e){this._internalRoot=e}Ec.prototype.unstable_scheduleHydration=function(e){if(e){var i=Wi();e={blockedOn:null,target:e,priority:i};for(var a=0;a<br.length&&i!==0&&i<br[a].priority;a++);br.splice(a,0,e),a===0&&w_(e)}};var C_=t.version;if(C_!=="19.1.1")throw Error(s(527,C_,"19.1.1"));tt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var oS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{ae=Tc.inject(oS),Ht=Tc}catch{}}return yl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Gp,f=Fp,v=Qp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=__(e,1,!1,null,null,a,o,h,f,v,E,null),e[An]=i.current,hd(e),new Dd(i)},yl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Gp,v=Fp,E=Qp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=__(e,1,!0,i,a??null,o,h,f,v,E,b,L),i.context=v_(null),a=i.current,o=yn(),o=Ji(o),h=or(o),h.callback=null,lr(a,h,o),a=o,i.current.lanes=a,_i(i,a),oi(i),e[An]=i.current,hd(e),new Ec(i)},yl.version="19.1.1",yl}var L_;function yS(){if(L_)return Vd.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Vd.exports=pS(),Vd.exports}var _S=yS();const vS=()=>{};var z_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},ES=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,T=c>>2,I=(c&3)<<4|g>>4;let C=(g&15)<<2|y>>6,q=y&63;p||(q=64,d||(C=64)),s.push(n[T],n[I],n[C],n[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(yE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):ES(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||I==null)throw new TS;const C=c<<2|g>>4;if(s.push(C),y!==64){const q=g<<4&240|y>>2;if(s.push(q),I!==64){const $=y<<6&192|I;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AS=function(r){const t=yE(r);return _E.encodeByteArray(t,!0)},Lc=function(r){return AS(r).replace(/\./g,"")},vE=function(r){try{return _E.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=()=>SS().__FIREBASE_DEFAULTS__,wS=()=>{if(typeof process>"u"||typeof z_>"u")return;const r=z_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},RS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&vE(r[1]);return t&&JSON.parse(t)},sh=()=>{try{return vS()||bS()||wS()||RS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},EE=r=>sh()?.emulatorHosts?.[r],IS=r=>{const t=EE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},TE=()=>sh()?.config,AE=r=>sh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function SE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lc(JSON.stringify(n)),Lc(JSON.stringify(d)),""].join(".")}const Al={};function NS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Al))Al[t]?r.emulator.push(t):r.prod.push(t);return r}function OS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let B_=!1;function bE(r,t){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||Al[r]===t||Al[r]||B_)return;Al[r]=t;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",c=NS().prod.length>0;function d(){const C=document.getElementById(s);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,q){C.setAttribute("width","24"),C.setAttribute("id",q),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{B_=!0,d()},C}function T(C,q){C.setAttribute("id",q),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function I(){const C=OS(s),q=n("text"),$=document.getElementById(q)||document.createElement("span"),it=n("learnmore"),Z=document.getElementById(it)||document.createElement("a"),Tt=n("preprendIcon"),pt=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ct=C.element;g(ct),T(Z,it);const jt=y();p(pt,Tt),ct.append(pt,$,Z,jt),document.body.appendChild(ct)}c?($.innerText="Preview backend disconnected.",pt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function MS(){const r=sh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function xS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kS(){const r=Je();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LS(){return!MS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zS(){try{return typeof indexedDB=="object"}catch{return!1}}function BS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="FirebaseError";class $i extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=qS,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?jS(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new $i(l,g,s)}}function jS(r,t){return r.replace(HS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const HS=/\{\$([^}]+)}/g;function GS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Us(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(q_(c)&&q_(d)){if(!Us(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function q_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function FS(r,t){const n=new QS(r,t);return n.subscribe.bind(n)}class QS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");KS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=xd),l.error===void 0&&(l.error=xd),l.complete===void 0&&(l.complete=xd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r){return r&&r._delegate?r._delegate:r}class xs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new CS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($S(t))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Os){return this.instances.has(t)}getOptions(t=Os){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Os){return this.component?this.component.multipleInstances?t:Os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XS(r){return r===Os?void 0:r}function $S(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new YS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const JS={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},WS=Dt.INFO,t1={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},e1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=t1[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Am{constructor(t){this.name=t,this._logLevel=WS,this._logHandler=e1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const n1=(r,t)=>t.some(n=>r instanceof n);let j_,H_;function i1(){return j_||(j_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r1(){return H_||(H_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wE=new WeakMap,Xd=new WeakMap,RE=new WeakMap,kd=new WeakMap,Sm=new WeakMap;function s1(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Vr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&wE.set(n,r)}).catch(()=>{}),Sm.set(t,r),t}function a1(r){if(Xd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Xd.set(r,t)}let $d={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Xd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||RE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function o1(r){$d=r($d)}function l1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Ld(this),t,...n);return RE.set(s,t.sort?t.sort():[t]),Vr(s)}:r1().includes(r)?function(...t){return r.apply(Ld(this),t),Vr(wE.get(this))}:function(...t){return Vr(r.apply(Ld(this),t))}}function u1(r){return typeof r=="function"?l1(r):(r instanceof IDBTransaction&&a1(r),n1(r,i1())?new Proxy(r,$d):r)}function Vr(r){if(r instanceof IDBRequest)return s1(r);if(kd.has(r))return kd.get(r);const t=u1(r);return t!==r&&(kd.set(r,t),Sm.set(t,r)),t}const Ld=r=>Sm.get(r);function c1(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Vr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Vr(d.result),p.oldVersion,p.newVersion,Vr(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const h1=["get","getKey","getAll","getAllKeys","count"],f1=["put","add","delete","clear"],zd=new Map;function G_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(zd.get(t))return zd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=f1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||h1.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return zd.set(t,c),c}o1(r=>({...r,get:(t,n,s)=>G_(t,n)||r.get(t,n,s),has:(t,n)=>!!G_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(m1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function m1(r){return r.getComponent()?.type==="VERSION"}const Zd="@firebase/app",F_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Am("@firebase/app"),g1="@firebase/app-compat",p1="@firebase/analytics-compat",y1="@firebase/analytics",_1="@firebase/app-check-compat",v1="@firebase/app-check",E1="@firebase/auth",T1="@firebase/auth-compat",A1="@firebase/database",S1="@firebase/data-connect",b1="@firebase/database-compat",w1="@firebase/functions",R1="@firebase/functions-compat",I1="@firebase/installations",C1="@firebase/installations-compat",D1="@firebase/messaging",N1="@firebase/messaging-compat",O1="@firebase/performance",V1="@firebase/performance-compat",M1="@firebase/remote-config",P1="@firebase/remote-config-compat",U1="@firebase/storage",x1="@firebase/storage-compat",k1="@firebase/firestore",L1="@firebase/ai",z1="@firebase/firestore-compat",B1="firebase",q1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",j1={[Zd]:"fire-core",[g1]:"fire-core-compat",[y1]:"fire-analytics",[p1]:"fire-analytics-compat",[v1]:"fire-app-check",[_1]:"fire-app-check-compat",[E1]:"fire-auth",[T1]:"fire-auth-compat",[A1]:"fire-rtdb",[S1]:"fire-data-connect",[b1]:"fire-rtdb-compat",[w1]:"fire-fn",[R1]:"fire-fn-compat",[I1]:"fire-iid",[C1]:"fire-iid-compat",[D1]:"fire-fcm",[N1]:"fire-fcm-compat",[O1]:"fire-perf",[V1]:"fire-perf-compat",[M1]:"fire-rc",[P1]:"fire-rc-compat",[U1]:"fire-gcs",[x1]:"fire-gcs-compat",[k1]:"fire-fst",[z1]:"fire-fst-compat",[L1]:"fire-vertex","fire-js":"fire-js",[B1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,H1=new Map,Wd=new Map;function Q_(r,t){try{r.container.addComponent(t)}catch(n){Fi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Fa(r){const t=r.name;if(Wd.has(t))return Fi.debug(`There were multiple attempts to register component ${t}.`),!1;Wd.set(t,r);for(const n of zc.values())Q_(n,r);for(const n of H1.values())Q_(n,r);return!0}function bm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Ll("app","Firebase",G1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=q1;function IE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Jd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Mr.create("bad-app-name",{appName:String(l)});if(n||(n=TE()),!n)throw Mr.create("no-options");const c=zc.get(l);if(c){if(Us(n,c.options)&&Us(s,c.config))return c;throw Mr.create("duplicate-app",{appName:l})}const d=new ZS(l);for(const p of Wd.values())d.addComponent(p);const g=new F1(n,s,d);return zc.set(l,g),g}function CE(r=Jd){const t=zc.get(r);if(!t&&r===Jd&&TE())return IE();if(!t)throw Mr.create("no-app",{appName:r});return t}function Pr(r,t,n){let s=j1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fi.warn(d.join(" "));return}Fa(new xs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebase-heartbeat-database",K1=1,Dl="firebase-heartbeat-store";let Bd=null;function DE(){return Bd||(Bd=c1(Q1,K1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Mr.create("idb-open",{originalErrorMessage:r.message})})),Bd}async function Y1(r){try{const n=(await DE()).transaction(Dl),s=await n.objectStore(Dl).get(NE(r));return await n.done,s}catch(t){if(t instanceof $i)Fi.warn(t.message);else{const n=Mr.create("idb-get",{originalErrorMessage:t?.message});Fi.warn(n.message)}}}async function K_(r,t){try{const s=(await DE()).transaction(Dl,"readwrite");await s.objectStore(Dl).put(t,NE(r)),await s.done}catch(n){if(n instanceof $i)Fi.warn(n.message);else{const s=Mr.create("idb-set",{originalErrorMessage:n?.message});Fi.warn(s.message)}}}function NE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=1024,$1=30;class Z1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>$1){const l=tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Fi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y_(),{heartbeatsToSend:n,unsentEntries:s}=J1(this._heartbeatsCache.heartbeats),l=Lc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fi.warn(t),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function J1(r,t=X1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),X_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),X_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class W1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zS()?BS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Y1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function X_(r){return Lc(JSON.stringify({version:2,heartbeats:r})).length}function tb(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r){Fa(new xs("platform-logger",t=>new d1(t),"PRIVATE")),Fa(new xs("heartbeat",t=>new Z1(t),"PRIVATE")),Pr(Zd,F_,r),Pr(Zd,F_,"esm2020"),Pr("fire-js","")}eb("");var nb="firebase",ib="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(nb,ib,"app");function OE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rb=OE,VE=new Ll("auth","Firebase",OE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Am("@firebase/auth");function sb(r,...t){Bc.logLevel<=Dt.WARN&&Bc.warn(`Auth (${to}): ${r}`,...t)}function Cc(r,...t){Bc.logLevel<=Dt.ERROR&&Bc.error(`Auth (${to}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(r,...t){throw wm(r,...t)}function ui(r,...t){return wm(r,...t)}function ME(r,t,n){const s={...rb(),[t]:n};return new Ll("auth","Firebase",s).create(t,{appName:r.name})}function Ur(r){return ME(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return VE.create(r,...t)}function yt(r,t,...n){if(!r)throw wm(t,...n)}function ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Cc(t),new Error(t)}function Ki(r,t){r||ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){return typeof self<"u"&&self.location?.href||""}function ab(){return $_()==="http:"||$_()==="https:"}function $_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ab()||US()||"connection"in navigator)?navigator.onLine:!0}function lb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=VS()||xS()}get(){return ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hb=new Bl(3e4,6e4);function ah(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function eo(r,t,n,s,l={}){return UE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=zl({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:p,...c};return PS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(y.credentials="include"),PE.fetch()(await kE(r,r.config.apiHost,n,g),y)})}async function UE(r,t,n){r._canInitEmulator=!1;const s={...ub,...t};try{const l=new fb(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ac(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Ac(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Ac(r,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ME(r,T,y);Qi(r,T)}}catch(l){if(l instanceof $i)throw l;Qi(r,"network-request-failed",{message:String(l)})}}async function xE(r,t,n,s,l={}){const c=await eo(r,t,n,s,l);return"mfaPendingCredential"in c&&Qi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function kE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?Rm(r.config,l):`${r.config.apiScheme}://${l}`;return cb.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class fb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ui(this.auth,"network-request-failed")),hb.get())})}}function Ac(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ui(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(r,t){return eo(r,"POST","/v1/accounts:delete",t)}async function qc(r,t){return eo(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mb(r,t=!1){const n=He(r),s=await n.getIdToken(t),l=Im(s);yt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Sl(qd(l.auth_time)),issuedAtTime:Sl(qd(l.iat)),expirationTime:Sl(qd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qd(r){return Number(r)*1e3}function Im(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Cc("JWT malformed, contained fewer than 3 sections"),null;try{const l=vE(n);return l?JSON.parse(l):(Cc("Failed to decode base64 JWT payload"),null)}catch(l){return Cc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Z_(r){const t=Im(r);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof $i&&gb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function gb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r){const t=r.auth,n=await r.getIdToken(),s=await Nl(r,qc(t,{idToken:n}));yt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?LE(l.providerUserInfo):[],d=_b(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!d?.length,y=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new em(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function yb(r){const t=He(r);await jc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _b(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function LE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r,t){const n=await UE(r,{},async()=>{const s=zl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await kE(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(p.credentials="include"),PE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Eb(r,t){return eo(r,"POST","/v2/accounts:revokeToken",ah(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Z_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const n=Z_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await vb(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new qa;return s&&(yt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(yt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(yt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(r,t){yt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Hn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new pb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new em(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Nl(this,this.stsTokenManager.getToken(this.auth,t));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return mb(this,t)}reload(){return yb(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Hn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await jc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Ur(this.auth));const t=await this.getIdToken();return await Nl(this,db(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:I,emailVerified:C,isAnonymous:q,providerData:$,stsTokenManager:it}=n;yt(I&&it,t,"internal-error");const Z=qa.fromJSON(this.name,it);yt(typeof I=="string",t,"internal-error"),Rr(s,t.name),Rr(l,t.name),yt(typeof C=="boolean",t,"internal-error"),yt(typeof q=="boolean",t,"internal-error"),Rr(c,t.name),Rr(d,t.name),Rr(g,t.name),Rr(p,t.name),Rr(y,t.name),Rr(T,t.name);const Tt=new Hn({uid:I,auth:t,email:l,emailVerified:C,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:Z,createdAt:y,lastLoginAt:T});return $&&Array.isArray($)&&(Tt.providerData=$.map(pt=>({...pt}))),p&&(Tt._redirectEventId=p),Tt}static async _fromIdTokenResponse(t,n,s=!1){const l=new qa;l.updateFromServerResponse(n);const c=new Hn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await jc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];yt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?LE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new qa;g.updateFromIdToken(s);const p=new Hn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new em(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;function Hi(r){Ki(r instanceof Function,"Expected a class definition");let t=J_.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,J_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}zE.type="NONE";const W_=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r,t,n){return`firebase:${r}:${t}:${n}`}class ja{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Dc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Dc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await qc(this.auth,{idToken:t}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,t):null}return Hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new ja(Hi(W_),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Hi(W_);const d=Dc(s,t.config.apiKey,t.name);let g=null;for(const y of n)try{const T=await y._get(d);if(T){let I;if(typeof T=="string"){const C=await qc(t,{idToken:T}).catch(()=>{});if(!C)break;I=await Hn._fromGetAccountInfoResponse(t,C,T)}else I=Hn._fromJSON(t,T);y!==c&&(g=I),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new ja(c,t,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new ja(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(BE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(FE(t))return"Blackberry";if(QE(t))return"Webos";if(qE(t))return"Safari";if((t.includes("chrome/")||jE(t))&&!t.includes("edge/"))return"Chrome";if(GE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function BE(r=Je()){return/firefox\//i.test(r)}function qE(r=Je()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jE(r=Je()){return/crios\//i.test(r)}function HE(r=Je()){return/iemobile/i.test(r)}function GE(r=Je()){return/android/i.test(r)}function FE(r=Je()){return/blackberry/i.test(r)}function QE(r=Je()){return/webos/i.test(r)}function Cm(r=Je()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Tb(r=Je()){return Cm(r)&&!!window.navigator?.standalone}function Ab(){return kS()&&document.documentMode===10}function KE(r=Je()){return Cm(r)||GE(r)||QE(r)||FE(r)||/windows phone/i.test(r)||HE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(r,t=[]){let n;switch(r){case"Browser":n=tv(Je());break;case"Worker":n=`${tv(Je())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(r,t={}){return eo(r,"GET","/v2/passwordPolicy",ah(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=6;class Rb{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new Sb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ja.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await qc(this,{idToken:t}),s=await Hn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await jc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(Ur(this));const n=t?He(t):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await bb(this),n=new Rb(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ll("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Eb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hi(t)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{d=!0,p()}}else{const p=t.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&sb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function oh(r){return He(r)}class ev{constructor(t){this.auth=t,this.observer=null,this.addObserver=FS(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cb(r){Dm=r}function Db(r){return Dm.loadJS(r)}function Nb(){return Dm.gapiScript}function Ob(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r,t){const n=bm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Us(c,t??{}))return l;Qi(l,"already-initialized")}return n.initialize({options:t})}function Mb(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Hi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Pb(r,t,n){const s=oh(r);yt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=XE(t),{host:d,port:g}=Ub(t),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},T=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){yt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),yt(Us(y,s.config.emulator)&&Us(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Wa(d)?(SE(`${c}//${d}${p}`),bE("Auth",!0)):xb()}function XE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Ub(r){const t=XE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:nv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:nv(d)}}}function nv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function xb(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(t){return ji("not implemented")}_linkToIdToken(t,n){return ji("not implemented")}_getReauthenticationResolver(t){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(r,t){return xE(r,"POST","/v1/accounts:signInWithIdp",ah(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="http://localhost";class ks extends $E{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new ks(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Ha(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ha(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ha(t,n)}buildRequest(){const t={requestUri:kb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=zl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends ZE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends ql{constructor(){super("facebook.com")}static credential(t){return ks._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ir.credentialFromTaggedObject(t)}static credentialFromError(t){return Ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ir.credential(t.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ks._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Cr.credential(n,s)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends ql{constructor(){super("github.com")}static credential(t){return ks._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends ql{constructor(){super("twitter.com")}static credential(t,n){return ks._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(r,t){return xE(r,"POST","/v1/accounts:signUp",ah(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Hn._fromIdTokenResponse(t,s,l),d=iv(s);return new Lr({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=iv(s);return new Lr({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function iv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(r){if(jn(r.app))return Promise.reject(Ur(r));const t=oh(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Lr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Lb(t,{returnSecureToken:!0}),s=await Lr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends $i{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Hc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Hc(t,n,s,l)}}function JE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Hc._fromErrorAndOperation(r,c,t,s):c})}async function Bb(r,t,n=!1){const s=await Nl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Lr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(r,t,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(Ur(s));const l="reauthenticate";try{const c=await Nl(r,JE(s,l,t,r),n);yt(c.idToken,s,"internal-error");const d=Im(c.idToken);yt(d,s,"internal-error");const{sub:g}=d;return yt(r.uid===g,s,"user-mismatch"),Lr._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Qi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(r,t,n=!1){if(jn(r.app))return Promise.reject(Ur(r));const s="signIn",l=await JE(r,s,t),c=await Lr._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function Hb(r,t,n,s){return He(r).onIdTokenChanged(t,n,s)}function Gb(r,t,n){return He(r).beforeAuthStateChanged(t,n)}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=1e3,Qb=10;class tT extends WE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Ab()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Qb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Fb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}tT.type="LOCAL";const Kb=tT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends WE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}eT.type="SESSION";const nT=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new lh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await Yb(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=Nm("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(I){const C=I;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(C.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function $b(r){ci().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function Zb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jb(){return navigator?.serviceWorker?.controller||null}function Wb(){return iT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",tw=1,Fc="firebaseLocalStorage",sT="fbase_key";class jl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uh(r,t){return r.transaction([Fc],t?"readwrite":"readonly").objectStore(Fc)}function ew(){const r=indexedDB.deleteDatabase(rT);return new jl(r).toPromise()}function nm(){const r=indexedDB.open(rT,tw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Fc,{keyPath:sT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Fc)?t(s):(s.close(),await ew(),t(await nm()))})})}async function rv(r,t,n){const s=uh(r,!0).put({[sT]:t,value:n});return new jl(s).toPromise()}async function nw(r,t){const n=uh(r,!1).get(t),s=await new jl(n).toPromise();return s===void 0?null:s.value}function sv(r,t){const n=uh(r,!0).delete(t);return new jl(n).toPromise()}const iw=800,rw=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>rw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(Wb()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Zb(),!this.activeServiceWorker)return;this.sender=new Xb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Jb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nm();return await rv(t,Gc,"1"),await sv(t,Gc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>rv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>nw(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=uh(l,!1).getAll();return new jl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const sw=aT;new Bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r,t){return t?Hi(t):(yt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends $E{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ha(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ha(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ha(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function ow(r){return jb(r.auth,new Om(r),r.bypassAuthState)}function lw(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),qb(n,new Om(r),r.bypassAuthState)}async function uw(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),Bb(n,new Om(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ow;case"linkViaPopup":case"linkViaRedirect":return uw;case"reauthViaPopup":case"reauthViaRedirect":return lw;default:Qi(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Bl(2e3,1e4);class Ba extends oT{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=Nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,cw.get())};t()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="pendingRedirect",Nc=new Map;class fw extends oT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Nc.get(this.auth._key());if(!t){try{const s=await dw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Nc.set(this.auth._key(),t)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dw(r,t){const n=pw(t),s=gw(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function mw(r,t){Nc.set(r._key(),t)}function gw(r){return Hi(r._redirectPersistence)}function pw(r){return Dc(hw,r.config.apiKey,r.name)}async function yw(r,t,n=!1){if(jn(r.app))return Promise.reject(Ur(r));const s=oh(r),l=aw(s,t),d=await new fw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=600*1e3;class vw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Ew(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!lT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ui(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=_w&&this.cachedEventUids.clear(),this.cachedEventUids.has(av(t))}saveEventToCache(t){this.cachedEventUids.add(av(t)),this.lastProcessedEventTime=Date.now()}}function av(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function lT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Ew(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r,t={}){return eo(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sw=/^https?/;async function bw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Tw(r);for(const n of t)try{if(ww(n))return}catch{}Qi(r,"unauthorized-domain")}function ww(r){const t=tm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Sw.test(n))return!1;if(Aw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Bl(3e4,6e4);function ov(){const r=ci().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Iw(r){return new Promise((t,n)=>{function s(){ov(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ov(),n(ui(r,"network-request-failed"))},timeout:Rw.get()})}if(ci().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ci().gapi?.load)s();else{const l=Ob("iframefcb");return ci()[l]=()=>{gapi.load?s():n(ui(r,"network-request-failed"))},Db(`${Nb()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Oc=null,t})}let Oc=null;function Cw(r){return Oc=Oc||Iw(r),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Bl(5e3,15e3),Nw="__/auth/iframe",Ow="emulator/auth/iframe",Vw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pw(r){const t=r.config;yt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Rm(t,Ow):`https://${r.config.authDomain}/${Nw}`,s={apiKey:t.apiKey,appName:r.name,v:to},l=Mw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${zl(s).slice(1)}`}async function Uw(r){const t=await Cw(r),n=ci().gapi;return yt(n,r,"internal-error"),t.open({where:document.body,url:Pw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vw,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=ui(r,"network-request-failed"),g=ci().setTimeout(()=>{c(d)},Dw.get());function p(){ci().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kw=500,Lw=600,zw="_blank",Bw="http://localhost";class lv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qw(r,t,n,s=kw,l=Lw){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...xw,width:s.toString(),height:l.toString(),top:c,left:d},y=Je().toLowerCase();n&&(g=jE(y)?zw:n),BE(y)&&(t=t||Bw,p.scrollbars="yes");const T=Object.entries(p).reduce((C,[q,$])=>`${C}${q}=${$},`,"");if(Tb(y)&&g!=="_self")return jw(t||"",g),new lv(null);const I=window.open(t||"",g,T);yt(I,r,"popup-blocked");try{I.focus()}catch{}return new lv(I)}function jw(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="__/auth/handler",Gw="emulator/auth/handler",Fw=encodeURIComponent("fac");async function uv(r,t,n,s,l,c){yt(r.config.authDomain,r,"auth-domain-config-required"),yt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:to,eventId:l};if(t instanceof ZE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",GS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,I]of Object.entries({}))d[T]=I}if(t instanceof ql){const T=t.getScopes().filter(I=>I!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),y=p?`#${Fw}=${encodeURIComponent(p)}`:"";return`${Qw(r)}?${zl(g).slice(1)}${y}`}function Qw({config:r}){return r.emulator?Rm(r,Gw):`https://${r.authDomain}/${Hw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="webStorageSupport";class Kw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nT,this._completeRedirectFn=yw,this._overrideRedirectResult=mw}async _openPopup(t,n,s,l){Ki(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await uv(t,n,s,tm(),l);return qw(t,c,Nm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await uv(t,n,s,tm(),l);return $b(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ki(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Uw(t),s=new vw(t);return n.register("authEvent",l=>(yt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(jd,{type:jd},l=>{const c=l?.[0]?.[jd];c!==void 0&&n(!!c),Qi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return KE()||qE()||Cm()}}const Yw=Kw;var cv="@firebase/auth",hv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zw(r){Fa(new xs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;yt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YE(r)},y=new Ib(s,l,c,p);return Mb(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Fa(new xs("auth-internal",t=>{const n=oh(t.getProvider("auth").getImmediate());return(s=>new Xw(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(cv,hv,$w(r)),Pr(cv,hv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=300,Ww=AE("authIdTokenMaxAge")||Jw;let fv=null;const tR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Ww)return;const l=n?.token;fv!==l&&(fv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function eR(r=CE()){const t=bm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Vb(r,{popupRedirectResolver:Yw,persistence:[sw,Kb,nT]}),s=AE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=tR(c.toString());Gb(n,d,()=>d(n.currentUser)),Hb(n,g=>d(g))}}const l=EE("auth");return l&&Pb(n,`http://${l}`),n}function nR(){return document.getElementsByTagName("head")?.[0]??document}Cb({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ui("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",nR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zw("Browser");var dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,uT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,S){function R(){}R.prototype=S.prototype,M.D=S.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(O,V,U){for(var w=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)w[Ue-2]=arguments[Ue];return S.prototype[V].apply(O,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,R){R||(R=0);var O=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)O[V]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=M.g[0],R=M.g[1],V=M.g[2];var U=M.g[3],w=S+(U^R&(V^U))+O[0]+3614090360&4294967295;S=R+(w<<7&4294967295|w>>>25),w=U+(V^S&(R^V))+O[1]+3905402710&4294967295,U=S+(w<<12&4294967295|w>>>20),w=V+(R^U&(S^R))+O[2]+606105819&4294967295,V=U+(w<<17&4294967295|w>>>15),w=R+(S^V&(U^S))+O[3]+3250441966&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(U^R&(V^U))+O[4]+4118548399&4294967295,S=R+(w<<7&4294967295|w>>>25),w=U+(V^S&(R^V))+O[5]+1200080426&4294967295,U=S+(w<<12&4294967295|w>>>20),w=V+(R^U&(S^R))+O[6]+2821735955&4294967295,V=U+(w<<17&4294967295|w>>>15),w=R+(S^V&(U^S))+O[7]+4249261313&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(U^R&(V^U))+O[8]+1770035416&4294967295,S=R+(w<<7&4294967295|w>>>25),w=U+(V^S&(R^V))+O[9]+2336552879&4294967295,U=S+(w<<12&4294967295|w>>>20),w=V+(R^U&(S^R))+O[10]+4294925233&4294967295,V=U+(w<<17&4294967295|w>>>15),w=R+(S^V&(U^S))+O[11]+2304563134&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(U^R&(V^U))+O[12]+1804603682&4294967295,S=R+(w<<7&4294967295|w>>>25),w=U+(V^S&(R^V))+O[13]+4254626195&4294967295,U=S+(w<<12&4294967295|w>>>20),w=V+(R^U&(S^R))+O[14]+2792965006&4294967295,V=U+(w<<17&4294967295|w>>>15),w=R+(S^V&(U^S))+O[15]+1236535329&4294967295,R=V+(w<<22&4294967295|w>>>10),w=S+(V^U&(R^V))+O[1]+4129170786&4294967295,S=R+(w<<5&4294967295|w>>>27),w=U+(R^V&(S^R))+O[6]+3225465664&4294967295,U=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(U^S))+O[11]+643717713&4294967295,V=U+(w<<14&4294967295|w>>>18),w=R+(U^S&(V^U))+O[0]+3921069994&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^U&(R^V))+O[5]+3593408605&4294967295,S=R+(w<<5&4294967295|w>>>27),w=U+(R^V&(S^R))+O[10]+38016083&4294967295,U=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(U^S))+O[15]+3634488961&4294967295,V=U+(w<<14&4294967295|w>>>18),w=R+(U^S&(V^U))+O[4]+3889429448&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^U&(R^V))+O[9]+568446438&4294967295,S=R+(w<<5&4294967295|w>>>27),w=U+(R^V&(S^R))+O[14]+3275163606&4294967295,U=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(U^S))+O[3]+4107603335&4294967295,V=U+(w<<14&4294967295|w>>>18),w=R+(U^S&(V^U))+O[8]+1163531501&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(V^U&(R^V))+O[13]+2850285829&4294967295,S=R+(w<<5&4294967295|w>>>27),w=U+(R^V&(S^R))+O[2]+4243563512&4294967295,U=S+(w<<9&4294967295|w>>>23),w=V+(S^R&(U^S))+O[7]+1735328473&4294967295,V=U+(w<<14&4294967295|w>>>18),w=R+(U^S&(V^U))+O[12]+2368359562&4294967295,R=V+(w<<20&4294967295|w>>>12),w=S+(R^V^U)+O[5]+4294588738&4294967295,S=R+(w<<4&4294967295|w>>>28),w=U+(S^R^V)+O[8]+2272392833&4294967295,U=S+(w<<11&4294967295|w>>>21),w=V+(U^S^R)+O[11]+1839030562&4294967295,V=U+(w<<16&4294967295|w>>>16),w=R+(V^U^S)+O[14]+4259657740&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^U)+O[1]+2763975236&4294967295,S=R+(w<<4&4294967295|w>>>28),w=U+(S^R^V)+O[4]+1272893353&4294967295,U=S+(w<<11&4294967295|w>>>21),w=V+(U^S^R)+O[7]+4139469664&4294967295,V=U+(w<<16&4294967295|w>>>16),w=R+(V^U^S)+O[10]+3200236656&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^U)+O[13]+681279174&4294967295,S=R+(w<<4&4294967295|w>>>28),w=U+(S^R^V)+O[0]+3936430074&4294967295,U=S+(w<<11&4294967295|w>>>21),w=V+(U^S^R)+O[3]+3572445317&4294967295,V=U+(w<<16&4294967295|w>>>16),w=R+(V^U^S)+O[6]+76029189&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(R^V^U)+O[9]+3654602809&4294967295,S=R+(w<<4&4294967295|w>>>28),w=U+(S^R^V)+O[12]+3873151461&4294967295,U=S+(w<<11&4294967295|w>>>21),w=V+(U^S^R)+O[15]+530742520&4294967295,V=U+(w<<16&4294967295|w>>>16),w=R+(V^U^S)+O[2]+3299628645&4294967295,R=V+(w<<23&4294967295|w>>>9),w=S+(V^(R|~U))+O[0]+4096336452&4294967295,S=R+(w<<6&4294967295|w>>>26),w=U+(R^(S|~V))+O[7]+1126891415&4294967295,U=S+(w<<10&4294967295|w>>>22),w=V+(S^(U|~R))+O[14]+2878612391&4294967295,V=U+(w<<15&4294967295|w>>>17),w=R+(U^(V|~S))+O[5]+4237533241&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~U))+O[12]+1700485571&4294967295,S=R+(w<<6&4294967295|w>>>26),w=U+(R^(S|~V))+O[3]+2399980690&4294967295,U=S+(w<<10&4294967295|w>>>22),w=V+(S^(U|~R))+O[10]+4293915773&4294967295,V=U+(w<<15&4294967295|w>>>17),w=R+(U^(V|~S))+O[1]+2240044497&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~U))+O[8]+1873313359&4294967295,S=R+(w<<6&4294967295|w>>>26),w=U+(R^(S|~V))+O[15]+4264355552&4294967295,U=S+(w<<10&4294967295|w>>>22),w=V+(S^(U|~R))+O[6]+2734768916&4294967295,V=U+(w<<15&4294967295|w>>>17),w=R+(U^(V|~S))+O[13]+1309151649&4294967295,R=V+(w<<21&4294967295|w>>>11),w=S+(V^(R|~U))+O[4]+4149444226&4294967295,S=R+(w<<6&4294967295|w>>>26),w=U+(R^(S|~V))+O[11]+3174756917&4294967295,U=S+(w<<10&4294967295|w>>>22),w=V+(S^(U|~R))+O[2]+718787259&4294967295,V=U+(w<<15&4294967295|w>>>17),w=R+(U^(V|~S))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(V+(w<<21&4294967295|w>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+U&4294967295}s.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var R=S-this.blockSize,O=this.B,V=this.h,U=0;U<S;){if(V==0)for(;U<=R;)l(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<S;)if(O[V++]=M.charCodeAt(U++),V==this.blockSize){l(this,O),V=0;break}}else for(;U<S;)if(O[V++]=M[U++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=S},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var R=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=R&255,R/=256;for(this.u(M),M=Array(16),S=R=0;4>S;++S)for(var O=0;32>O;O+=8)M[R++]=this.g[S]>>>O&255;return M};function c(M,S){var R=g;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=S(M)}function d(M,S){this.h=S;for(var R=[],O=!0,V=M.length-1;0<=V;V--){var U=M[V]|0;O&&U==S||(R[V]=U,O=!1)}this.g=R}var g={};function p(M){return-128<=M&&128>M?c(M,function(S){return new d([S|0],0>S?-1:0)}):new d([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return I;if(0>M)return Z(y(-M));for(var S=[],R=1,O=0;M>=R;O++)S[O]=M/R|0,R*=4294967296;return new d(S,0)}function T(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return Z(T(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),O=I,V=0;V<M.length;V+=8){var U=Math.min(8,M.length-V),w=parseInt(M.substring(V,V+U),S);8>U?(U=y(Math.pow(S,U)),O=O.j(U).add(y(w))):(O=O.j(R),O=O.add(y(w)))}return O}var I=p(0),C=p(1),q=p(16777216);r=d.prototype,r.m=function(){if(it(this))return-Z(this).m();for(var M=0,S=1,R=0;R<this.g.length;R++){var O=this.i(R);M+=(0<=O?O:4294967296+O)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if($(this))return"0";if(it(this))return"-"+Z(this).toString(M);for(var S=y(Math.pow(M,6)),R=this,O="";;){var V=jt(R,S).g;R=Tt(R,V.j(S));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=V,$(R))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function $(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function it(M){return M.h==-1}r.l=function(M){return M=Tt(this,M),it(M)?-1:$(M)?0:1};function Z(M){for(var S=M.g.length,R=[],O=0;O<S;O++)R[O]=~M.g[O];return new d(R,~M.h).add(C)}r.abs=function(){return it(this)?Z(this):this},r.add=function(M){for(var S=Math.max(this.g.length,M.g.length),R=[],O=0,V=0;V<=S;V++){var U=O+(this.i(V)&65535)+(M.i(V)&65535),w=(U>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=w>>>16,U&=65535,w&=65535,R[V]=w<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Tt(M,S){return M.add(Z(S))}r.j=function(M){if($(this)||$(M))return I;if(it(this))return it(M)?Z(this).j(Z(M)):Z(Z(this).j(M));if(it(M))return Z(this.j(Z(M)));if(0>this.l(q)&&0>M.l(q))return y(this.m()*M.m());for(var S=this.g.length+M.g.length,R=[],O=0;O<2*S;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var U=this.i(O)>>>16,w=this.i(O)&65535,Ue=M.i(V)>>>16,se=M.i(V)&65535;R[2*O+2*V]+=w*se,pt(R,2*O+2*V),R[2*O+2*V+1]+=U*se,pt(R,2*O+2*V+1),R[2*O+2*V+1]+=w*Ue,pt(R,2*O+2*V+1),R[2*O+2*V+2]+=U*Ue,pt(R,2*O+2*V+2)}for(O=0;O<S;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=S;O<2*S;O++)R[O]=0;return new d(R,0)};function pt(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ct(M,S){this.g=M,this.h=S}function jt(M,S){if($(S))throw Error("division by zero");if($(M))return new ct(I,I);if(it(M))return S=jt(Z(M),S),new ct(Z(S.g),Z(S.h));if(it(S))return S=jt(M,Z(S)),new ct(Z(S.g),S.h);if(30<M.g.length){if(it(M)||it(S))throw Error("slowDivide_ only works with positive integers.");for(var R=C,O=S;0>=O.l(M);)R=At(R),O=At(O);var V=zt(R,1),U=zt(O,1);for(O=zt(O,2),R=zt(R,2);!$(O);){var w=U.add(O);0>=w.l(M)&&(V=V.add(R),U=w),O=zt(O,1),R=zt(R,1)}return S=Tt(M,V.j(S)),new ct(V,S)}for(V=I;0<=M.l(S);){for(R=Math.max(1,Math.floor(M.m()/S.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=y(R),w=U.j(S);it(w)||0<w.l(M);)R-=O,U=y(R),w=U.j(S);$(U)&&(U=C),V=V.add(U),M=Tt(M,w)}return new ct(V,M)}r.A=function(M){return jt(this,M).h},r.and=function(M){for(var S=Math.max(this.g.length,M.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)&M.i(O);return new d(R,this.h&M.h)},r.or=function(M){for(var S=Math.max(this.g.length,M.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)|M.i(O);return new d(R,this.h|M.h)},r.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)^M.i(O);return new d(R,this.h^M.h)};function At(M){for(var S=M.g.length+1,R=[],O=0;O<S;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new d(R,M.h)}function zt(M,S){var R=S>>5;S%=32;for(var O=M.g.length-R,V=[],U=0;U<O;U++)V[U]=0<S?M.i(U+R)>>>S|M.i(U+R+1)<<32-S:M.i(U+R);return new d(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,uT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,xr=d}).apply(typeof dv<"u"?dv:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cT,_l,hT,Vc,im,fT,dT,mT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var x=u[A];if(!(x in _))break t;_=_[x]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,x={next:function(){if(!A&&_<u.length){var j=_++;return{value:m(j,u[j]),done:!1}}return A=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,A),u.apply(m,x)}}return function(){return u.apply(m,arguments)}}function C(u,m,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,C.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function $(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,x,j){for(var W=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)W[Vt-2]=arguments[Vt];return m.prototype[x].apply(A,W)}}function it(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function Z(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const x=u.length||0,j=A.length||0;u.length=x+j;for(let W=0;W<j;W++)u[x+W]=A[W]}else u.push(A)}}class Tt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function pt(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function jt(u){return jt[" "](u),u}jt[" "]=function(){};var At=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function zt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function M(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let x=1;x<arguments.length;x++){A=arguments[x];for(_ in A)u[_]=A[_];for(let j=0;j<R.length;j++)_=R[j],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function U(u){g.setTimeout(()=>{throw u},0)}function w(){var u=kt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ue{constructor(){this.h=this.g=null}add(m,_){const A=se.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new Tt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,ot=!1,kt=new Ue,D=()=>{const u=g.Promise.resolve(void 0);tt=()=>{u.then(X)}};var X=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(_){U(_)}var m=se;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ot=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ut=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u})();function wt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(At){t:{try{jt(m.nodeName);var x=!0;break t}catch{}x=!1}x||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_t[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&wt.aa.h.call(this)}}$(wt,J);var _t={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function Fn(u,m,_,A,x){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=x,this.key=++Zt,this.da=this.fa=!1}function Zi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pi(u){this.src=u,this.g={},this.h=0}pi.prototype.add=function(u,m,_,A,x){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var W=Xr(u,m,A,x);return-1<W?(m=u[W],_||(m.fa=!1)):(m=new Fn(m,this.src,j,!!A,x),m.fa=_,u.push(m)),m};function Yr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],x=Array.prototype.indexOf.call(A,m,void 0),j;(j=0<=x)&&Array.prototype.splice.call(A,x,1),j&&(Zi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Xr(u,m,_,A){for(var x=0;x<u.length;++x){var j=u[x];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==A)return x}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),oo={};function Jl(u,m,_,A,x){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Jl(u,m[j],_,A,x);return null}return _=Wl(_),u&&u[Ce]?u.K(m,_,y(A)?!!A.capture:!1,x):Tn(u,m,_,!1,A,x)}function Tn(u,m,_,A,x,j){if(!m)throw Error("Invalid event type");var W=y(x)?!!x.capture:!!x,Vt=Fs(u);if(Vt||(u[$r]=Vt=new pi(u)),_=Vt.add(m,_,A,W,j),_.proxy)return _;if(A=Dh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)ut||(x=W),x===void 0&&(x=!1),u.addEventListener(m.toString(),A,x);else if(u.attachEvent)u.attachEvent(Zr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Dh(){function u(_){return m.call(u.src,u.listener,_)}const m=Nh;return u}function lo(u,m,_,A,x){if(Array.isArray(m))for(var j=0;j<m.length;j++)lo(u,m[j],_,A,x);else A=y(A)?!!A.capture:!!A,_=Wl(_),u&&u[Ce]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],_=Xr(j,_,A,x),-1<_&&(Zi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Xr(m,_,A,x)),(_=-1<u?m[u]:null)&&Gs(_))}function Gs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ce])Yr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(Zr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Fs(m))?(Yr(_,u),_.h==0&&(_.src=null,m[$r]=null)):Zi(u)}}}function Zr(u){return u in oo?oo[u]:oo[u]="on"+u}function Nh(u,m){if(u.da)u=!0;else{m=new wt(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Gs(u),u=_.call(A,m)}return u}function Fs(u){return u=u[$r],u instanceof pi?u:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(m){return u.handleEvent(m)}),u[uo])}function ae(){et.call(this),this.i=new pi(this),this.M=this,this.F=null}$(ae,et),ae.prototype[Ce]=!0,ae.prototype.removeEventListener=function(u,m,_,A){lo(this,u,m,_,A)};function Ht(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var x=m;m=new J(A,u),O(m,x)}if(x=!0,_)for(var j=_.length-1;0<=j;j--){var W=m.g=_[j];x=cn(W,A,!0,m)&&x}if(W=m.g=u,x=cn(W,A,!0,m)&&x,x=cn(W,A,!1,m)&&x,_)for(j=0;j<_.length;j++)W=m.g=_[j],x=cn(W,A,!1,m)&&x}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Zi(_[A]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ae.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function cn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var x=!0,j=0;j<m.length;++j){var W=m[j];if(W&&!W.da&&W.capture==_){var Vt=W.listener,Se=W.ha||W.src;W.fa&&Yr(u.i,W),x=Vt.call(Se,A)!==!1&&x}}return x&&!A.defaultPrevented}function Fe(u,m,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function tu(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,tu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Oh extends et{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:tu(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){et.call(this),this.h=u,this.g={}}$(Jr,et);var Wr=[];function ts(u){zt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Gs(m)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),ts(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=g.JSON.stringify,Qs=g.JSON.parse,es=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function co(){}co.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){J.call(this,"d")}$(_i,J);function mo(){J.call(this,"c")}$(mo,J);var Qn={},go=null;function Ji(){return go=go||new ae}Qn.La="serverreachability";function Ks(u){J.call(this,Qn.La,u)}$(Ks,J);function Wi(u){const m=Ji();Ht(m,new Ks(m))}Qn.STAT_EVENT="statevent";function eu(u,m){J.call(this,Qn.STAT_EVENT,u),this.stat=m}$(eu,J);function ee(u){const m=Ji();Ht(m,new eu(m,u))}Qn.Ma="timingevent";function Ae(u,m){J.call(this,Qn.Ma,u),this.size=m}$(Ae,J);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function po(u,m,_,A,x,j){u.info(function(){if(u.g)if(j)for(var W="",Vt=j.split("&"),Se=0;Se<Vt.length;Se++){var Mt=Vt[Se].split("=");if(1<Mt.length){var Ne=Mt[0];Mt=Mt[1];var be=Ne.split("_");W=2<=be.length&&be[1]=="type"?W+(Ne+"="+Mt+"&"):W+(Ne+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+A+") [attempt "+x+"]: "+m+`
`+_+`
`+W})}function Vh(u,m,_,A,x,j,W){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+x+"]: "+m+`
`+_+`
`+j+" "+W})}function tr(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ns(u,_)+(A?" "+A:"")})}function nu(u,m){u.info(function(){return"TIMEOUT: "+m})}An.prototype.info=function(){};function ns(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var x=A[1];if(Array.isArray(x)&&!(1>x.length)){var j=x[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<x.length;W++)x[W]=""}}}}return xn(_)}catch{return m}}var er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Yn(){}$(Yn,co),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;function We(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var yo={},Ys={};function kn(u,m,_){u.L=1,u.v=os(hn(m)),u.m=_,u.P=!0,Ei(u,null)}function Ei(u,m){u.F=Date.now(),is(u),u.A=hn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),So(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=_u(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Oh(C(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(Wr[0]=x.toString()),x=Wr);for(var j=0;j<x.length;j++){var W=Jl(_,x[j],A||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Wi(),po(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Rn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const be=Rn(this.g);var m=this.g.Ba();const Ci=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||be!=4||m==7||(m==8||0>=Ci?Wi(3):Wi(2)),nr(this);var _=this.g.Z();this.X=_;e:if(iu(this)){var A=cu(this.g);u="";var x=A.length,j=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xe(this),Xn(this);var W="";break e}this.h.i=new g.TextDecoder}for(m=0;m<x;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(j&&m==x-1)});A.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=_==200,Vh(this.i,this.u,this.A,this.l,this.R,be,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,Se=this.g;if((Vt=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pt(Vt)){var Mt=Vt;break e}}Mt=null}if(_=Mt)tr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,_);else{this.o=!1,this.s=3,ee(12),xe(this),Xn(this);break t}}if(this.P){_=!0;let ke;for(;!this.J&&this.C<W.length;)if(ke=ru(this,W),ke==Ys){be==4&&(this.s=4,ee(14),_=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(ke==yo){this.s=4,ee(15),tr(this.i,this.l,W,"[Invalid Chunk]"),_=!1;break}else tr(this.i,this.l,ke,null),rs(this,ke);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||W.length!=0||this.h.h||(this.s=1,ee(16),_=!1),this.o=this.o&&_,!_)tr(this.i,this.l,W,"[Invalid Chunked Response]"),xe(this),Xn(this);else if(0<W.length&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.ba&&!Ne.M&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),gs(Ne),Ne.M=!0,ee(11))}}else tr(this.i,this.l,W,null),rs(this,W);be==4&&xe(this),this.o&&!this.J&&(be==4?gu(this.j,this):(this.o=!1,is(this)))}else kh(this.g),_==400&&0<W.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),xe(this),Xn(this)}}}catch{}finally{}};function iu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ru(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Ys:(_=Number(m.substring(_,A)),isNaN(_)?yo:(A+=1,A+_>m.length?Ys:(m=m.slice(A,A+_),u.C=A+_,m)))}We.prototype.cancel=function(){this.J=!0,xe(this)};function is(u){u.S=Date.now()+u.I,su(u,u.I)}function su(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(C(u.ba,u),m)}function nr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nu(this.i,this.A),this.L!=2&&(Wi(),ee(17)),xe(this),this.s=2,Xn(this)):su(this,this.S-u)};function Xn(u){u.j.G==0||u.J||gu(u.j,u)}function xe(u){nr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ts(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function rs(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||_o(_.h,u))){if(!u.K&&_o(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var x=A;if(x[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)aa(_),ra(_);else break t;Co(_),ee(18)}}else _.za=x[1],0<_.za-_.T&&37500>x[2]&&_.F&&_.v==0&&!_.C&&(_.C=ge(C(_.Za,_),6e3));if(1>=$s(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ii(_,11)}else if((u.K||_.g==u)&&aa(_),!pt(m))for(x=_.Da.g.parse(m),m=0;m<x.length;m++){let Mt=x[m];if(_.T=Mt[0],Mt=Mt[1],_.G==2)if(Mt[0]=="c"){_.K=Mt[1],_.ia=Mt[2];const Ne=Mt[3];Ne!=null&&(_.la=Ne,_.j.info("VER="+_.la));const be=Mt[4];be!=null&&(_.Aa=be,_.j.info("SVER="+_.Aa));const Ci=Mt[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(A=1.5*Ci,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const ke=u.g;if(ke){const ni=ke.g?ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var j=A.h;j.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Zs(j,j.h),j.h=null))}if(A.D){const No=ke.g?ke.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(A.ya=No,Qt(A.I,A.D,No))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var W=u;if(A.qa=yu(A,A.J?A.ia:null,A.W),W.K){tn(A.h,W);var Vt=W,Se=A.L;Se&&(Vt.I=Se),Vt.B&&(nr(Vt),is(Vt)),A.g=W}else du(A);0<_.i.length&&sa(_)}else Mt[0]!="stop"&&Mt[0]!="close"||Ii(_,7);else _.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ii(_,7):Ro(_):Mt[0]!="noop"&&_.l&&_.l.ta(Mt),_.v=0)}}Wi(4)}catch{}}var au=class{constructor(u,m){this.g=u,this.map=m}};function Ti(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $s(u){return u.h?1:u.g?u.g.size:0}function _o(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Zs(u,m){u.g?u.g.add(m):u.h=m}function tn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ti.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return it(u.i)}function Mh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Js(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function Eo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Js(u),A=Mh(u),x=A.length,j=0;j<x;j++)m.call(void 0,A[j],_&&_[j],u)}var ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ph(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),x=null;if(0<=A){var j=u[_].substring(0,A);x=u[_].substring(A+1)}else j=u[_];m(j,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function pe(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pe){this.h=u.h,as(this,u.j),this.o=u.o,this.g=u.g,ir(this,u.s),this.l=u.l;var m=u.i,_=new Si;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ai(this,_),this.m=u.m}else u&&(m=String(u).match(ss))?(this.h=!1,as(this,m[1]||"",!0),this.o=Sn(m[2]||""),this.g=Sn(m[3]||"",!0),ir(this,m[4]),this.l=Sn(m[5]||"",!0),Ai(this,m[6]||"",!0),this.m=Sn(m[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}pe.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ls(m,To,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ls(m,To,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ls(_,_.charAt(0)=="/"?Uh:Ao,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ls(_,Ws)),u.join("")};function hn(u){return new pe(u)}function as(u,m,_){u.j=_?Sn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ir(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ai(u,m,_){m instanceof Si?(u.i=m,lu(u.i,u.h)):(_||(m=ls(m,xh)),u.i=new Si(m,u.h))}function Qt(u,m,_){u.i.set(m,_)}function os(u){return Qt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Sn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ls(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,ou),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ou(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var To=/[#\/\?@]/g,Ao=/[#\?:]/g,Uh=/[#\?]/g,xh=/[#\?@]/g,Ws=/#/g;function Si(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function bn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ph(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Si.prototype,r.add=function(u,m){bn(this),this.i=null,u=$n(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function bi(u,m){bn(u),m=$n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wi(u,m){return bn(u),m=$n(u,m),u.g.has(m)}r.forEach=function(u,m){bn(this),this.g.forEach(function(_,A){_.forEach(function(x){u.call(m,x,A,this)},this)},this)},r.na=function(){bn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const x=u[A];for(let j=0;j<x.length;j++)_.push(m[A])}return _},r.V=function(u){bn(this);let m=[];if(typeof u=="string")wi(this,u)&&(m=m.concat(this.g.get($n(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return bn(this),this.i=null,u=$n(this,u),wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function So(u,m,_){bi(u,m),0<_.length&&(u.i=null,u.g.set($n(u,m),it(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const j=encodeURIComponent(String(A)),W=this.V(A);for(A=0;A<W.length;A++){var x=j;W[A]!==""&&(x+="="+encodeURIComponent(String(W[A]))),u.push(x)}}return this.i=u.join("&")};function $n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function lu(u,m){m&&!u.j&&(bn(u),u.i=null,u.g.forEach(function(_,A){var x=A.toLowerCase();A!=x&&(bi(this,A),So(this,x,_))},u)),u.j=m}function us(u,m){const _=new An;if(g.Image){const A=new Image;A.onload=q(wn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(wn,_,"TestLoadImage: error",!1,m,A),A.onabort=q(wn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(wn,_,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Ln(u,m){const _=new An,A=new AbortController,x=setTimeout(()=>{A.abort(),wn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(j=>{clearTimeout(x),j.ok?wn(_,"TestPingServer: ok",!0,m):wn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(x),wn(_,"TestPingServer: error",!1,m)})}function wn(u,m,_,A,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),A(_)}catch{}}function cs(){this.g=new es}function Zn(u,m,_){const A=_||"";try{Eo(u,function(x,j){let W=x;y(x)&&(W=xn(x)),m.push(A+j+"="+encodeURIComponent(W))})}catch(x){throw m.push(A+"type="+encodeURIComponent("_badmap")),x}}function rr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(rr,co),rr.prototype.g=function(){return new Ri(this.l,this.j)},rr.prototype.i=(function(u){return function(){return u}})({});function Ri(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ri,ae),r=Ri.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jn(this):Wn(this),this.readyState==3&&bo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},r.Qa=function(u){this.g&&(this.response=u,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wo(u){let m="";return zt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function De(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=wo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Qt(u,m,_))}function Bt(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Bt,ae);var ta=/^https?$/i,hs=["POST","PUT"];r=Bt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?ho(this.o):ho(Kn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){uu(this,j);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var x in A)_.set(x,A[x]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const j of A.keys())_.set(j,A.get(j));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),x=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(hs,m,void 0))||A||x||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of _)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fs(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){uu(this,j)}};function uu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ea(u),ti(u)}function ea(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),ti(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Bt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?na(this):this.bb())},r.bb=function(){na(this)};function na(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)Fe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const W=u.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=W===0){var x=String(u.D).match(ss)[1]||null;!x&&g.self&&g.self.location&&(x=g.self.location.protocol.slice(0,-1)),A=!ta.test(x?x.toLowerCase():"")}_=A}if(_)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<Rn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",ea(u)}}finally{ti(u)}}}}function ti(u,m){if(u.g){fs(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{_.onreadystatechange=A}catch{}}}function fs(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Qs(m)}};function cu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kh(u){const m={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(pt(u[A]))continue;var _=V(u[A]);const x=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[x]||[];m[x]=j,j.push(_)}M(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ia(u){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,u),this.cb=ds("retryDelaySeedMs",1e4,u),this.Wa=ds("forwardChannelMaxRetries",2,u),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(u&&u.concurrentRequestLimit),this.Da=new cs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ia.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ee(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=yu(this,null,this.W),sa(this)};function Ro(u){if(hu(u),u.G==3){var m=u.U++,_=hn(u.I);if(Qt(_,"SID",u.K),Qt(_,"RID",m),Qt(_,"TYPE","terminate"),ms(u,_),m=new We(u,u.j,m),m.L=2,m.v=os(hn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=_u(m.j,null),m.g.ea(m.v)),m.F=Date.now(),is(m)}pu(u)}function ra(u){u.g&&(gs(u),u.g.cancel(),u.g=null)}function hu(u){ra(u),u.u&&(g.clearTimeout(u.u),u.u=null),aa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function sa(u){if(!Xs(u.h)&&!u.s){u.s=!0;var m=u.Ga;tt||D(),ot||(tt(),ot=!0),kt.add(m,u),u.B=0}}function Lh(u,m){return $s(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(C(u.Ga,u,m),Do(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const x=new We(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),O(j,this.S)):j=this.S),this.m!==null||this.O||(x.H=j,j=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=fu(this,x,m),_=hn(this.I),Qt(_,"RID",u),Qt(_,"CVER",22),this.D&&Qt(_,"X-HTTP-Session-Id",this.D),ms(this,_),j&&(this.O?m="headers="+encodeURIComponent(String(wo(j)))+"&"+m:this.m&&De(_,this.m,j)),Zs(this.h,x),this.Ua&&Qt(_,"TYPE","init"),this.P?(Qt(_,"$req",m),Qt(_,"SID","null"),x.T=!0,kn(x,_,null)):kn(x,_,m),this.G=2}}else this.G==3&&(u?Io(this,u):this.i.length==0||Xs(this.h)||Io(this))};function Io(u,m){var _;m?_=m.l:_=u.U++;const A=hn(u.I);Qt(A,"SID",u.K),Qt(A,"RID",_),Qt(A,"AID",u.T),ms(u,A),u.m&&u.o&&De(A,u.m,u.o),_=new We(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=fu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zs(u.h,_),kn(_,A,m)}function ms(u,m){u.H&&zt(u.H,function(_,A){Qt(m,A,_)}),u.l&&Eo({},function(_,A){Qt(m,A,_)})}function fu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?C(u.l.Na,u.l,u):null;t:{var x=u.i;let j=-1;for(;;){const W=["count="+_];j==-1?0<_?(j=x[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Vt=!0;for(let Se=0;Se<_;Se++){let Mt=x[Se].g;const Ne=x[Se].map;if(Mt-=j,0>Mt)j=Math.max(0,x[Se].g-100),Vt=!1;else try{Zn(Ne,W,"req"+Mt+"_")}catch{A&&A(Ne)}}if(Vt){A=W.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function du(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;tt||D(),ot||(tt(),ot=!0),kt.add(m,u),u.v=0}}function Co(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(C(u.Fa,u),Do(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),ra(this),mu(this))};function gs(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function mu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=hn(u.qa);Qt(m,"RID","rpc"),Qt(m,"SID",u.K),Qt(m,"AID",u.T),Qt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qt(m,"TO",u.ja),Qt(m,"TYPE","xmlhttp"),ms(u,m),u.m&&u.o&&De(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=os(hn(m)),_.m=null,_.P=!0,Ei(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ra(this),Co(this),ee(19))};function aa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function gu(u,m){var _=null;if(u.g==m){aa(u),gs(u),u.g=null;var A=2}else if(_o(u.h,m))_=m.D,tn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var x=u.B;A=Ji(),Ht(A,new Ae(A,_)),sa(u)}else du(u);else if(x=m.s,x==3||x==0&&0<m.X||!(A==1&&Lh(u,m)||A==2&&Co(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),x){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function Do(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ii(u,m){if(u.j.info("Error code "+m),m==2){var _=C(u.fb,u),A=u.Xa;const x=!A;A=new pe(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||as(A,"https"),os(A),x?us(A.toString(),_):Ln(A.toString(),_)}else ee(2);u.G=0,u.l&&u.l.sa(m),pu(u),hu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function pu(u){if(u.G=0,u.ka=[],u.l){const m=vo(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,it(u.i),u.i.length=0),u.l.ra()}}function yu(u,m,_){var A=_ instanceof pe?hn(_):new pe(_);if(A.g!="")m&&(A.g=m+"."+A.g),ir(A,A.s);else{var x=g.location;A=x.protocol,m=m?m+"."+x.hostname:x.hostname,x=+x.port;var j=new pe(null);A&&as(j,A),m&&(j.g=m),x&&ir(j,x),_&&(j.l=_),A=j}return _=u.D,m=u.ya,_&&m&&Qt(A,_,m),Qt(A,"VER",u.la),ms(u,A),A}function _u(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Bt(new rr({eb:_})):new Bt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}r=vu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function oa(){}oa.prototype.g=function(u,m){return new en(u,m)};function en(u,m){ae.call(this),this.g=new ia(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!pt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!pt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}$(en,ae),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Ro(this.g)},en.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=xn(u),u=_);m.i.push(new au(m.Ya++,u)),m.G==3&&sa(m)},en.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,en.aa.N.call(this)};function Eu(u){_i.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}$(Eu,_i);function Tu(){mo.call(this),this.status=1}$(Tu,mo);function ei(u){this.g=u}$(ei,vu),ei.prototype.ua=function(){Ht(this.g,"a")},ei.prototype.ta=function(u){Ht(this.g,new Eu(u))},ei.prototype.sa=function(u){Ht(this.g,new Tu)},ei.prototype.ra=function(){Ht(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,mT=function(){return new oa},dT=function(){return Ji()},fT=Qn,im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},er.NO_ERROR=0,er.TIMEOUT=8,er.HTTP_ERROR=6,Vc=er,vi.COMPLETE="complete",hT=vi,fo.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",ae.prototype.listen=ae.prototype.K,_l=fo,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,cT=Bt}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const mv="@firebase/firestore",gv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Am("@firebase/firestore");function xa(){return Ls.logLevel}function rt(r,...t){if(Ls.logLevel<=Dt.DEBUG){const n=t.map(Vm);Ls.debug(`Firestore (${no}): ${r}`,...n)}}function Yi(r,...t){if(Ls.logLevel<=Dt.ERROR){const n=t.map(Vm);Ls.error(`Firestore (${no}): ${r}`,...n)}}function Qa(r,...t){if(Ls.logLevel<=Dt.WARN){const n=t.map(Vm);Ls.warn(`Firestore (${no}): ${r}`,...n)}}function Vm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,gT(r,s,n)}function gT(r,t,n){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yi(s),new Error(s)}function qt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||gT(t,l,s)}function Et(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends $i{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class rR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class sR{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){qt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Gi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Gi)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new pT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class aR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new aR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){qt(this.o===void 0,3512);const s=c=>{c.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=uR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Nt(r,t){return r<t?-1:r>t?1:0}function rm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Hd(l)===Hd(c)?Nt(l,c):Hd(l)?1:-1}return Nt(r.length,t.length)}const cR=55296,hR=57343;function Hd(r){const t=r.charCodeAt(0);return t>=cR&&t<=hR}function Ka(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="__name__";class li{constructor(t,n,s){n===void 0?n=0:n>t.length&&mt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&mt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return li.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof li?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=li.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Nt(t.length,n.length)}static compareSegments(t,n){const s=li.isNumericId(t),l=li.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?li.extractNumericId(t).compare(li.extractNumericId(n)):rm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return xr.fromString(t.substring(4,t.length-2))}}class Wt extends li{construct(t,n,s){return new Wt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new nt(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Wt(n)}static emptyPath(){return new Wt([])}}const fR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends li{construct(t,n,s){return new je(t,n,s)}static isValidIdentifier(t){return fR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yv}static keyField(){return new je([yv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new nt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new nt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new nt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new je(n)}static emptyPath(){return new je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Wt.fromString(t))}static fromName(t){return new lt(Wt.fromString(t).popFirst(5))}static empty(){return new lt(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Wt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(r,t,n){if(!n)throw new nt(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function dR(r,t,n,s){if(t===!0&&s===!0)throw new nt(Q.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function _v(r){if(!lt.isDocumentKey(r))throw new nt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vv(r){if(lt.isDocumentKey(r))throw new nt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _T(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ch(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":mt(12329,{type:typeof r})}function Un(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new nt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ch(r);throw new nt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,t){const n={typeString:r};return t&&(n.value=t),n}function Hl(r,t){if(!_T(r))throw new nt(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new nt(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=-62135596800,Tv=1e6;class te{static now(){return te.fromMillis(Date.now())}static fromDate(t){return te.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Tv);return new te(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Ev)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hl(t,te._jsonSchema))return new te(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ev;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}te._jsonSchemaVersion="firestore/timestamp/1.0",te._jsonSchema={type:Te("string",te._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new te(0,0))}static max(){return new vt(new te(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=-1;function mR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=vt.fromTimestamp(s===1e9?new te(n+1,0):new te(n,s));return new zr(l,lt.empty(),t)}function gR(r){return new zr(r.readTime,r.key,Ol)}class zr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new zr(vt.min(),lt.empty(),Ol)}static max(){return new zr(vt.max(),lt.empty(),Ol)}}function pR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=lt.comparator(r.documentKey,t.documentKey),n!==0?n:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==yR)throw r;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Y(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):Y.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):Y.reject(n)}static resolve(t){return new Y(((n,s)=>{n(t)}))}static reject(t){return new Y(((n,s)=>{s(t)}))}static waitFor(t){return new Y(((n,s)=>{let l=0,c=0,d=!1;t.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&n()}),(p=>s(p)))})),d=!0,c===l&&n()}))}static or(t){let n=Y.resolve(!1);for(const s of t)n=n.next((l=>l?Y.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new Y(((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(t[y]).next((T=>{d[y]=T,++g,g===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new Y(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function vR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}hh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-1;function fh(r){return r==null}function Qc(r){return r===0&&1/r==-1/0}function ER(r){return typeof r=="number"&&Number.isInteger(r)&&!Qc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="";function TR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Av(t)),t=AR(r.get(n),t);return Av(t)}function AR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case vT:n+="";break;default:n+=c}}return n}function Av(r){return r+vT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Qr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function ET(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new re(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new re(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bc(this.root,t,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bc(this.root,t,this.comparator,!0)}}class bc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw mt(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.comparator=t,this.data=new re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(t){return new bv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ie)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ie(this.comparator);return n.data=t,n}}class bv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.fields=t,t.sort(je.comparator)}static empty(){return new vn([])}unionWith(t){let n=new Ie(je.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new vn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ka(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new TT("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const SR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(r){if(qt(!!r,39018),typeof r=="string"){let t=0;const n=SR.exec(r);if(qt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qr(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",ST="__type__",bT="__previous_value__",wT="__local_write_time__";function Um(r){return(r?.mapValue?.fields||{})[ST]?.stringValue===AT}function dh(r){const t=r.mapValue.fields[bT];return Um(t)?dh(t):t}function Vl(r){const t=Br(r.mapValue.fields[wT].timestampValue);return new te(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(t,n,s,l,c,d,g,p,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const Kc="(default)";class Ml{constructor(t,n){this.projectId=t,this.database=n||Kc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(t){return t instanceof Ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",wR="__max__",wc={mapValue:{}},IT="__vector__",Yc="value";function jr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Um(r)?4:IR(r)?9007199254740991:RR(r)?10:11:mt(28295,{value:r})}function gi(r,t){if(r===t)return!0;const n=jr(r);if(n!==jr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Vl(r).isEqual(Vl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Br(l.timestampValue),g=Br(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return qr(l.bytesValue).isEqual(qr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),g=de(c.doubleValue);return d===g?Qc(d)===Qc(g):isNaN(d)&&isNaN(g)}return!1})(r,t);case 9:return Ka(r.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Sv(d)!==Sv(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!gi(d[p],g[p])))return!1;return!0})(r,t);default:return mt(52216,{left:r})}}function Pl(r,t){return(r.values||[]).find((n=>gi(n,t)))!==void 0}function Ya(r,t){if(r===t)return 0;const n=jr(r),s=jr(t);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const g=de(c.integerValue||c.doubleValue),p=de(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,t);case 3:return wv(r.timestampValue,t.timestampValue);case 4:return wv(Vl(r),Vl(t));case 5:return rm(r.stringValue,t.stringValue);case 6:return(function(c,d){const g=qr(c),p=qr(d);return g.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Nt(g[y],p[y]);if(T!==0)return T}return Nt(g.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const g=Nt(de(c.latitude),de(d.latitude));return g!==0?g:Nt(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Rv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const g=c.fields||{},p=d.fields||{},y=g[Yc]?.arrayValue,T=p[Yc]?.arrayValue,I=Nt(y?.values?.length||0,T?.values?.length||0);return I!==0?I:Rv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===wc.mapValue&&d===wc.mapValue)return 0;if(c===wc.mapValue)return 1;if(d===wc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let I=0;I<p.length&&I<T.length;++I){const C=rm(p[I],T[I]);if(C!==0)return C;const q=Ya(g[p[I]],y[T[I]]);if(q!==0)return q}return Nt(p.length,T.length)})(r.mapValue,t.mapValue);default:throw mt(23264,{he:n})}}function wv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const n=Br(r),s=Br(t),l=Nt(n.seconds,s.seconds);return l!==0?l:Nt(n.nanos,s.nanos)}function Rv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ya(n[l],s[l]);if(c)return c}return Nt(n.length,s.length)}function Xa(r){return sm(r)}function sm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Br(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return qr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return lt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=sm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${sm(n.fields[d])}`;return l+"}"})(r.mapValue):mt(61005,{value:r})}function Mc(r){switch(jr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=dh(r);return t?16+Mc(t):16;case 5:return 2*r.stringValue.length;case 6:return qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Mc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Qr(s.fields,((c,d)=>{l+=c.length+Mc(d)})),l})(r.mapValue);default:throw mt(13486,{value:r})}}function Iv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function am(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function Cv(r){return!!r&&"nullValue"in r}function Dv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pc(r){return!!r&&"mapValue"in r}function RR(r){return(r?.mapValue?.fields||{})[RT]?.stringValue===IT}function bl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Qr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=bl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bl(r.arrayValue.values[n]);return t}return{...r}}function IR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.value=t}static empty(){return new un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Pc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=bl(n)}setAll(t){let n=je.emptyPath(),s={},l=[];t.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}d?s[g.lastSegment()]=bl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Pc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Qr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new un(bl(this.value))}}function CT(r){const t=[];return Qr(r.fields,((n,s)=>{const l=new je([n]);if(Pc(s)){const c=CT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new vn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,s,l,c,d,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Ze(t,0,vt.min(),vt.min(),vt.min(),un.empty(),0)}static newFoundDocument(t,n,s,l){return new Ze(t,1,n,vt.min(),s,l,0)}static newNoDocument(t,n){return new Ze(t,2,n,vt.min(),vt.min(),un.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,vt.min(),vt.min(),un.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n){this.position=t,this.inclusive=n}}function Nv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=lt.comparator(lt.fromName(d.referenceValue),n.key):s=Ya(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ov(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!gi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n="asc"){this.field=t,this.dir=n}}function CR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class Ee extends DT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new NR(t,n,s):n==="array-contains"?new MR(t,s):n==="in"?new PR(t,s):n==="not-in"?new UR(t,s):n==="array-contains-any"?new xR(t,s):new Ee(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new OR(t,s):new VR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends DT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Gn(t,n)}matches(t){return NT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NT(r){return r.op==="and"}function OT(r){return DR(r)&&NT(r)}function DR(r){for(const t of r.filters)if(t instanceof Gn)return!1;return!0}function om(r){if(r instanceof Ee)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(OT(r))return r.filters.map((t=>om(t))).join(",");{const t=r.filters.map((n=>om(n))).join(",");return`${r.op}(${t})`}}function VT(r,t){return r instanceof Ee?(function(s,l){return l instanceof Ee&&s.op===l.op&&s.field.isEqual(l.field)&&gi(s.value,l.value)})(r,t):r instanceof Gn?(function(s,l){return l instanceof Gn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,g)=>c&&VT(d,l.filters[g])),!0):!1})(r,t):void mt(19439)}function MT(r){return r instanceof Ee?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`})(r):r instanceof Gn?(function(n){return n.op.toString()+" {"+n.getFilters().map(MT).join(" ,")+"}"})(r):"Filter"}class NR extends Ee{constructor(t,n,s){super(t,n,s),this.key=lt.fromName(s.referenceValue)}matches(t){const n=lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class OR extends Ee{constructor(t,n){super(t,"in",n),this.keys=PT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class VR extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=PT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function PT(r,t){return(t.arrayValue?.values||[]).map((n=>lt.fromName(n.referenceValue)))}class MR extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xm(n)&&Pl(n.arrayValue,this.value)}}class PR extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class UR extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pl(this.value.arrayValue,n)}}class xR extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Pl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t,n=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function Vv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new kR(r,t,n,s,l,c,d)}function km(r){const t=Et(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>om(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),fh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Xa(s))).join(",")),t.Te=n}return t.Te}function Lm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!CR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!VT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Ov(r.startAt,t.startAt)&&Ov(r.endAt,t.endAt)}function lm(r){return lt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LR(r,t,n,s,l,c,d,g){return new Gl(r,t,n,s,l,c,d,g)}function mh(r){return new Gl(r)}function Mv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function UT(r){return r.collectionGroup!==null}function wl(r){const t=Et(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ie(je.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new $c(c,s))})),n.has(je.keyField().canonicalString())||t.Ie.push(new $c(je.keyField(),s))}return t.Ie}function hi(r){const t=Et(r);return t.Ee||(t.Ee=zR(t,wl(r))),t.Ee}function zR(r,t){if(r.limitType==="F")return Vv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new $c(l.field,c)}));const n=r.endAt?new Xc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xc(r.startAt.position,r.startAt.inclusive):null;return Vv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function um(r,t){const n=r.filters.concat([t]);return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function cm(r,t,n){return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function gh(r,t){return Lm(hi(r),hi(t))&&r.limitType===t.limitType}function xT(r){return`${km(hi(r))}|lt:${r.limitType}`}function ka(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>MT(l))).join(", ")}]`),fh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Xa(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Xa(l))).join(",")),`Target(${s})`})(hi(r))}; limitType=${r.limitType})`}function ph(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):lt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of wl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,g,p){const y=Nv(d,g,p);return d.inclusive?y<=0:y<0})(s.startAt,wl(s),l)||s.endAt&&!(function(d,g,p){const y=Nv(d,g,p);return d.inclusive?y>=0:y>0})(s.endAt,wl(s),l))})(r,t)}function BR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kT(r){return(t,n)=>{let s=!1;for(const l of wl(r)){const c=qR(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function qR(r,t,n){const s=r.field.isKeyField()?lt.comparator(t.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Ya(p,y):mt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return mt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Qr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new re(lt.comparator);function Xi(){return jR}const LT=new re(lt.comparator);function vl(...r){let t=LT;for(const n of r)t=t.insert(n.key,n);return t}function zT(r){let t=LT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Vs(){return Rl()}function BT(){return Rl()}function Rl(){return new qs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const HR=new re(lt.comparator),GR=new Ie(lt.comparator);function Ot(...r){let t=GR;for(const n of r)t=t.add(n);return t}const FR=new Ie(Nt);function QR(){return FR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(t)?"-0":t}}function qT(r){return{integerValue:""+r}}function KR(r,t){return ER(t)?qT(t):zm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this._=void 0}}function YR(r,t,n){return r instanceof Ul?(function(l,c){const d={fields:{[ST]:{stringValue:AT},[wT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Um(c)&&(c=dh(c)),c&&(d.fields[bT]=c),{mapValue:d}})(n,t):r instanceof xl?HT(r,t):r instanceof kl?GT(r,t):(function(l,c){const d=jT(l,c),g=Pv(d)+Pv(l.Ae);return am(d)&&am(l.Ae)?qT(g):zm(l.serializer,g)})(r,t)}function XR(r,t,n){return r instanceof xl?HT(r,t):r instanceof kl?GT(r,t):n}function jT(r,t){return r instanceof Zc?(function(s){return am(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Ul extends yh{}class xl extends yh{constructor(t){super(),this.elements=t}}function HT(r,t){const n=FT(t);for(const s of r.elements)n.some((l=>gi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class kl extends yh{constructor(t){super(),this.elements=t}}function GT(r,t){let n=FT(t);for(const s of r.elements)n=n.filter((l=>!gi(l,s)));return{arrayValue:{values:n}}}class Zc extends yh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Pv(r){return de(r.integerValue||r.doubleValue)}function FT(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t,n){this.field=t,this.transform=n}}function ZR(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof xl&&l instanceof xl||s instanceof kl&&l instanceof kl?Ka(s.elements,l.elements,gi):s instanceof Zc&&l instanceof Zc?gi(s.Ae,l.Ae):s instanceof Ul&&l instanceof Ul})(r.transform,t.transform)}class JR{constructor(t,n){this.version=t,this.transformResults=n}}class En{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new En}static exists(t){return new En(void 0,t)}static updateTime(t){return new En(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class _h{}function QT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Bm(r.key,En.none()):new Fl(r.key,r.data,En.none());{const n=r.data,s=un.empty();let l=new Ie(je.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Kr(r.key,s,new vn(l.toArray()),En.none())}}function WR(r,t,n){r instanceof Fl?(function(l,c,d){const g=l.value.clone(),p=xv(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):r instanceof Kr?(function(l,c,d){if(!Uc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=xv(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(KT(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Il(r,t,n,s){return r instanceof Fl?(function(c,d,g,p){if(!Uc(c.precondition,d))return g;const y=c.value.clone(),T=kv(c.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Kr?(function(c,d,g,p){if(!Uc(c.precondition,d))return g;const y=kv(c.fieldTransforms,p,d),T=d.data;return T.setAll(KT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,t,n,s):(function(c,d,g){return Uc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,t,n)}function tI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=jT(s.transform,l||null);c!=null&&(n===null&&(n=un.empty()),n.set(s.field,c))}return n||null}function Uv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ka(s,l,((c,d)=>ZR(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Fl extends _h{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Kr extends _h{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function KT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function xv(r,t,n){const s=new Map;qt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,XR(d,g,n[l]))}return s}function kv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,YR(c,d,t))}return s}class Bm extends _h{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eI extends _h{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&WR(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Il(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Il(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=BT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=QT(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(vt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ot())}isEqual(t){return this.batchId===t.batchId&&Ka(this.mutations,t.mutations,((n,s)=>Uv(n,s)))&&Ka(this.baseMutations,t.baseMutations,((n,s)=>Uv(n,s)))}}class qm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return HR})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new qm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Ut;function sI(r){switch(r){case Q.OK:return mt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return mt(15467,{code:r})}}function YT(r){if(r===void 0)return Yi("GRPC error has no .code"),Q.UNKNOWN;switch(r){case ve.OK:return Q.OK;case ve.CANCELLED:return Q.CANCELLED;case ve.UNKNOWN:return Q.UNKNOWN;case ve.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ve.INTERNAL:return Q.INTERNAL;case ve.UNAVAILABLE:return Q.UNAVAILABLE;case ve.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ve.NOT_FOUND:return Q.NOT_FOUND;case ve.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ve.ABORTED:return Q.ABORTED;case ve.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ve.DATA_LOSS:return Q.DATA_LOSS;default:return mt(39323,{code:r})}}(Ut=ve||(ve={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new xr([4294967295,4294967295],0);function Lv(r){const t=aI().encode(r),n=new uT;return n.update(t),new Uint8Array(n.digest())}function zv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new xr([n,s],0),new xr([l,c],0)]}class jm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new El(`Invalid padding: ${n}`);if(s<0)throw new El(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new El(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=xr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(xr.fromNumber(s)));return l.compare(oI)===1&&(l=new xr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Lv(t),[s,l]=zv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new jm(c,l,n);return s.forEach((g=>d.insert(g))),d}insert(t){if(this.ge===0)return;const n=Lv(t),[s,l]=zv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Ql.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new vh(vt.min(),l,new re(Nt),Xi(),Ot())}}class Ql{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ql(s,n,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class XT{constructor(t,n){this.targetId=t,this.Ce=n}}class $T{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Bv{constructor(){this.ve=0,this.Fe=qv(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ot(),n=Ot(),s=Ot();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:mt(38017,{changeType:c})}})),new Ql(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=qv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Xi(),this.Je=Rc(),this.He=Rc(),this.Ye=new re(Nt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:mt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(lm(c))if(s===0){const d=new lt(c.path);this.et(n,d,Ze.newNoDocument(d,vt.min()))}else qt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(t),p=g?this.ct(g,t,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=qr(s).toUint8Array()}catch(p){if(p instanceof TT)return Qa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new jm(d,l,c)}catch(p){return Qa(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&lm(g.target)){const p=new lt(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Ze.newNoDocument(p,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Ot();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new vh(t,n,this.Ye,this.je,s);return this.je=Xi(),this.Je=Rc(),this.He=Rc(),this.Ye=new re(Nt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Bv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ie(Nt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ie(Nt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Bv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Rc(){return new re(lt.comparator)}function qv(){return new re(lt.comparator)}const uI={asc:"ASCENDING",desc:"DESCENDING"},cI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hI={and:"AND",or:"OR"};class fI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hm(r,t){return r.useProto3Json||fh(t)?t:{value:t}}function Jc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ZT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function dI(r,t){return Jc(r,t.toTimestamp())}function fi(r){return qt(!!r,49232),vt.fromTimestamp((function(n){const s=Br(n);return new te(s.seconds,s.nanos)})(r))}function Hm(r,t){return fm(r,t).canonicalString()}function fm(r,t){const n=(function(l){return new Wt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function JT(r){const t=Wt.fromString(r);return qt(i0(t),10190,{key:t.toString()}),t}function dm(r,t){return Hm(r.databaseId,t.path)}function Gd(r,t){const n=JT(t);if(n.get(1)!==r.databaseId.projectId)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new lt(t0(n))}function WT(r,t){return Hm(r.databaseId,t)}function mI(r){const t=JT(r);return t.length===4?Wt.emptyPath():t0(t)}function mm(r){return new Wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t0(r){return qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function jv(r,t,n){return{name:dm(r,t),fields:n.value.mapValue.fields}}function gI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:mt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(qt(T===void 0||typeof T=="string",58123),Ge.fromBase64String(T||"")):(qt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ge.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&(function(y){const T=y.code===void 0?Q.UNKNOWN:YT(y.code);return new nt(T,y.message||"")})(d);n=new $T(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Gd(r,s.document.name),c=fi(s.document.updateTime),d=s.document.createTime?fi(s.document.createTime):vt.min(),g=new un({mapValue:{fields:s.document.fields}}),p=Ze.newFoundDocument(l,c,d,g),y=s.targetIds||[],T=s.removedTargetIds||[];n=new xc(y,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Gd(r,s.document),c=s.readTime?fi(s.readTime):vt.min(),d=Ze.newNoDocument(l,c),g=s.removedTargetIds||[];n=new xc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Gd(r,s.document),c=s.removedTargetIds||[];n=new xc([],c,l,null)}else{if(!("filter"in t))return mt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new rI(l,c),g=s.targetId;n=new XT(g,d)}}return n}function pI(r,t){let n;if(t instanceof Fl)n={update:jv(r,t.key,t.value)};else if(t instanceof Bm)n={delete:dm(r,t.key)};else if(t instanceof Kr)n={update:jv(r,t.key,t.data),updateMask:wI(t.fieldMask)};else{if(!(t instanceof eI))return mt(16599,{Vt:t.type});n={verify:dm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const g=d.transform;if(g instanceof Ul)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof kl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Zc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw mt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:dI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:mt(27497)})(r,t.precondition)),n}function yI(r,t){return r&&r.length>0?(qt(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?fi(l.updateTime):fi(c);return d.isEqual(vt.min())&&(d=fi(c)),new JR(d,l.transformResults||[])})(n,t)))):[]}function _I(r,t){return{documents:[WT(r,t.path)]}}function vI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=WT(r,l);const c=(function(y){if(y.length!==0)return n0(Gn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(C){return{field:La(C.field),direction:AI(C.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const g=hm(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function EI(r){let t=mI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){qt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(I){const C=e0(I);return C instanceof Gn&&OT(C)?C.getFilters():[C]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((C=>(function($){return new $c(za($.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(C)))})(n.orderBy));let g=null;n.limit&&(g=(function(I){let C;return C=typeof I=="object"?I.value:I,fh(C)?null:C})(n.limit));let p=null;n.startAt&&(p=(function(I){const C=!!I.before,q=I.values||[];return new Xc(q,C)})(n.startAt));let y=null;return n.endAt&&(y=(function(I){const C=!I.before,q=I.values||[];return new Xc(q,C)})(n.endAt)),LR(t,l,d,c,g,"F",p,y)}function TI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function e0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=za(n.unaryFilter.field);return Ee.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=za(n.unaryFilter.field);return Ee.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=za(n.unaryFilter.field);return Ee.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=za(n.unaryFilter.field);return Ee.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ee.create(za(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Gn.create(n.compositeFilter.filters.map((s=>e0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return mt(1026)}})(n.compositeFilter.op))})(r):mt(30097,{filter:r})}function AI(r){return uI[r]}function SI(r){return cI[r]}function bI(r){return hI[r]}function La(r){return{fieldPath:r.canonicalString()}}function za(r){return je.fromServerFormat(r.fieldPath)}function n0(r){return r instanceof Ee?(function(n){if(n.op==="=="){if(Dv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NAN"}};if(Cv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NAN"}};if(Cv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(n.field),op:SI(n.op),value:n.value}}})(r):r instanceof Gn?(function(n){const s=n.getFilters().map((l=>n0(l)));return s.length===1?s[0]:{compositeFilter:{op:bI(n.op),filters:s}}})(r):mt(54877,{filter:r})}function wI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,n,s,l,c=vt.min(),d=vt.min(),g=Ge.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Or(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t){this.yt=t}}function II(r){const t=EI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Cn=new DI}addToCollectionParentIndex(t,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(t,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return Y.resolve()}deleteFieldIndex(t,n){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,n){return Y.resolve()}getDocumentsMatchingTarget(t,n){return Y.resolve(null)}getIndexType(t,n){return Y.resolve(0)}getFieldIndexes(t,n){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,n){return Y.resolve(zr.min())}getMinOffsetFromCollectionGroup(t,n){return Y.resolve(zr.min())}updateCollectionGroup(t,n,s){return Y.resolve()}updateIndexEntries(t,n){return Y.resolve()}}class DI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ie(Wt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ie(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r0=41943040;class ln{static withCacheSize(t){return new ln(t,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(r0,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LruGarbageCollector",NI=1048576;function Fv([r,t],[n,s]){const l=Nt(r,n);return l===0?Nt(t,s):l}class OI{constructor(t){this.Ir=t,this.buffer=new Ie(Fv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Fv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class VI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(Gv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?rt(Gv,"Ignoring IndexedDB error during garbage collection: ",n):await io(n)}await this.Vr(3e5)}))}}class MI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return Y.resolve(hh.ce);const s=new OI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Hv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,g,p,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(t,l)))).next((I=>(s=I,g=Date.now(),this.removeTargets(t,s,n)))).next((I=>(c=I,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((I=>(y=Date.now(),xa()<=Dt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${I} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I}))))}}function PI(r,t){return new MI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.changes=new qs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Y.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Il(s.mutation,l,vn.empty(),te.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Ot()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Ot()){const l=Vs();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=vl();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=Vs();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Ot())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(t,n,s,l){let c=Xi();const d=Rl(),g=(function(){return Rl()})();return n.forEach(((p,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Kr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Il(T.mutation,y,T.mutation.getFieldMask(),te.now())):d.set(y.key,vn.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>g.set(y,new xI(T,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=Rl();let l=new re(((d,g)=>d-g)),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||vn.empty();T=g.applyToLocalView(y,T),s.set(p,T);const I=(l.get(g.batchId)||Ot()).add(p);l=l.insert(g.batchId,I)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,I=BT();T.forEach((C=>{if(!c.has(C)){const q=QT(n.get(C),s.get(C));q!==null&&I.set(C,q),c=c.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,I))}return Y.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return lt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):UT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):Y.resolve(Vs());let g=Ol,p=c;return d.next((y=>Y.forEach(y,((T,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),c.get(T)?Y.resolve():this.remoteDocumentCache.getEntry(t,T).next((C=>{p=p.insert(T,C)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,p,y,Ot()))).next((T=>({batchId:g,changes:zT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new lt(n)).next((s=>{let l=vl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=vl();return this.indexManager.getCollectionParents(t,c).next((g=>Y.forEach(g,(p=>{const y=(function(I,C){return new Gl(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((I,C)=>{d=d.insert(I,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,Ze.newInvalidDocument(T)))}));let g=vl();return d.forEach(((p,y)=>{const T=c.get(p);T!==void 0&&Il(T.mutation,y,vn.empty(),te.now()),ph(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:fi(l.createTime)}})(n)),Y.resolve()}getNamedQuery(t,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:II(l.bundledQuery),readTime:fi(l.readTime)}})(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.overlays=new re(lt.comparator),this.qr=new Map}getOverlay(t,n){return Y.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Vs();return Y.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),Y.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(t,n,s){const l=Vs(),c=n.length+1,d=new lt(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return Y.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new re(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Vs(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Vs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=l)););return Y.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new iI(n,s));let c=this.qr.get(n);c===void 0&&(c=Ot(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.Qr=new Ie(Pe.$r),this.Ur=new Ie(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new lt(new Wt([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new lt(new Wt([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=Ot();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return lt.comparator(t.key,n.key)||Nt(t.Yr,n.Yr)}static Kr(t,n){return Nt(t.Yr,n.Yr)||lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ie(Pe.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new nI(c,n,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Pe(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(t,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return Y.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Pm:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),Y.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ie(Nt);return n.forEach((l=>{const c=new Pe(l,0),d=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{s=s.add(g.Yr)}))})),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;lt.isDocumentKey(c)||(c=c.child(""));const d=new Pe(new lt(c),0);let g=new Ie(Nt);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)}),d),Y.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return Y.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t){this.ri=t,this.docs=(function(){return new re(lt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Y.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let s=Xi();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))})),Y.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Xi();const d=n.path,g=new lt(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||pR(gR(T),s)<=0||(l.has(T.key)||ph(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Y.resolve(c)}getAllFromCollectionGroup(t,n,s,l){mt(9500)}ii(t,n){return Y.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new HI(this)}getSize(t){return Y.resolve(this.size)}}class HI extends UI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),Y.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.persistence=t,this.si=new qs((n=>km(n)),Lm),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Gm,this.targetCount=0,this.ai=$a.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Y.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(t,n){return this.Pr(n),Y.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),Y.waitFor(c).next((()=>l))}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return Y.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),Y.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),Y.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return Y.resolve(s)}containsKey(t,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,n){this.ui={},this.overlays={},this.ci=new hh(0),this.li=!1,this.li=!0,this.hi=new BI,this.referenceDelegate=t(this),this.Pi=new GI(this),this.indexManager=new CI,this.remoteDocumentCache=(function(l){return new jI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new RI(n),this.Ii=new LI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new zI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new qI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){rt("MemoryPersistence","Starting transaction:",t);const l=new FI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return Y.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class FI extends _R{constructor(t){super(),this.currentSequenceNumber=t}}class Fm{constructor(t){this.persistence=t,this.Ri=new Gm,this.Vi=null}static mi(t){return new Fm(t)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Y.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,(s=>{const l=lt.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wc{constructor(t,n){this.persistence=t,this.pi=new qs((s=>TR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=PI(this,n)}static mi(t,n){return new Wc(t,n)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return Y.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?Y.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((g=>{g||(s++,c.removeEntry(d,vt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),Y.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),Y.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Mc(t.data.value)),n}br(t,n,s){return Y.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return Y.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Ot(),l=Ot();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Qm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LS()?8:vR(Je())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new QI;return this.Ss(t,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(t,n,d,g.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(xa()<=Dt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(xa()<=Dt.DEBUG&&rt("QueryEngine","Query:",ka(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(xa()<=Dt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hi(n))):Y.resolve())}ys(t,n){if(Mv(n))return Y.resolve(null);let s=hi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=cm(n,null,"F"),s=hi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Ot(...c);return this.ps.getDocuments(t,d).next((g=>this.indexManager.getMinOffset(t,s).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(t,cm(n,null,"F")):this.vs(t,y,n,p)}))))})))))}ws(t,n,s,l){return Mv(n)||l.isEqual(vt.min())?Y.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?Y.resolve(null):(xa()<=Dt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ka(n)),this.vs(t,d,n,mR(l,Ol)).next((g=>g)))}))}Ds(t,n){let s=new Ie(kT(t));return n.forEach(((l,c)=>{ph(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return xa()<=Dt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",ka(n)),this.ps.getDocumentsMatchingQuery(t,n,zr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",YI=3e8;class XI{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new re(Nt),this.xs=new qs((c=>km(c)),Lm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new kI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function $I(r,t,n,s){return new XI(r,t,n,s)}async function a0(r,t){const n=Et(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],g=[];let p=Ot();for(const y of l){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function ZI(r,t){const n=Et(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,T){const I=y.batch,C=I.keys();let q=Y.resolve();return C.forEach(($=>{q=q.next((()=>T.getEntry(p,$))).next((it=>{const Z=y.docVersions.get($);qt(Z!==null,48541),it.version.compareTo(Z)<0&&(I.applyToRemoteDocument(it,y),it.isValidDocument()&&(it.setReadTime(y.commitVersion),T.addEntry(it)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(p,I)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Ot();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function o0(r){const t=Et(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function JI(r,t){const n=Et(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach(((T,I)=>{const C=l.get(I);if(!C)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,I))));let q=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(I)!==null?q=q.withResumeToken(Ge.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(I,q),(function(it,Z,Tt){return it.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=YI?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0})(C,q,T)&&g.push(n.Pi.updateTargetData(c,q))}));let p=Xi(),y=Ot();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(WI(c,d,t.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(vt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((I=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(T)}return Y.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=l,c)))}function WI(r,t,n){let s=Ot(),l=Ot();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=Xi();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(vt.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):rt(Km,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:l}}))}function tC(r,t){const n=Et(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Pm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function eC(r,t){const n=Et(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,Y.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Or(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function gm(r,t,n){const s=Et(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ro(d))throw d;rt(Km,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Qv(r,t,n){const s=Et(r);let l=vt.min(),c=Ot();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,T){const I=Et(p),C=I.xs.get(T);return C!==void 0?Y.resolve(I.Ms.get(C)):I.Pi.getTargetData(y,T)})(s,d,hi(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:vt.min(),n?c:Ot()))).next((g=>(nC(s,BR(t),g),{documents:g,Qs:c})))))}function nC(r,t,n){let s=r.Os.get(t)||vt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Kv{constructor(){this.activeTargetIds=QR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iC{constructor(){this.Mo=new Kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Kv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Xv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(Yv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(Yv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function pm(){return Ic===null?Ic=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="RestConnection",sC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Kc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=pm(),g=this.zo(t,n.toUriEncodedString());rt(Fd,`Sending RPC '${t}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:y}=new URL(g),T=Wa(y);return this.Jo(t,g,p,s,T).then((I=>(rt(Fd,`Received RPC '${t}' ${d}: `,I),I)),(I=>{throw Qa(Fd,`RPC '${t}' ${d} failed with error: `,I,"url: ",g,"request:",s),I}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+no})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=sC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class lC extends aC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=pm();return new Promise(((g,p)=>{const y=new cT;y.setWithCredentials(!0),y.listenOnce(hT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Vc.NO_ERROR:const I=y.getResponseJson();rt(Ye,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(I)),g(I);break;case Vc.TIMEOUT:rt(Ye,`RPC '${t}' ${d} timed out`),p(new nt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const C=y.getStatus();if(rt(Ye,`RPC '${t}' ${d} failed with status:`,C,"response text:",y.getResponseText()),C>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const $=q?.error;if($&&$.status&&$.message){const it=(function(Tt){const pt=Tt.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(pt)>=0?pt:Q.UNKNOWN})($.status);p(new nt(it,$.message))}else p(new nt(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new nt(Q.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{rt(Ye,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);rt(Ye,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=pm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=mT(),g=dT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");rt(Ye,`Creating RPC '${t}' stream ${l}: ${T}`,p);const I=d.createWebChannel(T,p);this.I_(I);let C=!1,q=!1;const $=new oC({Yo:Z=>{q?rt(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(C||(rt(Ye,`Opening RPC '${t}' stream ${l} transport.`),I.open(),C=!0),rt(Ye,`RPC '${t}' stream ${l} sending:`,Z),I.send(Z))},Zo:()=>I.close()}),it=(Z,Tt,pt)=>{Z.listen(Tt,(ct=>{try{pt(ct)}catch(jt){setTimeout((()=>{throw jt}),0)}}))};return it(I,_l.EventType.OPEN,(()=>{q||(rt(Ye,`RPC '${t}' stream ${l} transport opened.`),$.o_())})),it(I,_l.EventType.CLOSE,(()=>{q||(q=!0,rt(Ye,`RPC '${t}' stream ${l} transport closed`),$.a_(),this.E_(I))})),it(I,_l.EventType.ERROR,(Z=>{q||(q=!0,Qa(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),$.a_(new nt(Q.UNAVAILABLE,"The operation could not be completed")))})),it(I,_l.EventType.MESSAGE,(Z=>{if(!q){const Tt=Z.data[0];qt(!!Tt,16349);const pt=Tt,ct=pt?.error||pt[0]?.error;if(ct){rt(Ye,`RPC '${t}' stream ${l} received error:`,ct);const jt=ct.status;let At=(function(S){const R=ve[S];if(R!==void 0)return YT(R)})(jt),zt=ct.message;At===void 0&&(At=Q.INTERNAL,zt="Unknown error status: "+jt+" with message "+ct.message),q=!0,$.a_(new nt(At,zt)),I.close()}else rt(Ye,`RPC '${t}' stream ${l} received:`,Tt),$.u_(Tt)}})),it(g,fT.STAT_EVENT,(Z=>{Z.stat===im.PROXY?rt(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===im.NOPROXY&&rt(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(r){return new fI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="PersistentStream";class u0{constructor(t,n,s,l,c,d,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l0(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new nt(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt($v,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(rt($v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uC extends u0{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=gI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return vt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?vt.min():d.readTime?fi(d.readTime):vt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=mm(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=lm(p)?{documents:_I(c,p)}:{query:vI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=ZT(c,d.resumeToken);const y=hm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(vt.min())>0){g.readTime=Jc(c,d.snapshotVersion.toTimestamp());const y=hm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const s=TI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=mm(this.serializer),n.removeTarget=t,this.q_(n)}}class cC extends u0{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=yI(t.writeResults,t.commitTime),s=fi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=mm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>pI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{}class fC extends hC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,fm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new nt(Q.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(t,fm(n,s),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new nt(Q.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(n),this.aa=!1):rt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="RemoteStore";class mC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{js(this)&&(rt(zs,"Restarting streams for network reachability change."),await(async function(p){const y=Et(p);y.Ea.add(4),await Kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Th(y)})(this))}))})),this.Ra=new dC(s,l)}}async function Th(r){if(js(r))for(const t of r.da)await t(!0)}async function Kl(r){for(const t of r.da)await t(!1)}function c0(r,t){const n=Et(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Zm(n)?$m(n):so(n).O_()&&Xm(n,t))}function Ym(r,t){const n=Et(r),s=so(n);n.Ia.delete(t),s.O_()&&h0(n,t),n.Ia.size===0&&(s.O_()?s.L_():js(n)&&n.Ra.set("Unknown"))}function Xm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}so(r).Y_(t)}function h0(r,t){r.Va.Ue(t),so(r).Z_(t)}function $m(r){r.Va=new lI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),so(r).start(),r.Ra.ua()}function Zm(r){return js(r)&&!so(r).x_()&&r.Ia.size>0}function js(r){return Et(r).Ea.size===0}function f0(r){r.Va=void 0}async function gC(r){r.Ra.set("Online")}async function pC(r){r.Ia.forEach(((t,n)=>{Xm(r,t)}))}async function yC(r,t){f0(r),Zm(r)?(r.Ra.ha(t),$m(r)):r.Ra.set("Unknown")}async function _C(r,t,n){if(r.Ra.set("Online"),t instanceof $T&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(s){rt(zs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await th(r,s)}else if(t instanceof xc?r.Va.Ze(t):t instanceof XT?r.Va.st(t):r.Va.tt(t),!n.isEqual(vt.min()))try{const s=await o0(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(Ge.EMPTY_BYTE_STRING,T.snapshotVersion)),h0(c,p);const I=new Or(T.target,p,y,T.sequenceNumber);Xm(c,I)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){rt(zs,"Failed to raise snapshot:",s),await th(r,s)}}async function th(r,t,n){if(!ro(t))throw t;r.Ea.add(1),await Kl(r),r.Ra.set("Offline"),n||(n=()=>o0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{rt(zs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Th(r)}))}function d0(r,t){return t().catch((n=>th(r,n,t)))}async function Ah(r){const t=Et(r),n=Hr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pm;for(;vC(t);)try{const l=await tC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,EC(t,l)}catch(l){await th(t,l)}m0(t)&&g0(t)}function vC(r){return js(r)&&r.Ta.length<10}function EC(r,t){r.Ta.push(t);const n=Hr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function m0(r){return js(r)&&!Hr(r).x_()&&r.Ta.length>0}function g0(r){Hr(r).start()}async function TC(r){Hr(r).ra()}async function AC(r){const t=Hr(r);for(const n of r.Ta)t.ea(n.mutations)}async function SC(r,t,n){const s=r.Ta.shift(),l=qm.from(s,t,n);await d0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Ah(r)}async function bC(r,t){t&&Hr(r).X_&&await(async function(s,l){if((function(d){return sI(d)&&d!==Q.ABORTED})(l.code)){const c=s.Ta.shift();Hr(s).B_(),await d0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Ah(s)}})(r,t),m0(r)&&g0(r)}async function Zv(r,t){const n=Et(r);n.asyncQueue.verifyOperationInProgress(),rt(zs,"RemoteStore received new credentials");const s=js(n);n.Ea.add(3),await Kl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Th(n)}async function wC(r,t){const n=Et(r);t?(n.Ea.delete(2),await Th(n)):t||(n.Ea.add(2),await Kl(n),n.Ra.set("Unknown"))}function so(r){return r.ma||(r.ma=(function(n,s,l){const c=Et(n);return c.sa(),new uC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:gC.bind(null,r),t_:pC.bind(null,r),r_:yC.bind(null,r),H_:_C.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),Zm(r)?$m(r):r.Ra.set("Unknown")):(await r.ma.stop(),f0(r))}))),r.ma}function Hr(r){return r.fa||(r.fa=(function(n,s,l){const c=Et(n);return c.sa(),new cC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:TC.bind(null,r),r_:bC.bind(null,r),ta:AC.bind(null,r),na:SC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Ah(r)):(await r.fa.stop(),r.Ta.length>0&&(rt(zs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,g=new Jm(t,n,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(r,t){if(Yi("AsyncQueue",`${t}: ${r}`),ro(r))return new nt(Q.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{static emptySet(t){return new Ga(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||lt.comparator(n.key,s.key):(n,s)=>lt.comparator(n.key,s.key),this.keyedMap=vl(),this.sortedSet=new re(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ga)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ga;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.ga=new re(lt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):mt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Za{constructor(t,n,s,l,c,d,g,p,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Za(t,n,Ga.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class IC{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Et(n),c=l.queries;l.queries=Wv(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new nt(Q.ABORTED,"Firestore shutting down"))}}function Wv(){return new qs((r=>xT(r)),gh)}async function tg(r,t){const n=Et(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new RC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=Wm(d,`Initialization of query '${ka(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&ng(n)}async function eg(r,t){const n=Et(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function CC(r,t){const n=Et(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&ng(n)}function DC(r,t,n){const s=Et(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function ng(r){r.Ca.forEach((t=>{t.next()}))}var ym,tE;(tE=ym||(ym={})).Ma="default",tE.Cache="cache";class ig{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t){this.key=t}}class y0{constructor(t){this.key=t}}class NC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=kT(t),this.tu=new Ga(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new Jv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,I)=>{const C=l.get(T),q=ph(this.query,I)?I:null,$=!!C&&this.mutatedKeys.has(C.key),it=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Z=!1;C&&q?C.data.isEqual(q.data)?$!==it&&(s.track({type:3,doc:q}),Z=!0):this.su(C,q)||(s.track({type:2,doc:q}),Z=!0,(p&&this.eu(q,p)>0||y&&this.eu(q,y)<0)&&(g=!0)):!C&&q?(s.track({type:0,doc:q}),Z=!0):C&&!q&&(s.track({type:1,doc:C}),Z=!0,(p||y)&&(g=!0)),Z&&(q?(d=d.add(q),c=it?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,I)=>(function(q,$){const it=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:Z})}};return it(q)-it($)})(T.type,I.type)||this.eu(T.doc,I.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new Za(this.query,t.tu,c,d,t.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new y0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new p0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rg="SyncEngine";class OC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class VC{constructor(t){this.key=t,this.hu=!1}}class MC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new qs((g=>xT(g)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new re(lt.comparator),this.Au=new Map,this.Ru=new Gm,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PC(r,t,n=!0){const s=S0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await _0(s,t,n,!0),l}async function UC(r,t){const n=S0(r);await _0(n,t,!0,!1)}async function _0(r,t,n,s){const l=await eC(r.localStore,hi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await xC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&c0(r.remoteStore,l),g}async function xC(r,t,n,s,l){r.pu=(I,C,q)=>(async function(it,Z,Tt,pt){let ct=Z.view.ru(Tt);ct.Cs&&(ct=await Qv(it.localStore,Z.query,!1).then((({documents:M})=>Z.view.ru(M,ct))));const jt=pt&&pt.targetChanges.get(Z.targetId),At=pt&&pt.targetMismatches.get(Z.targetId)!=null,zt=Z.view.applyChanges(ct,it.isPrimaryClient,jt,At);return nE(it,Z.targetId,zt.au),zt.snapshot})(r,I,C,q);const c=await Qv(r.localStore,t,!0),d=new NC(t,c.Qs),g=d.ru(c.documents),p=Ql.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,p);nE(r,n,y.au);const T=new OC(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function kC(r,t,n){const s=Et(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!gh(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await gm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Ym(s.remoteStore,l.targetId),_m(s,l.targetId)})).catch(io)):(_m(s,l.targetId),await gm(s.localStore,l.targetId,!0))}async function LC(r,t){const n=Et(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ym(n.remoteStore,s.targetId))}async function zC(r,t,n){const s=QC(r);try{const l=await(function(d,g){const p=Et(d),y=te.now(),T=g.reduce(((q,$)=>q.add($.key)),Ot());let I,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let $=Xi(),it=Ot();return p.Ns.getEntries(q,T).next((Z=>{$=Z,$.forEach(((Tt,pt)=>{pt.isValidDocument()||(it=it.add(Tt))}))})).next((()=>p.localDocuments.getOverlayedDocuments(q,$))).next((Z=>{I=Z;const Tt=[];for(const pt of g){const ct=tI(pt,I.get(pt.key).overlayedDocument);ct!=null&&Tt.push(new Kr(pt.key,ct,CT(ct.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(q,y,Tt,g)})).next((Z=>{C=Z;const Tt=Z.applyToLocalDocumentSet(I,it);return p.documentOverlayCache.saveOverlays(q,Z.batchId,Tt)}))})).then((()=>({batchId:C.batchId,changes:zT(I)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new re(Nt)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await Yl(s,l.changes),await Ah(s.remoteStore)}catch(l){const c=Wm(l,"Failed to persist write");n.reject(c)}}async function v0(r,t){const n=Et(r);try{const s=await JI(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?qt(d.hu,14607):l.removedDocuments.size>0&&(qt(d.hu,42227),d.hu=!1))})),await Yl(n,s,t)}catch(s){await io(s)}}function eE(r,t,n){const s=Et(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const p=Et(d);p.onlineState=g;let y=!1;p.queries.forEach(((T,I)=>{for(const C of I.Sa)C.va(g)&&(y=!0)})),y&&ng(p)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function BC(r,t,n){const s=Et(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new re(lt.comparator);d=d.insert(c,Ze.newNoDocument(c,vt.min()));const g=Ot().add(c),p=new vh(vt.min(),new Map,new re(Nt),d,g);await v0(s,p),s.du=s.du.remove(c),s.Au.delete(t),sg(s)}else await gm(s.localStore,t,!1).then((()=>_m(s,t,n))).catch(io)}async function qC(r,t){const n=Et(r),s=t.batch.batchId;try{const l=await ZI(n.localStore,t);T0(n,s,null),E0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yl(n,l)}catch(l){await io(l)}}async function jC(r,t,n){const s=Et(r);try{const l=await(function(d,g){const p=Et(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next((I=>(qt(I!==null,37113),T=I.keys(),p.mutationQueue.removeMutationBatch(y,I)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);T0(s,t,n),E0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Yl(s,l)}catch(l){await io(l)}}function E0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function T0(r,t,n){const s=Et(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function _m(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||A0(r,s)}))}function A0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Ym(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),sg(r))}function nE(r,t,n){for(const s of n)s instanceof p0?(r.Ru.addReference(s.key,t),HC(r,s)):s instanceof y0?(rt(rg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||A0(r,s.key)):mt(19791,{wu:s})}function HC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(rt(rg,"New document in limbo: "+n),r.Eu.add(s),sg(r))}function sg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new lt(Wt.fromString(t)),s=r.fu.next();r.Au.set(s,new VC(n)),r.du=r.du.insert(n,s),c0(r.remoteStore,new Or(hi(mh(n.path)),s,"TargetPurposeLimboResolution",hh.ce))}}async function Yl(r,t,n){const s=Et(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{d.push(s.pu(p,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Qm.As(p.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(p,y){const T=Et(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Y.forEach(y,(C=>Y.forEach(C.Es,(q=>T.persistence.referenceDelegate.addReference(I,C.targetId,q))).next((()=>Y.forEach(C.ds,(q=>T.persistence.referenceDelegate.removeReference(I,C.targetId,q)))))))))}catch(I){if(!ro(I))throw I;rt(Km,"Failed to update sequence numbers: "+I)}for(const I of y){const C=I.targetId;if(!I.fromCache){const q=T.Ms.get(C),$=q.snapshotVersion,it=q.withLastLimboFreeSnapshotVersion($);T.Ms=T.Ms.insert(C,it)}}})(s.localStore,c))}async function GC(r,t){const n=Et(r);if(!n.currentUser.isEqual(t)){rt(rg,"User change. New user:",t.toKey());const s=await a0(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new nt(Q.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Yl(n,s.Ls)}}function FC(r,t){const n=Et(r),s=n.Au.get(t);if(s&&s.hu)return Ot().add(s.key);{let l=Ot();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const g=n.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function S0(r){const t=Et(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=v0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BC.bind(null,t),t.Pu.H_=CC.bind(null,t.eventManager),t.Pu.yu=DC.bind(null,t.eventManager),t}function QC(r){const t=Et(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jC.bind(null,t),t}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Eh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return $I(this.persistence,new KI,t.initialUser,this.serializer)}Cu(t){return new s0(Fm.mi,this.serializer)}Du(t){return new iC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class KC extends eh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){qt(this.persistence.referenceDelegate instanceof Wc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new VI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new s0((s=>Wc.mi(s,n)),this.serializer)}}class vm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=GC.bind(null,this.syncEngine),await wC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new IC})()}createDatastore(t){const n=Eh(t.databaseInfo.databaseId),s=(function(c){return new lC(c)})(t.databaseInfo);return(function(c,d,g,p){return new fC(c,d,g,p)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,g){return new mC(s,l,c,d,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>eE(this.syncEngine,n,0)),(function(){return Xv.v()?new Xv:new rC})())}createSyncEngine(t,n){return(function(l,c,d,g,p,y,T){const I=new MC(l,c,d,g,p,y);return T&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Et(n);rt(zs,"RemoteStore shutting down."),s.Ea.add(5),await Kl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vm.provider={build:()=>new vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Yi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class YC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{rt(Gr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(rt(Gr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Wm(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Kd(r,t){r.asyncQueue.verifyOperationInProgress(),rt(Gr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await a0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function iE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await XC(r);rt(Gr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Zv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Zv(t.remoteStore,l))),r._onlineComponents=t}async function XC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){rt(Gr,"Using user provided OfflineComponentProvider");try{await Kd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await Kd(r,new eh)}}else rt(Gr,"Using default OfflineComponentProvider"),await Kd(r,new KC(void 0));return r._offlineComponents}async function b0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(rt(Gr,"Using user provided OnlineComponentProvider"),await iE(r,r._uninitializedComponentsProvider._online)):(rt(Gr,"Using default OnlineComponentProvider"),await iE(r,new vm))),r._onlineComponents}function $C(r){return b0(r).then((t=>t.syncEngine))}async function nh(r){const t=await b0(r),n=t.eventManager;return n.onListen=PC.bind(null,t.syncEngine),n.onUnlisten=kC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=UC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=LC.bind(null,t.syncEngine),n}function ZC(r,t,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const T=new ag({next:C=>{T.Nu(),d.enqueueAndForget((()=>eg(c,I)));const q=C.docs.has(g);!q&&C.fromCache?y.reject(new nt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&C.fromCache&&p&&p.source==="server"?y.reject(new nt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),I=new ig(mh(g.path),T,{includeMetadataChanges:!0,qa:!0});return tg(c,I)})(await nh(r),r.asyncQueue,t,n,s))),s.promise}function JC(r,t,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const T=new ag({next:C=>{T.Nu(),d.enqueueAndForget((()=>eg(c,I))),C.fromCache&&p.source==="server"?y.reject(new nt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),I=new ig(g,T,{includeMetadataChanges:!0,qa:!0});return tg(c,I)})(await nh(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firestore.googleapis.com",sE=!0;class aE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new nt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R0,this.ssl=sE}else this.host=t.host,this.ssl=t.ssl??sE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=r0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<NI)throw new nt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new iR;switch(s.type){case"firstParty":return new oR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new nt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=rE.get(n);s&&(rt("ComponentProvider","Removing Datastore"),rE.delete(n),s.terminate())})(this),Promise.resolve()}}function WC(r,t,n,s={}){r=Un(r,Sh);const l=Wa(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${n}`;l&&(SE(`https://${g}`),bE("Firestore",!0)),c.host!==R0&&c.host!==g&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:s};if(!Us(p,d)&&(r._setSettings(p),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Xe.MOCK_USER;else{y=DS(s.mockUserToken,r._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new nt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xe(I)}r._authCredentials=new rR(new pT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Hs(this.firestore,t,this._query)}}class me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Hl(n,me._jsonSchema))return new me(t,s||null,new lt(Wt.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Te("string",me._jsonSchemaVersion),referencePath:Te("string")};class kr extends Hs{constructor(t,n,s){super(t,n,mh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new lt(t))}withConverter(t){return new kr(this.firestore,t,this._path)}}function Xl(r,t,...n){if(r=He(r),yT("collection","path",t),r instanceof Sh){const s=Wt.fromString(t,...n);return vv(s),new kr(r,null,s)}{if(!(r instanceof me||r instanceof kr))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Wt.fromString(t,...n));return vv(s),new kr(r.firestore,null,s)}}function rn(r,t,...n){if(r=He(r),arguments.length===1&&(t=Mm.newId()),yT("doc","path",t),r instanceof Sh){const s=Wt.fromString(t,...n);return _v(s),new me(r,null,new lt(s))}{if(!(r instanceof me||r instanceof kr))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Wt.fromString(t,...n));return _v(s),new me(r.firestore,r instanceof kr?r.converter:null,new lt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="AsyncQueue";class lE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l0(this,"async_queue_retry"),this._c=()=>{const s=Qd();s&&rt(oE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ro(t))throw t;rt(oE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",uE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Jm.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&mt(47125,{Pc:uE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function uE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Fr extends Sh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new lE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lE(t),this._firestoreClient=void 0,await t}}}function t2(r,t){const n=typeof r=="object"?r:CE(),s=typeof r=="string"?r:Kc,l=bm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=IS("firestore");c&&WC(l,...c)}return l}function $l(r){if(r._terminated)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||e2(r),r._firestoreClient}function e2(r){const t=r._freezeSettings(),n=(function(l,c,d,g){return new bR(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,w0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new YC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pn(Ge.fromBase64String(t))}catch(n){throw new nt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Pn(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hl(t,Pn._jsonSchema))return Pn.fromBase64String(t.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Te("string",Pn._jsonSchemaVersion),bytes:Te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new nt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new nt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(t){if(Hl(t,di._jsonSchema))return new di(t.latitude,t.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Te("string",di._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hl(t,mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mi(t.vectorValues);throw new nt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Te("string",mi._jsonSchemaVersion),vectorValues:Te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class i2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Kr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(t,this.data,n,this.fieldTransforms)}}class I0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Kr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function C0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:r})}}class og{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new og({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ih(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(C0(this.Ac)&&n2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class r2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Eh(t)}Cc(t,n,s,l=!1){return new og({Ac:t,methodName:n,Dc:s,path:je.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rh(r){const t=r._freezeSettings(),n=Eh(r._databaseId);return new r2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function lg(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);cg("Data must be an object, but it was:",d,s);const g=D0(s,d);let p,y;if(c.merge)p=new vn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const I of c.mergeFields){const C=Em(t,I,n);if(!d.contains(C))throw new nt(Q.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);O0(T,C)||T.push(C)}p=new vn(T),y=d.fieldTransforms.filter((I=>p.covers(I.field)))}else p=null,y=d.fieldTransforms;return new i2(new un(g),p,y)}class Ih extends wh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ih}}class ug extends wh{_toFieldTransform(t){return new $R(t.path,new Ul)}isEqual(t){return t instanceof ug}}function s2(r,t,n,s){const l=r.Cc(1,t,n);cg("Data must be an object, but it was:",l,s);const c=[],d=un.empty();Qr(s,((p,y)=>{const T=hg(t,p,n);y=He(y);const I=l.yc(T);if(y instanceof Ih)c.push(T);else{const C=Zl(y,I);C!=null&&(c.push(T),d.set(T,C))}}));const g=new vn(c);return new I0(d,g,l.fieldTransforms)}function a2(r,t,n,s,l,c){const d=r.Cc(1,t,n),g=[Em(t,s,n)],p=[l];if(c.length%2!=0)throw new nt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)g.push(Em(t,c[C])),p.push(c[C+1]);const y=[],T=un.empty();for(let C=g.length-1;C>=0;--C)if(!O0(y,g[C])){const q=g[C];let $=p[C];$=He($);const it=d.yc(q);if($ instanceof Ih)y.push(q);else{const Z=Zl($,it);Z!=null&&(y.push(q),T.set(q,Z))}}const I=new vn(y);return new I0(T,I,d.fieldTransforms)}function o2(r,t,n,s=!1){return Zl(n,r.Cc(s?4:3,t))}function Zl(r,t){if(N0(r=He(r)))return cg("Unsupported field value:",t,r),D0(r,t);if(r instanceof wh)return(function(s,l){if(!C0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const g of s){let p=Zl(g,l.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=He(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=te.fromDate(s);return{timestampValue:Jc(l.serializer,c)}}if(s instanceof te){const c=new te(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jc(l.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:ZT(l.serializer,s._byteString)};if(s instanceof me){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof mi)return(function(d,g){return{mapValue:{fields:{[RT]:{stringValue:IT},[Yc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return zm(g.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${ch(s)}`)})(r,t)}function D0(r,t){const n={};return ET(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qr(r,((s,l)=>{const c=Zl(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function N0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof te||r instanceof di||r instanceof Pn||r instanceof me||r instanceof wh||r instanceof mi)}function cg(r,t,n){if(!N0(n)||!_T(n)){const s=ch(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Em(r,t,n){if((t=He(t))instanceof bh)return t._internalPath;if(typeof t=="string")return hg(r,t);throw ih("Field path arguments must be of type string or ",r,!1,void 0,n)}const l2=new RegExp("[~\\*/\\[\\]]");function hg(r,t,n){if(t.search(l2)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new bh(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ih(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new nt(Q.INVALID_ARGUMENT,g+r+p)}function O0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new u2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(fg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u2 extends V0{data(){return super.data()}}function fg(r,t){return typeof t=="string"?hg(r,t):t instanceof bh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new nt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dg{}class c2 extends dg{}function h2(r,t,...n){let s=[];t instanceof dg&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((p=>p instanceof mg)).length,g=c.filter((p=>p instanceof Ch)).length;if(d>1||d>0&&g>0)throw new nt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Ch extends c2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Ch(t,n,s)}_apply(t){const n=this._parse(t);return P0(t._query,n),new Hs(t.firestore,t.converter,um(t._query,n))}_parse(t){const n=Rh(t.firestore);return(function(c,d,g,p,y,T,I){let C;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){fE(I,T);const $=[];for(const it of I)$.push(hE(p,c,it));C={arrayValue:{values:$}}}else C=hE(p,c,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||fE(I,T),C=o2(g,d,I,T==="in"||T==="not-in");return Ee.create(y,T,C)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function f2(r,t,n){const s=t,l=fg("where",r);return Ch._create(l,s,n)}class mg extends dg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new mg(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const g=c.getFlattenedFilters();for(const p of g)P0(d,p),d=um(d,p)})(t._query,n),new Hs(t.firestore,t.converter,um(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hE(r,t,n){if(typeof(n=He(n))=="string"){if(n==="")throw new nt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UT(t)&&n.indexOf("/")!==-1)throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Wt.fromString(n));if(!lt.isDocumentKey(s))throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Iv(r,new lt(s))}if(n instanceof me)return Iv(r,n._key);throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ch(n)}.`)}function fE(r,t){if(!Array.isArray(r)||r.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function P0(r,t){const n=(function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class d2{convertValue(t,n="none"){switch(jr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Qr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[Yc].arrayValue?.values?.map((s=>de(s.doubleValue)));return new mi(n)}convertGeoPoint(t){return new di(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=dh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Vl(t));default:return null}}convertTimestamp(t){const n=Br(t);return new te(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Wt.fromString(t);qt(i0(s),9688,{name:t});const l=new Ml(s.get(1),s.get(3)),c=new lt(s.popFirst(5));return l.isEqual(n)||Yi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class Tl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ms extends V0{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(fg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ms._jsonSchema={type:Te("string",Ms._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};class kc extends Ms{data(t={}){return super.data(t)}}class Ps{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Tl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new kc(this._firestore,this._userDataWriter,s.key,s,new Tl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new nt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:m2(g.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ps._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function m2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(r){r=Un(r,me);const t=Un(r.firestore,Fr);return ZC($l(t),r._key).then((n=>k0(t,r,n)))}Ps._jsonSchemaVersion="firestore/querySnapshot/1.0",Ps._jsonSchema={type:Te("string",Ps._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};class pg extends d2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function U0(r){r=Un(r,Hs);const t=Un(r.firestore,Fr),n=$l(t),s=new pg(t);return M0(r._query),JC(n,r._query).then((l=>new Ps(t,s,r,l)))}function x0(r,t,n){r=Un(r,me);const s=Un(r.firestore,Fr),l=gg(r.converter,t,n);return yg(s,[lg(Rh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,En.none())])}function g2(r,t){const n=Un(r.firestore,Fr),s=rn(r),l=gg(r.converter,t);return yg(n,[lg(Rh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,En.exists(!1))]).then((()=>s))}function Cl(r,...t){r=He(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||cE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cE(t[s])){const p=t[s];t[s]=p.next?.bind(p),t[s+1]=p.error?.bind(p),t[s+2]=p.complete?.bind(p)}let c,d,g;if(r instanceof me)d=Un(r.firestore,Fr),g=mh(r._key.path),c={next:p=>{t[s]&&t[s](k0(d,r,p))},error:t[s+1],complete:t[s+2]};else{const p=Un(r,Hs);d=Un(p.firestore,Fr),g=p._query;const y=new pg(d);c={next:T=>{t[s]&&t[s](new Ps(d,y,p,T))},error:t[s+1],complete:t[s+2]},M0(r._query)}return(function(y,T,I,C){const q=new ag(C),$=new ig(T,q,I);return y.asyncQueue.enqueueAndForget((async()=>tg(await nh(y),$))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>eg(await nh(y),$)))}})($l(d),g,l,c)}function yg(r,t){return(function(s,l){const c=new Gi;return s.asyncQueue.enqueueAndForget((async()=>zC(await $C(s),l,c))),c.promise})($l(r),t)}function k0(r,t,n){const s=n.docs.get(t._key),l=new pg(r);return new Ms(r,l,t._key,s,new Tl(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rh(t)}set(t,n,s){this._verifyNotCommitted();const l=Yd(t,this._firestore),c=gg(l.converter,n,s),d=lg(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,En.none())),this}update(t,n,s,...l){this._verifyNotCommitted();const c=Yd(t,this._firestore);let d;return d=typeof(n=He(n))=="string"||n instanceof bh?a2(this._dataReader,"WriteBatch.update",c._key,n,s,l):s2(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,En.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Yd(t,this._firestore);return this._mutations=this._mutations.concat(new Bm(n._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(r,t){if((r=He(r)).firestore!==t)throw new nt(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Ja(){return new ug("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(r){return $l(r=Un(r,Fr)),new p2(r,(t=>yg(r,t)))}(function(t,n=!0){(function(l){no=l})(to),Fa(new xs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new Fr(new sR(s.getProvider("auth-internal")),new lR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new nt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Pr(mv,gv,t),Pr(mv,gv,"esm2020")})();const y2={apiKey:"AIzaSyBewBUk6Oj4PjB6rVr8iVfZ6Zcyqm7CbXs",authDomain:"uno-game-e3329.firebaseapp.com",projectId:"uno-game-e3329",storageBucket:"uno-game-e3329.appspot.com",messagingSenderId:"793495202186",appId:"1:793495202186:web:705f97f5e200bf41120073",measurementId:"G-6PuJ7DGC39"},L0=IE(y2),Bs=eR(L0),ue=t2(L0);async function ao(){Bs.currentUser||await zb(Bs)}async function _2(r){await ao();const t=Bs.currentUser.uid,n=Math.random().toString(36).slice(2,8).toUpperCase(),s=await g2(Xl(ue,"rooms"),{code:n,hostUid:t,status:"lobby",createdAt:Ja()});return await x0(rn(ue,"rooms",s.id,"players",t),{displayName:r,joinedAt:Ja(),isReady:!1,isHost:!0,handCount:0}),{roomId:s.id,code:n}}async function v2(r,t){await ao();const n=Bs.currentUser.uid,s=h2(Xl(ue,"rooms"),f2("code","==",r)),l=await U0(s);if(l.empty)throw new Error("Room not found");const c=l.docs[0].id;return await x0(rn(ue,"rooms",c,"players",n),{displayName:t,joinedAt:Ja(),isReady:!1,isHost:!1,handCount:0},{merge:!0}),{roomId:c}}function E2(r,t,n){const s=Cl(rn(ue,"rooms",r),c=>t({id:c.id,...c.data()})),l=Cl(Xl(ue,"rooms",r,"players"),c=>n(c.docs.map(d=>({id:d.id,...d.data()}))));return()=>{s(),l()}}function T2({onEnterRoom:r}){const[t,n]=$e.useState("Player"),[s,l]=$e.useState(null),[c,d]=$e.useState(""),[g,p]=$e.useState(null),[y,T]=$e.useState([]);$e.useEffect(()=>{ao()},[]),$e.useEffect(()=>{if(!s)return;const q=E2(s,p,T);return()=>q()},[s]);async function I(){const{roomId:q,code:$}=await _2(t||"Player");l(q),r(q,!0),console.log("Invite code:",$)}async function C(){if(!c.trim())return;const{roomId:q}=await v2(c.trim().toUpperCase(),t||"Player");l(q),r(q,!1)}return dt.jsxs("div",{className:"p-3 rounded border border-slate-300 mb-4",children:[dt.jsxs("div",{className:"mb-2",children:[dt.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),dt.jsx("input",{value:t,onChange:q=>n(q.target.value),className:"border px-2 py-1 rounded w-full"})]}),dt.jsxs("div",{className:"flex gap-2",children:[dt.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-emerald-600 text-white",children:"Create room"}),dt.jsx("input",{value:c,onChange:q=>d(q.target.value),placeholder:"Enter code",className:"border px-2 py-1 rounded"}),dt.jsx("button",{onClick:C,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Join"})]}),g&&dt.jsxs("div",{className:"mt-3 text-sm",children:[dt.jsxs("div",{children:[dt.jsx("b",{children:"Room"})," ",s]}),dt.jsxs("div",{children:[dt.jsx("b",{children:"Code"})," ",g.code]}),dt.jsxs("div",{children:[dt.jsx("b",{children:"Status"})," ",g.status]}),dt.jsx("div",{className:"mt-1",children:dt.jsx("b",{children:"Players"})}),dt.jsx("ul",{className:"list-disc ml-6",children:y.map(q=>dt.jsxs("li",{children:[q.displayName,q.isHost?" (host)":""]},q.id))})]})]})}function A2(r){return r.kind==="number"?`${r.color}_${r.value}.png`:r.kind==="action"?`${r.color}_${r.action}.png`:r.action==="wildDraw4"?"wildDraw4.png":"wild.png"}function dE(r){return r.kind==="number"?`${r.color} ${r.value}`:r.kind==="action"?`${r.color} ${r.action}`:r.action==="wildDraw4"?"+4":"wild"}function mE({card:r,onPlay:t,size:n="md"}){const[s,l]=$e.useState(!1),c=`/UNO-WEB3/cards/${A2(r)}`,d=n==="lg"?{w:96,h:144}:n==="sm"?{w:48,h:72}:{w:64,h:96};return dt.jsx("button",{onClick:()=>t?.(r),title:JSON.stringify(r),className:"m-1 p-0 rounded-lg border border-slate-400 overflow-hidden bg-white hover:shadow transition disabled:opacity-100",style:{width:d.w,height:d.h,cursor:t?"pointer":"default"},disabled:!t,children:s?dt.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs px-1",children:dE(r)}):dt.jsx("img",{src:c,alt:dE(r),className:"w-full h-full object-contain",onError:()=>l(!0)})})}const gE=["red","yellow","green","blue"];function S2(){const r=[];for(const t of gE){r.push({kind:"number",color:t,value:0});for(let n=1;n<=9;n++)r.push({kind:"number",color:t,value:n}),r.push({kind:"number",color:t,value:n})}for(const t of gE)for(let n=0;n<2;n++)r.push({kind:"action",color:t,action:"skip"}),r.push({kind:"action",color:t,action:"reverse"}),r.push({kind:"action",color:t,action:"draw2",drawAmount:2});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wild"});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wildDraw4",drawAmount:4});return r}function b2(r){for(let t=r.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[r[t],r[n]]=[r[n],r[t]]}return r}function w2(r,t){const n=Cl(rn(ue,"rooms",r),d=>t.onRoom({id:d.id,...d.data()})),s=Cl(Xl(ue,"rooms",r,"players"),d=>t.onPlayers(d.docs.map(g=>({id:g.id,...g.data()})))),l=Bs.currentUser?.uid,c=l?Cl(rn(ue,"rooms",r,"hands",l),d=>t.onMyHand(d.data()?.cards??[])):()=>{};return()=>{n(),s(),c()}}async function R2(r){await ao();const n=(await U0(Xl(ue,"rooms",r,"players"))).docs.map(g=>g.id);if(n.length<2)throw new Error("Need at least 2 players");const s=b2(S2()),l={};for(const g of n)l[g]=s.splice(0,7);let c=s.pop();for(;c.kind==="wild";)s.unshift(c),c=s.pop();const d=_g(ue);d.set(rn(ue,"rooms",r),{status:"playing",currentTurn:n[0],direction:1,topCard:c,drawPile:s,discardPile:[c],updatedAt:Ja()},{merge:!0});for(const g of n)d.set(rn(ue,"rooms",r,"hands",g),{cards:l[g]}),d.set(rn(ue,"rooms",r,"players",g),{handCount:l[g].length},{merge:!0});await d.commit()}async function I2(r,t){await ao();const n=Bs.currentUser.uid,s=rn(ue,"rooms",r,"hands",n),l=rn(ue,"rooms",r),[c,d]=await Promise.all([rh(s),rh(l)]),g=c?.data()?.cards??[],p=g.findIndex(I=>JSON.stringify(I)===JSON.stringify(t));if(p<0)throw new Error("Card not in hand");g.splice(p,1);const y=d?.data()?.discardPile??[];y.push(t);const T=_g(ue);T.set(s,{cards:g},{merge:!0}),T.set(rn(ue,"rooms",r,"players",n),{handCount:g.length},{merge:!0}),T.set(l,{topCard:t,discardPile:y,updatedAt:Ja()},{merge:!0}),await T.commit()}async function C2(r){await ao();const t=Bs.currentUser.uid,n=rn(ue,"rooms",r,"hands",t),s=rn(ue,"rooms",r),[l,c]=await Promise.all([rh(n),rh(s)]),d=l?.data()?.cards??[],g=c?.data()?.drawPile??[];if(!g.length)throw new Error("No cards to draw");const p=g.pop(),y=_g(ue);y.set(n,{cards:[...d,p]},{merge:!0}),y.set(rn(ue,"rooms",r,"players",t),{handCount:d.length+1},{merge:!0}),y.set(s,{drawPile:g,updatedAt:Ja()},{merge:!0}),await y.commit()}function pE(r,t){if(t.kind==="wild")return!0;if(r.kind==="wild"){const n=r.chosenColor;return n?t.color===n:!0}return t.kind==="number"&&r.kind==="number"?t.color===r.color||t.value===r.value:t.kind==="action"&&r.kind==="action"?t.color===r.color||t.action===r.action:t.color===r.color}function D2({roomId:r,isHost:t}){const[n,s]=$e.useState(null),[l,c]=$e.useState([]),[d,g]=$e.useState([]);$e.useEffect(()=>{const T=w2(r,{onRoom:s,onPlayers:c,onMyHand:g});return()=>T()},[r]);const p=n?.topCard??null,y=$e.useMemo(()=>!!p&&d.some(T=>pE(p,T)),[d,p]);return n?dt.jsxs("div",{className:"p-6 space-y-3",children:[dt.jsx("h1",{className:"text-3xl font-extrabold",children:"UNO (Online)"}),dt.jsxs("div",{children:[dt.jsx("b",{children:"Room:"})," ",r]}),dt.jsxs("div",{children:[dt.jsx("b",{children:"Status:"})," ",n.status]}),dt.jsxs("div",{children:[dt.jsx("b",{children:"Players:"})," ",l.map(T=>T.displayName).join(", ")]}),n.status!=="playing"&&dt.jsx("div",{className:"mt-2",children:t?dt.jsx("button",{className:"px-4 py-2 rounded bg-emerald-600 text-white",onClick:()=>R2(r),children:"Start game"}):dt.jsx("div",{children:"Waiting for host to start"})}),n.status==="playing"&&dt.jsxs(dt.Fragment,{children:[dt.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[dt.jsx("div",{className:"text-sm font-semibold",children:"Top card:"}),p&&dt.jsx(mE,{card:p,size:"lg"})]}),dt.jsx("div",{className:"mt-3 flex gap-2",children:dt.jsx("button",{onClick:()=>C2(r),disabled:n.status!=="playing",className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50",title:y?"You already have a playable card":"Draw one",children:"Draw"})}),dt.jsxs("div",{className:"mt-4",children:[dt.jsxs("h3",{className:"font-semibold mb-1",children:["Your hand (",d.length,")"]}),dt.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((T,I)=>dt.jsx("div",{onClick:()=>p&&pE(p,T)&&I2(r,T),className:"cursor-pointer",children:dt.jsx(mE,{card:T,size:"md"})},I))})]})]})]}):dt.jsx("div",{className:"p-6",children:"Loading room"})}function N2(){const[r,t]=$e.useState(null),[n,s]=$e.useState(!1);return r?dt.jsx(D2,{roomId:r,isHost:n}):dt.jsx(T2,{onEnterRoom:(l,c)=>{t(l),s(c)}})}_S.createRoot(document.getElementById("root")).render(dt.jsx($e.StrictMode,{children:dt.jsx(N2,{})}));
