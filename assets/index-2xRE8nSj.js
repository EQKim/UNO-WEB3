var Yb=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var eV=Yb((oV,ph)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mh(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Oe={},xi=[],fn=()=>{},Bg=()=>!1,Tu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),gh=n=>n.startsWith("onUpdate:"),St=Object.assign,yh=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Xb=Object.prototype.hasOwnProperty,Se=(n,e)=>Xb.call(n,e),le=Array.isArray,Mi=n=>wu(n)==="[object Map]",$g=n=>wu(n)==="[object Set]",de=n=>typeof n=="function",tt=n=>typeof n=="string",Mr=n=>typeof n=="symbol",je=n=>n!==null&&typeof n=="object",zg=n=>(je(n)||de(n))&&de(n.then)&&de(n.catch),Qg=Object.prototype.toString,wu=n=>Qg.call(n),Zb=n=>wu(n).slice(8,-1),Wg=n=>wu(n)==="[object Object]",vh=n=>tt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Hs=mh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Iu=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},eT=/-\w/g,br=Iu(n=>n.replace(eT,e=>e.slice(1).toUpperCase())),tT=/\B([A-Z])/g,ui=Iu(n=>n.replace(tT,"-$1").toLowerCase()),Hg=Iu(n=>n.charAt(0).toUpperCase()+n.slice(1)),Sc=Iu(n=>n?`on${Hg(n)}`:""),fr=(n,e)=>!Object.is(n,e),ba=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Gg=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},ul=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Md;const Su=()=>Md||(Md=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Do(n){if(le(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=tt(r)?sT(r):Do(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(tt(n)||je(n))return n}const nT=/;(?![^(]*\))/g,rT=/:([^]+)/,iT=/\/\*[^]*?\*\//g;function sT(n){const e={};return n.replace(iT,"").split(nT).forEach(t=>{if(t){const r=t.split(rT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Au(n){let e="";if(tt(n))e=n;else if(le(n))for(let t=0;t<n.length;t++){const r=Au(n[t]);r&&(e+=r+" ")}else if(je(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const oT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aT=mh(oT);function Kg(n){return!!n||n===""}const Jg=n=>!!(n&&n.__v_isRef===!0),nt=n=>tt(n)?n:n==null?"":le(n)||je(n)&&(n.toString===Qg||!de(n.toString))?Jg(n)?nt(n.value):JSON.stringify(n,Yg,2):String(n),Yg=(n,e)=>Jg(e)?Yg(n,e.value):Mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Ac(r,s)+" =>"]=i,t),{})}:$g(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ac(t))}:Mr(e)?Ac(e):je(e)&&!le(e)&&!Wg(e)?String(e):e,Ac=(n,e="")=>{var t;return Mr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class uT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Vt;try{return Vt=this,e()}finally{Vt=t}}}on(){++this._on===1&&(this.prevScope=Vt,Vt=this)}off(){this._on>0&&--this._on===0&&(Vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function cT(){return Vt}let Ne;const Rc=new WeakSet;class Xg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rc.has(this)&&(Rc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ey(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fd(this),ty(this);const e=Ne,t=nn;Ne=this,nn=!0;try{return this.fn()}finally{ny(this),Ne=e,nn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bh(e);this.deps=this.depsTail=void 0,Fd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cl(this)&&this.run()}get dirty(){return cl(this)}}let Zg=0,Gs,Ks;function ey(n,e=!1){if(n.flags|=8,e){n.next=Ks,Ks=n;return}n.next=Gs,Gs=n}function _h(){Zg++}function Eh(){if(--Zg>0)return;if(Ks){let e=Ks;for(Ks=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Gs;){let e=Gs;for(Gs=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function ty(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ny(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),bh(r),lT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function cl(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ry(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function ry(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ho)||(n.globalVersion=ho,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!cl(n))))return;n.flags|=2;const e=n.dep,t=Ne,r=nn;Ne=n,nn=!0;try{ty(n);const i=n.fn(n._value);(e.version===0||fr(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ne=t,nn=r,ny(n),n.flags&=-3}}function bh(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)bh(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function lT(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let nn=!0;const iy=[];function Ln(){iy.push(nn),nn=!1}function Un(){const n=iy.pop();nn=n===void 0?!0:n}function Fd(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ne;Ne=void 0;try{e()}finally{Ne=t}}}let ho=0;class hT{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Th{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ne||!nn||Ne===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ne)t=this.activeLink=new hT(Ne,this),Ne.deps?(t.prevDep=Ne.depsTail,Ne.depsTail.nextDep=t,Ne.depsTail=t):Ne.deps=Ne.depsTail=t,sy(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Ne.depsTail,t.nextDep=void 0,Ne.depsTail.nextDep=t,Ne.depsTail=t,Ne.deps===t&&(Ne.deps=r)}return t}trigger(e){this.version++,ho++,this.notify(e)}notify(e){_h();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Eh()}}}function sy(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)sy(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const ll=new WeakMap,Zr=Symbol(""),hl=Symbol(""),fo=Symbol("");function bt(n,e,t){if(nn&&Ne){let r=ll.get(n);r||ll.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Th),i.map=r,i.key=t),i.track()}}function On(n,e,t,r,i,s){const o=ll.get(n);if(!o){ho++;return}const a=c=>{c&&c.trigger()};if(_h(),e==="clear")o.forEach(a);else{const c=le(n),l=c&&vh(t);if(c&&t==="length"){const h=Number(r);o.forEach((d,m)=>{(m==="length"||m===fo||!Mr(m)&&m>=h)&&a(d)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),l&&a(o.get(fo)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Zr)),Mi(n)&&a(o.get(hl)));break;case"delete":c||(a(o.get(Zr)),Mi(n)&&a(o.get(hl)));break;case"set":Mi(n)&&a(o.get(Zr));break}}Eh()}function bi(n){const e=Ie(n);return e===n?e:(bt(e,"iterate",fo),Kt(n)?e:e.map(ft))}function Ru(n){return bt(n=Ie(n),"iterate",fo),n}const fT={__proto__:null,[Symbol.iterator](){return Cc(this,Symbol.iterator,ft)},concat(...n){return bi(this).concat(...n.map(e=>le(e)?bi(e):e))},entries(){return Cc(this,"entries",n=>(n[1]=ft(n[1]),n))},every(n,e){return Pn(this,"every",n,e,void 0,arguments)},filter(n,e){return Pn(this,"filter",n,e,t=>t.map(ft),arguments)},find(n,e){return Pn(this,"find",n,e,ft,arguments)},findIndex(n,e){return Pn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Pn(this,"findLast",n,e,ft,arguments)},findLastIndex(n,e){return Pn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Pn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Pc(this,"includes",n)},indexOf(...n){return Pc(this,"indexOf",n)},join(n){return bi(this).join(n)},lastIndexOf(...n){return Pc(this,"lastIndexOf",n)},map(n,e){return Pn(this,"map",n,e,void 0,arguments)},pop(){return Ns(this,"pop")},push(...n){return Ns(this,"push",n)},reduce(n,...e){return Ld(this,"reduce",n,e)},reduceRight(n,...e){return Ld(this,"reduceRight",n,e)},shift(){return Ns(this,"shift")},some(n,e){return Pn(this,"some",n,e,void 0,arguments)},splice(...n){return Ns(this,"splice",n)},toReversed(){return bi(this).toReversed()},toSorted(n){return bi(this).toSorted(n)},toSpliced(...n){return bi(this).toSpliced(...n)},unshift(...n){return Ns(this,"unshift",n)},values(){return Cc(this,"values",ft)}};function Cc(n,e,t){const r=Ru(n),i=r[e]();return r!==n&&!Kt(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=t(s.value)),s}),i}const dT=Array.prototype;function Pn(n,e,t,r,i,s){const o=Ru(n),a=o!==n&&!Kt(n),c=o[e];if(c!==dT[e]){const d=c.apply(n,s);return a?ft(d):d}let l=t;o!==n&&(a?l=function(d,m){return t.call(this,ft(d),m,n)}:t.length>2&&(l=function(d,m){return t.call(this,d,m,n)}));const h=c.call(o,l,r);return a&&i?i(h):h}function Ld(n,e,t,r){const i=Ru(n);let s=t;return i!==n&&(Kt(n)?t.length>3&&(s=function(o,a,c){return t.call(this,o,a,c,n)}):s=function(o,a,c){return t.call(this,o,ft(a),c,n)}),i[e](s,...r)}function Pc(n,e,t){const r=Ie(n);bt(r,"iterate",fo);const i=r[e](...t);return(i===-1||i===!1)&&Ah(t[0])?(t[0]=Ie(t[0]),r[e](...t)):i}function Ns(n,e,t=[]){Ln(),_h();const r=Ie(n)[e].apply(n,t);return Eh(),Un(),r}const pT=mh("__proto__,__v_isRef,__isVue"),oy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Mr));function mT(n){Mr(n)||(n=String(n));const e=Ie(this);return bt(e,"has",n),e.hasOwnProperty(n)}class ay{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?ST:hy:s?ly:cy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!i){let c;if(o&&(c=fT[t]))return c;if(t==="hasOwnProperty")return mT}const a=Reflect.get(e,t,It(e)?e:r);if((Mr(t)?oy.has(t):pT(t))||(i||bt(e,"get",t),s))return a;if(It(a)){const c=o&&vh(t)?a:a.value;return i&&je(c)?dl(c):c}return je(a)?i?dl(a):Ih(a):a}}class uy extends ay{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const c=Tr(s);if(!Kt(r)&&!Tr(r)&&(s=Ie(s),r=Ie(r)),!le(e)&&It(s)&&!It(r))return c||(s.value=r),!0}const o=le(e)&&vh(t)?Number(t)<e.length:Se(e,t),a=Reflect.set(e,t,r,It(e)?e:i);return e===Ie(i)&&(o?fr(r,s)&&On(e,"set",t,r):On(e,"add",t,r)),a}deleteProperty(e,t){const r=Se(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&On(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Mr(t)||!oy.has(t))&&bt(e,"has",t),r}ownKeys(e){return bt(e,"iterate",le(e)?"length":Zr),Reflect.ownKeys(e)}}class gT extends ay{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const yT=new uy,vT=new gT,_T=new uy(!0),fl=n=>n,ca=n=>Reflect.getPrototypeOf(n);function ET(n,e,t){return function(...r){const i=this.__v_raw,s=Ie(i),o=Mi(s),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=i[n](...r),h=t?fl:e?Ba:ft;return!e&&bt(s,"iterate",c?hl:Zr),{next(){const{value:d,done:m}=l.next();return m?{value:d,done:m}:{value:a?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function la(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function bT(n,e){const t={get(i){const s=this.__v_raw,o=Ie(s),a=Ie(i);n||(fr(i,a)&&bt(o,"get",i),bt(o,"get",a));const{has:c}=ca(o),l=e?fl:n?Ba:ft;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&bt(Ie(i),"iterate",Zr),i.size},has(i){const s=this.__v_raw,o=Ie(s),a=Ie(i);return n||(fr(i,a)&&bt(o,"has",i),bt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=Ie(a),l=e?fl:n?Ba:ft;return!n&&bt(c,"iterate",Zr),a.forEach((h,d)=>i.call(s,l(h),l(d),o))}};return St(t,n?{add:la("add"),set:la("set"),delete:la("delete"),clear:la("clear")}:{add(i){!e&&!Kt(i)&&!Tr(i)&&(i=Ie(i));const s=Ie(this);return ca(s).has.call(s,i)||(s.add(i),On(s,"add",i,i)),this},set(i,s){!e&&!Kt(s)&&!Tr(s)&&(s=Ie(s));const o=Ie(this),{has:a,get:c}=ca(o);let l=a.call(o,i);l||(i=Ie(i),l=a.call(o,i));const h=c.call(o,i);return o.set(i,s),l?fr(s,h)&&On(o,"set",i,s):On(o,"add",i,s),this},delete(i){const s=Ie(this),{has:o,get:a}=ca(s);let c=o.call(s,i);c||(i=Ie(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&On(s,"delete",i,void 0),l},clear(){const i=Ie(this),s=i.size!==0,o=i.clear();return s&&On(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ET(i,n,e)}),t}function wh(n,e){const t=bT(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Se(t,i)&&i in r?t:r,i,s)}const TT={get:wh(!1,!1)},wT={get:wh(!1,!0)},IT={get:wh(!0,!1)},cy=new WeakMap,ly=new WeakMap,hy=new WeakMap,ST=new WeakMap;function AT(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RT(n){return n.__v_skip||!Object.isExtensible(n)?0:AT(Zb(n))}function Ih(n){return Tr(n)?n:Sh(n,!1,yT,TT,cy)}function CT(n){return Sh(n,!1,_T,wT,ly)}function dl(n){return Sh(n,!0,vT,IT,hy)}function Sh(n,e,t,r,i){if(!je(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=RT(n);if(s===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,s===2?r:t);return i.set(n,a),a}function Fi(n){return Tr(n)?Fi(n.__v_raw):!!(n&&n.__v_isReactive)}function Tr(n){return!!(n&&n.__v_isReadonly)}function Kt(n){return!!(n&&n.__v_isShallow)}function Ah(n){return n?!!n.__v_raw:!1}function Ie(n){const e=n&&n.__v_raw;return e?Ie(e):n}function PT(n){return!Se(n,"__v_skip")&&Object.isExtensible(n)&&Gg(n,"__v_skip",!0),n}const ft=n=>je(n)?Ih(n):n,Ba=n=>je(n)?dl(n):n;function It(n){return n?n.__v_isRef===!0:!1}function Dt(n){return DT(n,!1)}function DT(n,e){return It(n)?n:new OT(n,e)}class OT{constructor(e,t){this.dep=new Th,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ie(e),this._value=t?e:ft(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Kt(e)||Tr(e);e=r?e:Ie(e),fr(e,t)&&(this._rawValue=e,this._value=r?e:ft(e),this.dep.trigger())}}function pl(n){return It(n)?n.value:n}const kT={get:(n,e,t)=>e==="__v_raw"?n:pl(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return It(i)&&!It(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function fy(n){return Fi(n)?n:new Proxy(n,kT)}class VT{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Th(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ho-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return ey(this,!0),!0}get value(){const e=this.dep.track();return ry(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function NT(n,e,t=!1){let r,i;return de(n)?r=n:(r=n.get,i=n.set),new VT(r,i,t)}const ha={},$a=new WeakMap;let Qr;function xT(n,e=!1,t=Qr){if(t){let r=$a.get(t);r||$a.set(t,r=[]),r.push(n)}}function MT(n,e,t=Oe){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=t,l=x=>i?x:Kt(x)||i===!1||i===0?kn(x,1):kn(x);let h,d,m,g,E=!1,I=!1;if(It(n)?(d=()=>n.value,E=Kt(n)):Fi(n)?(d=()=>l(n),E=!0):le(n)?(I=!0,E=n.some(x=>Fi(x)||Kt(x)),d=()=>n.map(x=>{if(It(x))return x.value;if(Fi(x))return l(x);if(de(x))return c?c(x,2):x()})):de(n)?e?d=c?()=>c(n,2):n:d=()=>{if(m){Ln();try{m()}finally{Un()}}const x=Qr;Qr=h;try{return c?c(n,3,[g]):n(g)}finally{Qr=x}}:d=fn,e&&i){const x=d,L=i===!0?1/0:i;d=()=>kn(x(),L)}const R=cT(),w=()=>{h.stop(),R&&R.active&&yh(R.effects,h)};if(s&&e){const x=e;e=(...L)=>{x(...L),w()}}let k=I?new Array(n.length).fill(ha):ha;const O=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(e){const L=h.run();if(i||E||(I?L.some((Q,S)=>fr(Q,k[S])):fr(L,k))){m&&m();const Q=Qr;Qr=h;try{const S=[L,k===ha?void 0:I&&k[0]===ha?[]:k,g];k=L,c?c(e,3,S):e(...S)}finally{Qr=Q}}}else h.run()};return a&&a(O),h=new Xg(d),h.scheduler=o?()=>o(O,!1):O,g=x=>xT(x,!1,h),m=h.onStop=()=>{const x=$a.get(h);if(x){if(c)c(x,4);else for(const L of x)L();$a.delete(h)}},e?r?O(!0):k=h.run():o?o(O.bind(null,!0),!0):h.run(),w.pause=h.pause.bind(h),w.resume=h.resume.bind(h),w.stop=w,w}function kn(n,e=1/0,t){if(e<=0||!je(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,It(n))kn(n.value,e,t);else if(le(n))for(let r=0;r<n.length;r++)kn(n[r],e,t);else if($g(n)||Mi(n))n.forEach(r=>{kn(r,e,t)});else if(Wg(n)){for(const r in n)kn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&kn(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Oo(n,e,t,r){try{return r?n(...r):n()}catch(i){Cu(i,e,t)}}function bn(n,e,t,r){if(de(n)){const i=Oo(n,e,t,r);return i&&zg(i)&&i.catch(s=>{Cu(s,e,t)}),i}if(le(n)){const i=[];for(let s=0;s<n.length;s++)i.push(bn(n[s],e,t,r));return i}}function Cu(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Oe;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](n,c,l)===!1)return}a=a.parent}if(s){Ln(),Oo(s,null,10,[n,c,l]),Un();return}}FT(n,t,i,r,o)}function FT(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Pt=[];let cn=-1;const Li=[];let nr=null,Ti=0;const dy=Promise.resolve();let za=null;function LT(n){const e=za||dy;return n?e.then(this?n.bind(this):n):e}function UT(n){let e=cn+1,t=Pt.length;for(;e<t;){const r=e+t>>>1,i=Pt[r],s=po(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function Rh(n){if(!(n.flags&1)){const e=po(n),t=Pt[Pt.length-1];!t||!(n.flags&2)&&e>=po(t)?Pt.push(n):Pt.splice(UT(e),0,n),n.flags|=1,py()}}function py(){za||(za=dy.then(gy))}function jT(n){le(n)?Li.push(...n):nr&&n.id===-1?nr.splice(Ti+1,0,n):n.flags&1||(Li.push(n),n.flags|=1),py()}function Ud(n,e,t=cn+1){for(;t<Pt.length;t++){const r=Pt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Pt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function my(n){if(Li.length){const e=[...new Set(Li)].sort((t,r)=>po(t)-po(r));if(Li.length=0,nr){nr.push(...e);return}for(nr=e,Ti=0;Ti<nr.length;Ti++){const t=nr[Ti];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}nr=null,Ti=0}}const po=n=>n.id==null?n.flags&2?-1:1/0:n.id;function gy(n){try{for(cn=0;cn<Pt.length;cn++){const e=Pt[cn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Oo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;cn<Pt.length;cn++){const e=Pt[cn];e&&(e.flags&=-2)}cn=-1,Pt.length=0,my(),za=null,(Pt.length||Li.length)&&gy()}}let Gt=null,yy=null;function Qa(n){const e=Gt;return Gt=n,yy=n&&n.type.__scopeId||null,e}function qT(n,e=Gt,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&Ga(-1);const s=Qa(e);let o;try{o=n(...i)}finally{Qa(s),r._d&&Ga(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jd(n,e){if(Gt===null)return n;const t=Nu(Gt),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,c=Oe]=e[i];s&&(de(s)&&(s={mounted:s,updated:s}),s.deep&&kn(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function $r(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(Ln(),bn(c,t,8,[n.el,a,n,e]),Un())}}const BT=Symbol("_vte"),$T=n=>n.__isTeleport,zT=Symbol("_leaveCb");function Ch(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ch(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Pu(n,e){return de(n)?St({name:n.name},e,{setup:n}):n}function vy(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Wa=new WeakMap;function Js(n,e,t,r,i=!1){if(le(n)){n.forEach((E,I)=>Js(E,e&&(le(e)?e[I]:e),t,r,i));return}if(Ys(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Js(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Nu(r.component):r.el,o=i?null:s,{i:a,r:c}=n,l=e&&e.r,h=a.refs===Oe?a.refs={}:a.refs,d=a.setupState,m=Ie(d),g=d===Oe?Bg:E=>Se(m,E);if(l!=null&&l!==c){if(qd(e),tt(l))h[l]=null,g(l)&&(d[l]=null);else if(It(l)){l.value=null;const E=e;E.k&&(h[E.k]=null)}}if(de(c))Oo(c,a,12,[o,h]);else{const E=tt(c),I=It(c);if(E||I){const R=()=>{if(n.f){const w=E?g(c)?d[c]:h[c]:c.value;if(i)le(w)&&yh(w,s);else if(le(w))w.includes(s)||w.push(s);else if(E)h[c]=[s],g(c)&&(d[c]=h[c]);else{const k=[s];c.value=k,n.k&&(h[n.k]=k)}}else E?(h[c]=o,g(c)&&(d[c]=o)):I&&(c.value=o,n.k&&(h[n.k]=o))};if(o){const w=()=>{R(),Wa.delete(n)};w.id=-1,Wa.set(n,w),Ft(w,t)}else qd(n),R()}}}function qd(n){const e=Wa.get(n);e&&(e.flags|=8,Wa.delete(n))}Su().requestIdleCallback;Su().cancelIdleCallback;const Ys=n=>!!n.type.__asyncLoader,_y=n=>n.type.__isKeepAlive;function QT(n,e){Ey(n,"a",e)}function WT(n,e){Ey(n,"da",e)}function Ey(n,e,t=Ot){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Du(e,r,t),t){let i=t.parent;for(;i&&i.parent;)_y(i.parent.vnode)&&HT(r,e,t,i),i=i.parent}}function HT(n,e,t,r){const i=Du(e,n,r,!0);Ou(()=>{yh(r[e],i)},t)}function Du(n,e,t=Ot,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{Ln();const a=ko(t),c=bn(e,t,n,o);return a(),Un(),c});return r?i.unshift(s):i.push(s),s}}const Hn=n=>(e,t=Ot)=>{(!go||n==="sp")&&Du(n,(...r)=>e(...r),t)},GT=Hn("bm"),Ph=Hn("m"),KT=Hn("bu"),JT=Hn("u"),YT=Hn("bum"),Ou=Hn("um"),XT=Hn("sp"),ZT=Hn("rtg"),ew=Hn("rtc");function tw(n,e=Ot){Du("ec",n,e)}const nw=Symbol.for("v-ndc");function by(n,e,t,r){let i;const s=t,o=le(n);if(o||tt(n)){const a=o&&Fi(n);let c=!1,l=!1;a&&(c=!Kt(n),l=Tr(n),n=Ru(n)),i=new Array(n.length);for(let h=0,d=n.length;h<d;h++)i[h]=e(c?l?Ba(ft(n[h])):ft(n[h]):n[h],h,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s)}else if(je(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>e(a,c,void 0,s));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];i[c]=e(n[h],h,c,s)}}else i=[];return i}const ml=n=>n?By(n)?Nu(n):ml(n.parent):null,Xs=St(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>ml(n.parent),$root:n=>ml(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>wy(n),$forceUpdate:n=>n.f||(n.f=()=>{Rh(n.update)}),$nextTick:n=>n.n||(n.n=LT.bind(n.proxy)),$watch:n=>ww.bind(n)}),Dc=(n,e)=>n!==Oe&&!n.__isScriptSetup&&Se(n,e),rw={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Dc(r,e))return o[e]=1,r[e];if(i!==Oe&&Se(i,e))return o[e]=2,i[e];if((l=n.propsOptions[0])&&Se(l,e))return o[e]=3,s[e];if(t!==Oe&&Se(t,e))return o[e]=4,t[e];gl&&(o[e]=0)}}const h=Xs[e];let d,m;if(h)return e==="$attrs"&&bt(n.attrs,"get",""),h(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Oe&&Se(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,Se(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Dc(i,e)?(i[e]=t,!0):r!==Oe&&Se(r,e)?(r[e]=t,!0):Se(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s,type:o}},a){let c,l;return!!(t[a]||n!==Oe&&a[0]!=="$"&&Se(n,a)||Dc(e,a)||(c=s[0])&&Se(c,a)||Se(r,a)||Se(Xs,a)||Se(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Se(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Bd(n){return le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let gl=!0;function iw(n){const e=wy(n),t=n.proxy,r=n.ctx;gl=!1,e.beforeCreate&&$d(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:d,mounted:m,beforeUpdate:g,updated:E,activated:I,deactivated:R,beforeDestroy:w,beforeUnmount:k,destroyed:O,unmounted:x,render:L,renderTracked:Q,renderTriggered:S,errorCaptured:_,serverPrefetch:v,expose:b,inheritAttrs:C,components:D,directives:T,filters:ke}=e;if(l&&sw(l,r,null),o)for(const Te in o){const ve=o[Te];de(ve)&&(r[Te]=ve.bind(t))}if(i){const Te=i.call(t,t);je(Te)&&(n.data=Ih(Te))}if(gl=!0,s)for(const Te in s){const ve=s[Te],qe=de(ve)?ve.bind(t,t):de(ve.get)?ve.get.bind(t,t):fn,Sn=!de(ve)&&de(ve.set)?ve.set.bind(t):fn,Bt=Lt({get:qe,set:Sn});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:Ve=>Bt.value=Ve})}if(a)for(const Te in a)Ty(a[Te],r,t,Te);if(c){const Te=de(c)?c.call(t):c;Reflect.ownKeys(Te).forEach(ve=>{Sy(ve,Te[ve])})}h&&$d(h,n,"c");function Je(Te,ve){le(ve)?ve.forEach(qe=>Te(qe.bind(t))):ve&&Te(ve.bind(t))}if(Je(GT,d),Je(Ph,m),Je(KT,g),Je(JT,E),Je(QT,I),Je(WT,R),Je(tw,_),Je(ew,Q),Je(ZT,S),Je(YT,k),Je(Ou,x),Je(XT,v),le(b))if(b.length){const Te=n.exposed||(n.exposed={});b.forEach(ve=>{Object.defineProperty(Te,ve,{get:()=>t[ve],set:qe=>t[ve]=qe,enumerable:!0})})}else n.exposed||(n.exposed={});L&&n.render===fn&&(n.render=L),C!=null&&(n.inheritAttrs=C),D&&(n.components=D),T&&(n.directives=T),v&&vy(n)}function sw(n,e,t=fn){le(n)&&(n=yl(n));for(const r in n){const i=n[r];let s;je(i)?"default"in i?s=Ta(i.from||r,i.default,!0):s=Ta(i.from||r):s=Ta(i),It(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function $d(n,e,t){bn(le(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Ty(n,e,t,r){let i=r.includes(".")?Fy(t,r):()=>t[r];if(tt(n)){const s=e[n];de(s)&&wa(i,s)}else if(de(n))wa(i,n.bind(t));else if(je(n))if(le(n))n.forEach(s=>Ty(s,e,t,r));else{const s=de(n.handler)?n.handler.bind(t):e[n.handler];de(s)&&wa(i,s,n)}}function wy(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!t&&!r?c=e:(c={},i.length&&i.forEach(l=>Ha(c,l,o,!0)),Ha(c,e,o)),je(e)&&s.set(e,c),c}function Ha(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Ha(n,s,t,!0),i&&i.forEach(o=>Ha(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=ow[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const ow={data:zd,props:Qd,emits:Qd,methods:js,computed:js,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:js,directives:js,watch:uw,provide:zd,inject:aw};function zd(n,e){return e?n?function(){return St(de(n)?n.call(this,this):n,de(e)?e.call(this,this):e)}:e:n}function aw(n,e){return js(yl(n),yl(e))}function yl(n){if(le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ct(n,e){return n?[...new Set([].concat(n,e))]:e}function js(n,e){return n?St(Object.create(null),n,e):e}function Qd(n,e){return n?le(n)&&le(e)?[...new Set([...n,...e])]:St(Object.create(null),Bd(n),Bd(e??{})):e}function uw(n,e){if(!n)return e;if(!e)return n;const t=St(Object.create(null),n);for(const r in e)t[r]=Ct(n[r],e[r]);return t}function Iy(){return{app:null,config:{isNativeTag:Bg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cw=0;function lw(n,e){return function(r,i=null){de(r)||(r=St({},r)),i!=null&&!je(i)&&(i=null);const s=Iy(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:cw++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Ww,get config(){return s.config},set config(h){},use(h,...d){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(l,...d)):de(h)&&(o.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,m){if(!c){const g=l._ceVNode||xt(r,i);return g.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),n(g,h,m),c=!0,l._container=h,h.__vue_app__=l,Nu(g.component)}},onUnmount(h){a.push(h)},unmount(){c&&(bn(a,l._instance,16),n(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l},runWithContext(h){const d=Ui;Ui=l;try{return h()}finally{Ui=d}}};return l}}let Ui=null;function Sy(n,e){if(Ot){let t=Ot.provides;const r=Ot.parent&&Ot.parent.provides;r===t&&(t=Ot.provides=Object.create(r)),t[n]=e}}function Ta(n,e,t=!1){const r=Uw();if(r||Ui){let i=Ui?Ui._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&de(e)?e.call(r&&r.proxy):e}}const Ay={},Ry=()=>Object.create(Ay),Cy=n=>Object.getPrototypeOf(n)===Ay;function hw(n,e,t,r=!1){const i={},s=Ry();n.propsDefaults=Object.create(null),Py(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:CT(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function fw(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ie(i),[c]=n.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(ku(n.emitsOptions,m))continue;const g=e[m];if(c)if(Se(s,m))g!==s[m]&&(s[m]=g,l=!0);else{const E=br(m);i[E]=vl(c,a,E,g,n,!1)}else g!==s[m]&&(s[m]=g,l=!0)}}}else{Py(n,e,i,s)&&(l=!0);let h;for(const d in a)(!e||!Se(e,d)&&((h=ui(d))===d||!Se(e,h)))&&(c?t&&(t[d]!==void 0||t[h]!==void 0)&&(i[d]=vl(c,a,d,void 0,n,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Se(e,d))&&(delete s[d],l=!0)}l&&On(n.attrs,"set","")}function Py(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(Hs(c))continue;const l=e[c];let h;i&&Se(i,h=br(c))?!s||!s.includes(h)?t[h]=l:(a||(a={}))[h]=l:ku(n.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=Ie(t),l=a||Oe;for(let h=0;h<s.length;h++){const d=s[h];t[d]=vl(i,c,d,l[d],n,!Se(l,d))}}return o}function vl(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=Se(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=i;if(t in l)r=l[t];else{const h=ko(i);r=l[t]=c.call(null,e),h()}}else r=c;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===ui(t))&&(r=!0))}return r}const dw=new WeakMap;function Dy(n,e,t=!1){const r=t?dw:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let c=!1;if(!de(n)){const h=d=>{c=!0;const[m,g]=Dy(d,e,!0);St(o,m),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!c)return je(n)&&r.set(n,xi),xi;if(le(s))for(let h=0;h<s.length;h++){const d=br(s[h]);Wd(d)&&(o[d]=Oe)}else if(s)for(const h in s){const d=br(h);if(Wd(d)){const m=s[h],g=o[d]=le(m)||de(m)?{type:m}:St({},m),E=g.type;let I=!1,R=!0;if(le(E))for(let w=0;w<E.length;++w){const k=E[w],O=de(k)&&k.name;if(O==="Boolean"){I=!0;break}else O==="String"&&(R=!1)}else I=de(E)&&E.name==="Boolean";g[0]=I,g[1]=R,(I||Se(g,"default"))&&a.push(d)}}const l=[o,a];return je(n)&&r.set(n,l),l}function Wd(n){return n[0]!=="$"&&!Hs(n)}const Dh=n=>n==="_"||n==="_ctx"||n==="$stable",Oh=n=>le(n)?n.map(hn):[hn(n)],pw=(n,e,t)=>{if(e._n)return e;const r=qT((...i)=>Oh(e(...i)),t);return r._c=!1,r},Oy=(n,e,t)=>{const r=n._ctx;for(const i in n){if(Dh(i))continue;const s=n[i];if(de(s))e[i]=pw(i,s,r);else if(s!=null){const o=Oh(s);e[i]=()=>o}}},ky=(n,e)=>{const t=Oh(e);n.slots.default=()=>t},Vy=(n,e,t)=>{for(const r in e)(t||!Dh(r))&&(n[r]=e[r])},mw=(n,e,t)=>{const r=n.slots=Ry();if(n.vnode.shapeFlag&32){const i=e._;i?(Vy(r,e,t),t&&Gg(r,"_",i,!0)):Oy(e,r)}else e&&ky(n,e)},gw=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=Oe;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:Vy(i,e,t):(s=!e.$stable,Oy(e,i)),o=e}else e&&(ky(n,e),o={default:1});if(s)for(const a in i)!Dh(a)&&o[a]==null&&delete i[a]},Ft=Ow;function yw(n){return vw(n)}function vw(n,e){const t=Su();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:d,nextSibling:m,setScopeId:g=fn,insertStaticContent:E}=n,I=(A,P,F,$=null,q=null,B=null,K=void 0,H=null,W=!!P.dynamicChildren)=>{if(A===P)return;A&&!xs(A,P)&&($=An(A),Ve(A,q,B,!0),A=null),P.patchFlag===-2&&(W=!1,P.dynamicChildren=null);const{type:z,ref:re,shapeFlag:J}=P;switch(z){case Vu:R(A,P,F,$);break;case wr:w(A,P,F,$);break;case kc:A==null&&k(P,F,$,K);break;case Qt:D(A,P,F,$,q,B,K,H,W);break;default:J&1?L(A,P,F,$,q,B,K,H,W):J&6?T(A,P,F,$,q,B,K,H,W):(J&64||J&128)&&z.process(A,P,F,$,q,B,K,H,W,on)}re!=null&&q?Js(re,A&&A.ref,B,P||A,!P):re==null&&A&&A.ref!=null&&Js(A.ref,null,B,A,!0)},R=(A,P,F,$)=>{if(A==null)r(P.el=a(P.children),F,$);else{const q=P.el=A.el;P.children!==A.children&&l(q,P.children)}},w=(A,P,F,$)=>{A==null?r(P.el=c(P.children||""),F,$):P.el=A.el},k=(A,P,F,$)=>{[A.el,A.anchor]=E(A.children,P,F,$,A.el,A.anchor)},O=({el:A,anchor:P},F,$)=>{let q;for(;A&&A!==P;)q=m(A),r(A,F,$),A=q;r(P,F,$)},x=({el:A,anchor:P})=>{let F;for(;A&&A!==P;)F=m(A),i(A),A=F;i(P)},L=(A,P,F,$,q,B,K,H,W)=>{P.type==="svg"?K="svg":P.type==="math"&&(K="mathml"),A==null?Q(P,F,$,q,B,K,H,W):v(A,P,q,B,K,H,W)},Q=(A,P,F,$,q,B,K,H)=>{let W,z;const{props:re,shapeFlag:J,transition:te,dirs:oe}=A;if(W=A.el=o(A.type,B,re&&re.is,re),J&8?h(W,A.children):J&16&&_(A.children,W,null,$,q,Oc(A,B),K,H),oe&&$r(A,null,$,"created"),S(W,A,A.scopeId,K,$),re){for(const fe in re)fe!=="value"&&!Hs(fe)&&s(W,fe,null,re[fe],B,$);"value"in re&&s(W,"value",null,re.value,B),(z=re.onVnodeBeforeMount)&&an(z,$,A)}oe&&$r(A,null,$,"beforeMount");const ie=_w(q,te);ie&&te.beforeEnter(W),r(W,P,F),((z=re&&re.onVnodeMounted)||ie||oe)&&Ft(()=>{z&&an(z,$,A),ie&&te.enter(W),oe&&$r(A,null,$,"mounted")},q)},S=(A,P,F,$,q)=>{if(F&&g(A,F),$)for(let B=0;B<$.length;B++)g(A,$[B]);if(q){let B=q.subTree;if(P===B||Uy(B.type)&&(B.ssContent===P||B.ssFallback===P)){const K=q.vnode;S(A,K,K.scopeId,K.slotScopeIds,q.parent)}}},_=(A,P,F,$,q,B,K,H,W=0)=>{for(let z=W;z<A.length;z++){const re=A[z]=H?rr(A[z]):hn(A[z]);I(null,re,P,F,$,q,B,K,H)}},v=(A,P,F,$,q,B,K)=>{const H=P.el=A.el;let{patchFlag:W,dynamicChildren:z,dirs:re}=P;W|=A.patchFlag&16;const J=A.props||Oe,te=P.props||Oe;let oe;if(F&&zr(F,!1),(oe=te.onVnodeBeforeUpdate)&&an(oe,F,P,A),re&&$r(P,A,F,"beforeUpdate"),F&&zr(F,!0),(J.innerHTML&&te.innerHTML==null||J.textContent&&te.textContent==null)&&h(H,""),z?b(A.dynamicChildren,z,H,F,$,Oc(P,q),B):K||ve(A,P,H,null,F,$,Oc(P,q),B,!1),W>0){if(W&16)C(H,J,te,F,q);else if(W&2&&J.class!==te.class&&s(H,"class",null,te.class,q),W&4&&s(H,"style",J.style,te.style,q),W&8){const ie=P.dynamicProps;for(let fe=0;fe<ie.length;fe++){const _e=ie[fe],ot=J[_e],at=te[_e];(at!==ot||_e==="value")&&s(H,_e,ot,at,q,F)}}W&1&&A.children!==P.children&&h(H,P.children)}else!K&&z==null&&C(H,J,te,F,q);((oe=te.onVnodeUpdated)||re)&&Ft(()=>{oe&&an(oe,F,P,A),re&&$r(P,A,F,"updated")},$)},b=(A,P,F,$,q,B,K)=>{for(let H=0;H<P.length;H++){const W=A[H],z=P[H],re=W.el&&(W.type===Qt||!xs(W,z)||W.shapeFlag&198)?d(W.el):F;I(W,z,re,null,$,q,B,K,!0)}},C=(A,P,F,$,q)=>{if(P!==F){if(P!==Oe)for(const B in P)!Hs(B)&&!(B in F)&&s(A,B,P[B],null,q,$);for(const B in F){if(Hs(B))continue;const K=F[B],H=P[B];K!==H&&B!=="value"&&s(A,B,H,K,q,$)}"value"in F&&s(A,"value",P.value,F.value,q)}},D=(A,P,F,$,q,B,K,H,W)=>{const z=P.el=A?A.el:a(""),re=P.anchor=A?A.anchor:a("");let{patchFlag:J,dynamicChildren:te,slotScopeIds:oe}=P;oe&&(H=H?H.concat(oe):oe),A==null?(r(z,F,$),r(re,F,$),_(P.children||[],F,re,q,B,K,H,W)):J>0&&J&64&&te&&A.dynamicChildren?(b(A.dynamicChildren,te,F,q,B,K,H),(P.key!=null||q&&P===q.subTree)&&Ny(A,P,!0)):ve(A,P,F,re,q,B,K,H,W)},T=(A,P,F,$,q,B,K,H,W)=>{P.slotScopeIds=H,A==null?P.shapeFlag&512?q.ctx.activate(P,F,$,K,W):ke(P,F,$,q,B,K,W):qt(A,P,W)},ke=(A,P,F,$,q,B,K)=>{const H=A.component=Lw(A,$,q);if(_y(A)&&(H.ctx.renderer=on),jw(H,!1,K),H.asyncDep){if(q&&q.registerDep(H,Je,K),!A.el){const W=H.subTree=xt(wr);w(null,W,P,F),A.placeholder=W.el}}else Je(H,A,P,F,q,B,K)},qt=(A,P,F)=>{const $=P.component=A.component;if(Pw(A,P,F))if($.asyncDep&&!$.asyncResolved){Te($,P,F);return}else $.next=P,$.update();else P.el=A.el,$.vnode=P},Je=(A,P,F,$,q,B,K)=>{const H=()=>{if(A.isMounted){let{next:J,bu:te,u:oe,parent:ie,vnode:fe}=A;{const gt=xy(A);if(gt){J&&(J.el=fe.el,Te(A,J,K)),gt.asyncDep.then(()=>{A.isUnmounted||H()});return}}let _e=J,ot;zr(A,!1),J?(J.el=fe.el,Te(A,J,K)):J=fe,te&&ba(te),(ot=J.props&&J.props.onVnodeBeforeUpdate)&&an(ot,ie,J,fe),zr(A,!0);const at=Gd(A),$t=A.subTree;A.subTree=at,I($t,at,d($t.el),An($t),A,q,B),J.el=at.el,_e===null&&Dw(A,at.el),oe&&Ft(oe,q),(ot=J.props&&J.props.onVnodeUpdated)&&Ft(()=>an(ot,ie,J,fe),q)}else{let J;const{el:te,props:oe}=P,{bm:ie,m:fe,parent:_e,root:ot,type:at}=A,$t=Ys(P);zr(A,!1),ie&&ba(ie),!$t&&(J=oe&&oe.onVnodeBeforeMount)&&an(J,_e,P),zr(A,!0);{ot.ce&&ot.ce._def.shadowRoot!==!1&&ot.ce._injectChildStyle(at);const gt=A.subTree=Gd(A);I(null,gt,F,$,A,q,B),P.el=gt.el}if(fe&&Ft(fe,q),!$t&&(J=oe&&oe.onVnodeMounted)){const gt=P;Ft(()=>an(J,_e,gt),q)}(P.shapeFlag&256||_e&&Ys(_e.vnode)&&_e.vnode.shapeFlag&256)&&A.a&&Ft(A.a,q),A.isMounted=!0,P=F=$=null}};A.scope.on();const W=A.effect=new Xg(H);A.scope.off();const z=A.update=W.run.bind(W),re=A.job=W.runIfDirty.bind(W);re.i=A,re.id=A.uid,W.scheduler=()=>Rh(re),zr(A,!0),z()},Te=(A,P,F)=>{P.component=A;const $=A.vnode.props;A.vnode=P,A.next=null,fw(A,P.props,$,F),gw(A,P.children,F),Ln(),Ud(A),Un()},ve=(A,P,F,$,q,B,K,H,W=!1)=>{const z=A&&A.children,re=A?A.shapeFlag:0,J=P.children,{patchFlag:te,shapeFlag:oe}=P;if(te>0){if(te&128){Sn(z,J,F,$,q,B,K,H,W);return}else if(te&256){qe(z,J,F,$,q,B,K,H,W);return}}oe&8?(re&16&&Lr(z,q,B),J!==z&&h(F,J)):re&16?oe&16?Sn(z,J,F,$,q,B,K,H,W):Lr(z,q,B,!0):(re&8&&h(F,""),oe&16&&_(J,F,$,q,B,K,H,W))},qe=(A,P,F,$,q,B,K,H,W)=>{A=A||xi,P=P||xi;const z=A.length,re=P.length,J=Math.min(z,re);let te;for(te=0;te<J;te++){const oe=P[te]=W?rr(P[te]):hn(P[te]);I(A[te],oe,F,null,q,B,K,H,W)}z>re?Lr(A,q,B,!0,!1,J):_(P,F,$,q,B,K,H,W,J)},Sn=(A,P,F,$,q,B,K,H,W)=>{let z=0;const re=P.length;let J=A.length-1,te=re-1;for(;z<=J&&z<=te;){const oe=A[z],ie=P[z]=W?rr(P[z]):hn(P[z]);if(xs(oe,ie))I(oe,ie,F,null,q,B,K,H,W);else break;z++}for(;z<=J&&z<=te;){const oe=A[J],ie=P[te]=W?rr(P[te]):hn(P[te]);if(xs(oe,ie))I(oe,ie,F,null,q,B,K,H,W);else break;J--,te--}if(z>J){if(z<=te){const oe=te+1,ie=oe<re?P[oe].el:$;for(;z<=te;)I(null,P[z]=W?rr(P[z]):hn(P[z]),F,ie,q,B,K,H,W),z++}}else if(z>te)for(;z<=J;)Ve(A[z],q,B,!0),z++;else{const oe=z,ie=z,fe=new Map;for(z=ie;z<=te;z++){const ut=P[z]=W?rr(P[z]):hn(P[z]);ut.key!=null&&fe.set(ut.key,z)}let _e,ot=0;const at=te-ie+1;let $t=!1,gt=0;const Jn=new Array(at);for(z=0;z<at;z++)Jn[z]=0;for(z=oe;z<=J;z++){const ut=A[z];if(ot>=at){Ve(ut,q,B,!0);continue}let zt;if(ut.key!=null)zt=fe.get(ut.key);else for(_e=ie;_e<=te;_e++)if(Jn[_e-ie]===0&&xs(ut,P[_e])){zt=_e;break}zt===void 0?Ve(ut,q,B,!0):(Jn[zt-ie]=z+1,zt>=gt?gt=zt:$t=!0,I(ut,P[zt],F,null,q,B,K,H,W),ot++)}const bs=$t?Ew(Jn):xi;for(_e=bs.length-1,z=at-1;z>=0;z--){const ut=ie+z,zt=P[ut],Ho=P[ut+1],gi=ut+1<re?Ho.el||Ho.placeholder:$;Jn[z]===0?I(null,zt,F,gi,q,B,K,H,W):$t&&(_e<0||z!==bs[_e]?Bt(zt,F,gi,2):_e--)}}},Bt=(A,P,F,$,q=null)=>{const{el:B,type:K,transition:H,children:W,shapeFlag:z}=A;if(z&6){Bt(A.component.subTree,P,F,$);return}if(z&128){A.suspense.move(P,F,$);return}if(z&64){K.move(A,P,F,on);return}if(K===Qt){r(B,P,F);for(let J=0;J<W.length;J++)Bt(W[J],P,F,$);r(A.anchor,P,F);return}if(K===kc){O(A,P,F);return}if($!==2&&z&1&&H)if($===0)H.beforeEnter(B),r(B,P,F),Ft(()=>H.enter(B),q);else{const{leave:J,delayLeave:te,afterLeave:oe}=H,ie=()=>{A.ctx.isUnmounted?i(B):r(B,P,F)},fe=()=>{B._isLeaving&&B[zT](!0),J(B,()=>{ie(),oe&&oe()})};te?te(B,ie,fe):fe()}else r(B,P,F)},Ve=(A,P,F,$=!1,q=!1)=>{const{type:B,props:K,ref:H,children:W,dynamicChildren:z,shapeFlag:re,patchFlag:J,dirs:te,cacheIndex:oe}=A;if(J===-2&&(q=!1),H!=null&&(Ln(),Js(H,null,F,A,!0),Un()),oe!=null&&(P.renderCache[oe]=void 0),re&256){P.ctx.deactivate(A);return}const ie=re&1&&te,fe=!Ys(A);let _e;if(fe&&(_e=K&&K.onVnodeBeforeUnmount)&&an(_e,P,A),re&6)Fr(A.component,F,$);else{if(re&128){A.suspense.unmount(F,$);return}ie&&$r(A,null,P,"beforeUnmount"),re&64?A.type.remove(A,P,F,on,$):z&&!z.hasOnce&&(B!==Qt||J>0&&J&64)?Lr(z,P,F,!1,!0):(B===Qt&&J&384||!q&&re&16)&&Lr(W,P,F),$&&Be(A)}(fe&&(_e=K&&K.onVnodeUnmounted)||ie)&&Ft(()=>{_e&&an(_e,P,A),ie&&$r(A,null,P,"unmounted")},F)},Be=A=>{const{type:P,el:F,anchor:$,transition:q}=A;if(P===Qt){mi(F,$);return}if(P===kc){x(A);return}const B=()=>{i(F),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(A.shapeFlag&1&&q&&!q.persisted){const{leave:K,delayLeave:H}=q,W=()=>K(F,B);H?H(A.el,B,W):W()}else B()},mi=(A,P)=>{let F;for(;A!==P;)F=m(A),i(A),A=F;i(P)},Fr=(A,P,F)=>{const{bum:$,scope:q,job:B,subTree:K,um:H,m:W,a:z}=A;Hd(W),Hd(z),$&&ba($),q.stop(),B&&(B.flags|=8,Ve(K,A,P,F)),H&&Ft(H,P),Ft(()=>{A.isUnmounted=!0},P)},Lr=(A,P,F,$=!1,q=!1,B=0)=>{for(let K=B;K<A.length;K++)Ve(A[K],P,F,$,q)},An=A=>{if(A.shapeFlag&6)return An(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const P=m(A.anchor||A.el),F=P&&P[BT];return F?m(F):P};let _s=!1;const Wo=(A,P,F)=>{A==null?P._vnode&&Ve(P._vnode,null,null,!0):I(P._vnode||null,A,P,null,null,null,F),P._vnode=A,_s||(_s=!0,Ud(),my(),_s=!1)},on={p:I,um:Ve,m:Bt,r:Be,mt:ke,mc:_,pc:ve,pbc:b,n:An,o:n};return{render:Wo,hydrate:void 0,createApp:lw(Wo)}}function Oc({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function zr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function _w(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Ny(n,e,t=!1){const r=n.children,i=e.children;if(le(r)&&le(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=rr(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&Ny(o,a)),a.type===Vu&&a.patchFlag!==-1&&(a.el=o.el),a.type===wr&&!a.el&&(a.el=o.el)}}function Ew(n){const e=n.slice(),t=[0];let r,i,s,o,a;const c=n.length;for(r=0;r<c;r++){const l=n[r];if(l!==0){if(i=t[t.length-1],n[i]<l){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<l?s=a+1:o=a;l<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function xy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xy(e)}function Hd(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const bw=Symbol.for("v-scx"),Tw=()=>Ta(bw);function wa(n,e,t){return My(n,e,t)}function My(n,e,t=Oe){const{immediate:r,deep:i,flush:s,once:o}=t,a=St({},t),c=e&&r||!e&&s!=="post";let l;if(go){if(s==="sync"){const g=Tw();l=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=fn,g.resume=fn,g.pause=fn,g}}const h=Ot;a.call=(g,E,I)=>bn(g,h,E,I);let d=!1;s==="post"?a.scheduler=g=>{Ft(g,h&&h.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(g,E)=>{E?g():Rh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=MT(n,e,a);return go&&(l?l.push(m):c&&m()),m}function ww(n,e,t){const r=this.proxy,i=tt(n)?n.includes(".")?Fy(r,n):()=>r[n]:n.bind(r,r);let s;de(e)?s=e:(s=e.handler,t=e);const o=ko(this),a=My(i,s.bind(r),t);return o(),a}function Fy(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const Iw=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${br(e)}Modifiers`]||n[`${ui(e)}Modifiers`];function Sw(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Oe;let i=t;const s=e.startsWith("update:"),o=s&&Iw(r,e.slice(7));o&&(o.trim&&(i=t.map(h=>tt(h)?h.trim():h)),o.number&&(i=t.map(ul)));let a,c=r[a=Sc(e)]||r[a=Sc(br(e))];!c&&s&&(c=r[a=Sc(ui(e))]),c&&bn(c,n,6,i);const l=r[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,bn(l,n,6,i)}}const Aw=new WeakMap;function Ly(n,e,t=!1){const r=t?Aw:e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!de(n)){const c=l=>{const h=Ly(l,e,!0);h&&(a=!0,St(o,h))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!a?(je(n)&&r.set(n,null),null):(le(s)?s.forEach(c=>o[c]=null):St(o,s),je(n)&&r.set(n,o),o)}function ku(n,e){return!n||!Tu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(n,e[0].toLowerCase()+e.slice(1))||Se(n,ui(e))||Se(n,e))}function Gd(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:h,props:d,data:m,setupState:g,ctx:E,inheritAttrs:I}=n,R=Qa(n);let w,k;try{if(t.shapeFlag&4){const x=i||r,L=x;w=hn(l.call(L,x,h,d,g,m,E)),k=a}else{const x=e;w=hn(x.length>1?x(d,{attrs:a,slots:o,emit:c}):x(d,null)),k=e.props?a:Rw(a)}}catch(x){Zs.length=0,Cu(x,n,1),w=xt(wr)}let O=w;if(k&&I!==!1){const x=Object.keys(k),{shapeFlag:L}=O;x.length&&L&7&&(s&&x.some(gh)&&(k=Cw(k,s)),O=Hi(O,k,!1,!0))}return t.dirs&&(O=Hi(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(t.dirs):t.dirs),t.transition&&Ch(O,t.transition),w=O,Qa(R),w}const Rw=n=>{let e;for(const t in n)(t==="class"||t==="style"||Tu(t))&&((e||(e={}))[t]=n[t]);return e},Cw=(n,e)=>{const t={};for(const r in n)(!gh(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function Pw(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?Kd(r,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!ku(l,m))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Kd(r,o,l):!0:!!o;return!1}function Kd(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ku(t,s))return!0}return!1}function Dw({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Uy=n=>n.__isSuspense;function Ow(n,e){e&&e.pendingBranch?le(n)?e.effects.push(...n):e.effects.push(n):jT(n)}const Qt=Symbol.for("v-fgt"),Vu=Symbol.for("v-txt"),wr=Symbol.for("v-cmt"),kc=Symbol.for("v-stc"),Zs=[];let Ut=null;function Pe(n=!1){Zs.push(Ut=n?null:[])}function kw(){Zs.pop(),Ut=Zs[Zs.length-1]||null}let mo=1;function Ga(n,e=!1){mo+=n,n<0&&Ut&&e&&(Ut.hasOnce=!0)}function jy(n){return n.dynamicChildren=mo>0?Ut||xi:null,kw(),mo>0&&Ut&&Ut.push(n),n}function $e(n,e,t,r,i,s){return jy(ae(n,e,t,r,i,s,!0))}function Ka(n,e,t,r,i){return jy(xt(n,e,t,r,i,!0))}function Ja(n){return n?n.__v_isVNode===!0:!1}function xs(n,e){return n.type===e.type&&n.key===e.key}const qy=({key:n})=>n??null,Ia=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?tt(n)||It(n)||de(n)?{i:Gt,r:n,k:e,f:!!t}:n:null);function ae(n,e=null,t=null,r=0,i=null,s=n===Qt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&qy(e),ref:e&&Ia(e),scopeId:yy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Gt};return a?(kh(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=tt(t)?8:16),mo>0&&!o&&Ut&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Ut.push(c),c}const xt=Vw;function Vw(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===nw)&&(n=wr),Ja(n)){const a=Hi(n,e,!0);return t&&kh(a,t),mo>0&&!s&&Ut&&(a.shapeFlag&6?Ut[Ut.indexOf(n)]=a:Ut.push(a)),a.patchFlag=-2,a}if(zw(n)&&(n=n.__vccOpts),e){e=Nw(e);let{class:a,style:c}=e;a&&!tt(a)&&(e.class=Au(a)),je(c)&&(Ah(c)&&!le(c)&&(c=St({},c)),e.style=Do(c))}const o=tt(n)?1:Uy(n)?128:$T(n)?64:je(n)?4:de(n)?2:0;return ae(n,e,t,r,i,o,s,!0)}function Nw(n){return n?Ah(n)||Cy(n)?St({},n):n:null}function Hi(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=n,l=e?xw(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&qy(l),ref:e&&e.ref?t&&s?le(s)?s.concat(Ia(e)):[s,Ia(e)]:Ia(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Qt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Hi(n.ssContent),ssFallback:n.ssFallback&&Hi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&Ch(h,c.clone(h)),h}function Vn(n=" ",e=0){return xt(Vu,null,n,e)}function un(n="",e=!1){return e?(Pe(),Ka(wr,null,n)):xt(wr,null,n)}function hn(n){return n==null||typeof n=="boolean"?xt(wr):le(n)?xt(Qt,null,n.slice()):Ja(n)?rr(n):xt(Vu,null,String(n))}function rr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Hi(n)}function kh(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(le(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),kh(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Cy(e)?e._ctx=Gt:i===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:Gt},t=32):(e=String(e),r&64?(t=16,e=[Vn(e)]):t=8);n.children=e,n.shapeFlag|=t}function xw(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Au([e.class,r.class]));else if(i==="style")e.style=Do([e.style,r.style]);else if(Tu(i)){const s=e[i],o=r[i];o&&s!==o&&!(le(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function an(n,e,t,r=null){bn(n,e,7,[t,r])}const Mw=Iy();let Fw=0;function Lw(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||Mw,s={uid:Fw++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dy(r,i),emitsOptions:Ly(r,i),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:r.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Sw.bind(null,s),n.ce&&n.ce(s),s}let Ot=null;const Uw=()=>Ot||Gt;let Ya,_l;{const n=Su(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ya=e("__VUE_INSTANCE_SETTERS__",t=>Ot=t),_l=e("__VUE_SSR_SETTERS__",t=>go=t)}const ko=n=>{const e=Ot;return Ya(n),n.scope.on(),()=>{n.scope.off(),Ya(e)}},Jd=()=>{Ot&&Ot.scope.off(),Ya(null)};function By(n){return n.vnode.shapeFlag&4}let go=!1;function jw(n,e=!1,t=!1){e&&_l(e);const{props:r,children:i}=n.vnode,s=By(n);hw(n,r,s,e),mw(n,i,t||e);const o=s?qw(n,e):void 0;return e&&_l(!1),o}function qw(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,rw);const{setup:r}=t;if(r){Ln();const i=n.setupContext=r.length>1?$w(n):null,s=ko(n),o=Oo(r,n,0,[n.props,i]),a=zg(o);if(Un(),s(),(a||n.sp)&&!Ys(n)&&vy(n),a){if(o.then(Jd,Jd),e)return o.then(c=>{Yd(n,c)}).catch(c=>{Cu(c,n,0)});n.asyncDep=o}else Yd(n,o)}else $y(n)}function Yd(n,e,t){de(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:je(e)&&(n.setupState=fy(e)),$y(n)}function $y(n,e,t){const r=n.type;n.render||(n.render=r.render||fn);{const i=ko(n);Ln();try{iw(n)}finally{Un(),i()}}}const Bw={get(n,e){return bt(n,"get",""),n[e]}};function $w(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Bw),slots:n.slots,emit:n.emit,expose:e}}function Nu(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(fy(PT(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Xs)return Xs[t](n)},has(e,t){return t in e||t in Xs}})):n.proxy}function zw(n){return de(n)&&"__vccOpts"in n}const Lt=(n,e)=>NT(n,e,go);function Qw(n,e,t){try{Ga(-1);const r=arguments.length;return r===2?je(e)&&!le(e)?Ja(e)?xt(n,null,[e]):xt(n,e):xt(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Ja(t)&&(t=[t]),xt(n,e,t))}finally{Ga(1)}}const Ww="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let El;const Xd=typeof window<"u"&&window.trustedTypes;if(Xd)try{El=Xd.createPolicy("vue",{createHTML:n=>n})}catch{}const zy=El?n=>El.createHTML(n):n=>n,Hw="http://www.w3.org/2000/svg",Gw="http://www.w3.org/1998/Math/MathML",Dn=typeof document<"u"?document:null,Zd=Dn&&Dn.createElement("template"),Kw={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Dn.createElementNS(Hw,n):e==="mathml"?Dn.createElementNS(Gw,n):t?Dn.createElement(n,{is:t}):Dn.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Dn.createTextNode(n),createComment:n=>Dn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Dn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Zd.innerHTML=zy(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=Zd.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Jw=Symbol("_vtc");function Yw(n,e,t){const r=n[Jw];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ep=Symbol("_vod"),Xw=Symbol("_vsh"),Zw=Symbol(""),eI=/(?:^|;)\s*display\s*:/;function tI(n,e,t){const r=n.style,i=tt(t);let s=!1;if(t&&!i){if(e)if(tt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Sa(r,a,"")}else for(const o in e)t[o]==null&&Sa(r,o,"");for(const o in t)o==="display"&&(s=!0),Sa(r,o,t[o])}else if(i){if(e!==t){const o=r[Zw];o&&(t+=";"+o),r.cssText=t,s=eI.test(t)}}else e&&n.removeAttribute("style");ep in n&&(n[ep]=s?r.display:"",n[Xw]&&(r.display="none"))}const tp=/\s*!important$/;function Sa(n,e,t){if(le(t))t.forEach(r=>Sa(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=nI(n,e);tp.test(t)?n.setProperty(ui(r),t.replace(tp,""),"important"):n[r]=t}}const np=["Webkit","Moz","ms"],Vc={};function nI(n,e){const t=Vc[e];if(t)return t;let r=br(e);if(r!=="filter"&&r in n)return Vc[e]=r;r=Hg(r);for(let i=0;i<np.length;i++){const s=np[i]+r;if(s in n)return Vc[e]=s}return e}const rp="http://www.w3.org/1999/xlink";function ip(n,e,t,r,i,s=aT(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(rp,e.slice(6,e.length)):n.setAttributeNS(rp,e,t):t==null||s&&!Kg(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Mr(t)?String(t):t)}function sp(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?zy(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Kg(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function wi(n,e,t,r){n.addEventListener(e,t,r)}function rI(n,e,t,r){n.removeEventListener(e,t,r)}const op=Symbol("_vei");function iI(n,e,t,r,i=null){const s=n[op]||(n[op]={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=sI(e);if(r){const l=s[e]=uI(r,i);wi(n,a,l,c)}else o&&(rI(n,a,o,c),s[e]=void 0)}}const ap=/(?:Once|Passive|Capture)$/;function sI(n){let e;if(ap.test(n)){e={};let r;for(;r=n.match(ap);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ui(n.slice(2)),e]}let Nc=0;const oI=Promise.resolve(),aI=()=>Nc||(oI.then(()=>Nc=0),Nc=Date.now());function uI(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;bn(cI(r,t.value),e,5,[r])};return t.value=n,t.attached=aI(),t}function cI(n,e){if(le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const up=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,lI=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?Yw(n,r,o):e==="style"?tI(n,t,r):Tu(e)?gh(e)||iI(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hI(n,e,r,o))?(sp(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ip(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!tt(r))?sp(n,br(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),ip(n,e,r,o))};function hI(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&up(e)&&de(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return up(e)&&tt(t)?!1:e in n}const cp=n=>{const e=n.props["onUpdate:modelValue"]||!1;return le(e)?t=>ba(e,t):e};function fI(n){n.target.composing=!0}function lp(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const xc=Symbol("_assign"),hp={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[xc]=cp(i);const s=r||i.props&&i.props.type==="number";wi(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=ul(a)),n[xc](a)}),t&&wi(n,"change",()=>{n.value=n.value.trim()}),e||(wi(n,"compositionstart",fI),wi(n,"compositionend",lp),wi(n,"change",lp))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[xc]=cp(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?ul(n.value):n.value,c=e??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===c)||(n.value=c))}},dI=St({patchProp:lI},Kw);let fp;function pI(){return fp||(fp=yw(dI))}const mI=((...n)=>{const e=pI().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=yI(r);if(!i)return;const s=e._component;!de(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,gI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function gI(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function yI(n){return tt(n)?document.querySelector(n):n}var bl=function(n,e){return bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},bl(n,e)};function In(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bl(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var V=function(){return V=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},V.apply(this,arguments)};function dn(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ir(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(d){o(d)}}function c(h){try{l(r.throw(h))}catch(d){o(d)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function sr(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return c([l,h])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(h){l=[6,h],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function pt(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Mc="Invariant Violation",dp=Object.setPrototypeOf,vI=dp===void 0?function(n,e){return n.__proto__=e,n}:dp,Qy=(function(n){In(e,n);function e(t){t===void 0&&(t=Mc);var r=n.call(this,typeof t=="number"?Mc+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=Mc,vI(r,e.prototype),r}return e})(Error);function Kr(n,e){if(!n)throw new Qy(e)}var Wy=["debug","log","warn","error","silent"],_I=Wy.indexOf("log");function fa(n){return function(){if(Wy.indexOf(n)>=_I){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=fa("debug"),n.log=fa("log"),n.warn=fa("warn"),n.error=fa("error")})(Kr||(Kr={}));var Vh="3.14.0";function Xt(n){try{return n()}catch{}}const Xa=Xt(function(){return globalThis})||Xt(function(){return window})||Xt(function(){return self})||Xt(function(){return global})||Xt(function(){return Xt.constructor("return this")()});var pp=new Map;function Tl(n){var e=pp.get(n)||1;return pp.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Hy(n,e){e===void 0&&(e=0);var t=Tl("stringifyForDisplay");return JSON.stringify(n,function(r,i){return i===void 0?t:i},e).split(JSON.stringify(t)).join("<undefined>")}function da(n){return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(typeof e=="number"){var i=e;e=Nh(i),e||(e=xh(i,t),t=[])}n.apply(void 0,[e].concat(t))}}var Y=Object.assign(function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e||Kr(e,Nh(t,r)||xh(t,r))},{debug:da(Kr.debug),log:da(Kr.log),warn:da(Kr.warn),error:da(Kr.error)});function kt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Qy(Nh(n,e)||xh(n,e))}var mp=Symbol.for("ApolloErrorMessageHandler_"+Vh);function Gy(n){if(typeof n=="string")return n;try{return Hy(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function Nh(n,e){if(e===void 0&&(e=[]),!!n)return Xa[mp]&&Xa[mp](n,e.map(Gy))}function xh(n,e){if(e===void 0&&(e=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:Vh,message:n,args:e.map(Gy)})))}function EI(n,e){if(!!!n)throw new Error(e)}const Ky={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},bI=new Set(Object.keys(Ky));function gp(n){const e=n?.kind;return typeof e=="string"&&bI.has(e)}var yp;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(yp||(yp={}));var Me;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Me||(Me={}));function vp(n){return n===9||n===32}function TI(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),i=r.length===1,s=r.length>1&&r.slice(1).every(g=>g.length===0||vp(g.charCodeAt(0))),o=t.endsWith('\\"""'),a=n.endsWith('"')&&!o,c=n.endsWith("\\"),l=a||c,h=!i||n.length>70||l||s||o;let d="";const m=i&&vp(n.charCodeAt(0));return(h&&!m||s)&&(d+=`
`),d+=t,(h||l)&&(d+=`
`),'"""'+d+'"""'}const wI=10,Jy=2;function II(n){return xu(n,[])}function xu(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return SI(n,e);default:return String(n)}}function SI(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(AI(n)){const r=n.toJSON();if(r!==n)return typeof r=="string"?r:xu(r,t)}else if(Array.isArray(n))return CI(n,t);return RI(n,t)}function AI(n){return typeof n.toJSON=="function"}function RI(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>Jy?"["+PI(n)+"]":"{ "+t.map(([i,s])=>i+": "+xu(s,e)).join(", ")+" }"}function CI(n,e){if(n.length===0)return"[]";if(e.length>Jy)return"[Array]";const t=Math.min(wI,n.length),r=n.length-t,i=[];for(let s=0;s<t;++s)i.push(xu(n[s],e));return r===1?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}function PI(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}function DI(n){return`"${n.replace(OI,kI)}"`}const OI=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function kI(n){return VI[n.charCodeAt(0)]}const VI=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Mu=Object.freeze({});function rn(n,e,t=Ky){const r=new Map;for(const w of Object.values(Me))r.set(w,NI(e,w));let i,s=Array.isArray(n),o=[n],a=-1,c=[],l=n,h,d;const m=[],g=[];do{a++;const w=a===o.length,k=w&&c.length!==0;if(w){if(h=g.length===0?void 0:m[m.length-1],l=d,d=g.pop(),k)if(s){l=l.slice();let x=0;for(const[L,Q]of c){const S=L-x;Q===null?(l.splice(S,1),x++):l[S]=Q}}else{l={...l};for(const[x,L]of c)l[x]=L}a=i.index,o=i.keys,c=i.edits,s=i.inArray,i=i.prev}else if(d){if(h=s?a:o[a],l=d[h],l==null)continue;m.push(h)}let O;if(!Array.isArray(l)){var E,I;gp(l)||EI(!1,`Invalid AST Node: ${II(l)}.`);const x=w?(E=r.get(l.kind))===null||E===void 0?void 0:E.leave:(I=r.get(l.kind))===null||I===void 0?void 0:I.enter;if(O=x?.call(e,l,h,d,m,g),O===Mu)break;if(O===!1){if(!w){m.pop();continue}}else if(O!==void 0&&(c.push([h,O]),!w))if(gp(O))l=O;else{m.pop();continue}}if(O===void 0&&k&&c.push([h,l]),w)m.pop();else{var R;i={inArray:s,index:a,keys:o,edits:c,prev:i},s=Array.isArray(l),o=s?l:(R=t[l.kind])!==null&&R!==void 0?R:[],a=-1,c=[],d&&g.push(d),d=l}}while(i!==void 0);return c.length!==0?c[c.length-1][1]:n}function NI(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function xI(n){return rn(n,FI)}const MI=80,FI={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>ee(n.definitions,`

`)},OperationDefinition:{leave(n){const e=pe("(",ee(n.variableDefinitions,", "),")"),t=ee([n.operation,ee([n.name,e]),ee(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+pe(" = ",t)+pe(" ",ee(r," "))},SelectionSet:{leave:({selections:n})=>Yt(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:i}){const s=pe("",n,": ")+e;let o=s+pe("(",ee(t,", "),")");return o.length>MI&&(o=s+pe(`(
`,Aa(ee(t,`
`)),`
)`)),ee([o,ee(r," "),i]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+pe(" ",ee(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>ee(["...",pe("on ",n),ee(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:i})=>`fragment ${n}${pe("(",ee(t,", "),")")} on ${e} ${pe("",ee(r," ")," ")}`+i},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?TI(n):DI(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+ee(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+ee(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+pe("(",ee(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>pe("",n,`
`)+ee(["schema",ee(e," "),Yt(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>pe("",n,`
`)+ee(["scalar",e,ee(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>pe("",n,`
`)+ee(["type",e,pe("implements ",ee(t," & ")),ee(r," "),Yt(i)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:i})=>pe("",n,`
`)+e+(_p(t)?pe(`(
`,Aa(ee(t,`
`)),`
)`):pe("(",ee(t,", "),")"))+": "+r+pe(" ",ee(i," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:i})=>pe("",n,`
`)+ee([e+": "+t,pe("= ",r),ee(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>pe("",n,`
`)+ee(["interface",e,pe("implements ",ee(t," & ")),ee(r," "),Yt(i)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>pe("",n,`
`)+ee(["union",e,ee(t," "),pe("= ",ee(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>pe("",n,`
`)+ee(["enum",e,ee(t," "),Yt(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>pe("",n,`
`)+ee([e,ee(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>pe("",n,`
`)+ee(["input",e,ee(t," "),Yt(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:i})=>pe("",n,`
`)+"directive @"+e+(_p(t)?pe(`(
`,Aa(ee(t,`
`)),`
)`):pe("(",ee(t,", "),")"))+(r?" repeatable":"")+" on "+ee(i," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>ee(["extend schema",ee(n," "),Yt(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>ee(["extend scalar",n,ee(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>ee(["extend type",n,pe("implements ",ee(e," & ")),ee(t," "),Yt(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>ee(["extend interface",n,pe("implements ",ee(e," & ")),ee(t," "),Yt(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>ee(["extend union",n,ee(e," "),pe("= ",ee(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>ee(["extend enum",n,ee(e," "),Yt(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>ee(["extend input",n,ee(e," "),Yt(t)]," ")}};function ee(n,e=""){var t;return(t=n?.filter(r=>r).join(e))!==null&&t!==void 0?t:""}function Yt(n){return pe(`{
`,Aa(ee(n,`
`)),`
}`)}function pe(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Aa(n){return pe("  ",n.replace(/\n/g,`
  `))}function _p(n){var e;return(e=n?.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function Ep(n){return n.kind===Me.FIELD||n.kind===Me.FRAGMENT_SPREAD||n.kind===Me.INLINE_FRAGMENT}function Vo(n,e){var t=n.directives;return!t||!t.length?!0:jI(t).every(function(r){var i=r.directive,s=r.ifArgument,o=!1;return s.value.kind==="Variable"?(o=e&&e[s.value.name.value],Y(o!==void 0,106,i.name.value)):o=s.value.value,i.name.value==="skip"?!o:o})}function yo(n,e,t){var r=new Set(n),i=r.size;return rn(e,{Directive:function(s){if(r.delete(s.name.value)&&(!t||!r.size))return Mu}}),t?!r.size:r.size<i}function LI(n){return n&&yo(["client","export"],n,!0)}function UI(n){var e=n.name.value;return e==="skip"||e==="include"}function jI(n){var e=[];return n&&n.length&&n.forEach(function(t){if(UI(t)){var r=t.arguments,i=t.name.value;Y(r&&r.length===1,107,i);var s=r[0];Y(s.name&&s.name.value==="if",108,i);var o=s.value;Y(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),109,i),e.push({directive:t,ifArgument:s})}}),e}function qI(n){var e,t,r=(e=n.directives)===null||e===void 0?void 0:e.find(function(s){var o=s.name;return o.value==="unmask"});if(!r)return"mask";var i=(t=r.arguments)===null||t===void 0?void 0:t.find(function(s){var o=s.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&i&&(i.value.kind===Me.VARIABLE?globalThis.__DEV__!==!1&&Y.warn(110):i.value.kind!==Me.STRING?globalThis.__DEV__!==!1&&Y.warn(111):i.value.value!=="migrate"&&globalThis.__DEV__!==!1&&Y.warn(112,i.value.value)),i&&"value"in i.value&&i.value.value==="migrate"?"migrate":"unmask"}const BI=()=>Object.create(null),{forEach:$I,slice:bp}=Array.prototype,{hasOwnProperty:zI}=Object.prototype;class Gn{constructor(e=!0,t=BI){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return $I.call(e,r=>t=t.getChildTrie(r)),zI.call(t,"data")?t.data:t.data=this.makeData(bp.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,i=e.length;t&&r<i;++r){const s=t.mapFor(e[r],!1);t=s&&s.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],i=this.mapFor(r,!1),s=i&&i.get(r);s&&(t=s.removeArray(bp.call(e,1)),!s.data&&!s.weak&&!(s.strong&&s.strong.size)&&i.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new Gn(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&QI(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function QI(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var WI=Xt(function(){return navigator.product})=="ReactNative",ci=typeof WeakMap=="function"&&!(WI&&!global.HermesInternal),Mh=typeof WeakSet=="function",Yy=typeof Symbol=="function"&&typeof Symbol.for=="function",Fu=Yy&&Symbol.asyncIterator;Xt(function(){return window.document.createElement});Xt(function(){return navigator.userAgent.indexOf("jsdom")>=0});function We(n){return n!==null&&typeof n=="object"}function HI(n,e){var t=e,r=[];n.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw kt(113,s.operation,s.name?" named '".concat(s.name.value,"'"):"");s.kind==="FragmentDefinition"&&r.push(s)}),typeof t>"u"&&(Y(r.length===1,114,r.length),t=r[0].name.value);var i=V(V({},n),{definitions:pt([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return i}function as(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function Lu(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var r=e&&e[t];return Y(r,115,t),r||null}default:return null}}function GI(n){var e=!0;return rn(n,{FragmentSpread:function(t){if(e=!!t.directives&&t.directives.some(function(r){return r.name.value==="unmask"}),!e)return Mu}}),e}function KI(){}class wl{constructor(e=1/0,t=KI){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:i}=t;i&&(i.older=r),r&&(r.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function Il(){}const JI=Il,YI=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},XI=typeof WeakMap<"u"?WeakMap:Map,ZI=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:Il,unregister:Il}},e0=10024;class Za{constructor(e=1/0,t=JI){this.max=e,this.dispose=t,this.map=new XI,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const r=this.unfinalizedNodes.values();for(let i=0;i<e0;i++){const s=r.next().value;if(!s)break;this.unfinalizedNodes.delete(s);const o=s.key;delete s.key,s.keyRef=new YI(o),this.registry.register(o,s,s)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new ZI(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:i}=t;i&&(i.older=r),r&&(r.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var Fc=new WeakSet;function Xy(n){n.size<=(n.max||-1)||Fc.has(n)||(Fc.add(n),setTimeout(function(){n.clean(),Fc.delete(n)},100))}var Zy=function(n,e){var t=new Za(n,e);return t.set=function(r,i){var s=Za.prototype.set.call(this,r,i);return Xy(this),s},t},t0=function(n,e){var t=new wl(n,e);return t.set=function(r,i){var s=wl.prototype.set.call(this,r,i);return Xy(this),s},t},n0=Symbol.for("apollo.cacheSize"),jn=V({},Xa[n0]),Wr={};function ev(n,e){Wr[n]=e}var r0=globalThis.__DEV__!==!1?a0:void 0,i0=globalThis.__DEV__!==!1?u0:void 0,s0=globalThis.__DEV__!==!1?tv:void 0;function o0(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(e){var t=e[0],r=e[1];return[t,jn[t]||r]}))}function a0(){var n,e,t,r,i;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:o0(),sizes:V({print:(n=Wr.print)===null||n===void 0?void 0:n.call(Wr),parser:(e=Wr.parser)===null||e===void 0?void 0:e.call(Wr),canonicalStringify:(t=Wr.canonicalStringify)===null||t===void 0?void 0:t.call(Wr),links:Al(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:rv(this.queryManager.documentTransform)}},(i=(r=this.cache).getMemoryInternals)===null||i===void 0?void 0:i.call(r))}}function tv(){return{cache:{fragmentQueryDocuments:or(this.getFragmentDoc)}}}function u0(){var n=this.config.fragments;return V(V({},tv.apply(this)),{addTypenameDocumentTransform:rv(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:or(this.storeReader.executeSelectionSet),executeSubSelectedArray:or(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:or(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:or(n?.findFragmentSpreads),lookup:or(n?.lookup),transform:or(n?.transform)}})}function c0(n){return!!n&&"dirtyKey"in n}function or(n){return c0(n)?n.size:void 0}function nv(n){return n!=null}function rv(n){return Sl(n).map(function(e){return{cache:e}})}function Sl(n){return n?pt(pt([or(n?.performWork)],Sl(n?.left),!0),Sl(n?.right),!0).filter(nv):[]}function Al(n){var e;return n?pt(pt([(e=n?.getMemoryInternals)===null||e===void 0?void 0:e.call(n)],Al(n?.left),!0),Al(n?.right),!0).filter(nv):[]}var dr=Object.assign(function(e){return JSON.stringify(e,l0)},{reset:function(){Di=new t0(jn.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&ev("canonicalStringify",function(){return Di.size});var Di;dr.reset();function l0(n,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var r=Object.keys(e);if(r.every(h0))return e;var i=JSON.stringify(r),s=Di.get(i);if(!s){r.sort();var o=JSON.stringify(r);s=Di.get(o)||r,Di.set(i,s),Di.set(o,s)}var a=Object.create(t);return s.forEach(function(c){a[c]=e[c]}),a}}return e}function h0(n,e,t){return e===0||t[e-1]<=n}function ji(n){return{__ref:String(n)}}function Ae(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function f0(n){return We(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function d0(n){return n.kind==="StringValue"}function p0(n){return n.kind==="BooleanValue"}function m0(n){return n.kind==="IntValue"}function g0(n){return n.kind==="FloatValue"}function y0(n){return n.kind==="Variable"}function v0(n){return n.kind==="ObjectValue"}function _0(n){return n.kind==="ListValue"}function E0(n){return n.kind==="EnumValue"}function b0(n){return n.kind==="NullValue"}function Gi(n,e,t,r){if(m0(t)||g0(t))n[e.value]=Number(t.value);else if(p0(t)||d0(t))n[e.value]=t.value;else if(v0(t)){var i={};t.fields.map(function(o){return Gi(i,o.name,o.value,r)}),n[e.value]=i}else if(y0(t)){var s=(r||{})[t.name.value];n[e.value]=s}else if(_0(t))n[e.value]=t.values.map(function(o){var a={};return Gi(a,e,o,r),a[e.value]});else if(E0(t))n[e.value]=t.value;else if(b0(t))n[e.value]=null;else throw kt(124,e.value,t.kind)}function T0(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(i){t[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var o=s.name,a=s.value;return Gi(t[i.name.value],o,a,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(i){var s=i.name,o=i.value;return Gi(r,s,o,e)})),iv(n.name.value,r,t)}var w0=["connection","include","skip","client","rest","export","nonreactive"],Ms=dr,iv=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var i={};return r.forEach(function(a){i[a]=e[a]}),"".concat(t.connection.key,"(").concat(Ms(i),")")}else return t.connection.key;var s=n;if(e){var o=Ms(e);s+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(a){w0.indexOf(a)===-1&&(t[a]&&Object.keys(t[a]).length?s+="@".concat(a,"(").concat(Ms(t[a]),")"):s+="@".concat(a))}),s},{setStringify:function(n){var e=Ms;return Ms=n,e}});function Uu(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){var i=r.name,s=r.value;return Gi(t,i,s,e)}),t}return null}function qn(n){return n.alias?n.alias.value:n.name.value}function Rl(n,e,t){for(var r,i=0,s=e.selections;i<s.length;i++){var o=s[i];if(Ir(o)){if(o.name.value==="__typename")return n[qn(o)]}else r?r.push(o):r=[o]}if(typeof n.__typename=="string")return n.__typename;if(r)for(var a=0,c=r;a<c.length;a++){var o=c[a],l=Rl(n,Lu(o,t).selectionSet,t);if(typeof l=="string")return l}}function Ir(n){return n.kind==="Field"}function I0(n){return n.kind==="InlineFragment"}function us(n){Y(n&&n.kind==="Document",116);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw kt(117,t.kind);return t});return Y(e.length<=1,118,e.length),n}function ni(n){return us(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function qs(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function cs(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function sv(n){var e=ni(n);return Y(e&&e.operation==="query",119),e}function ov(n){Y(n.kind==="Document",120),Y(n.definitions.length<=1,121);var e=n.definitions[0];return Y(e.kind==="FragmentDefinition",122),e}function No(n){us(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var i=r[t];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw kt(123)}function Fh(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&Gi(e,r.variable.name,r.defaultValue)}),e}let lt=null;const Tp={};let S0=1;const A0=()=>class{constructor(){this.id=["slot",S0++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=lt;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===Tp)break;return e!==lt&&(lt.slots[this.id]=t),!0}return lt&&(lt.slots[this.id]=Tp),!1}getValue(){if(this.hasValue())return lt.slots[this.id]}withValue(e,t,r,i){const s={__proto__:null,[this.id]:e},o=lt;lt={parent:o,slots:s};try{return t.apply(i,r)}finally{lt=o}}static bind(e){const t=lt;return function(){const r=lt;try{return lt=t,e.apply(this,arguments)}finally{lt=r}}}static noContext(e,t,r){if(lt){const i=lt;try{return lt=null,e.apply(r,t)}finally{lt=i}}else return e.apply(r,t)}};function wp(n){try{return n()}catch{}}const Lc="@wry/context:Slot",R0=wp(()=>globalThis)||wp(()=>global)||Object.create(null),Ip=R0,ls=Ip[Lc]||Array[Lc]||(function(n){try{Object.defineProperty(Ip,Lc,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}})(A0()),{bind:rV,noContext:iV}=ls,ju=new ls,{hasOwnProperty:C0}=Object.prototype,Lh=Array.from||function(n){const e=[];return n.forEach(t=>e.push(t)),e};function Uh(n){const{unsubscribe:e}=n;typeof e=="function"&&(n.unsubscribe=void 0,e())}const vo=[],P0=100;function Ki(n,e){if(!n)throw new Error(e||"assertion failure")}function av(n,e){const t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function uv(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function cv(n){return n.slice(0)}class qu{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++qu.count}peek(){if(this.value.length===1&&!Sr(this))return Sp(this),this.value[0]}recompute(e){return Ki(!this.recomputing,"already recomputing"),Sp(this),Sr(this)?D0(this,e):uv(this.value)}setDirty(){this.dirty||(this.dirty=!0,lv(this),Uh(this))}dispose(){this.setDirty(),mv(this),jh(this,(e,t)=>{e.setDirty(),gv(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=vo.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(Lh(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),vo.push(this.deps),this.deps=null)}}qu.count=0;function Sp(n){const e=ju.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Sr(n)?fv(e,n):dv(e,n),e}function D0(n,e){return mv(n),ju.withValue(n,O0,[n,e]),V0(n,e)&&k0(n),uv(n.value)}function O0(n,e){n.recomputing=!0;const{normalizeResult:t}=n;let r;t&&n.value.length===1&&(r=cv(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,e),t&&r&&!av(r,n.value))try{n.value[0]=t(n.value[0],r[0])}catch{}}catch(i){n.value[1]=i}n.recomputing=!1}function Sr(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function k0(n){n.dirty=!1,!Sr(n)&&hv(n)}function lv(n){jh(n,fv)}function hv(n){jh(n,dv)}function jh(n,e){const t=n.parents.size;if(t){const r=Lh(n.parents);for(let i=0;i<t;++i)e(r[i],n)}}function fv(n,e){Ki(n.childValues.has(e)),Ki(Sr(e));const t=!Sr(n);if(!n.dirtyChildren)n.dirtyChildren=vo.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&lv(n)}function dv(n,e){Ki(n.childValues.has(e)),Ki(!Sr(e));const t=n.childValues.get(e);t.length===0?n.childValues.set(e,cv(e.value)):av(t,e.value)||n.setDirty(),pv(n,e),!Sr(n)&&hv(n)}function pv(n,e){const t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(vo.length<P0&&vo.push(t),n.dirtyChildren=null))}function mv(n){n.childValues.size>0&&n.childValues.forEach((e,t)=>{gv(n,t)}),n.forgetDeps(),Ki(n.dirtyChildren===null)}function gv(n,e){e.parents.delete(n),n.childValues.delete(e),pv(n,e)}function V0(n,e){if(typeof n.subscribe=="function")try{Uh(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}const N0={setDirty:!0,dispose:!0,forget:!0};function yv(n){const e=new Map;function t(r){const i=ju.getValue();if(i){let s=e.get(r);s||e.set(r,s=new Set),i.dependOn(s)}}return t.dirty=function(i,s){const o=e.get(i);if(o){const a=s&&C0.call(N0,s)?s:"setDirty";Lh(o).forEach(c=>c[a]()),e.delete(i),Uh(o)}},t}let Ap;function x0(...n){return(Ap||(Ap=new Gn(typeof WeakMap=="function"))).lookupArray(n)}const Uc=new Set;function _o(n,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:r=x0,normalizeResult:i,subscribe:s,cache:o=wl}=Object.create(null)){const a=typeof o=="function"?new o(e,m=>m.dispose()):o,c=function(){const m=r.apply(null,t?t.apply(null,arguments):arguments);if(m===void 0)return n.apply(null,arguments);let g=a.get(m);g||(a.set(m,g=new qu(n)),g.normalizeResult=i,g.subscribe=s,g.forget=()=>a.delete(m));const E=g.recompute(Array.prototype.slice.call(arguments));return a.set(m,g),Uc.add(a),ju.hasValue()||(Uc.forEach(I=>I.clean()),Uc.clear()),E};Object.defineProperty(c,"size",{get:()=>a.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:e,keyArgs:t,makeCacheKey:r,normalizeResult:i,subscribe:s,cache:a});function l(m){const g=m&&a.get(m);g&&g.setDirty()}c.dirtyKey=l,c.dirty=function(){l(r.apply(null,arguments))};function h(m){const g=m&&a.get(m);if(g)return g.peek()}c.peekKey=h,c.peek=function(){return h(r.apply(null,arguments))};function d(m){return m?a.delete(m):!1}return c.forgetKey=d,c.forget=function(){return d(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=t?function(){return r.apply(null,t.apply(null,arguments))}:r,Object.freeze(c)}function M0(n){return n}var vv=(function(){function n(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=Mh?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(e){return[e]},n.identity=function(){return new n(M0,{cache:!1})},n.split=function(e,t,r){return r===void 0&&(r=n.identity()),Object.assign(new n(function(i){var s=e(i)?t:r;return s.transformDocument(i)},{cache:!1}),{left:t,right:r})},n.prototype.resetCache=function(){var e=this;if(this.cached){var t=new Gn(ci);this.performWork=_o(n.prototype.performWork.bind(this),{makeCacheKey:function(r){var i=e.getCacheKey(r);if(i)return Y(Array.isArray(i),105),t.lookupArray(i)},max:jn["documentTransform.cache"],cache:Za})}},n.prototype.performWork=function(e){return us(e),this.transform(e)},n.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},n.prototype.concat=function(e){var t=this;return Object.assign(new n(function(r){return e.transformDocument(t.transformDocument(r))},{cache:!1}),{left:this,right:e})},n})(),eo,Yr=Object.assign(function(n){var e=eo.get(n);return e||(e=xI(n),eo.set(n,e)),e},{reset:function(){eo=new Zy(jn.print||2e3)}});Yr.reset();globalThis.__DEV__!==!1&&ev("print",function(){return eo?eo.size:0});var He=Array.isArray;function Tn(n){return Array.isArray(n)&&n.length>0}var Rp={kind:Me.FIELD,name:{kind:Me.NAME,value:"__typename"}};function _v(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===Me.FRAGMENT_SPREAD&&_v(e[t.name.value],e)})}function F0(n){return _v(ni(n)||ov(n),as(cs(n)))?null:n}function L0(n){var e=new Map,t=new Map;return n.forEach(function(r){r&&(r.name?e.set(r.name,r):r.test&&t.set(r.test,r))}),function(r){var i=e.get(r.name.value);return!i&&t.size&&t.forEach(function(s,o){o(r)&&(i=s)}),i}}function Cp(n){var e=new Map;return function(r){r===void 0&&(r=n);var i=e.get(r);return i||e.set(r,i={variables:new Set,fragmentSpreads:new Set}),i}}function Ev(n,e){us(e);for(var t=Cp(""),r=Cp(""),i=function(w){for(var k=0,O=void 0;k<w.length&&(O=w[k]);++k)if(!He(O)){if(O.kind===Me.OPERATION_DEFINITION)return t(O.name&&O.name.value);if(O.kind===Me.FRAGMENT_DEFINITION)return r(O.name.value)}return globalThis.__DEV__!==!1&&Y.error(125),null},s=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===Me.OPERATION_DEFINITION&&++s;var a=L0(n),c=function(w){return Tn(w)&&w.map(a).some(function(k){return k&&k.remove})},l=new Map,h=!1,d={enter:function(w){if(c(w.directives))return h=!0,null}},m=rn(e,{Field:d,InlineFragment:d,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(w,k,O,x,L){var Q=i(L);Q&&Q.variables.add(w.name.value)}},FragmentSpread:{enter:function(w,k,O,x,L){if(c(w.directives))return h=!0,null;var Q=i(L);Q&&Q.fragmentSpreads.add(w.name.value)}},FragmentDefinition:{enter:function(w,k,O,x){l.set(JSON.stringify(x),w)},leave:function(w,k,O,x){var L=l.get(JSON.stringify(x));if(w===L)return w;if(s>0&&w.selectionSet.selections.every(function(Q){return Q.kind===Me.FIELD&&Q.name.value==="__typename"}))return r(w.name.value).removed=!0,h=!0,null}},Directive:{leave:function(w){if(a(w))return h=!0,null}}});if(!h)return e;var g=function(w){return w.transitiveVars||(w.transitiveVars=new Set(w.variables),w.removed||w.fragmentSpreads.forEach(function(k){g(r(k)).transitiveVars.forEach(function(O){w.transitiveVars.add(O)})})),w},E=new Set;m.definitions.forEach(function(w){w.kind===Me.OPERATION_DEFINITION?g(t(w.name&&w.name.value)).fragmentSpreads.forEach(function(k){E.add(k)}):w.kind===Me.FRAGMENT_DEFINITION&&s===0&&!r(w.name.value).removed&&E.add(w.name.value)}),E.forEach(function(w){g(r(w)).fragmentSpreads.forEach(function(k){E.add(k)})});var I=function(w){return!!(!E.has(w)||r(w).removed)},R={enter:function(w){if(I(w.name.value))return null}};return F0(rn(m,{FragmentSpread:R,FragmentDefinition:R,OperationDefinition:{leave:function(w){if(w.variableDefinitions){var k=g(t(w.name&&w.name.value)).transitiveVars;if(k.size<w.variableDefinitions.length)return V(V({},w),{variableDefinitions:w.variableDefinitions.filter(function(O){return k.has(O.variable.name.value)})})}}}}))}var qh=Object.assign(function(n){return rn(n,{SelectionSet:{enter:function(e,t,r){if(!(r&&r.kind===Me.OPERATION_DEFINITION)){var i=e.selections;if(i){var s=i.some(function(a){return Ir(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!s){var o=r;if(!(Ir(o)&&o.directives&&o.directives.some(function(a){return a.name.value==="export"})))return V(V({},e),{selections:pt(pt([],i,!0),[Rp],!1)})}}}}}})},{added:function(n){return n===Rp}});function U0(n){var e=No(n),t=e.operation;if(t==="query")return n;var r=rn(n,{OperationDefinition:{enter:function(i){return V(V({},i),{operation:"query"})}}});return r}function bv(n){us(n);var e=Ev([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}function j0(n){return us(n),rn(n,{FragmentSpread:function(e){var t;if(!(!((t=e.directives)===null||t===void 0)&&t.some(function(r){return r.name.value==="unmask"})))return V(V({},e),{directives:pt(pt([],e.directives||[],!0),[{kind:Me.DIRECTIVE,name:{kind:Me.NAME,value:"nonreactive"}}],!1)})}})}var q0=Object.prototype.hasOwnProperty;function Pp(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Bu(n)}function Bu(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Ar,i=1;i<t;++i)e=r.merge(e,n[i]);return e}var B0=function(n,e,t){return this.merge(n[t],e[t])},Ar=(function(){function n(e){e===void 0&&(e=B0),this.reconciler=e,this.isObject=We,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return We(t)&&We(e)?(Object.keys(t).forEach(function(o){if(q0.call(e,o)){var a=e[o];if(t[o]!==a){var c=r.reconciler.apply(r,pt([e,t,o],i,!1));c!==a&&(e=r.shallowCopyForMerge(e),e[o]=c)}}else e=r.shallowCopyForMerge(e),e[o]=t[o]}),e):t},n.prototype.shallowCopyForMerge=function(e){return We(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=V({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n})();function $0(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=z0(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0(n,e){if(n){if(typeof n=="string")return Dp(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Dp(n,e)}}function Dp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Op(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Bh(n,e,t){return e&&Op(n.prototype,e),t&&Op(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var $h=function(){return typeof Symbol=="function"},zh=function(n){return $h()&&!!Symbol[n]},Qh=function(n){return zh(n)?Symbol[n]:"@@"+n};$h()&&!zh("observable")&&(Symbol.observable=Symbol("observable"));var Q0=Qh("iterator"),Cl=Qh("observable"),Tv=Qh("species");function eu(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function Fs(n){var e=n.constructor;return e!==void 0&&(e=e[Tv],e===null&&(e=void 0)),e!==void 0?e:De}function W0(n){return n instanceof De}function Ji(n){Ji.log?Ji.log(n):setTimeout(function(){throw n})}function Ra(n){Promise.resolve().then(function(){try{n()}catch(e){Ji(e)}})}function wv(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=eu(e,"unsubscribe");t&&t.call(e)}}catch(r){Ji(r)}}function Pl(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function H0(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(Iv(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function Iv(n,e,t){n._state="running";var r=n._observer;try{var i=eu(r,e);switch(e){case"next":i&&i.call(r,t);break;case"error":if(Pl(n),i)i.call(r,t);else throw t;break;case"complete":Pl(n),i&&i.call(r);break}}catch(s){Ji(s)}n._state==="closed"?wv(n):n._state==="running"&&(n._state="ready")}function jc(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],Ra(function(){return H0(n)});return}Iv(n,e,t)}}var G0=(function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new K0(this);try{this._cleanup=r.call(void 0,i)}catch(s){i.error(s)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Pl(this),wv(this))},Bh(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n})(),K0=(function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){jc(this._subscription,"next",r)},e.error=function(r){jc(this._subscription,"error",r)},e.complete=function(){jc(this._subscription,"complete")},Bh(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n})(),De=(function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new G0(r,this._subscriber)},e.forEach=function(r){var i=this;return new Promise(function(s,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function a(){c.unsubscribe(),s()}var c=i.subscribe({next:function(l){try{r(l,a)}catch(h){o(h),c.unsubscribe()}},error:o,complete:s})})},e.map=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Fs(this);return new s(function(o){return i.subscribe({next:function(a){try{a=r(a)}catch(c){return o.error(c)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.filter=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Fs(this);return new s(function(o){return i.subscribe({next:function(a){try{if(!r(a))return}catch(c){return o.error(c)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.reduce=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Fs(this),o=arguments.length>1,a=!1,c=arguments[1],l=c;return new s(function(h){return i.subscribe({next:function(d){var m=!a;if(a=!0,!m||o)try{l=r(l,d)}catch(g){return h.error(g)}else l=d},error:function(d){h.error(d)},complete:function(){if(!a&&!o)return h.error(new TypeError("Cannot reduce an empty sequence"));h.next(l),h.complete()}})})},e.concat=function(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=Fs(this);return new a(function(c){var l,h=0;function d(m){l=m.subscribe({next:function(g){c.next(g)},error:function(g){c.error(g)},complete:function(){h===s.length?(l=void 0,c.complete()):d(a.from(s[h++]))}})}return d(r),function(){l&&(l.unsubscribe(),l=void 0)}})},e.flatMap=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Fs(this);return new s(function(o){var a=[],c=i.subscribe({next:function(h){if(r)try{h=r(h)}catch(m){return o.error(m)}var d=s.from(h).subscribe({next:function(m){o.next(m)},error:function(m){o.error(m)},complete:function(){var m=a.indexOf(d);m>=0&&a.splice(m,1),l()}});a.push(d)},error:function(h){o.error(h)},complete:function(){l()}});function l(){c.closed&&a.length===0&&o.complete()}return function(){a.forEach(function(h){return h.unsubscribe()}),c.unsubscribe()}})},e[Cl]=function(){return this},n.from=function(r){var i=typeof this=="function"?this:n;if(r==null)throw new TypeError(r+" is not an object");var s=eu(r,Cl);if(s){var o=s.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return W0(o)&&o.constructor===i?o:new i(function(a){return o.subscribe(a)})}if(zh("iterator")&&(s=eu(r,Q0),s))return new i(function(a){Ra(function(){if(!a.closed){for(var c=$0(s.call(r)),l;!(l=c()).done;){var h=l.value;if(a.next(h),a.closed)return}a.complete()}})});if(Array.isArray(r))return new i(function(a){Ra(function(){if(!a.closed){for(var c=0;c<r.length;++c)if(a.next(r[c]),a.closed)return;a.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=typeof this=="function"?this:n;return new o(function(a){Ra(function(){if(!a.closed){for(var c=0;c<i.length;++c)if(a.next(i[c]),a.closed)return;a.complete()}})})},Bh(n,null,[{key:Tv,get:function(){return this}}]),n})();$h()&&Object.defineProperty(De,Symbol("extensions"),{value:{symbol:Cl,hostReportError:Ji},configurable:!0});function J0(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var Ii;typeof self<"u"?Ii=self:typeof window<"u"?Ii=window:typeof global<"u"?Ii=global:typeof ph<"u"?Ii=ph:Ii=Function("return this")();J0(Ii);var kp=De.prototype,Vp="@@observable";kp[Vp]||(kp[Vp]=function(){return this});function Y0(n){return n.catch(function(){}),n}var X0=Object.prototype.toString;function Sv(n){return Dl(n)}function Dl(n,e){switch(X0.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(i,s){t[s]=Dl(i,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(i){r[i]=Dl(n[i],e)}),r}default:return n}}function Z0(n){var e=new Set([n]);return e.forEach(function(t){We(t)&&eS(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){We(t[r])&&e.add(t[r])})}),n}function eS(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function tu(n){return globalThis.__DEV__!==!1&&Z0(n),n}function to(n,e,t){var r=[];n.forEach(function(i){return i[e]&&r.push(i)}),r.forEach(function(i){return i[e](t)})}function qc(n,e,t){return new De(function(r){var i={then:function(c){return new Promise(function(l){return l(c())})}};function s(c,l){return function(h){if(c){var d=function(){return r.closed?0:c(h)};i=i.then(d,d).then(function(m){return r.next(m)},function(m){return r.error(m)})}else r[l](h)}}var o={next:s(e,"next"),error:s(t,"error"),complete:function(){i.then(function(){return r.complete()})}},a=n.subscribe(o);return function(){return a.unsubscribe()}})}function Av(n){function e(t){Object.defineProperty(n,t,{value:De})}return Yy&&Symbol.species&&e(Symbol.species),e("@@species"),n}function Np(n){return n&&typeof n.then=="function"}var Si=(function(n){In(e,n);function e(t){var r=n.call(this,function(i){return r.addObserver(i),function(){return r.removeObserver(i)}})||this;return r.observers=new Set,r.promise=new Promise(function(i,s){r.resolve=i,r.reject=s}),r.handlers={next:function(i){r.sub!==null&&(r.latest=["next",i],r.notify("next",i),to(r.observers,"next",i))},error:function(i){var s=r.sub;s!==null&&(s&&setTimeout(function(){return s.unsubscribe()}),r.sub=null,r.latest=["error",i],r.reject(i),r.notify("error",i),to(r.observers,"error",i))},complete:function(){var i=r,s=i.sub,o=i.sources,a=o===void 0?[]:o;if(s!==null){var c=a.shift();c?Np(c)?c.then(function(l){return r.sub=l.subscribe(r.handlers)},r.handlers.error):r.sub=c.subscribe(r.handlers):(s&&setTimeout(function(){return s.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),to(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(i){r.reject(i),r.sources=[],r.handlers.error(i)},r.promise.catch(function(i){}),typeof t=="function"&&(t=[new De(t)]),Np(t)?t.then(function(i){return r.start(i)},r.handlers.error):r.start(t),r}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],i=t[r];i&&i.call(t,this.latest[1]),this.sub===null&&r==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var i=this.nextResultListeners;i.size&&(this.nextResultListeners=new Set,i.forEach(function(s){return s(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(i,s){r||(r=!0,t(i,s))})},e})(De);Av(Si);function qi(n){return"incremental"in n}function tS(n){return"hasNext"in n&&"data"in n}function nS(n){return qi(n)||tS(n)}function rS(n){return We(n)&&"payload"in n}function Rv(n,e){var t=n,r=new Ar;return qi(e)&&Tn(e.incremental)&&e.incremental.forEach(function(i){for(var s=i.data,o=i.path,a=o.length-1;a>=0;--a){var c=o[a],l=!isNaN(+c),h=l?[]:{};h[c]=s,s=h}t=r.merge(t,s)}),t}function Ca(n){var e=Ol(n);return Tn(e)}function Ol(n){var e=Tn(n.errors)?n.errors.slice(0):[];return qi(n)&&Tn(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function Yi(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){r&&Object.keys(r).forEach(function(i){var s=r[i];s!==void 0&&(t[i]=s)})}),t}function Bc(n,e){return Yi(n,e,e.variables&&{variables:Yi(V(V({},n&&n.variables),e.variables))})}function $c(n){return new De(function(e){e.error(n)})}var Cv=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r};function iS(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];if(e.indexOf(i)<0)throw kt(58,i)}return n}function sS(n,e){var t=V({},n),r=function(s){typeof s=="function"?t=V(V({},t),s(t)):t=V(V({},t),s)},i=function(){return V({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),e}function oS(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?qs(e.query)||void 0:""),e}function aS(n,e){var t=V({},n),r=new Set(Object.keys(n));return rn(e,{Variable:function(i,s,o){o&&o.kind!=="VariableDefinition"&&r.delete(i.name.value)}}),r.forEach(function(i){delete t[i]}),t}var uS=Symbol.for("apollo.deprecations"),cS=Xa,kl=new ls;function lS(n){return cS[uS]||(kl.getValue()||[]).includes(n)}function Tt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return kl.withValue.apply(kl,pt([Array.isArray(n)?n:[n]],e,!1))}function Ge(n,e,t,r){r===void 0&&(r="Please remove this option."),Jr(e,function(){e in n&&globalThis.__DEV__!==!1&&Y.warn(104,t,e,r)})}function Jr(n,e){lS(n)||e()}function xp(n,e){return e?e(n):De.of()}function Ls(n){return typeof n=="function"?new hs(n):n}function pa(n){return n.request.length<=1}var hs=(function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return De.of()})},n.from=function(e){return e.length===0?n.empty():e.map(Ls).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var i=Ls(t),s=Ls(r||new n(xp)),o;return pa(i)&&pa(s)?o=new n(function(a){return e(a)?i.request(a)||De.of():s.request(a)||De.of()}):o=new n(function(a,c){return e(a)?i.request(a,c)||De.of():s.request(a,c)||De.of()}),Object.assign(o,{left:i,right:s})},n.execute=function(e,t){return e.request(sS(t.context,oS(iS(t))))||De.of()},n.concat=function(e,t){var r=Ls(e);if(pa(r))return globalThis.__DEV__!==!1&&Y.warn(47,r),r;var i=Ls(t),s;return pa(i)?s=new n(function(o){return r.request(o,function(a){return i.request(a)||De.of()})||De.of()}):s=new n(function(o,a){return r.request(o,function(c){return i.request(c,a)||De.of()})||De.of()}),Object.assign(s,{left:r,right:i})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(xp)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw kt(48)},n.prototype.onError=function(e,t){if(globalThis.__DEV__!==!1&&Jr("onError",function(){globalThis.__DEV__!==!1&&Y.warn(49)}),t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&Y.warn(50),this.onError=e,this},n})(),Vl=hs.execute;function hS(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function fS(n){var e=null,t=null,r=!1,i=[],s=[];function o(d){if(!t){if(s.length){var m=s.shift();if(Array.isArray(m)&&m[0])return m[0]({value:d,done:!1})}i.push(d)}}function a(d){t=d;var m=s.slice();m.forEach(function(g){g[1](d)}),!e||e()}function c(){r=!0;var d=s.slice();d.forEach(function(m){m[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",o),n.removeListener("error",a),n.removeListener("end",c),n.removeListener("finish",c),n.removeListener("close",c)},n.on("data",o),n.on("error",a),n.on("end",c),n.on("finish",c),n.on("close",c);function l(){return new Promise(function(d,m){if(t)return m(t);if(i.length)return d({value:i.shift(),done:!1});if(r)return d({value:void 0,done:!0});s.push([d,m])})}var h={next:function(){return l()}};return Fu&&(h[Symbol.asyncIterator]=function(){return this}),h}function dS(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,i){n.then(function(s){r({value:s,done:!1})}).catch(i)}))}};return Fu&&(t[Symbol.asyncIterator]=function(){return this}),t}function Mp(n){var e={next:function(){return n.read()}};return Fu&&(e[Symbol.asyncIterator]=function(){return this}),e}function pS(n){return!!n.body}function mS(n){return!!n.getReader}function gS(n){return!!(Fu&&n[Symbol.asyncIterator])}function yS(n){return!!n.stream}function vS(n){return!!n.arrayBuffer}function _S(n){return!!n.pipe}function ES(n){var e=n;if(pS(n)&&(e=n.body),gS(e))return hS(e);if(mS(e))return Mp(e.getReader());if(yS(e))return Mp(e.stream().getReader());if(vS(e))return dS(e.arrayBuffer());if(_S(e))return fS(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var Wh=Symbol();function bS(n){return n.extensions?Array.isArray(n.extensions[Wh]):!1}function Pv(n){return n.hasOwnProperty("graphQLErrors")}var TS=function(n){var e=pt(pt(pt([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return We(t)&&t.message||"Error message not found."}).join(`
`)},Hr=(function(n){In(e,n);function e(t){var r=t.graphQLErrors,i=t.protocolErrors,s=t.clientErrors,o=t.networkError,a=t.errorMessage,c=t.extraInfo,l=n.call(this,a)||this;return l.name="ApolloError",l.graphQLErrors=r||[],l.protocolErrors=i||[],l.clientErrors=s||[],l.networkError=o||null,l.message=a||TS(l),l.extraInfo=c,l.cause=pt(pt(pt([o],r||[],!0),i||[],!0),s||[],!0).find(function(h){return!!h})||null,l.__proto__=e.prototype,l}return e})(Error),Fp=Object.prototype.hasOwnProperty;function wS(n,e){return ir(this,void 0,void 0,function(){var t,r,i,s,o,a,c,l,h,d,m,g,E,I,R,w,k,O,x,L,Q,S,_,v;return sr(this,function(b){switch(b.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),r=(v=n.headers)===null||v===void 0?void 0:v.get("content-type"),i="boundary=",s=r?.includes(i)?r?.substring(r?.indexOf(i)+i.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(s),a="",c=ES(n),l=!0,b.label=1;case 1:return l?[4,c.next()]:[3,3];case 2:for(h=b.sent(),d=h.value,m=h.done,g=typeof d=="string"?d:t.decode(d),E=a.length-o.length+1,l=!m,a+=g,I=a.indexOf(o,E);I>-1;){if(R=void 0,S=[a.slice(0,I),a.slice(I+o.length)],R=S[0],a=S[1],w=R.indexOf(`\r
\r
`),k=IS(R.slice(0,w)),O=k["content-type"],O&&O.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(x=R.slice(w),x){if(L=Dv(n,x),Object.keys(L).length>1||"data"in L||"incremental"in L||"errors"in L||"payload"in L)if(rS(L)){if(Q={},"payload"in L){if(Object.keys(L).length===1&&L.payload===null)return[2];Q=V({},L.payload)}"errors"in L&&(Q=V(V({},Q),{extensions:V(V({},"extensions"in Q?Q.extensions:null),(_={},_[Wh]=L.errors,_))})),e(Q)}else e(L);else if(Object.keys(L).length===1&&"hasNext"in L&&!L.hasNext)return[2]}I=a.indexOf(o)}return[3,1];case 3:return[2]}})})}function IS(n){var e={};return n.split(`
`).forEach(function(t){var r=t.indexOf(":");if(r>-1){var i=t.slice(0,r).trim().toLowerCase(),s=t.slice(r+1).trim();e[i]=s}}),e}function Dv(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};Cv(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(i){var r=i;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function SS(n,e){n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n)}function AS(n){return function(e){return e.text().then(function(t){return Dv(e,t)}).then(function(t){return!Array.isArray(t)&&!Fp.call(t,"data")&&!Fp.call(t,"errors")&&Cv(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}}var Nl=function(n,e){var t;try{t=JSON.stringify(n)}catch(i){var r=kt(54,e,i.message);throw r.parseError=i,r}return t},RS={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},CS={accept:"*/*","content-type":"application/json"},PS={method:"POST"},DS={http:RS,headers:CS,options:PS},OS=function(n,e){return e(n)};function kS(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i={},s={};t.forEach(function(d){i=V(V(V({},i),d.options),{headers:V(V({},i.headers),d.headers)}),d.credentials&&(i.credentials=d.credentials),s=V(V({},s),d.http)}),i.headers&&(i.headers=VS(i.headers,s.preserveHeaderCase));var o=n.operationName,a=n.extensions,c=n.variables,l=n.query,h={operationName:o,variables:c};return s.includeExtensions&&(h.extensions=a),s.includeQuery&&(h.query=e(l,Yr)),{options:i,body:h}}function VS(n,e){if(!e){var t={};return Object.keys(Object(n)).forEach(function(s){t[s.toLowerCase()]=n[s]}),t}var r={};Object.keys(Object(n)).forEach(function(s){r[s.toLowerCase()]={originalName:s,value:n[s]}});var i={};return Object.keys(r).forEach(function(s){i[r[s].originalName]=r[s].value}),i}var NS=function(n){if(!n&&typeof fetch>"u")throw kt(51)},xS=function(n,e){var t=n.getContext(),r=t.uri;return r||(typeof e=="function"?e(n):e||"/graphql")};function MS(n,e){var t=[],r=function(d,m){t.push("".concat(d,"=").concat(encodeURIComponent(m)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var i=void 0;try{i=Nl(e.variables,"Variables map")}catch(d){return{parseError:d}}r("variables",i)}if(e.extensions){var s=void 0;try{s=Nl(e.extensions,"Extensions map")}catch(d){return{parseError:d}}r("extensions",s)}var o="",a=n,c=n.indexOf("#");c!==-1&&(o=n.substr(c),a=n.substr(0,c));var l=a.indexOf("?")===-1?"?":"&",h=a+l+t.join("&")+o;return{newURI:h}}var Lp=Xt(function(){return fetch}),Ov=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,r=n.fetch,i=n.print,s=i===void 0?OS:i,o=n.includeExtensions,a=n.preserveHeaderCase,c=n.useGETForQueries,l=n.includeUnusedVariables,h=l===void 0?!1:l,d=dn(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&NS(r||Lp);var m={http:{includeExtensions:o,preserveHeaderCase:a},options:d.fetchOptions,credentials:d.credentials,headers:d.headers};return new hs(function(g){var E=xS(g,t),I=g.getContext(),R={};if(I.clientAwareness){var w=I.clientAwareness,k=w.name,O=w.version;k&&(R["apollographql-client-name"]=k),O&&(R["apollographql-client-version"]=O)}var x=V(V({},R),I.headers),L={http:I.http,options:I.fetchOptions,credentials:I.credentials,headers:x};if(yo(["client"],g.query)){globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&Y.warn(52);var Q=bv(g.query);if(!Q)return $c(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));g.query=Q}var S=kS(g,s,DS,m,L),_=S.options,v=S.body;v.variables&&!h&&(v.variables=aS(v.variables,g.query));var b;!_.signal&&typeof AbortController<"u"&&(b=new AbortController,_.signal=b.signal);var C=function(qe){return qe.kind==="OperationDefinition"&&qe.operation==="mutation"},D=function(qe){return qe.kind==="OperationDefinition"&&qe.operation==="subscription"},T=D(No(g.query)),ke=yo(["defer"],g.query);if(c&&!g.query.definitions.some(C)&&(_.method="GET"),ke||T){_.headers=_.headers||{};var qt="multipart/mixed;";T&&ke&&globalThis.__DEV__!==!1&&Y.warn(53),T?qt+="boundary=graphql;subscriptionSpec=1.0,application/json":ke&&(qt+="deferSpec=20220824,application/json"),_.headers.accept=qt}if(_.method==="GET"){var Je=MS(E,v),Te=Je.newURI,ve=Je.parseError;if(ve)return $c(ve);E=Te}else try{_.body=Nl(v,"Payload")}catch(qe){return $c(qe)}return new De(function(qe){var Sn=r||Xt(function(){return fetch})||Lp,Bt=qe.next.bind(qe);return Sn(E,_).then(function(Ve){var Be;g.setContext({response:Ve});var mi=(Be=Ve.headers)===null||Be===void 0?void 0:Be.get("content-type");return mi!==null&&/^multipart\/mixed/i.test(mi)?wS(Ve,Bt):AS(g)(Ve).then(Bt)}).then(function(){b=void 0,qe.complete()}).catch(function(Ve){b=void 0,SS(Ve,qe)}),function(){b&&b.abort()}})})},FS=(function(n){In(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,Ov(t).request)||this;return r.options=t,r}return e})(hs);const{toString:Up,hasOwnProperty:LS}=Object.prototype,jp=Function.prototype.toString,xl=new Map;function xe(n,e){try{return Ml(n,e)}finally{xl.clear()}}function Ml(n,e){if(n===e)return!0;const t=Up.call(n),r=Up.call(e);if(t!==r)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(Bp(n,e))return!0;const i=qp(n),s=qp(e),o=i.length;if(o!==s.length)return!1;for(let a=0;a<o;++a)if(!LS.call(e,i[a]))return!1;for(let a=0;a<o;++a){const c=i[a];if(!Ml(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(Bp(n,e))return!0;const i=n.entries(),s=t==="[object Map]";for(;;){const o=i.next();if(o.done)break;const[a,c]=o.value;if(!e.has(a)||s&&!Ml(c,e.get(a)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let i=n.byteLength;if(i===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const i=jp.call(n);return i!==jp.call(e)?!1:!qS(i,jS)}}return!1}function qp(n){return Object.keys(n).filter(US,n)}function US(n){return this[n]!==void 0}const jS="{ [native code] }";function qS(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function Bp(n,e){let t=xl.get(n);if(t){if(t.has(e))return!0}else xl.set(n,t=new Set);return t.add(e),!1}function kv(n,e,t,r){var i=e.data,s=dn(e,["data"]),o=t.data,a=dn(t,["data"]);return xe(s,a)&&Pa(No(n).selectionSet,i,o,{fragmentMap:as(cs(n)),variables:r})}function Pa(n,e,t,r){if(e===t)return!0;var i=new Set;return n.selections.every(function(s){if(i.has(s)||(i.add(s),!Vo(s,r.variables))||$p(s))return!0;if(Ir(s)){var o=qn(s),a=e&&e[o],c=t&&t[o],l=s.selectionSet;if(!l)return xe(a,c);var h=Array.isArray(a),d=Array.isArray(c);if(h!==d)return!1;if(h&&d){var m=a.length;if(c.length!==m)return!1;for(var g=0;g<m;++g)if(!Pa(l,a[g],c[g],r))return!1;return!0}return Pa(l,a,c,r)}else{var E=Lu(s,r.fragmentMap);if(E)return $p(E)?!0:Pa(E.selectionSet,e,t,r)}})}function $p(n){return!!n.directives&&n.directives.some(BS)}function BS(n){return n.name.value==="nonreactive"}var Vv=ci?WeakMap:Map,Nv=Mh?WeakSet:Set,Hh=new ls,zp=!1;function xv(){zp||(zp=!0,globalThis.__DEV__!==!1&&Y.warn(64))}function Mv(n,e,t){return Hh.withValue(!0,function(){var r=Bs(n,e,t,!1);return Object.isFrozen(n)&&tu(r),r})}function $S(n,e){if(e.has(n))return e.get(n);var t=Array.isArray(n)?[]:Object.create(null);return e.set(n,t),t}function Bs(n,e,t,r,i){var s,o=t.knownChanged,a=$S(n,t.mutableTargets);if(Array.isArray(n)){for(var c=0,l=Array.from(n.entries());c<l.length;c++){var h=l[c],d=h[0],m=h[1];if(m===null){a[d]=null;continue}var g=Bs(m,e,t,r,globalThis.__DEV__!==!1?"".concat(i||"","[").concat(d,"]"):void 0);o.has(g)&&o.add(a),a[d]=g}return o.has(a)?a:n}for(var E=0,I=e.selections;E<I.length;E++){var R=I[E],w=void 0;if(r&&o.add(a),R.kind===Me.FIELD){var k=qn(R),O=R.selectionSet;if(w=a[k]||n[k],w===void 0)continue;if(O&&w!==null){var g=Bs(n[k],O,t,r,globalThis.__DEV__!==!1?"".concat(i||"",".").concat(k):void 0);o.has(g)&&(w=g)}globalThis.__DEV__===!1&&(a[k]=w),globalThis.__DEV__!==!1&&(r&&k!=="__typename"&&!(!((s=Object.getOwnPropertyDescriptor(a,k))===null||s===void 0)&&s.value)?Object.defineProperty(a,k,zS(k,w,i||"",t.operationName,t.operationType)):(delete a[k],a[k]=w))}if(R.kind===Me.INLINE_FRAGMENT&&(!R.typeCondition||t.cache.fragmentMatches(R,n.__typename))&&(w=Bs(n,R.selectionSet,t,r,i)),R.kind===Me.FRAGMENT_SPREAD){var x=R.name.value,L=t.fragmentMap[x]||(t.fragmentMap[x]=t.cache.lookupFragment(x));Y(L,59,x);var Q=qI(R);Q!=="mask"&&(w=Bs(n,L.selectionSet,t,Q==="migrate",i))}o.has(w)&&o.add(a)}return"__typename"in n&&!("__typename"in a)&&(a.__typename=n.__typename),Object.keys(a).length!==Object.keys(n).length&&o.add(a),o.has(a)?a:n}function zS(n,e,t,r,i){var s=function(){return Hh.getValue()||(globalThis.__DEV__!==!1&&Y.warn(60,r?"".concat(i," '").concat(r,"'"):"anonymous ".concat(i),"".concat(t,".").concat(n).replace(/^\./,"")),s=function(){return e}),e};return{get:function(){return s()},set:function(o){s=function(){return o}},enumerable:!0,configurable:!0}}function Fv(n,e,t,r){if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&xv(),n;var i=e.definitions.filter(function(o){return o.kind===Me.FRAGMENT_DEFINITION});typeof r>"u"&&(Y(i.length===1,61,i.length),r=i[0].name.value);var s=i.find(function(o){return o.name.value===r});return Y(!!s,62,r),n==null||xe(n,{})?n:Mv(n,s.selectionSet,{operationType:"fragment",operationName:s.name.value,fragmentMap:as(cs(e)),cache:t,mutableTargets:new Vv,knownChanged:new Nv})}function QS(n,e,t){var r;if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&xv(),n;var i=ni(e);return Y(i,63),n==null?n:Mv(n,i.selectionSet,{operationType:i.operation,operationName:(r=i.name)===null||r===void 0?void 0:r.value,fragmentMap:as(cs(e)),cache:t,mutableTargets:new Vv,knownChanged:new Nv})}var Lv=(function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=_o(HI,{max:jn["cache.fragmentQueryDocuments"]||1e3,cache:Za})}return n.prototype.lookupFragment=function(e){return null},n.prototype.batch=function(e){var t=this,r=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,i;return this.performTransaction(function(){return i=e.update(t)},r),i},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){var r=this;return t===void 0&&(t=!!e.optimistic),globalThis.__DEV__!==!1&&Ge(e,"canonizeResults","cache.readQuery"),Tt("canonizeResults",function(){return r.read(V(V({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))})},n.prototype.watchFragment=function(e){var t=this,r=e.fragment,i=e.fragmentName,s=e.from,o=e.optimistic,a=o===void 0?!0:o,c=dn(e,["fragment","fragmentName","from","optimistic"]),l=this.getFragmentDoc(r,i),h=typeof s>"u"||typeof s=="string"?s:this.identify(s),d=!!e[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var m=i||ov(r).name.value;h||globalThis.__DEV__!==!1&&Y.warn(1,m)}var g=V(V({},c),{returnPartialData:!0,id:h,query:l,optimistic:a}),E;return new De(function(I){return t.watch(V(V({},g),{immediate:!0,callback:function(R){var w=d?Fv(R.result,r,t,i):R.result;if(!(E&&kv(l,{data:E.result},{data:w},e.variables))){var k={data:w,complete:!!R.complete};R.missing&&(k.missing=Bu(R.missing.map(function(O){return O.missing}))),E=V(V({},R),{result:w}),I.next(k)}}}))})},n.prototype.readFragment=function(e,t){var r=this;return t===void 0&&(t=!!e.optimistic),globalThis.__DEV__!==!1&&Ge(e,"canonizeResults","cache.readFragment"),Tt("canonizeResults",function(){return r.read(V(V({},e),{query:r.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))})},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,i=dn(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,i=e.fragment,s=e.fragmentName,o=dn(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,s),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return globalThis.__DEV__!==!1&&Ge(e,"canonizeResults","cache.updateQuery"),this.batch({update:function(r){var i=Tt("canonizeResults",function(){return r.readQuery(e)}),s=t(i);return s==null?i:(r.writeQuery(V(V({},e),{data:s})),s)}})},n.prototype.updateFragment=function(e,t){return globalThis.__DEV__!==!1&&Ge(e,"canonizeResults","cache.updateFragment"),this.batch({update:function(r){var i=Tt("canonizeResults",function(){return r.readFragment(e)}),s=t(i);return s==null?i:(r.writeFragment(V(V({},e),{data:s})),s)}})},n})();globalThis.__DEV__!==!1&&(Lv.prototype.getMemoryInternals=s0);var Uv=(function(n){In(e,n);function e(t,r,i,s){var o,a=n.call(this,t)||this;if(a.message=t,a.path=r,a.query=i,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var c=a.path.length-1;c>=0;--c)a.missing=(o={},o[a.path[c]]=a.missing,o)}else a.missing=a.path;return a.__proto__=e.prototype,a}return e})(Error),it=Object.prototype.hasOwnProperty;function Us(n){return n==null}function jv(n,e){var t=n.__typename,r=n.id,i=n._id;if(typeof t=="string"&&(e&&(e.keyObject=Us(r)?Us(i)?void 0:{_id:i}:{id:r}),Us(r)&&!Us(i)&&(r=i),!Us(r)))return"".concat(t,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var qv={dataIdFromObject:jv,addTypename:!0,resultCaching:!0,canonizeResults:!1};function WS(n){return Yi(qv,n)}function Bv(n){var e=n.canonizeResults;return e===void 0?qv.canonizeResults:e}function HS(n,e){return Ae(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var $v=/^[_a-z][_0-9a-z]*/i;function Rr(n){var e=n.match($v);return e?e[0]:n}function Fl(n,e,t){return We(e)?He(e)?e.every(function(r){return Fl(n,r,t)}):n.selections.every(function(r){if(Ir(r)&&Vo(r,t)){var i=qn(r);return it.call(e,i)&&(!r.selectionSet||Fl(r.selectionSet,e[i],t))}return!0}):!1}function Oi(n){return We(n)&&!Ae(n)&&!He(n)}function GS(){return new Ar}function zv(n,e){var t=as(cs(n));return{fragmentMap:t,lookupFragment:function(r){var i=t[r];return!i&&e&&(i=e.lookup(r)),i||null}}}var Da=Object.create(null),zc=function(){return Da},Qp=Object.create(null),Eo=(function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,s){return tu(Ae(i)?r.get(i.__ref,s):i&&i[s])},this.canRead=function(i){return Ae(i)?r.has(i.__ref):typeof i=="object"},this.toReference=function(i,s){if(typeof i=="string")return ji(i);if(Ae(i))return i;var o=r.policies.identify(i)[0];if(o){var a=ji(o);return s&&r.merge(o,i),a}}}return n.prototype.toObject=function(){return V({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),it.call(this.data,e)){var r=this.data[e];if(r&&it.call(r,t))return r[t]}if(t==="__typename"&&it.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof tr)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),it.call(this.data,e))return this.data[e];if(this instanceof tr)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var r=this,i;Ae(e)&&(e=e.__ref),Ae(t)&&(t=t.__ref);var s=typeof e=="string"?this.lookup(i=e):e,o=typeof t=="string"?this.lookup(i=t):t;if(o){Y(typeof i=="string",2);var a=new Ar(JS).merge(s,o);if(this.data[i]=a,a!==s&&(delete this.refs[i],this.group.caching)){var c=Object.create(null);s||(c.__exists=1),Object.keys(o).forEach(function(l){if(!s||s[l]!==a[l]){c[l]=1;var h=Rr(l);h!==l&&!r.policies.hasKeyArgs(a.__typename,h)&&(c[h]=1),a[l]===void 0&&!(r instanceof tr)&&delete a[l]}}),c.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[i]===a.__typename&&delete c.__typename,Object.keys(c).forEach(function(l){return r.group.dirty(i,l)})}}},n.prototype.modify=function(e,t){var r=this,i=this.lookup(e);if(i){var s=Object.create(null),o=!1,a=!0,c={DELETE:Da,INVALIDATE:Qp,isReference:Ae,toReference:this.toReference,canRead:this.canRead,readField:function(l,h){return r.policies.readField(typeof l=="string"?{fieldName:l,from:h||ji(e)}:l,{store:r})}};if(Object.keys(i).forEach(function(l){var h=Rr(l),d=i[l];if(d!==void 0){var m=typeof t=="function"?t:t[l]||t[h];if(m){var g=m===zc?Da:m(tu(d),V(V({},c),{fieldName:h,storeFieldName:l,storage:r.getStorage(e,l)}));if(g===Qp)r.group.dirty(e,l);else if(g===Da&&(g=void 0),g!==d&&(s[l]=g,o=!0,d=g,globalThis.__DEV__!==!1)){var E=function(L){if(r.lookup(L.__ref)===void 0)return globalThis.__DEV__!==!1&&Y.warn(3,L),!0};if(Ae(g))E(g);else if(Array.isArray(g))for(var I=!1,R=void 0,w=0,k=g;w<k.length;w++){var O=k[w];if(Ae(O)){if(I=!0,E(O))break}else if(typeof O=="object"&&O){var x=r.policies.identify(O)[0];x&&(R=O)}if(I&&R!==void 0){globalThis.__DEV__!==!1&&Y.warn(4,R);break}}}}d!==void 0&&(a=!1)}}),o)return this.merge(e,s),a&&(this instanceof tr?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var i,s=this.lookup(e);if(s){var o=this.getFieldValue(s,"__typename"),a=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,a?(i={},i[a]=zc,i):zc)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(it.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof tr&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(i){it.call(e.policies.rootTypenamesById,i)||r.push(i)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(s){e&&it.call(e,s)||t.delete(s)}),e){var r=e.__META,i=dn(e,["__META"]);Object.keys(i).forEach(function(s){t.merge(s,i[s])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof tr?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(o){it.call(r,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete r[o])});var i=Object.keys(r);if(i.length){for(var s=this;s instanceof tr;)s=s.parent;i.forEach(function(o){return s.delete(o)})}return i},n.prototype.findChildRefIds=function(e){if(!it.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var i=new Set([r]);i.forEach(function(s){Ae(s)&&(t[s.__ref]=!0),We(s)&&Object.keys(s).forEach(function(o){var a=s[o];We(a)&&i.add(a)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n})(),Qv=(function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?yv():null,this.keyMaker=new Gn(ci)},n.prototype.depend=function(e,t){if(this.d){this.d(Qc(e,t));var r=Rr(t);r!==t&&this.d(Qc(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(Qc(e,t),t==="__exists"?"forget":"setDirty")},n})();function Qc(n,e){return e+"#"+n}function Wp(n,e){no(n)&&n.group.depend(e,"__exists")}(function(n){var e=(function(t){In(r,t);function r(i){var s=i.policies,o=i.resultCaching,a=o===void 0?!0:o,c=i.seed,l=t.call(this,s,new Qv(a))||this;return l.stump=new KS(l),l.storageTrie=new Gn(ci),c&&l.replace(c),l}return r.prototype.addLayer=function(i,s){return this.stump.addLayer(i,s)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r})(n);n.Root=e})(Eo||(Eo={}));var tr=(function(n){In(e,n);function e(t,r,i,s){var o=n.call(this,r.policies,s)||this;return o.id=t,o.parent=r,o.replay=i,o.group=s,i(o),o}return e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,i=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var o=r.data[s],a=i.lookup(s);a?o?o!==a&&Object.keys(o).forEach(function(c){xe(o[c],a[c])||r.group.dirty(s,c)}):(r.group.dirty(s,"__exists"),Object.keys(a).forEach(function(c){r.group.dirty(s,c)})):r.delete(s)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return V(V({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return it.call(this.data,t)?V(V({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e})(Eo),KS=(function(n){In(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new Qv(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e})(tr);function JS(n,e,t){var r=n[t],i=e[t];return xe(r,i)?r:i}function no(n){return!!(n instanceof Eo&&n.group.caching)}function YS(n){return We(n)?He(n)?n.slice(0):V({__proto__:Object.getPrototypeOf(n)},n):n}var Hp=(function(){function n(){this.known=new(Mh?WeakSet:Set),this.pool=new Gn(ci),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return We(e)&&this.known.has(e)},n.prototype.pass=function(e){if(We(e)){var t=YS(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(We(e)){var r=this.passes.get(e);if(r)return r;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:{if(this.known.has(e))return e;var s=e.map(this.admit,this),o=this.pool.lookupArray(s);return o.array||(this.known.add(o.array=s),globalThis.__DEV__!==!1&&Object.freeze(s)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),c=[a],l=this.sortedKeys(e);c.push(l.json);var h=c.length;l.sorted.forEach(function(g){c.push(t.admit(e[g]))});var o=this.pool.lookupArray(c);if(!o.object){var d=o.object=Object.create(a);this.known.add(d),l.sorted.forEach(function(g,E){d[g]=c[h+E]}),globalThis.__DEV__!==!1&&Object.freeze(d)}return o.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var i=JSON.stringify(t);(r.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,r.keys={sorted:t,json:i})}return r.keys},n})();function Gp(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var XS=(function(){function n(e){var t=this;this.knownResults=new(ci?WeakMap:Map),this.config=Yi(e,{addTypename:e.addTypename!==!1,canonizeResults:Bv(e)}),this.canon=e.canon||new Hp,this.executeSelectionSet=_o(function(r){var i,s=r.context.canonizeResults,o=Gp(r);o[3]=!s;var a=(i=t.executeSelectionSet).peek.apply(i,o);return a?s?V(V({},a),{result:t.canon.admit(a.result)}):a:(Wp(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||jn["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:Gp,makeCacheKey:function(r,i,s,o){if(no(s.store))return s.store.makeCacheKey(r,Ae(i)?i.__ref:i,s.varString,o)}}),this.executeSubSelectedArray=_o(function(r){return Wp(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||jn["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var i=r.field,s=r.array,o=r.context;if(no(o.store))return o.store.makeCacheKey(i,s,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new Hp},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,i=e.rootId,s=i===void 0?"ROOT_QUERY":i,o=e.variables,a=e.returnPartialData,c=a===void 0?!0:a,l=e.canonizeResults,h=l===void 0?this.config.canonizeResults:l,d=this.config.cache.policies;o=V(V({},Fh(sv(r))),o);var m=ji(s),g=this.executeSelectionSet({selectionSet:No(r).selectionSet,objectOrReference:m,enclosingRef:m,context:V({store:t,query:r,policies:d,variables:o,varString:dr(o),canonizeResults:h},zv(r,this.config.fragments))}),E;if(g.missing&&(E=[new Uv(ZS(g.missing),g.missing,r,o)],!c))throw E[0];return{result:g.result,complete:!E,missing:E}},n.prototype.isFresh=function(e,t,r,i){if(no(i.store)&&this.knownResults.get(e)===r){var s=this.executeSelectionSet.peek(r,t,i,this.canon.isKnown(e));if(s&&e===s.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,i=e.objectOrReference,s=e.enclosingRef,o=e.context;if(Ae(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var a=o.variables,c=o.policies,l=o.store,h=l.getFieldValue(i,"__typename"),d=[],m,g=new Ar;this.config.addTypename&&typeof h=="string"&&!c.rootIdsByTypename[h]&&d.push({__typename:h});function E(O,x){var L;return O.missing&&(m=g.merge(m,(L={},L[x]=O.missing,L))),O.result}var I=new Set(r.selections);I.forEach(function(O){var x,L;if(Vo(O,a))if(Ir(O)){var Q=c.readField({fieldName:O.name.value,field:O,variables:o.variables,from:i},o),S=qn(O);Q===void 0?qh.added(O)||(m=g.merge(m,(x={},x[S]="Can't find field '".concat(O.name.value,"' on ").concat(Ae(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),x))):He(Q)?Q.length>0&&(Q=E(t.executeSubSelectedArray({field:O,array:Q,enclosingRef:s,context:o}),S)):O.selectionSet?Q!=null&&(Q=E(t.executeSelectionSet({selectionSet:O.selectionSet,objectOrReference:Q,enclosingRef:Ae(Q)?Q:s,context:o}),S)):o.canonizeResults&&(Q=t.canon.pass(Q)),Q!==void 0&&d.push((L={},L[S]=Q,L))}else{var _=Lu(O,o.lookupFragment);if(!_&&O.kind===Me.FRAGMENT_SPREAD)throw kt(10,O.name.value);_&&c.fragmentMatches(_,h)&&_.selectionSet.selections.forEach(I.add,I)}});var R=Bu(d),w={result:R,missing:m},k=o.canonizeResults?this.canon.admit(w):tu(w);return k.result&&this.knownResults.set(k.result,r),k},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,r=e.field,i=e.array,s=e.enclosingRef,o=e.context,a,c=new Ar;function l(h,d){var m;return h.missing&&(a=c.merge(a,(m={},m[d]=h.missing,m))),h.result}return r.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map(function(h,d){return h===null?null:He(h)?l(t.executeSubSelectedArray({field:r,array:h,enclosingRef:s,context:o}),d):r.selectionSet?l(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:h,enclosingRef:Ae(h)?h:s,context:o}),d):(globalThis.__DEV__!==!1&&eA(o.store,r,h),h)}),{result:o.canonizeResults?this.canon.admit(i):i,missing:a}},n})();function ZS(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function eA(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(i){We(i)&&(Y(!Ae(i),11,HS(n,i),e.name.value),Object.values(i).forEach(r.add,r))})}}var Gh=new ls,Kp=new WeakMap;function ro(n){var e=Kp.get(n);return e||Kp.set(n,e={vars:new Set,dep:yv()}),e}function Jp(n){ro(n).vars.forEach(function(e){return e.forgetCache(n)})}function tA(n){ro(n).vars.forEach(function(e){return e.attachCache(n)})}function nA(n){var e=new Set,t=new Set,r=function(s){if(arguments.length>0){if(n!==s){n=s,e.forEach(function(c){ro(c).dep.dirty(r),rA(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(n)})}}else{var a=Gh.getValue();a&&(i(a),ro(a).dep(r))}return n};r.onNextChange=function(s){return t.add(s),function(){t.delete(s)}};var i=r.attachCache=function(s){return e.add(s),ro(s).vars.add(r),r};return r.forgetCache=function(s){return e.delete(s)},r}function rA(n){n.broadcastWatches&&n.broadcastWatches()}var Yp=Object.create(null);function Kh(n){var e=JSON.stringify(n);return Yp[e]||(Yp[e]=Object.create(null))}function Xp(n){var e=Kh(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var i=function(o,a){return r.readField(a,o)},s=r.keyObject=Jh(n,function(o){var a=Bi(r.storeObject,o,i);return a===void 0&&t!==r.storeObject&&it.call(t,o[0])&&(a=Bi(t,o,Hv)),Y(a!==void 0,5,o.join("."),t),a});return"".concat(r.typename,":").concat(JSON.stringify(s))})}function Zp(n){var e=Kh(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var i=r.field,s=r.variables,o=r.fieldName,a=Jh(n,function(l){var h=l[0],d=h.charAt(0);if(d==="@"){if(i&&Tn(i.directives)){var m=h.slice(1),g=i.directives.find(function(w){return w.name.value===m}),E=g&&Uu(g,s);return E&&Bi(E,l.slice(1))}return}if(d==="$"){var I=h.slice(1);if(s&&it.call(s,I)){var R=l.slice(0);return R[0]=I,Bi(s,R)}return}if(t)return Bi(t,l)}),c=JSON.stringify(a);return(t||c!=="{}")&&(o+=":"+c),o})}function Jh(n,e){var t=new Ar;return Wv(n).reduce(function(r,i){var s,o=e(i);if(o!==void 0){for(var a=i.length-1;a>=0;--a)o=(s={},s[i[a]]=o,s);r=t.merge(r,o)}return r},Object.create(null))}function Wv(n){var e=Kh(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(i,s){He(i)?(Wv(i).forEach(function(o){return t.push(r.concat(o))}),r.length=0):(r.push(i),He(n[s+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function Hv(n,e){return n[e]}function Bi(n,e,t){return t=t||Hv,Gv(e.reduce(function r(i,s){return He(i)?i.map(function(o){return r(o,s)}):i&&t(i,s)},n))}function Gv(n){return We(n)?He(n)?n.map(Gv):Jh(Object.keys(n).sort(),function(e){return Bi(n,e)}):n}function Ll(n){return n.args!==void 0?n.args:n.field?Uu(n.field,n.variables):null}var iA=function(){},em=function(n,e){return e.fieldName},tm=function(n,e,t){var r=t.mergeObjects;return r(n,e)},nm=function(n,e){return e},sA=(function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=V({dataIdFromObject:jv},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,i=this,s=t&&(t.typename||((r=t.storeObject)===null||r===void 0?void 0:r.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=t&&t.storeObject||e,a=V(V({},t),{typename:s,storeObject:o,readField:t&&t.readField||function(){var d=Yh(arguments,o);return i.readField(d,{store:i.cache.data,variables:d.variables})}}),c,l=s&&this.getTypePolicy(s),h=l&&l.keyFn||this.config.dataIdFromObject;return Hh.withValue(!0,function(){for(;h;){var d=h(V(V({},e),o),a);if(He(d))h=Xp(d);else{c=d;break}}}),c=c?String(c):void 0,a.keyObject?[c,a.keyObject]:[c]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var i=e[r],s=i.queryType,o=i.mutationType,a=i.subscriptionType,c=dn(i,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),a&&t.setRootTypename("Subscription",r),it.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]})},n.prototype.updateTypePolicy=function(e,t,r){var i=this.getTypePolicy(e),s=t.keyFields,o=t.fields;function a(c,l){c.merge=typeof l=="function"?l:l===!0?tm:l===!1?nm:c.merge}a(i,t.merge),i.keyFn=s===!1?iA:He(s)?Xp(s):typeof s=="function"?s:i.keyFn,o&&Object.keys(o).forEach(function(c){var l=r[c];(!l||l?.typename!==e)&&(l=r[c]={typename:e});var h=o[c];if(typeof h=="function")l.read=h;else{var d=h.keyArgs,m=h.read,g=h.merge;l.keyFn=d===!1?em:He(d)?Zp(d):typeof d=="function"?d:l.keyFn,typeof m=="function"&&(l.read=m),a(l,g)}l.read&&l.merge&&(l.keyFn=l.keyFn||em)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var r="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[r];t!==i&&(Y(!i||i===e,6,e),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(i){t.getSupertypeSet(i,!0).add(r);var s=i.match($v);(!s||s[0]!==i)&&t.fuzzySubtypes.set(i,new RegExp(i))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!it.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var i=this.supertypeMap.get(e);!i&&this.fuzzySubtypes.size&&(i=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,a){if(o.test(e)){var c=t.supertypeMap.get(a);c&&c.forEach(function(l){return i.add(l)})}})),i&&i.size&&i.forEach(function(o){var a=t.getTypePolicy(o),c=a.fields,l=dn(a,["fields"]);Object.assign(r,l),Object.assign(r.fields,c)})}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach(function(o){t.updateTypePolicy(e,o,t.typePolicies[e].fields)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t){if(e)return this.getTypePolicy(e).fields[t]},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),c=[a],l=function(E){var I=s.getSupertypeSet(E,!1);I&&I.size&&c.indexOf(I)<0&&c.push(I)},h=!!(r&&this.fuzzySubtypes.size),d=!1,m=0;m<c.length;++m){var g=c[m];if(g.has(o))return a.has(o)||(d&&globalThis.__DEV__!==!1&&Y.warn(7,t,o),a.add(o)),!0;g.forEach(l),h&&m===c.length-1&&Fl(e.selectionSet,r,i)&&(h=!1,d=!0,this.fuzzySubtypes.forEach(function(E,I){var R=t.match(E);R&&R[0]===t&&l(I)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t);return!!(r&&r.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,r=e.fieldName,i=this.getFieldPolicy(t,r),s,o=i&&i.keyFn;if(o&&t)for(var a={typename:t,fieldName:r,field:e.field||null,variables:e.variables},c=Ll(e);o;){var l=o(c,a);if(He(l))o=Zp(l);else{s=l||r;break}}return s===void 0&&(s=e.field?T0(e.field,e.variables):iv(r,Ll(e))),s===!1?r:r===Rr(s)?s:r+":"+s},n.prototype.readField=function(e,t){var r=e.from;if(r){var i=e.field||e.fieldName;if(i){if(e.typename===void 0){var s=t.store.getFieldValue(r,"__typename");s&&(e.typename=s)}var o=this.getStoreFieldName(e),a=Rr(o),c=t.store.getFieldValue(r,o),l=this.getFieldPolicy(e.typename,a),h=l&&l.read;if(h){var d=rm(this,r,e,t,t.store.getStorage(Ae(r)?r.__ref:r,o));return Gh.withValue(this.cache,h,[c,d])}return c}}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var i=this.getFieldPolicy(e,t),s=i&&i.merge;return!s&&r&&(i=this.getTypePolicy(r),s=i&&i.merge),s},n.prototype.runMergeFunction=function(e,t,r,i,s){var o=r.field,a=r.typename,c=r.merge;return c===tm?Kv(i.store)(e,t):c===nm?t:(i.overwrite&&(e=void 0),c(e,t,rm(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:i.variables},i,s||Object.create(null))))},n})();function rm(n,e,t,r,i){var s=n.getStoreFieldName(t),o=Rr(s),a=t.variables||r.variables,c=r.store,l=c.toReference,h=c.canRead;return{args:Ll(t),field:t.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:Ae,toReference:l,storage:i,cache:n.cache,canRead:h,readField:function(){return n.readField(Yh(arguments,e,a),r)},mergeObjects:Kv(r.store)}}function Yh(n,e,t){var r=n[0],i=n[1],s=n.length,o;return typeof r=="string"?o={fieldName:r,from:s>1?i:e}:(o=V({},r),it.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&Y.warn(8,Hy(Array.from(n))),o.variables===void 0&&(o.variables=t),o}function Kv(n){return function(t,r){if(He(t)||He(r))throw kt(9);if(We(t)&&We(r)){var i=n.getFieldValue(t,"__typename"),s=n.getFieldValue(r,"__typename"),o=i&&s&&i!==s;if(o)return r;if(Ae(t)&&Oi(r))return n.merge(t.__ref,r),t;if(Oi(t)&&Ae(r))return n.merge(t,r.__ref),r;if(Oi(t)&&Oi(r))return V(V({},t),r)}return r}}function Wc(n,e,t){var r="".concat(e).concat(t),i=n.flavors.get(r);return i||n.flavors.set(r,i=n.clientOnly===e&&n.deferred===t?n:V(V({},n),{clientOnly:e,deferred:t})),i}var oA=(function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,i=t.query,s=t.result,o=t.dataId,a=t.variables,c=t.overwrite,l=ni(i),h=GS();a=V(V({},Fh(l)),a);var d=V(V({store:e,written:Object.create(null),merge:function(g,E){return h.merge(g,E)},variables:a,varString:dr(a)},zv(i,this.fragments)),{overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),m=this.processSelectionSet({result:s||Object.create(null),dataId:o,selectionSet:l.selectionSet,mergeTree:{map:new Map},context:d});if(!Ae(m))throw kt(12,s);return d.incomingById.forEach(function(g,E){var I=g.storeObject,R=g.mergeTree,w=g.fieldNodeSet,k=ji(E);if(R&&R.map.size){var O=r.applyMerges(R,k,I,d);if(Ae(O))return;I=O}if(globalThis.__DEV__!==!1&&!d.overwrite){var x=Object.create(null);w.forEach(function(S){S.selectionSet&&(x[S.name.value]=!0)});var L=function(S){return x[Rr(S)]===!0},Q=function(S){var _=R&&R.map.get(S);return!!(_&&_.info&&_.info.merge)};Object.keys(I).forEach(function(S){L(S)&&!Q(S)&&aA(k,I,S,d.store)})}e.merge(E,I)}),e.retain(m.__ref),m},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,i=e.result,s=e.selectionSet,o=e.context,a=e.mergeTree,c=this.cache.policies,l=Object.create(null),h=r&&c.rootTypenamesById[r]||Rl(i,s,o.fragmentMap)||r&&o.store.get(r,"__typename");typeof h=="string"&&(l.__typename=h);var d=function(){var O=Yh(arguments,l,o.variables);if(Ae(O.from)){var x=o.incomingById.get(O.from.__ref);if(x){var L=c.readField(V(V({},O),{from:x.storeObject}),o);if(L!==void 0)return L}}return c.readField(O,o)},m=new Set;this.flattenFields(s,i,o,h).forEach(function(O,x){var L,Q=qn(x),S=i[Q];if(m.add(x),S!==void 0){var _=c.getStoreFieldName({typename:h,fieldName:x.name.value,field:x,variables:O.variables}),v=im(a,_),b=t.processFieldValue(S,x,x.selectionSet?Wc(O,!1,!1):O,v),C=void 0;x.selectionSet&&(Ae(b)||Oi(b))&&(C=d("__typename",b));var D=c.getMergeFunction(h,x.name.value,C);D?v.info={field:x,typename:h,merge:D}:sm(a,_),l=O.merge(l,(L={},L[_]=b,L))}else globalThis.__DEV__!==!1&&!O.clientOnly&&!O.deferred&&!qh.added(x)&&!c.getReadFunction(h,x.name.value)&&globalThis.__DEV__!==!1&&Y.error(13,qn(x),i)});try{var g=c.identify(i,{typename:h,selectionSet:s,fragmentMap:o.fragmentMap,storeObject:l,readField:d}),E=g[0],I=g[1];r=r||E,I&&(l=o.merge(l,I))}catch(O){if(!r)throw O}if(typeof r=="string"){var R=ji(r),w=o.written[r]||(o.written[r]=[]);if(w.indexOf(s)>=0||(w.push(s),this.reader&&this.reader.isFresh(i,R,s,o)))return R;var k=o.incomingById.get(r);return k?(k.storeObject=o.merge(k.storeObject,l),k.mergeTree=Ul(k.mergeTree,a),m.forEach(function(O){return k.fieldNodeSet.add(O)})):o.incomingById.set(r,{storeObject:l,mergeTree:nu(a)?void 0:a,fieldNodeSet:m}),R}return l},n.prototype.processFieldValue=function(e,t,r,i){var s=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?Sv(e):e:He(e)?e.map(function(o,a){var c=s.processFieldValue(o,t,r,im(i,a));return sm(i,a),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:i})},n.prototype.flattenFields=function(e,t,r,i){i===void 0&&(i=Rl(t,e,r.fragmentMap));var s=new Map,o=this.cache.policies,a=new Gn(!1);return(function c(l,h){var d=a.lookup(l,h.clientOnly,h.deferred);d.visited||(d.visited=!0,l.selections.forEach(function(m){if(Vo(m,r.variables)){var g=h.clientOnly,E=h.deferred;if(!(g&&E)&&Tn(m.directives)&&m.directives.forEach(function(w){var k=w.name.value;if(k==="client"&&(g=!0),k==="defer"){var O=Uu(w,r.variables);(!O||O.if!==!1)&&(E=!0)}}),Ir(m)){var I=s.get(m);I&&(g=g&&I.clientOnly,E=E&&I.deferred),s.set(m,Wc(r,g,E))}else{var R=Lu(m,r.lookupFragment);if(!R&&m.kind===Me.FRAGMENT_SPREAD)throw kt(14,m.name.value);R&&o.fragmentMatches(R,i,t,r.variables)&&c(R.selectionSet,Wc(r,g,E))}}}))})(e,r),s},n.prototype.applyMerges=function(e,t,r,i,s){var o,a=this;if(e.map.size&&!Ae(r)){var c=!He(r)&&(Ae(t)||Oi(t))?t:void 0,l=r;c&&!s&&(s=[Ae(c)?c.__ref:c]);var h,d=function(m,g){return He(m)?typeof g=="number"?m[g]:void 0:i.store.getFieldValue(m,String(g))};e.map.forEach(function(m,g){var E=d(c,g),I=d(l,g);if(I!==void 0){s&&s.push(g);var R=a.applyMerges(m,E,I,i,s);R!==I&&(h=h||new Map,h.set(g,R)),s&&Y(s.pop()===g)}}),h&&(r=He(l)?l.slice(0):V({},l),h.forEach(function(m,g){r[g]=m}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,i,s&&(o=i.store).getStorage.apply(o,s)):r},n})(),Jv=[];function im(n,e){var t=n.map;return t.has(e)||t.set(e,Jv.pop()||{map:new Map}),t.get(e)}function Ul(n,e){if(n===e||!e||nu(e))return n;if(!n||nu(n))return e;var t=n.info&&e.info?V(V({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,i=r?new Map:n.map.size?n.map:e.map,s={info:t,map:i};if(r){var o=new Set(e.map.keys());n.map.forEach(function(a,c){s.map.set(c,Ul(a,e.map.get(c))),o.delete(c)}),o.forEach(function(a){s.map.set(a,Ul(e.map.get(a),n.map.get(a)))})}return s}function nu(n){return!n||!(n.info||n.map.size)}function sm(n,e){var t=n.map,r=t.get(e);r&&nu(r)&&(Jv.push(r),t.delete(e))}var om=new Set;function aA(n,e,t,r){var i=function(d){var m=r.getFieldValue(d,t);return typeof m=="object"&&m},s=i(n);if(s){var o=i(e);if(o&&!Ae(s)&&!xe(s,o)&&!Object.keys(s).every(function(d){return r.getFieldValue(o,d)!==void 0})){var a=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),c=Rr(t),l="".concat(a,".").concat(c);if(!om.has(l)){om.add(l);var h=[];!He(s)&&!He(o)&&[s,o].forEach(function(d){var m=r.getFieldValue(d,"__typename");typeof m=="string"&&!h.includes(m)&&h.push(m)}),globalThis.__DEV__!==!1&&Y.warn(15,c,a,h.length?"either ensure all objects of type "+h.join(" and ")+" have an ID or a custom merge function, or ":"",l,V({},s),V({},o))}}}}var Yv=(function(n){In(e,n);function e(t){t===void 0&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new vv(qh),r.assumeImmutableResults=!0,r.makeVar=nA,r.txCount=0,globalThis.__DEV__!==!1&&(Ge(t,"addTypename","InMemoryCache","Please remove the `addTypename` option when initializing `InMemoryCache`."),Ge(t,"canonizeResults","InMemoryCache","Please remove the `canonizeResults` option when initializing `InMemoryCache`.")),r.config=WS(t),r.addTypename=!!r.config.addTypename,r.policies=new sA({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return e.prototype.init=function(){var t=this.data=new Eo.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,i=this.storeReader,s=this.config.fragments;this.addTypenameTransform.resetCache(),s?.resetCaches(),this.storeWriter=new oA(this,this.storeReader=new XS({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Bv(this.config),canon:t?void 0:i&&i.canon,fragments:s}),s),this.maybeBroadcastWatch=_o(function(o,a){return r.broadcastWatch(o,a)},{max:this.config.resultCacheMaxSize||jn["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var a=o.optimistic?r.optimisticData:r.data;if(no(a)){var c=o.optimistic,l=o.id,h=o.variables;return a.makeCacheKey(o.query,o.callback,dr({optimistic:c,id:l,variables:h}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){globalThis.__DEV__!==!1&&Ge(t,"canonizeResults","cache.read");var r=t.returnPartialData,i=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(V(V({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(s){if(s instanceof Uv)return null;throw s}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(it.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return globalThis.__DEV__!==!1&&Ge(t,"canonizeResults","cache.diff"),this.storeReader.diffQueryAgainstStore(V(V({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||tA(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&Jp(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){globalThis.__DEV__!==!1&&Ge(t||{},"resetResultIdentities","cache.gc","First ensure all usages of `canonizeResults` are removed, then remove this option."),dr.reset(),Yr.reset();var r=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),r},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Ae(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){globalThis.__DEV__!==!1&&Y.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(it.call(t,"id"))return!1;t=V(V({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),dr.reset(),t&&t.discardWatches?(this.watches.forEach(function(i){return r.maybeBroadcastWatch.forget(i)}),this.watches.clear(),Jp(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var r=this,i=t.update,s=t.optimistic,o=s===void 0?!0:s,a=t.removeOptimistic,c=t.onWatchUpdated,l,h=function(m){var g=r,E=g.data,I=g.optimisticData;++r.txCount,m&&(r.data=r.optimisticData=m);try{return l=i(r)}finally{--r.txCount,r.data=E,r.optimisticData=I}},d=new Set;return c&&!this.txCount&&this.broadcastWatches(V(V({},t),{onWatchUpdated:function(m){return d.add(m),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,h):o===!1?h(this.data):h(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),c&&d.size?(this.broadcastWatches(V(V({},t),{onWatchUpdated:function(m,g){var E=c.call(this,m,g);return E!==!1&&d.delete(m),E}})),d.size&&d.forEach(function(m){return r.maybeBroadcastWatch.dirty(m)})):this.broadcastWatches(t),l},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||r!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.fragmentMatches=function(t,r){return this.policies.fragmentMatches(t,r)},e.prototype.lookupFragment=function(t){var r;return((r=this.config.fragments)===null||r===void 0?void 0:r.lookup(t))||null},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(i){return r.maybeBroadcastWatch(i,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var i=this,s=t.lastDiff,o=Tt("canonizeResults",function(){return i.diff(t)});r&&(t.optimistic&&typeof r.optimistic=="string"&&(o.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,t,o,s)===!1)||(!s||!xe(s.result,o.result))&&t.callback(t.lastDiff=o,s)},e})(Lv);globalThis.__DEV__!==!1&&(Yv.prototype.getMemoryInternals=i0);var we;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(we||(we={}));function ki(n){return n?n<7:!1}var am=Object.assign,uA=Object.hasOwnProperty,Oa=(function(n){In(e,n);function e(t){var r=t.queryManager,i=t.queryInfo,s=t.options,o=this,a=e.inactiveOnCreation.getValue();o=n.call(this,function(w){o._getOrCreateQuery();try{var k=w._subscription._observer;k&&!k.error&&(k.error=cA)}catch{}var O=!o.observers.size;o.observers.add(w);var x=o.last;return x&&x.error?w.error&&w.error(x.error):x&&x.result&&w.next&&w.next(o.maskResult(x.result)),O&&o.reobserve().catch(function(){}),function(){o.observers.delete(w)&&!o.observers.size&&o.tearDownQuery()}})||this,o.observers=new Set,o.subscriptions=new Set,o.dirty=!1,o._getOrCreateQuery=function(){return a&&(r.queries.set(o.queryId,i),a=!1),o.queryManager.getOrCreateQuery(o.queryId)},o.queryInfo=i,o.queryManager=r,o.waitForOwnResult=Hc(s.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var c=r.defaultOptions.watchQuery,l=c===void 0?{}:c,h=l.fetchPolicy,d=h===void 0?"cache-first":h,m=s.fetchPolicy,g=m===void 0?d:m,E=s.initialFetchPolicy,I=E===void 0?g==="standby"?d:g:E;o.options=V(V({},s),{initialFetchPolicy:I,fetchPolicy:g}),o.queryId=i.queryId||r.generateQueryId();var R=ni(o.query);return o.queryName=R&&R.name&&R.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return globalThis.__DEV__!==!1&&Jr("observableQuery.result",function(){globalThis.__DEV__!==!1&&Y.warn(23)}),new Promise(function(r,i){var s={next:function(a){r(a),t.observers.delete(s),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=t.subscribe(s)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){var r=this;t===void 0&&(t=!0);var i=Tt("getLastResult",function(){return r.getLastResult(!0)}),s=this.queryInfo.networkStatus||i&&i.networkStatus||we.ready,o=V(V({},i),{loading:ki(s),networkStatus:s}),a=this.options.fetchPolicy,c=a===void 0?"cache-first":a;if(!(Hc(c)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(o.data=l.result),xe(o.data,{})&&(o.data=void 0),l.complete?(delete o.partial,l.complete&&o.networkStatus===we.loading&&(c==="cache-first"||c==="cache-only")&&(o.networkStatus=we.ready,o.loading=!1)):o.partial=!0,o.networkStatus===we.ready&&(o.error||o.errors)&&(o.networkStatus=we.error),globalThis.__DEV__!==!1&&!l.complete&&!this.options.partialRefetch&&!o.loading&&!o.data&&!o.error&&Xv(l.missing)}return t&&this.updateLastResult(o),o},e.prototype.getCurrentResult=function(t){return t===void 0&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,r){if(!this.last)return!0;var i=this.queryManager.getDocumentInfo(this.query),s=this.queryManager.dataMasking,o=s?i.nonReactiveQuery:this.query,a=s||i.hasNonreactiveDirective?!kv(o,this.last.result,t,this.variables):!xe(this.last.result,t);return a||r&&!xe(this.last.variables,r)},e.prototype.getLast=function(t,r){var i=this.last;if(i&&i[t]&&(!r||xe(i.variables,this.variables)))return i[t]},e.prototype.getLastResult=function(t){return globalThis.__DEV__!==!1&&Jr("getLastResult",function(){globalThis.__DEV__!==!1&&Y.warn(24)}),this.getLast("result",t)},e.prototype.getLastError=function(t){return globalThis.__DEV__!==!1&&Jr("getLastError",function(){globalThis.__DEV__!==!1&&Y.warn(25)}),this.getLast("error",t)},e.prototype.resetLastResults=function(){globalThis.__DEV__!==!1&&Jr("resetLastResults",function(){globalThis.__DEV__!==!1&&Y.warn(26)}),delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&Y.warn(27),this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,i={pollInterval:0},s=this.options.fetchPolicy;if(s==="no-cache"?i.fetchPolicy="no-cache":i.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&uA.call(t,"variables")){var o=sv(this.query),a=o.variableDefinitions;(!a||!a.some(function(c){return c.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&Y.warn(28,t,((r=o.name)===null||r===void 0?void 0:r.value)||o)}return t&&!xe(this.options.variables,t)&&(i.variables=this.options.variables=V(V({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(i,we.refetch)},e.prototype.fetchMore=function(t){var r=this,i=V(V({},t.query?t:V(V(V(V({},this.options),{query:this.options.query}),t),{variables:V(V({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});i.query=this.transformDocument(i.query);var s=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):i.query;var o=this.queryInfo,a=o.networkStatus;o.networkStatus=we.fetchMore,i.notifyOnNetworkStatusChange&&this.observe();var c=new Set,l=t?.updateQuery,h=this.options.fetchPolicy!=="no-cache";return h||Y(l,29),this.queryManager.fetchQuery(s,i,we.fetchMore).then(function(d){if(r.queryManager.removeQuery(s),o.networkStatus===we.fetchMore&&(o.networkStatus=a),h)r.queryManager.cache.batch({update:function(E){var I=t.updateQuery;I?E.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(R){return I(R,{fetchMoreResult:d.data,variables:i.variables})}):E.writeQuery({query:i.query,variables:i.variables,data:d.data})},onWatchUpdated:function(E){c.add(E.query)}});else{var m=r.getLast("result"),g=l(m.data,{fetchMoreResult:d.data,variables:i.variables});r.reportResult(V(V({},m),{networkStatus:a,loading:ki(a),data:g}),r.variables)}return r.maskResult(d)}).finally(function(){h&&!c.has(r.query)&&r.reobserveCacheFirst()})},e.prototype.subscribeToMore=function(t){var r=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(s){var o=t.updateQuery;o&&r.updateQuery(function(a,c){return o(a,V({subscriptionData:s},c))})},error:function(s){if(t.onError){t.onError(s);return}globalThis.__DEV__!==!1&&Y.error(30,s)}});return this.subscriptions.add(i),function(){r.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(t){return globalThis.__DEV__!==!1&&(Ge(t,"canonizeResults","setOptions"),Jr("setOptions",function(){globalThis.__DEV__!==!1&&Y.warn(31)})),this.reobserve(t)},e.prototype.silentSetOptions=function(t){var r=Yi(this.options,t||{});am(this.options,r)},e.prototype.setVariables=function(t){var r=this;return xe(this.variables,t)?this.observers.size?Tt("observableQuery.result",function(){return r.result()}):Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},we.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,i=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),s=i.result,o=i.complete,a=t(s,{variables:this.variables,complete:!!o,previousData:s});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var i=r.fetchPolicy,s=i===void 0?"cache-first":i,o=r.initialFetchPolicy,a=o===void 0?s:o;s==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(s,{reason:t,options:r,observable:this,initialFetchPolicy:a}):t==="variables-changed"?r.fetchPolicy=a:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r,i){var s=this._getOrCreateQuery();return s.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(s,t,r,i)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var r=this,i=r.pollingInfo,s=r.options.pollInterval;if(!s||!this.hasObservers()){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===s)){Y(s,32);var o=i||(this.pollingInfo={});o.interval=s;var a=function(){var l,h;t.pollingInfo&&(!ki(t.queryInfo.networkStatus)&&!(!((h=(l=t.options).skipPollAttempt)===null||h===void 0)&&h.call(l))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},we.poll).then(c,c):c())},c=function(){var l=t.pollingInfo;l&&(clearTimeout(l.timeout),l.timeout=setTimeout(a,l.interval))};c()}}},e.prototype.updateLastResult=function(t,r){var i=this;r===void 0&&(r=this.variables);var s=Tt("getLastError",function(){return i.getLastError()});return s&&this.last&&!xe(r,this.last.variables)&&(s=void 0),this.last=V({result:this.queryManager.assumeImmutableResults?t:Sv(t),variables:r},s?{error:s}:null)},e.prototype.reobserveAsConcast=function(t,r){var i=this;this.isTornDown=!1;var s=r===we.refetch||r===we.fetchMore||r===we.poll,o=this.options.variables,a=this.options.fetchPolicy,c=Yi(this.options,t||{}),l=s?c:am(this.options,c),h=this.transformDocument(l.query);this.lastQuery=h,s||(this.updatePolling(),t&&t.variables&&!xe(t.variables,o)&&l.fetchPolicy!=="standby"&&(l.fetchPolicy===a||typeof l.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",l),r===void 0&&(r=we.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=Hc(l.fetchPolicy));var d=function(){i.concast===E&&(i.waitForOwnResult=!1)},m=l.variables&&V({},l.variables),g=this.fetch(l,r,h),E=g.concast,I=g.fromLink,R={next:function(w){xe(i.variables,m)&&(d(),i.reportResult(w,m))},error:function(w){xe(i.variables,m)&&(Pv(w)||(w=new Hr({networkError:w})),d(),i.reportError(w,m))}};return!s&&(I||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=E,this.observer=R),E.addObserver(R),E},e.prototype.reobserve=function(t,r){return Y0(this.reobserveAsConcast(t,r).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=this.last;Tt("resetLastResults",function(){return t.resetLastResults()});var o=this.subscribe.apply(this,r);return this.last=s,o},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var i=this,s=Tt("getLastError",function(){return i.getLastError()}),o=this.isDifferentFromLastResult(t,r);(s||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),(s||o)&&to(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,r){var i=this,s=V(V({},Tt("getLastResult",function(){return i.getLastResult()})),{error:t,errors:t.graphQLErrors,networkStatus:we.error,loading:!1});this.updateLastResult(s,r),to(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?V(V({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e.prototype.resetNotifications=function(){this.cancelNotifyTimeout(),this.dirty=!1},e.prototype.cancelNotifyTimeout=function(){this.notifyTimeout&&(clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0)},e.prototype.scheduleNotify=function(){var t=this;this.dirty||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},e.prototype.notify=function(){if(this.cancelNotifyTimeout(),this.dirty&&(this.options.fetchPolicy=="cache-only"||this.options.fetchPolicy=="cache-and-network"||!ki(this.queryInfo.networkStatus))){var t=this.queryInfo.getDiff();t.fromOptimisticTransaction?this.observe():this.reobserveCacheFirst()}this.dirty=!1},e.prototype.reobserveCacheFirst=function(){var t=this.options,r=t.fetchPolicy,i=t.nextFetchPolicy;return r==="cache-and-network"||r==="network-only"?this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(s,o){return this.nextFetchPolicy=i,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(s,o):r}}):this.reobserve()},e.inactiveOnCreation=new ls,e})(De);Av(Oa);function cA(n){globalThis.__DEV__!==!1&&Y.error(33,n.message,n.stack)}function Xv(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&Y.debug(34,n)}function Hc(n){return n==="network-only"||n==="no-cache"||n==="standby"}var Vi=new(ci?WeakMap:Map);function Gc(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return Vi.set(n,(Vi.get(n)+1)%1e15),t.apply(this,arguments)})}var Kc=(function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.document=null,this.lastRequestId=1,this.stopped=!1,this.observableQuery=null;var r=this.cache=e.cache;Vi.has(r)||(Vi.set(r,0),Gc(r,"evict"),Gc(r,"modify"),Gc(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||we.loading;return this.variables&&this.networkStatus!==we.loading&&!xe(this.variables,e.variables)&&(t=we.setVariables),xe(e.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var e=this,t=this.getDiffOptions();if(this.lastDiff&&xe(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var i=Tt("canonizeResults",function(){return e.cache.diff(t)});return this.updateLastDiff(i,t),i},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,r,i=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&Tt("getLastError",function(){var s;return(s=t.observableQuery)===null||s===void 0?void 0:s.getLastError()})||(this.updateLastDiff(e),xe(i&&i.result,e&&e.result)||(r=this.observableQuery)===null||r===void 0||r.scheduleNotify())},n.prototype.setObservableQuery=function(e){e!==this.observableQuery&&(this.observableQuery=e,e&&(e.queryInfo=this))},n.prototype.stop=function(){var e;if(!this.stopped){this.stopped=!0,(e=this.observableQuery)===null||e===void 0||e.resetNotifications(),this.cancel();var t=this.observableQuery;t&&t.stopPolling()}},n.prototype.cancel=function(){var e;(e=this.cancelWatch)===null||e===void 0||e.call(this),this.cancelWatch=void 0},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var i=V(V({},this.getDiffOptions(e)),{watcher:this,callback:function(s){return t.setDiff(s)}});(!this.lastWatch||!xe(i,this.lastWatch))&&(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=i))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===Vi.get(this.cache)&&xe(t,r.variables)&&xe(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,i){var s=this,o,a=new Ar,c=Tn(e.errors)?e.errors.slice(0):[];if((o=this.observableQuery)===null||o===void 0||o.resetNotifications(),"incremental"in e&&Tn(e.incremental)){var l=Rv(this.getDiff().result,e);e.data=l}else if("hasNext"in e&&e.hasNext){var h=this.getDiff();e.data=a.merge(h.result,e.data)}this.graphQLErrors=c,r.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):i!==0&&(jl(e,r.errorPolicy)?this.cache.performTransaction(function(d){if(s.shouldWrite(e,r.variables))d.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:i===1}),s.lastWrite={result:e,variables:r.variables,dmCount:Vi.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete){e.data=s.lastDiff.diff.result;return}var m=s.getDiffOptions(r.variables),g=Tt("canonizeResults",function(){return d.diff(m)});!s.stopped&&xe(s.variables,r.variables)&&s.updateWatch(r.variables),s.updateLastDiff(g,m),g.complete&&(e.data=g.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=we.ready},n.prototype.markError=function(e){var t;return this.networkStatus=we.error,this.lastWrite=void 0,(t=this.observableQuery)===null||t===void 0||t.resetNotifications(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n})();function jl(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",r=!Ca(n);return!r&&t&&n.data&&(r=!0),r}var lA=Object.prototype.hasOwnProperty,um=Object.create(null),hA=(function(){function n(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new Zy(jn["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Gn(!1),this.noCacheWarningsByQueryId=new Set;var r=new vv(function(s){return t.cache.transformDocument(s)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var i=e.documentTransform;this.documentTransform=i?r.concat(i).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(kt(35))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){return ir(this,arguments,void 0,function(t){var r,i,s,o,a,c,l,h=t.mutation,d=t.variables,m=t.optimisticResponse,g=t.updateQueries,E=t.refetchQueries,I=E===void 0?[]:E,R=t.awaitRefetchQueries,w=R===void 0?!1:R,k=t.update,O=t.onQueryUpdated,x=t.fetchPolicy,L=x===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.fetchPolicy)||"network-only":x,Q=t.errorPolicy,S=Q===void 0?((l=this.defaultOptions.mutate)===null||l===void 0?void 0:l.errorPolicy)||"none":Q,_=t.keepRootFields,v=t.context;return sr(this,function(b){switch(b.label){case 0:return Y(h,36),Y(L==="network-only"||L==="no-cache",37),r=this.generateMutationId(),h=this.cache.transformForLink(this.transform(h)),i=this.getDocumentInfo(h).hasClientExports,d=this.getVariables(h,d),i?[4,this.localState.addExportedVariables(h,d,v)]:[3,2];case 1:d=b.sent(),b.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[r]={mutation:h,variables:d,loading:!0,error:null}),o=m&&this.markMutationOptimistic(m,{mutationId:r,document:h,variables:d,fetchPolicy:L,errorPolicy:S,context:v,updateQueries:g,update:k,keepRootFields:_}),this.broadcastQueries(),a=this,[2,new Promise(function(C,D){return qc(a.getObservableFromLink(h,V(V({},v),{optimisticResponse:o?m:void 0}),d,{},!1),function(T){if(Ca(T)&&S==="none")throw new Hr({graphQLErrors:Ol(T)});s&&(s.loading=!1,s.error=null);var ke=V({},T);return typeof I=="function"&&(I=I(ke)),S==="ignore"&&Ca(ke)&&delete ke.errors,a.markMutationResult({mutationId:r,result:ke,document:h,variables:d,fetchPolicy:L,errorPolicy:S,context:v,update:k,updateQueries:g,awaitRefetchQueries:w,refetchQueries:I,removeOptimistic:o?r:void 0,onQueryUpdated:O,keepRootFields:_})}).subscribe({next:function(T){a.broadcastQueries(),(!("hasNext"in T)||T.hasNext===!1)&&C(V(V({},T),{data:a.maskOperation({document:h,data:T.data,fetchPolicy:L,id:r})}))},error:function(T){s&&(s.loading=!1,s.error=T),o&&a.cache.removeOptimistic(r),a.broadcastQueries(),D(T instanceof Hr?T:new Hr({networkError:T}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;t===void 0&&(t=this.cache);var i=e.result,s=[],o=e.fetchPolicy==="no-cache";if(!o&&jl(i,e.errorPolicy)){if(qi(i)||s.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),qi(i)&&Tn(i.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;a.result&&(c=Rv(a.result,i)),typeof c<"u"&&(i.data=c,s.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var l=e.updateQueries;l&&this.queries.forEach(function(d,m){var g=d.observableQuery,E=g&&g.queryName;if(!(!E||!lA.call(l,E))){var I=l[E],R=r.queries.get(m),w=R.document,k=R.variables,O=t.diff({query:w,variables:k,returnPartialData:!0,optimistic:!1}),x=O.result,L=O.complete;if(L&&x){var Q=I(x,{mutationResult:i,queryName:w&&qs(w)||void 0,queryVariables:k});Q&&s.push({result:Q,dataId:"ROOT_QUERY",query:w,variables:k})}}})}if(s.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var h=[];if(this.refetchQueries({updateCache:function(d){o||s.forEach(function(I){return d.write(I)});var m=e.update,g=!nS(i)||qi(i)&&!i.hasNext;if(m){if(!o){var E=d.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});E.complete&&(i=V(V({},i),{data:E.result}),"incremental"in i&&delete i.incremental,"hasNext"in i&&delete i.hasNext)}g&&m(d,i,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&g&&d.modify({id:"ROOT_MUTATION",fields:function(I,R){var w=R.fieldName,k=R.DELETE;return w==="__typename"?I:k}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(d){return h.push(d)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(h).then(function(){return i})}return Promise.resolve(i)},n.prototype.markMutationOptimistic=function(e,t){var r=this,i=typeof e=="function"?e(t.variables,{IGNORE:um}):e;return i===um?!1:(this.cache.recordOptimisticTransaction(function(s){try{r.markMutationResult(V(V({},t),{result:{data:i}}),s)}catch(o){globalThis.__DEV__!==!1&&Y.error(o)}},t.mutationId),!0)},n.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(this.getOrCreateQuery(e),t,r).concast.promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},n.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:LI(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:yo(["nonreactive"],e),nonReactiveQuery:j0(e),clientQuery:this.localState.clientQuery(e),serverQuery:Ev([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:Fh(ni(e)),asQuery:V(V({},e),{definitions:e.definitions.map(function(i){return i.kind==="OperationDefinition"&&i.operation!=="query"?V(V({},i),{operation:"query"}):i})})};t.set(e,r)}return t.get(e)},n.prototype.getVariables=function(e,t){return V(V({},this.getDocumentInfo(e).defaultVars),t)},n.prototype.watchQuery=function(e){var t=this.transform(e.query);e=V(V({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new Kc(this),i=new Oa({queryManager:this,queryInfo:r,options:e});return i.lastQuery=t,Oa.inactiveOnCreation.getValue()||this.queries.set(i.queryId,r),r.init({document:t,observableQuery:i,variables:i.variables}),i},n.prototype.query=function(e,t){var r=this;t===void 0&&(t=this.generateQueryId()),Y(e.query,38),Y(e.query.kind==="Document",39),Y(!e.returnPartialData,40),Y(!e.pollInterval,41);var i=this.transform(e.query);return this.fetchQuery(t,V(V({},e),{query:i})).then(function(s){return s&&V(V({},s),{data:r.maskOperation({document:i,data:s.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(kt(42)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=we.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var r=new Map,i=new Map,s=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(a){if(typeof a=="string")i.set(a,a),s.set(a,!1);else if(f0(a)){var c=Yr(t.transform(a));i.set(c,qs(a)),s.set(c,!1)}else We(a)&&a.query&&o.add(a)}),this.queries.forEach(function(a,c){var l=a.observableQuery,h=a.document;if(l){if(e==="all"){r.set(c,l);return}var d=l.queryName,m=l.options.fetchPolicy;if(m==="standby"||e==="active"&&!l.hasObservers())return;(e==="active"||d&&s.has(d)||h&&s.has(Yr(h)))&&(r.set(c,l),d&&s.set(d,!0),h&&s.set(Yr(h),!0))}}),o.size&&o.forEach(function(a){var c=Tl("legacyOneTimeQuery"),l=t.getOrCreateQuery(c).init({document:a.query,variables:a.variables}),h=new Oa({queryManager:t,queryInfo:l,options:V(V({},a),{fetchPolicy:"network-only"})});Y(h.queryId===c),l.setObservableQuery(h),r.set(c,h)}),globalThis.__DEV__!==!1&&s.size&&s.forEach(function(a,c){if(!a){var l=i.get(c);l?globalThis.__DEV__!==!1&&Y.warn(43,l):globalThis.__DEV__!==!1&&Y.warn(44)}}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,s){var o=i.options.fetchPolicy;Tt("resetLastResults",function(){return i.resetLastResults()}),(e||o!=="standby"&&o!=="cache-only")&&r.push(i.refetch()),(t.queries.get(s)||i.queryInfo).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,i=e.variables,s=e.fetchPolicy,o=e.errorPolicy,a=o===void 0?"none":o,c=e.context,l=c===void 0?{}:c,h=e.extensions,d=h===void 0?{}:h;r=this.transform(r),i=this.getVariables(r,i);var m=function(E){return t.getObservableFromLink(r,l,E,d).map(function(I){s!=="no-cache"&&(jl(I,a)&&t.cache.write({query:r,result:I.data,dataId:"ROOT_SUBSCRIPTION",variables:E}),t.broadcastQueries());var R=Ca(I),w=bS(I);if(R||w){var k={};if(R&&(k.graphQLErrors=I.errors),w&&(k.protocolErrors=I.extensions[Wh]),a==="none"||w)throw new Hr(k)}return a==="ignore"&&delete I.errors,I})};if(this.getDocumentInfo(r).hasClientExports){var g=this.localState.addExportedVariables(r,i,l).then(m);return new De(function(E){var I=null;return g.then(function(R){return I=R.subscribe(E)},E.error),function(){return I&&I.unsubscribe()}})}return m(i)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){var t;this.fetchCancelFns.delete(e),this.queries.has(e)&&((t=this.queries.get(e))===null||t===void 0||t.stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){var t;return(t=e.observableQuery)===null||t===void 0?void 0:t.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,i,s){var o=this,a;s===void 0&&(s=(a=t?.queryDeduplication)!==null&&a!==void 0?a:this.queryDeduplication);var c,l=this.getDocumentInfo(e),h=l.serverQuery,d=l.clientQuery;if(h){var m=this,g=m.inFlightLinkObservables,E=m.link,I={query:h,variables:r,operationName:qs(h)||void 0,context:this.prepareContext(V(V({},t),{forceFetch:!s})),extensions:i};if(t=I.context,s){var R=Yr(h),w=dr(r),k=g.lookup(R,w);if(c=k.observable,!c){var O=new Si([Vl(E,I)]);c=k.observable=O,O.beforeNext(function x(L,Q){L==="next"&&"hasNext"in Q&&Q.hasNext?O.beforeNext(x):g.remove(R,w)})}}else c=new Si([Vl(E,I)])}else c=new Si([De.of({data:{}})]),t=this.prepareContext(t);return d&&(c=qc(c,function(x){return o.localState.runResolvers({document:d,remoteResult:x,context:t,variables:r})})),c},n.prototype.getResultsFromLink=function(e,t,r){var i=e.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(r.query);return qc(this.getObservableFromLink(s,r.context,r.variables),function(o){var a=Ol(o),c=a.length>0,l=r.errorPolicy;if(i>=e.lastRequestId){if(c&&l==="none")throw e.markError(new Hr({graphQLErrors:a}));e.markResult(o,s,r,t),e.markReady()}var h={data:o.data,loading:!1,networkStatus:we.ready};return c&&l==="none"&&(h.data=void 0),c&&l!=="ignore"&&(h.errors=a,h.networkStatus=we.error),h},function(o){var a=Pv(o)?o:new Hr({networkError:o});throw i>=e.lastRequestId&&e.markError(a),a})},n.prototype.fetchConcastWithInfo=function(e,t,r,i){var s=this;r===void 0&&(r=we.loading),i===void 0&&(i=t.query);var o=this.getVariables(i,t.variables),a=this.defaultOptions.watchQuery,c=t.fetchPolicy,l=c===void 0?a&&a.fetchPolicy||"cache-first":c,h=t.errorPolicy,d=h===void 0?a&&a.errorPolicy||"none":h,m=t.returnPartialData,g=m===void 0?!1:m,E=t.notifyOnNetworkStatusChange,I=E===void 0?!1:E,R=t.context,w=R===void 0?{}:R,k=Object.assign({},t,{query:i,variables:o,fetchPolicy:l,errorPolicy:d,returnPartialData:g,notifyOnNetworkStatusChange:I,context:w}),O=function(_){k.variables=_;var v=s.fetchQueryByPolicy(e,k,r);return k.fetchPolicy!=="standby"&&v.sources.length>0&&e.observableQuery&&e.observableQuery.applyNextFetchPolicy("after-fetch",t),v},x=function(){return s.fetchCancelFns.delete(e.queryId)};this.fetchCancelFns.set(e.queryId,function(_){x(),setTimeout(function(){return L.cancel(_)})});var L,Q;if(this.getDocumentInfo(k.query).hasClientExports)L=new Si(this.localState.addExportedVariables(k.query,k.variables,k.context).then(O).then(function(_){return _.sources})),Q=!0;else{var S=O(k.variables);Q=S.fromLink,L=new Si(S.sources)}return L.promise.then(x,x),{concast:L,fromLink:Q}},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,i=e.include,s=e.optimistic,o=s===void 0?!1:s,a=e.removeOptimistic,c=a===void 0?o?Tl("refetchQueries"):void 0:a,l=e.onQueryUpdated,h=new Map;i&&this.getObservableQueries(i).forEach(function(m,g){h.set(g,{oq:m,lastDiff:(t.queries.get(g)||m.queryInfo).getDiff()})});var d=new Map;return r&&this.cache.batch({update:r,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(m,g,E){var I=m.watcher instanceof Kc&&m.watcher.observableQuery;if(I){if(l){h.delete(I.queryId);var R=l(I,g,E);return R===!0&&(R=I.refetch()),R!==!1&&d.set(I,R),R}l!==null&&h.set(I.queryId,{oq:I,lastDiff:E,diff:g})}}}),h.size&&h.forEach(function(m,g){var E=m.oq,I=m.lastDiff,R=m.diff,w;l&&(R||(R=Tt("canonizeResults",function(){return t.cache.diff(E.queryInfo.getDiffOptions())})),w=l(E,R,I)),(!l||w===!0)&&(w=E.refetch()),w!==!1&&d.set(E,w),g.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(g)}),c&&this.cache.removeOptimistic(c),d},n.prototype.maskOperation=function(e){var t,r,i,s=e.document,o=e.data;if(globalThis.__DEV__!==!1){var a=e.fetchPolicy,c=e.id,l=(t=ni(s))===null||t===void 0?void 0:t.operation,h=((r=l?.[0])!==null&&r!==void 0?r:"o")+c;this.dataMasking&&a==="no-cache"&&!GI(s)&&!this.noCacheWarningsByQueryId.has(h)&&(this.noCacheWarningsByQueryId.add(h),globalThis.__DEV__!==!1&&Y.warn(45,(i=qs(s))!==null&&i!==void 0?i:"Unnamed ".concat(l??"operation")))}return this.dataMasking?QS(o,s,this.cache):o},n.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,i=e.fragmentName;return this.dataMasking?Fv(t,r,this.cache,i):t},n.prototype.fetchQueryByPolicy=function(e,t,r){var i=this,s=t.query,o=t.variables,a=t.fetchPolicy,c=t.refetchWritePolicy,l=t.errorPolicy,h=t.returnPartialData,d=t.context,m=t.notifyOnNetworkStatusChange,g=e.networkStatus;e.init({document:s,variables:o,networkStatus:r});var E=function(){return e.getDiff()},I=function(x,L){L===void 0&&(L=e.networkStatus||we.loading);var Q=x.result;globalThis.__DEV__!==!1&&!h&&!xe(Q,{})&&Xv(x.missing);var S=function(_){return De.of(V({data:_,loading:ki(L),networkStatus:L},x.complete?null:{partial:!0}))};return Q&&i.getDocumentInfo(s).hasForcedResolvers?i.localState.runResolvers({document:s,remoteResult:{data:Q},context:d,variables:o,onlyRunForcedResolvers:!0}).then(function(_){return S(_.data||void 0)}):l==="none"&&L===we.refetch&&Array.isArray(x.missing)?S(void 0):S(Q)},R=a==="no-cache"?0:r===we.refetch&&c!=="merge"?1:2,w=function(){return i.getResultsFromLink(e,R,{query:s,variables:o,context:d,fetchPolicy:a,errorPolicy:l})},k=m&&typeof g=="number"&&g!==r&&ki(r);switch(a){default:case"cache-first":{var O=E();return O.complete?{fromLink:!1,sources:[I(O,e.markReady())]}:h||k?{fromLink:!0,sources:[I(O),w()]}:{fromLink:!0,sources:[w()]}}case"cache-and-network":{var O=E();return O.complete||h||k?{fromLink:!0,sources:[I(O),w()]}:{fromLink:!0,sources:[w()]}}case"cache-only":return{fromLink:!1,sources:[I(E(),e.markReady())]};case"network-only":return k?{fromLink:!0,sources:[I(E()),w()]}:{fromLink:!0,sources:[w()]};case"no-cache":return k?{fromLink:!0,sources:[I(e.getDiff()),w()]}:{fromLink:!0,sources:[w()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getOrCreateQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new Kc(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return V(V(V({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},n})(),fA=(function(){function n(e){var t=e.cache,r=e.client,i=e.resolvers,s=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,r&&(this.client=r),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=Pp(t.resolvers,r)}):this.resolvers=Pp(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){return ir(this,arguments,void 0,function(t){var r=t.document,i=t.remoteResult,s=t.context,o=t.variables,a=t.onlyRunForcedResolvers,c=a===void 0?!1:a;return sr(this,function(l){return r?[2,this.resolveDocument(r,i.data,s,o,this.fragmentMatcher,c).then(function(h){return V(V({},i),{data:h.result})})]:[2,i]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return yo(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return bv(e)},n.prototype.prepareContext=function(e){var t=this.cache;return V(V({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e){return ir(this,arguments,void 0,function(t,r,i){return r===void 0&&(r={}),i===void 0&&(i={}),sr(this,function(s){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,r)||{},this.prepareContext(i),r).then(function(o){return V(V({},r),o.exportedVariables)})]:[2,V({},r)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return rn(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(t=r.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),t))return Mu}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:U0(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t){return ir(this,arguments,void 0,function(r,i,s,o,a,c){var l,h,d,m,g,E,I,R,w,k,O;return s===void 0&&(s={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),c===void 0&&(c=!1),sr(this,function(x){return l=No(r),h=cs(r),d=as(h),m=this.collectSelectionsToResolve(l,d),g=l.operation,E=g?g.charAt(0).toUpperCase()+g.slice(1):"Query",I=this,R=I.cache,w=I.client,k={fragmentMap:d,context:V(V({},s),{cache:R,client:w}),variables:o,fragmentMatcher:a,defaultOperationType:E,exportedVariables:{},selectionsToResolve:m,onlyRunForcedResolvers:c},O=!1,[2,this.resolveSelectionSet(l.selectionSet,O,i,k).then(function(L){return{result:L,exportedVariables:k.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r,i){return ir(this,void 0,void 0,function(){var s,o,a,c,l,h=this;return sr(this,function(d){return s=i.fragmentMap,o=i.context,a=i.variables,c=[r],l=function(m){return ir(h,void 0,void 0,function(){var g,E;return sr(this,function(I){return!t&&!i.selectionsToResolve.has(m)?[2]:Vo(m,a)?Ir(m)?[2,this.resolveField(m,t,r,i).then(function(R){var w;typeof R<"u"&&c.push((w={},w[qn(m)]=R,w))})]:(I0(m)?g=m:(g=s[m.name.value],Y(g,21,m.name.value)),g&&g.typeCondition&&(E=g.typeCondition.name.value,i.fragmentMatcher(r,E,o))?[2,this.resolveSelectionSet(g.selectionSet,t,r,i).then(function(R){c.push(R)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(l)).then(function(){return Bu(c)})]})})},n.prototype.resolveField=function(e,t,r,i){return ir(this,void 0,void 0,function(){var s,o,a,c,l,h,d,m,g,E=this;return sr(this,function(I){return r?(s=i.variables,o=e.name.value,a=qn(e),c=o!==a,l=r[a]||r[o],h=Promise.resolve(l),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(d=r.__typename||i.defaultOperationType,m=this.resolvers&&this.resolvers[d],m&&(g=m[c?o:a],g&&(h=Promise.resolve(Gh.withValue(this.cache,g,[r,Uu(e,s),i.context,{field:e,fragmentMap:i.fragmentMap}]))))),[2,h.then(function(R){var w,k;if(R===void 0&&(R=l),e.directives&&e.directives.forEach(function(x){x.name.value==="export"&&x.arguments&&x.arguments.forEach(function(L){L.name.value==="as"&&L.value.kind==="StringValue"&&(i.exportedVariables[L.value.value]=R)})}),!e.selectionSet||R==null)return R;var O=(k=(w=e.directives)===null||w===void 0?void 0:w.some(function(x){return x.name.value==="client"}))!==null&&k!==void 0?k:!1;if(Array.isArray(R))return E.resolveSubSelectedArray(e,t||O,R,i);if(e.selectionSet)return E.resolveSelectionSet(e.selectionSet,t||O,R,i)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,r,i){var s=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return s.resolveSubSelectedArray(e,t,o,i);if(e.selectionSet)return s.resolveSelectionSet(e.selectionSet,t,o,i)}))},n.prototype.collectSelectionsToResolve=function(e,t){var r=function(o){return!Array.isArray(o)},i=this.selectionsToResolveCache;function s(o){if(!i.has(o)){var a=new Set;i.set(o,a),rn(o,{Directive:function(c,l,h,d,m){c.name.value==="client"&&m.forEach(function(g){r(g)&&Ep(g)&&a.add(g)})},FragmentSpread:function(c,l,h,d,m){var g=t[c.name.value];Y(g,22,c.name.value);var E=s(g);E.size>0&&(m.forEach(function(I){r(I)&&Ep(I)&&a.add(I)}),a.add(c),E.forEach(function(I){a.add(I)}))}})}return i.get(o)}return s(e)},n})(),cm=!1,Zv=(function(){function n(e){var t=this,r,i,s;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw kt(16);var o=e.uri,a=e.credentials,c=e.headers,l=e.cache,h=e.documentTransform,d=e.ssrMode,m=d===void 0?!1:d,g=e.ssrForceFetchDelay,E=g===void 0?0:g,I=e.connectToDevTools,R=e.queryDeduplication,w=R===void 0?!0:R,k=e.defaultOptions,O=e.defaultContext,x=e.assumeImmutableResults,L=x===void 0?l.assumeImmutableResults:x,Q=e.resolvers,S=e.typeDefs,_=e.fragmentMatcher,v=e.clientAwareness,b=e.name,C=e.version,D=e.devtools,T=e.dataMasking;globalThis.__DEV__!==!1&&(Ge(e,"connectToDevTools","ApolloClient","Please use `devtools.enabled` instead."),Ge(e,"uri","ApolloClient","Please initialize an instance of `HttpLink` with `uri` instead."),Ge(e,"credentials","ApolloClient","Please initialize an instance of `HttpLink` with `credentials` instead."),Ge(e,"headers","ApolloClient","Please initialize an instance of `HttpLink` with `headers` instead."),Ge(e,"name","ApolloClient","Please use the `clientAwareness.name` option instead."),Ge(e,"version","ApolloClient","Please use the `clientAwareness.version` option instead."),Ge(e,"typeDefs","ApolloClient"),e.link||globalThis.__DEV__!==!1&&Y.warn(17));var ke=e.link;ke||(ke=o?new FS({uri:o,credentials:a,headers:c}):hs.empty()),this.link=ke,this.cache=l,this.disableNetworkFetches=m||E>0,this.queryDeduplication=w,this.defaultOptions=k||Object.create(null),this.typeDefs=S,this.devtoolsConfig=V(V({},D),{enabled:(r=D?.enabled)!==null&&r!==void 0?r:I}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),E&&setTimeout(function(){return t.disableNetworkFetches=!1},E),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=Vh,this.localState=new fA({cache:l,client:this,resolvers:Q,fragmentMatcher:_}),this.queryManager=new hA({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:O,documentTransform:h,queryDeduplication:w,ssrMode:m,dataMasking:!!T,clientAwareness:{name:(i=v?.name)!==null&&i!==void 0?i:b,version:(s=v?.version)!==null&&s!==void 0?s:C},localState:this.localState,assumeImmutableResults:L,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return Object.defineProperty(n.prototype,"prioritizeCacheValues",{get:function(){return this.disableNetworkFetches},set:function(e){this.disableNetworkFetches=e},enumerable:!1,configurable:!0}),n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!cm&&globalThis.__DEV__!==!1&&(cm=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var r=window.navigator,i=r&&r.userAgent,s=void 0;typeof i=="string"&&(i.indexOf("Chrome/")>-1?s="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":i.indexOf("Firefox/")>-1&&(s="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),s&&globalThis.__DEV__!==!1&&Y.log("Download the Apollo DevTools for a better development experience: %s",s)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Bc(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=V(V({},e),{fetchPolicy:"cache-first"})),globalThis.__DEV__!==!1&&(Ge(e,"canonizeResults","client.watchQuery"),Ge(e,"partialRefetch","client.watchQuery")),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=Bc(this.defaultOptions.query,e)),Y(e.fetchPolicy!=="cache-and-network",18),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=V(V({},e),{fetchPolicy:"cache-first"})),globalThis.__DEV__!==!1&&(Ge(e,"canonizeResults","client.query"),Ge(e,"notifyOnNetworkStatusChange","client.query","This option does not affect `client.query` and can be safely removed."),e.fetchPolicy==="standby"&&globalThis.__DEV__!==!1&&Y.warn(19)),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Bc(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){var t=this,r=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(e).map(function(i){return V(V({},i),{data:t.queryManager.maskOperation({document:e.query,data:i.data,fetchPolicy:e.fetchPolicy,id:r})})})},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.watchFragment=function(e){var t;return this.cache.watchFragment(V(V({},e),(t={},t[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,t)))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return Vl(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],i=[];t.forEach(function(o,a){r.push(a),i.push(o)});var s=Promise.all(i);return s.queries=r,s.results=i,s.catch(function(o){globalThis.__DEV__!==!1&&Y.debug(20,o)}),s},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n})();globalThis.__DEV__!==!1&&(Zv.prototype.getMemoryInternals=r0);var dA=Symbol("default-apollo-client");Dt(0),Dt(0),Dt(0);function pA(n){return new hs(function(e,t){var r=dn(e,[]);return new De(function(i){var s,o=!1;return Promise.resolve(r).then(function(a){return n(a,e.getContext())}).then(e.setContext).then(function(){o||(s=t(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)}))}).catch(i.error.bind(i)),function(){o=!0,s&&s.unsubscribe()}})})}const mA=()=>{};var lm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},gA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},t_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let m=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(m=64)),r.push(t[h],t[d],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(e_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new yA;const m=s<<2|a>>4;if(r.push(m),l!==64){const g=a<<4&240|l>>2;if(r.push(g),d!==64){const E=l<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vA=function(n){const e=e_(n);return t_.encodeByteArray(e,!0)},ru=function(n){return vA(n).replace(/\./g,"")},n_=function(n){try{return t_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=()=>_A().__FIREBASE_DEFAULTS__,bA=()=>{if(typeof process>"u"||typeof lm>"u")return;const n=lm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&n_(n[1]);return e&&JSON.parse(e)},$u=()=>{try{return mA()||EA()||bA()||TA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},r_=n=>$u()?.emulatorHosts?.[n],wA=n=>{const e=r_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},i_=()=>$u()?.config,s_=n=>$u()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ru(JSON.stringify(t)),ru(JSON.stringify(o)),""].join(".")}const io={};function AA(){const n={prod:[],emulator:[]};for(const e of Object.keys(io))io[e]?n.emulator.push(e):n.prod.push(e);return n}function RA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let hm=!1;function a_(n,e){if(typeof window>"u"||typeof document>"u"||!fs(window.location.host)||io[n]===e||io[n]||hm)return;io[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=AA().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{hm=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=RA(r),g=t("text"),E=document.getElementById(g)||document.createElement("span"),I=t("learnmore"),R=document.getElementById(I)||document.createElement("a"),w=t("preprendIcon"),k=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const O=m.element;a(O),h(R,I);const x=l();c(k,w),O.append(k,E,R,x),document.body.appendChild(O)}s?(E.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function PA(){const n=$u()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VA(){const n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NA(){return!PA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function MA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="FirebaseError";class Kn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=FA,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xo.prototype.create)}}class xo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kn(i,a,r)}}function LA(n,e){return n.replace(UA,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UA=/\{\$([^}]+)}/g;function jA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ri(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(fm(s)&&fm(o)){if(!ri(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function fm(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qA(n,e){const t=new BA(n,e);return t.subscribe.bind(t)}class BA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$A(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jc),i.error===void 0&&(i.error=Jc),i.complete===void 0&&(i.complete=Jc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $A(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n){return n&&n._delegate?n._delegate:n}class ii{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new IA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WA(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QA(n){return n===Gr?void 0:n}function WA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(me||(me={}));const GA={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},KA=me.INFO,JA={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},YA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=JA[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=KA,this._logHandler=YA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const XA=(n,e)=>e.some(t=>n instanceof t);let dm,pm;function ZA(){return dm||(dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eR(){return pm||(pm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u_=new WeakMap,ql=new WeakMap,c_=new WeakMap,Yc=new WeakMap,Zh=new WeakMap;function tR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(pr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&u_.set(t,n)}).catch(()=>{}),Zh.set(e,n),e}function nR(n){if(ql.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ql.set(n,e)}let Bl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ql.get(n);if(e==="objectStoreNames")return n.objectStoreNames||c_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rR(n){Bl=n(Bl)}function iR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Xc(this),e,...t);return c_.set(r,e.sort?e.sort():[e]),pr(r)}:eR().includes(n)?function(...e){return n.apply(Xc(this),e),pr(u_.get(this))}:function(...e){return pr(n.apply(Xc(this),e))}}function sR(n){return typeof n=="function"?iR(n):(n instanceof IDBTransaction&&nR(n),XA(n,ZA())?new Proxy(n,Bl):n)}function pr(n){if(n instanceof IDBRequest)return tR(n);if(Yc.has(n))return Yc.get(n);const e=sR(n);return e!==n&&(Yc.set(n,e),Zh.set(e,n)),e}const Xc=n=>Zh.get(n);function oR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(pr(o.result),c.oldVersion,c.newVersion,pr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const aR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],Zc=new Map;function mm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zc.get(e))return Zc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=uR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aR.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return Zc.set(e,s),s}rR(n=>({...n,get:(e,t,r)=>mm(e,t)||n.get(e,t,r),has:(e,t)=>!!mm(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function lR(n){return n.getComponent()?.type==="VERSION"}const $l="@firebase/app",gm="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Xh("@firebase/app"),hR="@firebase/app-compat",fR="@firebase/analytics-compat",dR="@firebase/analytics",pR="@firebase/app-check-compat",mR="@firebase/app-check",gR="@firebase/auth",yR="@firebase/auth-compat",vR="@firebase/database",_R="@firebase/data-connect",ER="@firebase/database-compat",bR="@firebase/functions",TR="@firebase/functions-compat",wR="@firebase/installations",IR="@firebase/installations-compat",SR="@firebase/messaging",AR="@firebase/messaging-compat",RR="@firebase/performance",CR="@firebase/performance-compat",PR="@firebase/remote-config",DR="@firebase/remote-config-compat",OR="@firebase/storage",kR="@firebase/storage-compat",VR="@firebase/firestore",NR="@firebase/ai",xR="@firebase/firestore-compat",MR="firebase",FR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="[DEFAULT]",LR={[$l]:"fire-core",[hR]:"fire-core-compat",[dR]:"fire-analytics",[fR]:"fire-analytics-compat",[mR]:"fire-app-check",[pR]:"fire-app-check-compat",[gR]:"fire-auth",[yR]:"fire-auth-compat",[vR]:"fire-rtdb",[_R]:"fire-data-connect",[ER]:"fire-rtdb-compat",[bR]:"fire-fn",[TR]:"fire-fn-compat",[wR]:"fire-iid",[IR]:"fire-iid-compat",[SR]:"fire-fcm",[AR]:"fire-fcm-compat",[RR]:"fire-perf",[CR]:"fire-perf-compat",[PR]:"fire-rc",[DR]:"fire-rc-compat",[OR]:"fire-gcs",[kR]:"fire-gcs-compat",[VR]:"fire-fst",[xR]:"fire-fst-compat",[NR]:"fire-vertex","fire-js":"fire-js",[MR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Map,UR=new Map,Ql=new Map;function ym(n,e){try{n.container.addComponent(e)}catch(t){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xi(n){const e=n.name;if(Ql.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Ql.set(e,n);for(const t of iu.values())ym(t,n);for(const t of UR.values())ym(t,n);return!0}function ef(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zt(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new xo("app","Firebase",jR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=FR;function l_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:zl,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw mr.create("bad-app-name",{appName:String(i)});if(t||(t=i_()),!t)throw mr.create("no-options");const s=iu.get(i);if(s){if(ri(t,s.options)&&ri(r,s.config))return s;throw mr.create("duplicate-app",{appName:i})}const o=new HA(i);for(const c of Ql.values())o.addComponent(c);const a=new qR(t,r,o);return iu.set(i,a),a}function h_(n=zl){const e=iu.get(n);if(!e&&n===zl&&i_())return l_();if(!e)throw mr.create("no-app",{appName:n});return e}function gr(n,e,t){let r=LR[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}Xi(new ii(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebase-heartbeat-database",$R=1,bo="firebase-heartbeat-store";let el=null;function f_(){return el||(el=oR(BR,$R,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bo)}catch(t){console.warn(t)}}}}).catch(n=>{throw mr.create("idb-open",{originalErrorMessage:n.message})})),el}async function zR(n){try{const t=(await f_()).transaction(bo),r=await t.objectStore(bo).get(d_(n));return await t.done,r}catch(e){if(e instanceof Kn)Bn.warn(e.message);else{const t=mr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(t.message)}}}async function vm(n,e){try{const r=(await f_()).transaction(bo,"readwrite");await r.objectStore(bo).put(e,d_(n)),await r.done}catch(t){if(t instanceof Kn)Bn.warn(t.message);else{const r=mr.create("idb-set",{originalErrorMessage:t?.message});Bn.warn(r.message)}}}function d_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,WR=30;class HR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_m();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>WR){const i=JR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_m(),{heartbeatsToSend:t,unsentEntries:r}=GR(this._heartbeatsCache.heartbeats),i=ru(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Bn.warn(e),""}}}function _m(){return new Date().toISOString().substring(0,10)}function GR(n,e=QR){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Em(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Em(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class KR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?MA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Em(n){return ru(JSON.stringify({version:2,heartbeats:n})).length}function JR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){Xi(new ii("platform-logger",e=>new cR(e),"PRIVATE")),Xi(new ii("heartbeat",e=>new HR(e),"PRIVATE")),gr($l,gm,n),gr($l,gm,"esm2020"),gr("fire-js","")}YR("");var XR="firebase",ZR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(XR,ZR,"app");function p_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eC=p_,m_=new xo("auth","Firebase",p_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Xh("@firebase/auth");function tC(n,...e){su.logLevel<=me.WARN&&su.warn(`Auth (${ds}): ${n}`,...e)}function ka(n,...e){su.logLevel<=me.ERROR&&su.error(`Auth (${ds}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(n,...e){throw tf(n,...e)}function pn(n,...e){return tf(n,...e)}function g_(n,e,t){const r={...eC(),[e]:t};return new xo("auth","Firebase",r).create(e,{appName:n.name})}function yr(n){return g_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tf(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return m_.create(n,...e)}function ue(n,e,...t){if(!n)throw tf(e,...t)}function Nn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ka(e),new Error(e)}function zn(n,e){n||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){return typeof self<"u"&&self.location?.href||""}function nC(){return bm()==="http:"||bm()==="https:"}function bm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nC()||OA()||"connection"in navigator)?navigator.onLine:!0}function iC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.shortDelay=e,this.longDelay=t,zn(t>e,"Short delay should be less than long delay!"),this.isMobile=CA()||kA()}get(){return rC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n,e){zn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aC=new Fo(3e4,6e4);function zu(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ps(n,e,t,r,i={}){return v_(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Mo({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const l={method:e,headers:c,...s};return DA()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&fs(n.emulatorConfig.host)&&(l.credentials="include"),y_.fetch()(await E_(n,n.config.apiHost,t,a),l)})}async function v_(n,e,t){n._canInitEmulator=!1;const r={...sC,...e};try{const i=new uC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ma(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ma(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ma(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw ma(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw g_(n,h,l);$n(n,h)}}catch(i){if(i instanceof Kn)throw i;$n(n,"network-request-failed",{message:String(i)})}}async function __(n,e,t,r,i={}){const s=await ps(n,e,t,r,i);return"mfaPendingCredential"in s&&$n(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function E_(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?nf(n.config,i):`${n.config.apiScheme}://${i}`;return oC.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class uC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),aC.get())})}}function ma(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=pn(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(n,e){return ps(n,"POST","/v1/accounts:delete",e)}async function ou(n,e){return ps(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lC(n,e=!1){const t=jt(n),r=await t.getIdToken(e),i=rf(r);ue(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:so(tl(i.auth_time)),issuedAtTime:so(tl(i.iat)),expirationTime:so(tl(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function tl(n){return Number(n)*1e3}function rf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ka("JWT malformed, contained fewer than 3 sections"),null;try{const i=n_(t);return i?JSON.parse(i):(ka("Failed to decode base64 JWT payload"),null)}catch(i){return ka("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Tm(n){const e=rf(n);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kn&&hC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(n){const e=n.auth,t=await n.getIdToken(),r=await To(n,ou(e,{idToken:t}));ue(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?b_(i.providerUserInfo):[],o=pC(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,l=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hl(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function dC(n){const e=jt(n);await au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function b_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(n,e){const t=await v_(n,{},async()=>{const r=Mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await E_(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return n.emulatorConfig&&fs(n.emulatorConfig.host)&&(c.credentials="include"),y_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gC(n,e){return ps(n,"POST","/v2/accounts:revokeToken",zu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const t=Tm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await mC(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new $i;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(n,e){ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class en{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new fC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hl(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await To(this,this.stsTokenManager.getToken(this.auth,e));return ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lC(this,e)}reload(){return dC(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new en({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(yr(this.auth));const e=await this.getIdToken();return await To(this,cC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:g,providerData:E,stsTokenManager:I}=t;ue(d&&I,e,"internal-error");const R=$i.fromJSON(this.name,I);ue(typeof d=="string",e,"internal-error"),er(r,e.name),er(i,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof g=="boolean",e,"internal-error"),er(s,e.name),er(o,e.name),er(a,e.name),er(c,e.name),er(l,e.name),er(h,e.name);const w=new en({uid:d,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:R,createdAt:l,lastLoginAt:h});return E&&Array.isArray(E)&&(w.providerData=E.map(k=>({...k}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,t,r=!1){const i=new $i;i.updateFromServerResponse(t);const s=new en({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await au(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?b_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new $i;a.updateFromIdToken(r);const c=new en({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Hl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Map;function xn(n){zn(n instanceof Function,"Expected a class definition");let e=wm.get(n);return e?(zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wm.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T_.type="NONE";const Im=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n,e,t){return`firebase:${n}:${e}:${t}`}class zi{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Va(this.userKey,i.apiKey,s),this.fullPersistenceKey=Va("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ou(this.auth,{idToken:e}).catch(()=>{});return t?en._fromGetAccountInfoResponse(this.auth,t,e):null}return en._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new zi(xn(Im),e,r);const i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||xn(Im);const o=Va(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const h=await l._get(o);if(h){let d;if(typeof h=="string"){const m=await ou(e,{idToken:h}).catch(()=>{});if(!m)break;d=await en._fromGetAccountInfoResponse(e,m,h)}else d=en._fromJSON(e,h);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new zi(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new zi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C_(e))return"Blackberry";if(P_(e))return"Webos";if(I_(e))return"Safari";if((e.includes("chrome/")||S_(e))&&!e.includes("edge/"))return"Chrome";if(R_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function w_(n=At()){return/firefox\//i.test(n)}function I_(n=At()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S_(n=At()){return/crios\//i.test(n)}function A_(n=At()){return/iemobile/i.test(n)}function R_(n=At()){return/android/i.test(n)}function C_(n=At()){return/blackberry/i.test(n)}function P_(n=At()){return/webos/i.test(n)}function sf(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yC(n=At()){return sf(n)&&!!window.navigator?.standalone}function vC(){return VA()&&document.documentMode===10}function D_(n=At()){return sf(n)||R_(n)||P_(n)||C_(n)||/windows phone/i.test(n)||A_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n,e=[]){let t;switch(n){case"Browser":t=Sm(At());break;case"Worker":t=`${Sm(At())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ds}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,e={}){return ps(n,"GET","/v2/passwordPolicy",zu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=6;class TC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Am(this),this.idTokenSubscription=new Am(this),this.beforeStateQueue=new _C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ou(this,{idToken:e}),r=await en._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await au(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(yr(this));const t=e?jt(e):null;return t&&ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EC(this),t=new TC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await gC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xn(e)||this._popupRedirectResolver;ue(t,this,"argument-error"),this.redirectPersistenceManager=await zi.create(this,[xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qu(n){return jt(n)}class Am{constructor(e){this.auth=e,this.observer=null,this.addObserver=qA(t=>this.observer=t)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IC(n){of=n}function SC(n){return of.loadJS(n)}function AC(){return of.gapiScript}function RC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n,e){const t=ef(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ri(s,e??{}))return i;$n(i,"already-initialized")}return t.initialize({options:e})}function PC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DC(n,e,t){const r=Qu(n);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=k_(e),{host:o,port:a}=OC(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(ri(l,r.config.emulator)&&ri(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,fs(o)?(o_(`${s}//${o}${c}`),a_("Auth",!0)):kC()}function k_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OC(n){const e=k_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rm(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rm(o)}}}function Rm(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,t){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(n,e){return __(n,"POST","/v1/accounts:signInWithIdp",zu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="http://localhost";class si extends V_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new si(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Qi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qi(e,t)}buildRequest(){const e={requestUri:VC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends N_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Lo{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return si._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ur.credential(t,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Lo{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Lo{constructor(){super("twitter.com")}static credential(e,t){return si._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return lr.credential(t,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(n,e){return __(n,"POST","/v1/accounts:signUp",zu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await en._fromIdTokenResponse(e,r,i),o=Cm(r);return new Cr({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Cm(r);return new Cr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Cm(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(n){if(Zt(n.app))return Promise.reject(yr(n));const e=Qu(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Cr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await NC(e,{returnSecureToken:!0}),r=await Cr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Kn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new uu(e,t,r,i)}}function x_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uu._fromErrorAndOperation(n,s,e,r):s})}async function MC(n,e,t=!1){const r=await To(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cr._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(n,e,t=!1){const{auth:r}=n;if(Zt(r.app))return Promise.reject(yr(r));const i="reauthenticate";try{const s=await To(n,x_(r,i,e,n),t);ue(s.idToken,r,"internal-error");const o=rf(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(n.uid===a,r,"user-mismatch"),Cr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&$n(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n,e,t=!1){if(Zt(n.app))return Promise.reject(yr(n));const r="signIn",i=await x_(n,r,e),s=await Cr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function UC(n,e,t,r){return jt(n).onIdTokenChanged(e,t,r)}function jC(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}const cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cu,"1"),this.storage.removeItem(cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=1e3,BC=10;class F_ extends M_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BC):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}F_.type="LOCAL";const $C=F_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends M_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}L_.type="SESSION";const U_=L_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Wu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(t.origin,s)),c=await zC(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=af("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const m=d;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function WC(n){mn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function HC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GC(){return navigator?.serviceWorker?.controller||null}function KC(){return j_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="firebaseLocalStorageDb",JC=1,lu="firebaseLocalStorage",B_="fbase_key";class Uo{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hu(n,e){return n.transaction([lu],e?"readwrite":"readonly").objectStore(lu)}function YC(){const n=indexedDB.deleteDatabase(q_);return new Uo(n).toPromise()}function Gl(){const n=indexedDB.open(q_,JC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lu,{keyPath:B_})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lu)?e(r):(r.close(),await YC(),e(await Gl()))})})}async function Pm(n,e,t){const r=Hu(n,!0).put({[B_]:e,value:t});return new Uo(r).toPromise()}async function XC(n,e){const t=Hu(n,!1).get(e),r=await new Uo(t).toPromise();return r===void 0?null:r.value}function Dm(n,e){const t=Hu(n,!0).delete(e);return new Uo(t).toPromise()}const ZC=800,eP=3;class $_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gl(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>eP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wu._getInstance(KC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HC(),!this.activeServiceWorker)return;this.sender=new QC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gl();return await Pm(e,cu,"1"),await Dm(e,cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pm(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>XC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Hu(i,!1).getAll();return new Uo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$_.type="LOCAL";const tP=$_;new Fo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n,e){return e?xn(e):(ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends V_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rP(n){return LC(n.auth,new uf(n),n.bypassAuthState)}function iP(n){const{auth:e,user:t}=n;return ue(t,e,"internal-error"),FC(t,new uf(n),n.bypassAuthState)}async function sP(n){const{auth:e,user:t}=n;return ue(t,e,"internal-error"),MC(t,new uf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rP;case"linkViaPopup":case"linkViaRedirect":return sP;case"reauthViaPopup":case"reauthViaRedirect":return iP;default:$n(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Fo(2e3,1e4);class Ni extends z_{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oP.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="pendingRedirect",Na=new Map;class uP extends z_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Na.get(this.auth._key());if(!e){try{const r=await cP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Na.set(this.auth._key(),e)}return this.bypassAuthState||Na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cP(n,e){const t=fP(e),r=hP(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function lP(n,e){Na.set(n._key(),e)}function hP(n){return xn(n._redirectPersistence)}function fP(n){return Va(aP,n.config.apiKey,n.name)}async function dP(n,e,t=!1){if(Zt(n.app))return Promise.reject(yr(n));const r=Qu(n),i=nP(r,e),o=await new uP(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=600*1e3;class mP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Q_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Om(e))}saveEventToCache(e){this.cachedEventUids.add(Om(e)),this.lastProcessedEventTime=Date.now()}}function Om(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Q_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function gP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(n,e={}){return ps(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_P=/^https?/;async function EP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yP(n);for(const t of e)try{if(bP(t))return}catch{}$n(n,"unauthorized-domain")}function bP(n){const e=Wl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!_P.test(t))return!1;if(vP.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new Fo(3e4,6e4);function km(){const n=mn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wP(n){return new Promise((e,t)=>{function r(){km(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{km(),t(pn(n,"network-request-failed"))},timeout:TP.get()})}if(mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mn().gapi?.load)r();else{const i=RC("iframefcb");return mn()[i]=()=>{gapi.load?r():t(pn(n,"network-request-failed"))},SC(`${AC()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw xa=null,e})}let xa=null;function IP(n){return xa=xa||wP(n),xa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new Fo(5e3,15e3),AP="__/auth/iframe",RP="emulator/auth/iframe",CP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DP(n){const e=n.config;ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?nf(e,RP):`https://${n.config.authDomain}/${AP}`,r={apiKey:e.apiKey,appName:n.name,v:ds},i=PP.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Mo(r).slice(1)}`}async function OP(n){const e=await IP(n),t=mn().gapi;return ue(t,n,"internal-error"),e.open({where:document.body,url:DP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pn(n,"network-request-failed"),a=mn().setTimeout(()=>{s(o)},SP.get());function c(){mn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VP=500,NP=600,xP="_blank",MP="http://localhost";class Vm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FP(n,e,t,r=VP,i=NP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...kP,width:r.toString(),height:i.toString(),top:s,left:o},l=At().toLowerCase();t&&(a=S_(l)?xP:t),w_(l)&&(e=e||MP,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,E])=>`${m}${g}=${E},`,"");if(yC(l)&&a!=="_self")return LP(e||"",a),new Vm(null);const d=window.open(e||"",a,h);ue(d,n,"popup-blocked");try{d.focus()}catch{}return new Vm(d)}function LP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="__/auth/handler",jP="emulator/auth/handler",qP=encodeURIComponent("fac");async function Nm(n,e,t,r,i,s){ue(n.config.authDomain,n,"auth-domain-config-required"),ue(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ds,eventId:i};if(e instanceof N_){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",jA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Lo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await n._getAppCheckToken(),l=c?`#${qP}=${encodeURIComponent(c)}`:"";return`${BP(n)}?${Mo(a).slice(1)}${l}`}function BP({config:n}){return n.emulator?nf(n,jP):`https://${n.authDomain}/${UP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="webStorageSupport";class $P{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=dP,this._overrideRedirectResult=lP}async _openPopup(e,t,r,i){zn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await Nm(e,t,r,Wl(),i);return FP(e,s,af())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Nm(e,t,r,Wl(),i);return WC(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OP(e),r=new mP(e);return t.register("authEvent",i=>(ue(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nl,{type:nl},i=>{const s=i?.[0]?.[nl];s!==void 0&&t(!!s),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return D_()||I_()||sf()}}const zP=$P;var xm="@firebase/auth",Mm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HP(n){Xi(new ii("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O_(n)},l=new wC(r,i,s,c);return PC(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xi(new ii("auth-internal",e=>{const t=Qu(e.getProvider("auth").getImmediate());return(r=>new QP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(xm,Mm,WP(n)),gr(xm,Mm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=300,KP=s_("authIdTokenMaxAge")||GP;let Fm=null;const JP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KP)return;const i=t?.token;Fm!==i&&(Fm=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function YP(n=h_()){const e=ef(n,"auth");if(e.isInitialized())return e.getImmediate();const t=CC(n,{popupRedirectResolver:zP,persistence:[tP,$C,U_]}),r=s_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=JP(s.toString());jC(t,o,()=>o(t.currentUser)),UC(t,a=>o(a))}}const i=r_("auth");return i&&DC(t,`http://${i}`),t}function XP(){return document.getElementsByTagName("head")?.[0]??document}IC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=pn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",XP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HP("Browser");var Lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,W_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function v(){}v.prototype=_.prototype,S.D=_.prototype,S.prototype=new v,S.prototype.constructor=S,S.C=function(b,C,D){for(var T=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)T[ke-2]=arguments[ke];return _.prototype[C].apply(b,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,v){v||(v=0);var b=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)b[C]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(C=0;16>C;++C)b[C]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=S.g[0],v=S.g[1],C=S.g[2];var D=S.g[3],T=_+(D^v&(C^D))+b[0]+3614090360&4294967295;_=v+(T<<7&4294967295|T>>>25),T=D+(C^_&(v^C))+b[1]+3905402710&4294967295,D=_+(T<<12&4294967295|T>>>20),T=C+(v^D&(_^v))+b[2]+606105819&4294967295,C=D+(T<<17&4294967295|T>>>15),T=v+(_^C&(D^_))+b[3]+3250441966&4294967295,v=C+(T<<22&4294967295|T>>>10),T=_+(D^v&(C^D))+b[4]+4118548399&4294967295,_=v+(T<<7&4294967295|T>>>25),T=D+(C^_&(v^C))+b[5]+1200080426&4294967295,D=_+(T<<12&4294967295|T>>>20),T=C+(v^D&(_^v))+b[6]+2821735955&4294967295,C=D+(T<<17&4294967295|T>>>15),T=v+(_^C&(D^_))+b[7]+4249261313&4294967295,v=C+(T<<22&4294967295|T>>>10),T=_+(D^v&(C^D))+b[8]+1770035416&4294967295,_=v+(T<<7&4294967295|T>>>25),T=D+(C^_&(v^C))+b[9]+2336552879&4294967295,D=_+(T<<12&4294967295|T>>>20),T=C+(v^D&(_^v))+b[10]+4294925233&4294967295,C=D+(T<<17&4294967295|T>>>15),T=v+(_^C&(D^_))+b[11]+2304563134&4294967295,v=C+(T<<22&4294967295|T>>>10),T=_+(D^v&(C^D))+b[12]+1804603682&4294967295,_=v+(T<<7&4294967295|T>>>25),T=D+(C^_&(v^C))+b[13]+4254626195&4294967295,D=_+(T<<12&4294967295|T>>>20),T=C+(v^D&(_^v))+b[14]+2792965006&4294967295,C=D+(T<<17&4294967295|T>>>15),T=v+(_^C&(D^_))+b[15]+1236535329&4294967295,v=C+(T<<22&4294967295|T>>>10),T=_+(C^D&(v^C))+b[1]+4129170786&4294967295,_=v+(T<<5&4294967295|T>>>27),T=D+(v^C&(_^v))+b[6]+3225465664&4294967295,D=_+(T<<9&4294967295|T>>>23),T=C+(_^v&(D^_))+b[11]+643717713&4294967295,C=D+(T<<14&4294967295|T>>>18),T=v+(D^_&(C^D))+b[0]+3921069994&4294967295,v=C+(T<<20&4294967295|T>>>12),T=_+(C^D&(v^C))+b[5]+3593408605&4294967295,_=v+(T<<5&4294967295|T>>>27),T=D+(v^C&(_^v))+b[10]+38016083&4294967295,D=_+(T<<9&4294967295|T>>>23),T=C+(_^v&(D^_))+b[15]+3634488961&4294967295,C=D+(T<<14&4294967295|T>>>18),T=v+(D^_&(C^D))+b[4]+3889429448&4294967295,v=C+(T<<20&4294967295|T>>>12),T=_+(C^D&(v^C))+b[9]+568446438&4294967295,_=v+(T<<5&4294967295|T>>>27),T=D+(v^C&(_^v))+b[14]+3275163606&4294967295,D=_+(T<<9&4294967295|T>>>23),T=C+(_^v&(D^_))+b[3]+4107603335&4294967295,C=D+(T<<14&4294967295|T>>>18),T=v+(D^_&(C^D))+b[8]+1163531501&4294967295,v=C+(T<<20&4294967295|T>>>12),T=_+(C^D&(v^C))+b[13]+2850285829&4294967295,_=v+(T<<5&4294967295|T>>>27),T=D+(v^C&(_^v))+b[2]+4243563512&4294967295,D=_+(T<<9&4294967295|T>>>23),T=C+(_^v&(D^_))+b[7]+1735328473&4294967295,C=D+(T<<14&4294967295|T>>>18),T=v+(D^_&(C^D))+b[12]+2368359562&4294967295,v=C+(T<<20&4294967295|T>>>12),T=_+(v^C^D)+b[5]+4294588738&4294967295,_=v+(T<<4&4294967295|T>>>28),T=D+(_^v^C)+b[8]+2272392833&4294967295,D=_+(T<<11&4294967295|T>>>21),T=C+(D^_^v)+b[11]+1839030562&4294967295,C=D+(T<<16&4294967295|T>>>16),T=v+(C^D^_)+b[14]+4259657740&4294967295,v=C+(T<<23&4294967295|T>>>9),T=_+(v^C^D)+b[1]+2763975236&4294967295,_=v+(T<<4&4294967295|T>>>28),T=D+(_^v^C)+b[4]+1272893353&4294967295,D=_+(T<<11&4294967295|T>>>21),T=C+(D^_^v)+b[7]+4139469664&4294967295,C=D+(T<<16&4294967295|T>>>16),T=v+(C^D^_)+b[10]+3200236656&4294967295,v=C+(T<<23&4294967295|T>>>9),T=_+(v^C^D)+b[13]+681279174&4294967295,_=v+(T<<4&4294967295|T>>>28),T=D+(_^v^C)+b[0]+3936430074&4294967295,D=_+(T<<11&4294967295|T>>>21),T=C+(D^_^v)+b[3]+3572445317&4294967295,C=D+(T<<16&4294967295|T>>>16),T=v+(C^D^_)+b[6]+76029189&4294967295,v=C+(T<<23&4294967295|T>>>9),T=_+(v^C^D)+b[9]+3654602809&4294967295,_=v+(T<<4&4294967295|T>>>28),T=D+(_^v^C)+b[12]+3873151461&4294967295,D=_+(T<<11&4294967295|T>>>21),T=C+(D^_^v)+b[15]+530742520&4294967295,C=D+(T<<16&4294967295|T>>>16),T=v+(C^D^_)+b[2]+3299628645&4294967295,v=C+(T<<23&4294967295|T>>>9),T=_+(C^(v|~D))+b[0]+4096336452&4294967295,_=v+(T<<6&4294967295|T>>>26),T=D+(v^(_|~C))+b[7]+1126891415&4294967295,D=_+(T<<10&4294967295|T>>>22),T=C+(_^(D|~v))+b[14]+2878612391&4294967295,C=D+(T<<15&4294967295|T>>>17),T=v+(D^(C|~_))+b[5]+4237533241&4294967295,v=C+(T<<21&4294967295|T>>>11),T=_+(C^(v|~D))+b[12]+1700485571&4294967295,_=v+(T<<6&4294967295|T>>>26),T=D+(v^(_|~C))+b[3]+2399980690&4294967295,D=_+(T<<10&4294967295|T>>>22),T=C+(_^(D|~v))+b[10]+4293915773&4294967295,C=D+(T<<15&4294967295|T>>>17),T=v+(D^(C|~_))+b[1]+2240044497&4294967295,v=C+(T<<21&4294967295|T>>>11),T=_+(C^(v|~D))+b[8]+1873313359&4294967295,_=v+(T<<6&4294967295|T>>>26),T=D+(v^(_|~C))+b[15]+4264355552&4294967295,D=_+(T<<10&4294967295|T>>>22),T=C+(_^(D|~v))+b[6]+2734768916&4294967295,C=D+(T<<15&4294967295|T>>>17),T=v+(D^(C|~_))+b[13]+1309151649&4294967295,v=C+(T<<21&4294967295|T>>>11),T=_+(C^(v|~D))+b[4]+4149444226&4294967295,_=v+(T<<6&4294967295|T>>>26),T=D+(v^(_|~C))+b[11]+3174756917&4294967295,D=_+(T<<10&4294967295|T>>>22),T=C+(_^(D|~v))+b[2]+718787259&4294967295,C=D+(T<<15&4294967295|T>>>17),T=v+(D^(C|~_))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(C+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var v=_-this.blockSize,b=this.B,C=this.h,D=0;D<_;){if(C==0)for(;D<=v;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(b[C++]=S.charCodeAt(D++),C==this.blockSize){i(this,b),C=0;break}}else for(;D<_;)if(b[C++]=S[D++],C==this.blockSize){i(this,b),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var v=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=v&255,v/=256;for(this.u(S),S=Array(16),_=v=0;4>_;++_)for(var b=0;32>b;b+=8)S[v++]=this.g[_]>>>b&255;return S};function s(S,_){var v=a;return Object.prototype.hasOwnProperty.call(v,S)?v[S]:v[S]=_(S)}function o(S,_){this.h=_;for(var v=[],b=!0,C=S.length-1;0<=C;C--){var D=S[C]|0;b&&D==_||(v[C]=D,b=!1)}this.g=v}var a={};function c(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return R(l(-S));for(var _=[],v=1,b=0;S>=v;b++)_[b]=S/v|0,v*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return R(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(_,8)),b=d,C=0;C<S.length;C+=8){var D=Math.min(8,S.length-C),T=parseInt(S.substring(C,C+D),_);8>D?(D=l(Math.pow(_,D)),b=b.j(D).add(l(T))):(b=b.j(v),b=b.add(l(T)))}return b}var d=c(0),m=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(I(this))return-R(this).m();for(var S=0,_=1,v=0;v<this.g.length;v++){var b=this.i(v);S+=(0<=b?b:4294967296+b)*_,_*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(I(this))return"-"+R(this).toString(S);for(var _=l(Math.pow(S,6)),v=this,b="";;){var C=x(v,_).g;v=w(v,C.j(_));var D=((0<v.g.length?v.g[0]:v.h)>>>0).toString(S);if(v=C,E(v))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function I(S){return S.h==-1}n.l=function(S){return S=w(this,S),I(S)?-1:E(S)?0:1};function R(S){for(var _=S.g.length,v=[],b=0;b<_;b++)v[b]=~S.g[b];return new o(v,~S.h).add(m)}n.abs=function(){return I(this)?R(this):this},n.add=function(S){for(var _=Math.max(this.g.length,S.g.length),v=[],b=0,C=0;C<=_;C++){var D=b+(this.i(C)&65535)+(S.i(C)&65535),T=(D>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);b=T>>>16,D&=65535,T&=65535,v[C]=T<<16|D}return new o(v,v[v.length-1]&-2147483648?-1:0)};function w(S,_){return S.add(R(_))}n.j=function(S){if(E(this)||E(S))return d;if(I(this))return I(S)?R(this).j(R(S)):R(R(this).j(S));if(I(S))return R(this.j(R(S)));if(0>this.l(g)&&0>S.l(g))return l(this.m()*S.m());for(var _=this.g.length+S.g.length,v=[],b=0;b<2*_;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<S.g.length;C++){var D=this.i(b)>>>16,T=this.i(b)&65535,ke=S.i(C)>>>16,qt=S.i(C)&65535;v[2*b+2*C]+=T*qt,k(v,2*b+2*C),v[2*b+2*C+1]+=D*qt,k(v,2*b+2*C+1),v[2*b+2*C+1]+=T*ke,k(v,2*b+2*C+1),v[2*b+2*C+2]+=D*ke,k(v,2*b+2*C+2)}for(b=0;b<_;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=_;b<2*_;b++)v[b]=0;return new o(v,0)};function k(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function O(S,_){this.g=S,this.h=_}function x(S,_){if(E(_))throw Error("division by zero");if(E(S))return new O(d,d);if(I(S))return _=x(R(S),_),new O(R(_.g),R(_.h));if(I(_))return _=x(S,R(_)),new O(R(_.g),_.h);if(30<S.g.length){if(I(S)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,b=_;0>=b.l(S);)v=L(v),b=L(b);var C=Q(v,1),D=Q(b,1);for(b=Q(b,2),v=Q(v,2);!E(b);){var T=D.add(b);0>=T.l(S)&&(C=C.add(v),D=T),b=Q(b,1),v=Q(v,1)}return _=w(S,C.j(_)),new O(C,_)}for(C=d;0<=S.l(_);){for(v=Math.max(1,Math.floor(S.m()/_.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=l(v),T=D.j(_);I(T)||0<T.l(S);)v-=b,D=l(v),T=D.j(_);E(D)&&(D=m),C=C.add(D),S=w(S,T)}return new O(C,S)}n.A=function(S){return x(this,S).h},n.and=function(S){for(var _=Math.max(this.g.length,S.g.length),v=[],b=0;b<_;b++)v[b]=this.i(b)&S.i(b);return new o(v,this.h&S.h)},n.or=function(S){for(var _=Math.max(this.g.length,S.g.length),v=[],b=0;b<_;b++)v[b]=this.i(b)|S.i(b);return new o(v,this.h|S.h)},n.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),v=[],b=0;b<_;b++)v[b]=this.i(b)^S.i(b);return new o(v,this.h^S.h)};function L(S){for(var _=S.g.length+1,v=[],b=0;b<_;b++)v[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(v,S.h)}function Q(S,_){var v=_>>5;_%=32;for(var b=S.g.length-v,C=[],D=0;D<b;D++)C[D]=0<_?S.i(D+v)>>>_|S.i(D+v+1)<<32-_:S.i(D+v);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,W_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,vr=o}).apply(typeof Lm<"u"?Lm:typeof self<"u"?self:typeof window<"u"?window:{});var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H_,$s,G_,Ma,Kl,K_,J_,Y_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,p){return u==Array.prototype||u==Object.prototype||(u[f]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ga=="object"&&ga];for(var f=0;f<u.length;++f){var p=u[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var N=u[y];if(!(N in p))break e;p=p[N]}u=u[u.length-1],y=p[u],f=f(y),f!=y&&f!=null&&e(p,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var p=0,y=!1,N={next:function(){if(!y&&p<u.length){var M=p++;return{value:f(M,u[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,p){return u.call.apply(u.bind,arguments)}function d(u,f,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),u.apply(f,N)}}return function(){return u.apply(f,arguments)}}function m(u,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function g(u,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function E(u,f){function p(){}p.prototype=f.prototype,u.aa=f.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,N,M){for(var G=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)G[Ce-2]=arguments[Ce];return f.prototype[N].apply(y,G)}}function I(u){const f=u.length;if(0<f){const p=Array(f);for(let y=0;y<f;y++)p[y]=u[y];return p}return[]}function R(u,f){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(c(y)){const N=u.length||0,M=y.length||0;u.length=N+M;for(let G=0;G<M;G++)u[N+G]=y[G]}else u.push(y)}}class w{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function x(u){return x[" "](u),u}x[" "]=function(){};var L=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Q(u,f,p){for(const y in u)f.call(p,u[y],y,u)}function S(u,f){for(const p in u)f.call(void 0,u[p],p,u)}function _(u){const f={};for(const p in u)f[p]=u[p];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,f){let p,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(p in y)u[p]=y[p];for(let M=0;M<v.length;M++)p=v[M],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function C(u){var f=1;u=u.split(":");const p=[];for(;0<f&&u.length;)p.push(u.shift()),f--;return u.length&&p.push(u.join(":")),p}function D(u){a.setTimeout(()=>{throw u},0)}function T(){var u=qe;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ke{constructor(){this.h=this.g=null}add(f,p){const y=qt.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var qt=new w(()=>new Je,u=>u.reset());class Je{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,ve=!1,qe=new ke,Sn=()=>{const u=a.Promise.resolve(void 0);Te=()=>{u.then(Bt)}};var Bt=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){D(p)}var f=qt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ve=!1};function Ve(){this.s=this.s,this.C=this.C}Ve.prototype.s=!1,Ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var mi=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return u})();function Fr(u,f){if(Be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(L){e:{try{x(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else p=="mouseover"?f=u.fromElement:p=="mouseout"&&(f=u.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Lr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Fr.aa.h.call(this)}}E(Fr,Be);var Lr={2:"touch",3:"pen",4:"mouse"};Fr.prototype.h=function(){Fr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),_s=0;function Wo(u,f,p,y,N){this.listener=u,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=N,this.key=++_s,this.da=this.fa=!1}function on(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Es(u){this.src=u,this.g={},this.h=0}Es.prototype.add=function(u,f,p,y,N){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var G=P(u,f,y,N);return-1<G?(f=u[G],p||(f.fa=!1)):(f=new Wo(f,this.src,M,!!y,N),f.fa=p,u.push(f)),f};function A(u,f){var p=f.type;if(p in u.g){var y=u.g[p],N=Array.prototype.indexOf.call(y,f,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(on(f),u.g[p].length==0&&(delete u.g[p],u.h--))}}function P(u,f,p,y){for(var N=0;N<u.length;++N){var M=u[N];if(!M.da&&M.listener==f&&M.capture==!!p&&M.ha==y)return N}return-1}var F="closure_lm_"+(1e6*Math.random()|0),$={};function q(u,f,p,y,N){if(Array.isArray(f)){for(var M=0;M<f.length;M++)q(u,f[M],p,y,N);return null}return p=oe(p),u&&u[An]?u.K(f,p,l(y)?!!y.capture:!1,N):B(u,f,p,!1,y,N)}function B(u,f,p,y,N,M){if(!f)throw Error("Invalid event type");var G=l(N)?!!N.capture:!!N,Ce=J(u);if(Ce||(u[F]=Ce=new Es(u)),p=Ce.add(f,p,y,G,M),p.proxy)return p;if(y=K(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)mi||(N=G),N===void 0&&(N=!1),u.addEventListener(f.toString(),y,N);else if(u.attachEvent)u.attachEvent(z(f.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function K(){function u(p){return f.call(u.src,u.listener,p)}const f=re;return u}function H(u,f,p,y,N){if(Array.isArray(f))for(var M=0;M<f.length;M++)H(u,f[M],p,y,N);else y=l(y)?!!y.capture:!!y,p=oe(p),u&&u[An]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],p=P(M,p,y,N),-1<p&&(on(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=J(u))&&(f=u.g[f.toString()],u=-1,f&&(u=P(f,p,y,N)),(p=-1<u?f[u]:null)&&W(p))}function W(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[An])A(f.i,u);else{var p=u.type,y=u.proxy;f.removeEventListener?f.removeEventListener(p,y,u.capture):f.detachEvent?f.detachEvent(z(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=J(f))?(A(p,u),p.h==0&&(p.src=null,f[F]=null)):on(u)}}}function z(u){return u in $?$[u]:$[u]="on"+u}function re(u,f){if(u.da)u=!0;else{f=new Fr(f,this);var p=u.listener,y=u.ha||u.src;u.fa&&W(u),u=p.call(y,f)}return u}function J(u){return u=u[F],u instanceof Es?u:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(u){return typeof u=="function"?u:(u[te]||(u[te]=function(f){return u.handleEvent(f)}),u[te])}function ie(){Ve.call(this),this.i=new Es(this),this.M=this,this.F=null}E(ie,Ve),ie.prototype[An]=!0,ie.prototype.removeEventListener=function(u,f,p,y){H(this,u,f,p,y)};function fe(u,f){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=f.type||f,typeof f=="string")f=new Be(f,u);else if(f instanceof Be)f.target=f.target||u;else{var N=f;f=new Be(y,u),b(f,N)}if(N=!0,p)for(var M=p.length-1;0<=M;M--){var G=f.g=p[M];N=_e(G,y,!0,f)&&N}if(G=f.g=u,N=_e(G,y,!0,f)&&N,N=_e(G,y,!1,f)&&N,p)for(M=0;M<p.length;M++)G=f.g=p[M],N=_e(G,y,!1,f)&&N}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var p=u.g[f],y=0;y<p.length;y++)on(p[y]);delete u.g[f],u.h--}}this.F=null},ie.prototype.K=function(u,f,p,y){return this.i.add(String(u),f,!1,p,y)},ie.prototype.L=function(u,f,p,y){return this.i.add(String(u),f,!0,p,y)};function _e(u,f,p,y){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,M=0;M<f.length;++M){var G=f[M];if(G&&!G.da&&G.capture==p){var Ce=G.listener,ct=G.ha||G.src;G.fa&&A(u.i,G),N=Ce.call(ct,y)!==!1&&N}}return N&&!y.defaultPrevented}function ot(u,f,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function at(u){u.g=ot(()=>{u.g=null,u.i&&(u.i=!1,at(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class $t extends Ve{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(u){Ve.call(this),this.h=u,this.g={}}E(gt,Ve);var Jn=[];function bs(u){Q(u.g,function(f,p){this.g.hasOwnProperty(p)&&W(f)},u),u.g={}}gt.prototype.N=function(){gt.aa.N.call(this),bs(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=a.JSON.stringify,zt=a.JSON.parse,Ho=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gi(){}gi.prototype.h=null;function Qf(u){return u.h||(u.h=u.i())}function Wf(){}var Ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hc(){Be.call(this,"d")}E(hc,Be);function fc(){Be.call(this,"c")}E(fc,Be);var Ur={},Hf=null;function Go(){return Hf=Hf||new ie}Ur.La="serverreachability";function Gf(u){Be.call(this,Ur.La,u)}E(Gf,Be);function ws(u){const f=Go();fe(f,new Gf(f))}Ur.STAT_EVENT="statevent";function Kf(u,f){Be.call(this,Ur.STAT_EVENT,u),this.stat=f}E(Kf,Be);function Rt(u){const f=Go();fe(f,new Kf(f,u))}Ur.Ma="timingevent";function Jf(u,f){Be.call(this,Ur.Ma,u),this.size=f}E(Jf,Be);function Is(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function Cb(u,f,p,y,N,M){u.info(function(){if(u.g)if(M)for(var G="",Ce=M.split("&"),ct=0;ct<Ce.length;ct++){var be=Ce[ct].split("=");if(1<be.length){var yt=be[0];be=be[1];var vt=yt.split("_");G=2<=vt.length&&vt[1]=="type"?G+(yt+"="+be+"&"):G+(yt+"=redacted&")}}else G=null;else G=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+f+`
`+p+`
`+G})}function Pb(u,f,p,y,N,M,G){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+f+`
`+p+`
`+M+" "+G})}function yi(u,f,p,y){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ob(u,p)+(y?" "+y:"")})}function Db(u,f){u.info(function(){return"TIMEOUT: "+f})}Ss.prototype.info=function(){};function Ob(u,f){if(!u.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var G=1;G<N.length;G++)N[G]=""}}}}return ut(p)}catch{return f}}var Ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dc;function Jo(){}E(Jo,gi),Jo.prototype.g=function(){return new XMLHttpRequest},Jo.prototype.i=function(){return{}},dc=new Jo;function Yn(u,f,p,y){this.j=u,this.i=f,this.l=p,this.R=y||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xf}function Xf(){this.i=null,this.g="",this.h=!1}var Zf={},pc={};function mc(u,f,p){u.L=1,u.v=ea(Rn(f)),u.m=p,u.P=!0,ed(u,null)}function ed(u,f){u.F=Date.now(),Yo(u),u.A=Rn(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),pd(p.i,"t",y),u.C=0,p=u.j.J,u.h=new Xf,u.g=kd(u.j,p?f:null,!u.m),0<u.O&&(u.M=new $t(m(u.Y,u,u.g),u.O)),f=u.U,p=u.g,y=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(Jn[0]=N.toString()),N=Jn);for(var M=0;M<N.length;M++){var G=q(p,N[M],y||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),ws(),Cb(u.i,u.u,u.A,u.l,u.R,u.m)}Yn.prototype.ca=function(u){u=u.target;const f=this.M;f&&Cn(u)==3?f.j():this.Y(u)},Yn.prototype.Y=function(u){try{if(u==this.g)e:{const vt=Cn(this.g);var f=this.g.Ba();const Ei=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||bd(this.g)))){this.J||vt!=4||f==7||(f==8||0>=Ei?ws(3):ws(2)),gc(this);var p=this.g.Z();this.X=p;t:if(td(this)){var y=bd(this.g);u="";var N=y.length,M=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),As(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,u+=this.h.i.decode(y[f],{stream:!(M&&f==N-1)});y.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,Pb(this.i,this.u,this.A,this.l,this.R,vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,ct=this.g;if((Ce=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ce)){var be=Ce;break t}}be=null}if(p=be)yi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yc(this,p);else{this.o=!1,this.s=3,Rt(12),jr(this),As(this);break e}}if(this.P){p=!0;let Jt;for(;!this.J&&this.C<G.length;)if(Jt=kb(this,G),Jt==pc){vt==4&&(this.s=4,Rt(14),p=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Zf){this.s=4,Rt(15),yi(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else yi(this.i,this.l,Jt,null),yc(this,Jt);if(td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||G.length!=0||this.h.h||(this.s=1,Rt(16),p=!1),this.o=this.o&&p,!p)yi(this.i,this.l,G,"[Invalid Chunked Response]"),jr(this),As(this);else if(0<G.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),wc(yt),yt.M=!0,Rt(11))}}else yi(this.i,this.l,G,null),yc(this,G);vt==4&&jr(this),this.o&&!this.J&&(vt==4?Cd(this.j,this):(this.o=!1,Yo(this)))}else Kb(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),jr(this),As(this)}}}catch{}finally{}};function td(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function kb(u,f){var p=u.C,y=f.indexOf(`
`,p);return y==-1?pc:(p=Number(f.substring(p,y)),isNaN(p)?Zf:(y+=1,y+p>f.length?pc:(f=f.slice(y,y+p),u.C=y+p,f)))}Yn.prototype.cancel=function(){this.J=!0,jr(this)};function Yo(u){u.S=Date.now()+u.I,nd(u,u.I)}function nd(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Is(m(u.ba,u),f)}function gc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Yn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Db(this.i,this.A),this.L!=2&&(ws(),Rt(17)),jr(this),this.s=2,As(this)):nd(this,this.S-u)};function As(u){u.j.G==0||u.J||Cd(u.j,u)}function jr(u){gc(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,bs(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function yc(u,f){try{var p=u.j;if(p.G!=0&&(p.g==u||vc(p.h,u))){if(!u.K&&vc(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)oa(p),ia(p);else break e;Tc(p),Rt(18)}}else p.za=N[1],0<p.za-p.T&&37500>N[2]&&p.F&&p.v==0&&!p.C&&(p.C=Is(m(p.Za,p),6e3));if(1>=sd(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Br(p,11)}else if((u.K||p.g==u)&&oa(p),!k(f))for(N=p.Da.g.parse(f),f=0;f<N.length;f++){let be=N[f];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];const yt=be[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));const vt=be[4];vt!=null&&(p.Aa=vt,p.j.info("SVER="+p.Aa));const Ei=be[5];Ei!=null&&typeof Ei=="number"&&0<Ei&&(y=1.5*Ei,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const Jt=u.g;if(Jt){const ua=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ua){var M=y.h;M.g||ua.indexOf("spdy")==-1&&ua.indexOf("quic")==-1&&ua.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(_c(M,M.h),M.h=null))}if(y.D){const Ic=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ic&&(y.ya=Ic,Le(y.I,y.D,Ic))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var G=u;if(y.qa=Od(y,y.J?y.ia:null,y.W),G.K){od(y.h,G);var Ce=G,ct=y.L;ct&&(Ce.I=ct),Ce.B&&(gc(Ce),Yo(Ce)),y.g=G}else Ad(y);0<p.i.length&&sa(p)}else be[0]!="stop"&&be[0]!="close"||Br(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Br(p,7):bc(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}ws(4)}catch{}}var Vb=class{constructor(u,f){this.g=u,this.map=f}};function rd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function id(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function sd(u){return u.h?1:u.g?u.g.size:0}function vc(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function _c(u,f){u.g?u.g.add(f):u.h=f}function od(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}rd.prototype.cancel=function(){if(this.i=ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ad(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const p of u.g.values())f=f.concat(p.D);return f}return I(u.i)}function Nb(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],p=u.length,y=0;y<p;y++)f.push(u[y]);return f}f=[],p=0;for(y in u)f[p++]=u[y];return f}function xb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var p=0;p<u;p++)f.push(p);return f}f=[],p=0;for(const y in u)f[p++]=y;return f}}}function ud(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var p=xb(u),y=Nb(u),N=y.length,M=0;M<N;M++)f.call(void 0,y[M],p&&p[M],u)}var cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mb(u,f){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),N=null;if(0<=y){var M=u[p].substring(0,y);N=u[p].substring(y+1)}else M=u[p];f(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function qr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof qr){this.h=u.h,Xo(this,u.j),this.o=u.o,this.g=u.g,Zo(this,u.s),this.l=u.l;var f=u.i,p=new Ps;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),ld(this,p),this.m=u.m}else u&&(f=String(u).match(cd))?(this.h=!1,Xo(this,f[1]||"",!0),this.o=Rs(f[2]||""),this.g=Rs(f[3]||"",!0),Zo(this,f[4]),this.l=Rs(f[5]||"",!0),ld(this,f[6]||"",!0),this.m=Rs(f[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}qr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Cs(f,hd,!0),":");var p=this.g;return(p||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Cs(f,hd,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Cs(p,p.charAt(0)=="/"?Ub:Lb,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Cs(p,qb)),u.join("")};function Rn(u){return new qr(u)}function Xo(u,f,p){u.j=p?Rs(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Zo(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function ld(u,f,p){f instanceof Ps?(u.i=f,Bb(u.i,u.h)):(p||(f=Cs(f,jb)),u.i=new Ps(f,u.h))}function Le(u,f,p){u.i.set(f,p)}function ea(u){return Le(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Rs(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cs(u,f,p){return typeof u=="string"?(u=encodeURI(u).replace(f,Fb),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var hd=/[#\/\?@]/g,Lb=/[#\?:]/g,Ub=/[#\?]/g,jb=/[#\?@]/g,qb=/#/g;function Ps(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Xn(u){u.g||(u.g=new Map,u.h=0,u.i&&Mb(u.i,function(f,p){u.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=Ps.prototype,n.add=function(u,f){Xn(this),this.i=null,u=vi(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(f),this.h+=1,this};function fd(u,f){Xn(u),f=vi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function dd(u,f){return Xn(u),f=vi(u,f),u.g.has(f)}n.forEach=function(u,f){Xn(this),this.g.forEach(function(p,y){p.forEach(function(N){u.call(f,N,y,this)},this)},this)},n.na=function(){Xn(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let y=0;y<f.length;y++){const N=u[y];for(let M=0;M<N.length;M++)p.push(f[y])}return p},n.V=function(u){Xn(this);let f=[];if(typeof u=="string")dd(this,u)&&(f=f.concat(this.g.get(vi(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)f=f.concat(u[p])}return f},n.set=function(u,f){return Xn(this),this.i=null,u=vi(this,u),dd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function pd(u,f,p){fd(u,f),0<p.length&&(u.i=null,u.g.set(vi(u,f),I(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var y=f[p];const M=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var N=M;G[y]!==""&&(N+="="+encodeURIComponent(String(G[y]))),u.push(N)}}return this.i=u.join("&")};function vi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Bb(u,f){f&&!u.j&&(Xn(u),u.i=null,u.g.forEach(function(p,y){var N=y.toLowerCase();y!=N&&(fd(this,y),pd(this,N,p))},u)),u.j=f}function $b(u,f){const p=new Ss;if(a.Image){const y=new Image;y.onload=g(Zn,p,"TestLoadImage: loaded",!0,f,y),y.onerror=g(Zn,p,"TestLoadImage: error",!1,f,y),y.onabort=g(Zn,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(Zn,p,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else f(!1)}function zb(u,f){const p=new Ss,y=new AbortController,N=setTimeout(()=>{y.abort(),Zn(p,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?Zn(p,"TestPingServer: ok",!0,f):Zn(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),Zn(p,"TestPingServer: error",!1,f)})}function Zn(u,f,p,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(p)}catch{}}function Qb(){this.g=new Ho}function Wb(u,f,p){const y=p||"";try{ud(u,function(N,M){let G=N;l(N)&&(G=ut(N)),f.push(y+M+"="+encodeURIComponent(G))})}catch(N){throw f.push(y+"type="+encodeURIComponent("_badmap")),N}}function ta(u){this.l=u.Ub||null,this.j=u.eb||!1}E(ta,gi),ta.prototype.g=function(){return new na(this.l,this.j)},ta.prototype.i=(function(u){return function(){return u}})({});function na(u,f){ie.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(na,ie),n=na.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Os(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;md(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function md(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ds(this):Os(this),this.readyState==3&&md(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ds(this))},n.Qa=function(u){this.g&&(this.response=u,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Os(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=f.next();return u.join(`\r
`)};function Os(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gd(u){let f="";return Q(u,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function Ec(u,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=gd(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Le(u,f,p))}function Qe(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Qe,ie);var Hb=/^https?$/i,Gb=["POST","PUT"];n=Qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dc.g(),this.v=this.o?Qf(this.o):Qf(dc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){yd(this,M);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)p.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gb,f,void 0))||y||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,G]of p)this.g.setRequestHeader(M,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ed(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){yd(this,M)}};function yd(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,vd(u),ra(u)}function vd(u){u.A||(u.A=!0,fe(u,"complete"),fe(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,fe(this,"complete"),fe(this,"abort"),ra(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ra(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_d(this):this.bb())},n.bb=function(){_d(this)};function _d(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)ot(u.Ea,0,u);else if(fe(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=G===0){var N=String(u.D).match(cd)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),y=!Hb.test(N?N.toLowerCase():"")}p=y}if(p)fe(u,"complete"),fe(u,"success");else{u.m=6;try{var M=2<Cn(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",vd(u)}}finally{ra(u)}}}}function ra(u,f){if(u.g){Ed(u);const p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||fe(u,"ready");try{p.onreadystatechange=y}catch{}}}function Ed(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),zt(f)}};function bd(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Kb(u){const f={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(k(u[y]))continue;var p=C(u[y]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=f[N]||[];f[N]=M,M.push(p)}S(f,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(u,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||f}function Td(u){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,u),this.cb=ks("retryDelaySeedMs",1e4,u),this.Wa=ks("forwardChannelMaxRetries",2,u),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rd(u&&u.concurrentRequestLimit),this.Da=new Qb,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Td.prototype,n.la=8,n.G=1,n.connect=function(u,f,p,y){Rt(0),this.W=u,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Od(this,null,this.W),sa(this)};function bc(u){if(wd(u),u.G==3){var f=u.U++,p=Rn(u.I);if(Le(p,"SID",u.K),Le(p,"RID",f),Le(p,"TYPE","terminate"),Vs(u,p),f=new Yn(u,u.j,f),f.L=2,f.v=ea(Rn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=kd(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Yo(f)}Dd(u)}function ia(u){u.g&&(wc(u),u.g.cancel(),u.g=null)}function wd(u){ia(u),u.u&&(a.clearTimeout(u.u),u.u=null),oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function sa(u){if(!id(u.h)&&!u.s){u.s=!0;var f=u.Ga;Te||Sn(),ve||(Te(),ve=!0),qe.add(f,u),u.B=0}}function Jb(u,f){return sd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Is(m(u.Ga,u,f),Pd(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new Yn(this,this.j,u);let M=this.o;if(this.S&&(M?(M=_(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Sd(this,N,f),p=Rn(this.I),Le(p,"RID",u),Le(p,"CVER",22),this.D&&Le(p,"X-HTTP-Session-Id",this.D),Vs(this,p),M&&(this.O?f="headers="+encodeURIComponent(String(gd(M)))+"&"+f:this.m&&Ec(p,this.m,M)),_c(this.h,N),this.Ua&&Le(p,"TYPE","init"),this.P?(Le(p,"$req",f),Le(p,"SID","null"),N.T=!0,mc(N,p,null)):mc(N,p,f),this.G=2}}else this.G==3&&(u?Id(this,u):this.i.length==0||id(this.h)||Id(this))};function Id(u,f){var p;f?p=f.l:p=u.U++;const y=Rn(u.I);Le(y,"SID",u.K),Le(y,"RID",p),Le(y,"AID",u.T),Vs(u,y),u.m&&u.o&&Ec(y,u.m,u.o),p=new Yn(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Sd(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),_c(u.h,p),mc(p,y,f)}function Vs(u,f){u.H&&Q(u.H,function(p,y){Le(f,y,p)}),u.l&&ud({},function(p,y){Le(f,y,p)})}function Sd(u,f,p){p=Math.min(u.i.length,p);var y=u.l?m(u.l.Na,u.l,u):null;e:{var N=u.i;let M=-1;for(;;){const G=["count="+p];M==-1?0<p?(M=N[0].g,G.push("ofs="+M)):M=0:G.push("ofs="+M);let Ce=!0;for(let ct=0;ct<p;ct++){let be=N[ct].g;const yt=N[ct].map;if(be-=M,0>be)M=Math.max(0,N[ct].g-100),Ce=!1;else try{Wb(yt,G,"req"+be+"_")}catch{y&&y(yt)}}if(Ce){y=G.join("&");break e}}}return u=u.i.splice(0,p),f.D=u,y}function Ad(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Te||Sn(),ve||(Te(),ve=!0),qe.add(f,u),u.v=0}}function Tc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Is(m(u.Fa,u),Pd(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Is(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),ia(this),Rd(this))};function wc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Rd(u){u.g=new Yn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Rn(u.qa);Le(f,"RID","rpc"),Le(f,"SID",u.K),Le(f,"AID",u.T),Le(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Le(f,"TO",u.ja),Le(f,"TYPE","xmlhttp"),Vs(u,f),u.m&&u.o&&Ec(f,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ea(Rn(f)),p.m=null,p.P=!0,ed(p,u)}n.Za=function(){this.C!=null&&(this.C=null,ia(this),Tc(this),Rt(19))};function oa(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Cd(u,f){var p=null;if(u.g==f){oa(u),wc(u),u.g=null;var y=2}else if(vc(u.h,f))p=f.D,od(u.h,f),y=1;else return;if(u.G!=0){if(f.o)if(y==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var N=u.B;y=Go(),fe(y,new Jf(y,p)),sa(u)}else Ad(u);else if(N=f.s,N==3||N==0&&0<f.X||!(y==1&&Jb(u,f)||y==2&&Tc(u)))switch(p&&0<p.length&&(f=u.h,f.i=f.i.concat(p)),N){case 1:Br(u,5);break;case 4:Br(u,10);break;case 3:Br(u,6);break;default:Br(u,2)}}}function Pd(u,f){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*f}function Br(u,f){if(u.j.info("Error code "+f),f==2){var p=m(u.fb,u),y=u.Xa;const N=!y;y=new qr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xo(y,"https"),ea(y),N?$b(y.toString(),p):zb(y.toString(),p)}else Rt(2);u.G=0,u.l&&u.l.sa(f),Dd(u),wd(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Dd(u){if(u.G=0,u.ka=[],u.l){const f=ad(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function Od(u,f,p){var y=p instanceof qr?Rn(p):new qr(p);if(y.g!="")f&&(y.g=f+"."+y.g),Zo(y,y.s);else{var N=a.location;y=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var M=new qr(null);y&&Xo(M,y),f&&(M.g=f),N&&Zo(M,N),p&&(M.l=p),y=M}return p=u.D,f=u.ya,p&&f&&Le(y,p,f),Le(y,"VER",u.la),Vs(u,y),y}function kd(u,f,p){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Qe(new ta({eb:p})):new Qe(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vd(){}n=Vd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function aa(){}aa.prototype.g=function(u,f){return new Mt(u,f)};function Mt(u,f){ie.call(this),this.g=new Td(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!k(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new _i(this)}E(Mt,ie),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){bc(this.g)},Mt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=ut(u),u=p);f.i.push(new Vb(f.Ya++,u)),f.G==3&&sa(f)},Mt.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,Mt.aa.N.call(this)};function Nd(u){hc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const p in f){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(Nd,hc);function xd(){fc.call(this),this.status=1}E(xd,fc);function _i(u){this.g=u}E(_i,Vd),_i.prototype.ua=function(){fe(this.g,"a")},_i.prototype.ta=function(u){fe(this.g,new Nd(u))},_i.prototype.sa=function(u){fe(this.g,new xd)},_i.prototype.ra=function(){fe(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Y_=function(){return new aa},J_=function(){return Go()},K_=Ur,Kl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ko.NO_ERROR=0,Ko.TIMEOUT=8,Ko.HTTP_ERROR=6,Ma=Ko,Yf.COMPLETE="complete",G_=Yf,Wf.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",ie.prototype.listen=ie.prototype.K,$s=Wf,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,H_=Qe}).apply(typeof ga<"u"?ga:typeof self<"u"?self:typeof window<"u"?window:{});const Um="@firebase/firestore",jm="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Xh("@firebase/firestore");function Ai(){return oi.logLevel}function X(n,...e){if(oi.logLevel<=me.DEBUG){const t=e.map(cf);oi.debug(`Firestore (${ms}): ${n}`,...t)}}function Qn(n,...e){if(oi.logLevel<=me.ERROR){const t=e.map(cf);oi.error(`Firestore (${ms}): ${n}`,...t)}}function Zi(n,...e){if(oi.logLevel<=me.WARN){const t=e.map(cf);oi.warn(`Firestore (${ms}): ${n}`,...t)}}function cf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,X_(n,r,t)}function X_(n,e,t){let r=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qn(r),new Error(r)}function Re(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||X_(e,i,r)}function he(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Et.UNAUTHENTICATED)))}shutdown(){}}class eD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class tD{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=s;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new Z_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class nD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new nD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Et.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qm(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=sD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function ge(n,e){return n<e?-1:n>e?1:0}function Jl(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return rl(i)===rl(s)?ge(i,s):rl(i)?1:-1}return ge(n.length,e.length)}const oD=55296,aD=57343;function rl(n){const e=n.charCodeAt(0);return e>=oD&&e<=aD}function es(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="__name__";class ln{constructor(e,t,r){t===void 0?t=0:t>e.length&&se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ln.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ln?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ln.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ge(e.length,t.length)}static compareSegments(e,t){const r=ln.isNumericId(e),i=ln.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ln.extractNumericId(e).compare(ln.extractNumericId(t)):Jl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class Fe extends ln{construct(e,t,r){return new Fe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Fe(t)}static emptyPath(){return new Fe([])}}const uD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends ln{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return uD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bm}static keyField(){return new dt([Bm])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e,t){if(!t)throw new Z(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cD(n,e,t,r){if(e===!0&&r===!0)throw new Z(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $m(n){if(!ne.isDocumentKey(n))throw new Z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zm(n){if(ne.isDocumentKey(n))throw new Z(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":se(12329,{type:typeof n})}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gu(n);throw new Z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n,e){const t={typeString:n};return e&&(t.value=e),t}function jo(n,e){if(!tE(n))throw new Z(U.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Z(U.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-62135596800,Wm=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Wm);return new Ue(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qm)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wm}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jo(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Ze("string",Ue._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Ue(0,0))}static max(){return new ce(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=-1;function lD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new Pr(i,ne.empty(),e)}function hD(n){return new Pr(n.readTime,n.key,wo)}class Pr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pr(ce.min(),ne.empty(),wo)}static max(){return new Pr(ce.max(),ne.empty(),wo)}}function fD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==dD)throw n;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&t()}),(c=>r(c)))})),o=!0,s===i&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((i=>i?j.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next((h=>{o[l]=h,++a,a===s&&r(o)}),(h=>i(h)))}}))}static doWhile(e,t){return new j(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}function mD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ys(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ku.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=-1;function Ju(n){return n==null}function hu(n){return n===0&&1/n==-1/0}function gD(n){return typeof n=="number"&&Number.isInteger(n)&&!hu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function yD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hm(e)),e=vD(n.get(t),e);return Hm(e)}function vD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case nE:t+="";break;default:t+=s}}return t}function Hm(n){return n+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function li(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||ht.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}}class ya{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ht(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Km(this.data.getIterator())}getIteratorFrom(e){return new Km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class Km{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new tn([])}unionWith(e){let t=new rt(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return es(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iE("Invalid base64 string: "+s):s}})(e);return new mt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const _D=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(n){if(Re(!!n,39018),typeof n=="string"){let e=0;const t=_D.exec(n);if(Re(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(n.seconds),nanos:Ke(n.nanos)}}function Ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Or(n){return typeof n=="string"?mt.fromBase64String(n):mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="server_timestamp",oE="__type__",aE="__previous_value__",uE="__local_write_time__";function ff(n){return(n?.mapValue?.fields||{})[oE]?.stringValue===sE}function Yu(n){const e=n.mapValue.fields[aE];return ff(e)?Yu(e):e}function Io(n){const e=Dr(n.mapValue.fields[uE].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t,r,i,s,o,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}}const fu="(default)";class So{constructor(e,t){this.projectId=e,this.database=t||fu}static empty(){return new So("","")}get isDefaultDatabase(){return this.database===fu}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",bD="__max__",va={mapValue:{}},lE="__vector__",du="value";function kr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ff(n)?4:wD(n)?9007199254740991:TD(n)?10:11:se(28295,{value:n})}function wn(n,e){if(n===e)return!0;const t=kr(n);if(t!==kr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Io(n).isEqual(Io(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Dr(i.timestampValue),a=Dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?hu(o)===hu(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return es(n.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Gm(o)!==Gm(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!wn(o[c],a[c])))return!1;return!0})(n,e);default:return se(52216,{left:n})}}function Ao(n,e){return(n.values||[]).find((t=>wn(t,e)))!==void 0}function ts(n,e){if(n===e)return 0;const t=kr(n),r=kr(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=Ke(s.integerValue||s.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Jm(n.timestampValue,e.timestampValue);case 4:return Jm(Io(n),Io(e));case 5:return Jl(n.stringValue,e.stringValue);case 6:return(function(s,o){const a=Or(s),c=Or(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ge(a[l],c[l]);if(h!==0)return h}return ge(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=ge(Ke(s.latitude),Ke(o.latitude));return a!==0?a:ge(Ke(s.longitude),Ke(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ym(n.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},c=o.fields||{},l=a[du]?.arrayValue,h=c[du]?.arrayValue,d=ge(l?.values?.length||0,h?.values?.length||0);return d!==0?d:Ym(l,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===va.mapValue&&o===va.mapValue)return 0;if(s===va.mapValue)return 1;if(o===va.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=Jl(c[d],h[d]);if(m!==0)return m;const g=ts(a[c[d]],l[h[d]]);if(g!==0)return g}return ge(c.length,h.length)})(n.mapValue,e.mapValue);default:throw se(23264,{he:t})}}function Jm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);const t=Dr(n),r=Dr(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function Ym(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ts(t[i],r[i]);if(s)return s}return ge(t.length,r.length)}function ns(n){return Yl(n)}function Yl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Dr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Or(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Yl(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Yl(t.fields[o])}`;return i+"}"})(n.mapValue):se(61005,{value:n})}function Fa(n){switch(kr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yu(n);return e?16+Fa(e):16;case 5:return 2*n.stringValue.length;case 6:return Or(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Fa(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return li(r.fields,((s,o)=>{i+=s.length+Fa(o)})),i})(n.mapValue);default:throw se(13486,{value:n})}}function Xm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xl(n){return!!n&&"integerValue"in n}function df(n){return!!n&&"arrayValue"in n}function Zm(n){return!!n&&"nullValue"in n}function eg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function La(n){return!!n&&"mapValue"in n}function TD(n){return(n?.mapValue?.fields||{})[cE]?.stringValue===lE}function oo(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return li(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=oo(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oo(n.arrayValue.values[t]);return e}return{...n}}function wD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!La(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(t)}setAll(e){let t=dt.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=oo(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());La(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];La(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){li(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Wt(oo(this.value))}}function hE(n){const e=[];return li(n.fields,((t,r)=>{const i=new dt([t]);if(La(r)){const s=hE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,ce.min(),ce.min(),ce.min(),Wt.empty(),0)}static newFoundDocument(e,t,r,i){return new wt(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new wt(e,2,t,ce.min(),ce.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,ce.min(),ce.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.position=e,this.inclusive=t}}function tg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),t.key):r=ts(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ng(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ID(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class Xe extends fE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AD(e,t,r):t==="array-contains"?new PD(e,r):t==="in"?new DD(e,r):t==="not-in"?new OD(e,r):t==="array-contains-any"?new kD(e,r):new Xe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RD(e,r):new CD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ts(t,this.value)):t!==null&&kr(this.value)===kr(t)&&this.matchesComparison(ts(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends fE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sn(e,t)}matches(e){return dE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dE(n){return n.op==="and"}function pE(n){return SD(n)&&dE(n)}function SD(n){for(const e of n.filters)if(e instanceof sn)return!1;return!0}function Zl(n){if(n instanceof Xe)return n.field.canonicalString()+n.op.toString()+ns(n.value);if(pE(n))return n.filters.map((e=>Zl(e))).join(",");{const e=n.filters.map((t=>Zl(t))).join(",");return`${n.op}(${e})`}}function mE(n,e){return n instanceof Xe?(function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&wn(r.value,i.value)})(n,e):n instanceof sn?(function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&mE(o,i.filters[a])),!0):!1})(n,e):void se(19439)}function gE(n){return n instanceof Xe?(function(t){return`${t.field.canonicalString()} ${t.op} ${ns(t.value)}`})(n):n instanceof sn?(function(t){return t.op.toString()+" {"+t.getFilters().map(gE).join(" ,")+"}"})(n):"Filter"}class AD extends Xe{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){const t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class RD extends Xe{constructor(e,t){super(e,"in",t),this.keys=yE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CD extends Xe{constructor(e,t){super(e,"not-in",t),this.keys=yE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yE(n,e){return(e.arrayValue?.values||[]).map((t=>ne.fromName(t.referenceValue)))}class PD extends Xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return df(t)&&Ao(t.arrayValue,this.value)}}class DD extends Xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ao(this.value.arrayValue,t)}}class OD extends Xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ao(this.value.arrayValue,t)}}class kD extends Xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!df(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ao(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function rg(n,e=null,t=[],r=[],i=null,s=null,o=null){return new VD(n,e,t,r,i,s,o)}function pf(n){const e=he(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Zl(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ns(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ns(r))).join(",")),e.Te=t}return e.Te}function mf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ID(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ng(n.startAt,e.startAt)&&ng(n.endAt,e.endAt)}function eh(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ND(n,e,t,r,i,s,o,a){return new qo(n,e,t,r,i,s,o,a)}function gf(n){return new qo(n)}function ig(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vE(n){return n.collectionGroup!==null}function ao(n){const e=he(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(dt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new mu(s,r))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new mu(dt.keyField(),r))}return e.Ie}function gn(n){const e=he(n);return e.Ee||(e.Ee=xD(e,ao(n))),e.Ee}function xD(n,e){if(n.limitType==="F")return rg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new mu(i.field,s)}));const t=n.endAt?new pu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pu(n.startAt.position,n.startAt.inclusive):null;return rg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function th(n,e){const t=n.filters.concat([e]);return new qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nh(n,e,t){return new qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xu(n,e){return mf(gn(n),gn(e))&&n.limitType===e.limitType}function _E(n){return`${pf(gn(n))}|lt:${n.limitType}`}function Ri(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>gE(i))).join(", ")}]`),Ju(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>ns(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>ns(i))).join(",")),`Target(${r})`})(gn(n))}; limitType=${n.limitType})`}function Zu(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){const l=tg(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,ao(r),i)||r.endAt&&!(function(o,a,c){const l=tg(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,ao(r),i))})(n,e)}function MD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EE(n){return(e,t)=>{let r=!1;for(const i of ao(n)){const s=FD(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function FD(n,e,t){const r=n.field.isKeyField()?ne.comparator(e.key,t.key):(function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ts(c,l):se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new ze(ne.comparator);function Wn(){return LD}const bE=new ze(ne.comparator);function zs(...n){let e=bE;for(const t of n)e=e.insert(t.key,t);return e}function TE(n){let e=bE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Xr(){return uo()}function wE(){return uo()}function uo(){return new hi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const UD=new ze(ne.comparator),jD=new rt(ne.comparator);function ye(...n){let e=jD;for(const t of n)e=e.add(t);return e}const qD=new rt(ge);function BD(){return qD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function IE(n){return{integerValue:""+n}}function $D(n,e){return gD(e)?IE(e):yf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this._=void 0}}function zD(n,e,t){return n instanceof Ro?(function(i,s){const o={fields:{[oE]:{stringValue:sE},[uE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ff(s)&&(s=Yu(s)),s&&(o.fields[aE]=s),{mapValue:o}})(t,e):n instanceof Co?AE(n,e):n instanceof Po?RE(n,e):(function(i,s){const o=SE(i,s),a=sg(o)+sg(i.Ae);return Xl(o)&&Xl(i.Ae)?IE(a):yf(i.serializer,a)})(n,e)}function QD(n,e,t){return n instanceof Co?AE(n,e):n instanceof Po?RE(n,e):t}function SE(n,e){return n instanceof gu?(function(r){return Xl(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Ro extends ec{}class Co extends ec{constructor(e){super(),this.elements=e}}function AE(n,e){const t=CE(e);for(const r of n.elements)t.some((i=>wn(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Po extends ec{constructor(e){super(),this.elements=e}}function RE(n,e){let t=CE(e);for(const r of n.elements)t=t.filter((i=>!wn(i,r)));return{arrayValue:{values:t}}}class gu extends ec{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sg(n){return Ke(n.integerValue||n.doubleValue)}function CE(n){return df(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t){this.field=e,this.transform=t}}function HD(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Co&&i instanceof Co||r instanceof Po&&i instanceof Po?es(r.elements,i.elements,wn):r instanceof gu&&i instanceof gu?wn(r.Ae,i.Ae):r instanceof Ro&&i instanceof Ro})(n.transform,e.transform)}class GD{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ua(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tc{}function PE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new OE(n.key,yn.none()):new Bo(n.key,n.data,yn.none());{const t=n.data,r=Wt.empty();let i=new rt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(n.key,r,new tn(i.toArray()),yn.none())}}function KD(n,e,t){n instanceof Bo?(function(i,s,o){const a=i.value.clone(),c=ag(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof fi?(function(i,s,o){if(!Ua(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ag(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(DE(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function co(n,e,t,r){return n instanceof Bo?(function(s,o,a,c){if(!Ua(s.precondition,o))return a;const l=s.value.clone(),h=ug(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof fi?(function(s,o,a,c){if(!Ua(s.precondition,o))return a;const l=ug(s.fieldTransforms,c,o),h=o.data;return h.setAll(DE(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(n,e,t,r):(function(s,o,a){return Ua(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function JD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=SE(r.transform,i||null);s!=null&&(t===null&&(t=Wt.empty()),t.set(r.field,s))}return t||null}function og(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&es(r,i,((s,o)=>HD(s,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bo extends tc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends tc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function DE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ag(n,e,t){const r=new Map;Re(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QD(o,a,t[i]))}return r}function ug(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,zD(s,o,e))}return r}class OE extends tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YD extends tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KD(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=co(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=co(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wE();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=PE(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ye())}isEqual(e){return this.batchId===e.batchId&&es(this.mutations,e.mutations,((t,r)=>og(t,r)))&&es(this.baseMutations,e.baseMutations,((t,r)=>og(t,r)))}}class vf{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return UD})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vf(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,Ee;function tO(n){switch(n){case U.OK:return se(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return se(15467,{code:n})}}function kE(n){if(n===void 0)return Qn("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ye.OK:return U.OK;case Ye.CANCELLED:return U.CANCELLED;case Ye.UNKNOWN:return U.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return U.INTERNAL;case Ye.UNAVAILABLE:return U.UNAVAILABLE;case Ye.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ye.NOT_FOUND:return U.NOT_FOUND;case Ye.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ye.ABORTED:return U.ABORTED;case Ye.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ye.DATA_LOSS:return U.DATA_LOSS;default:return se(39323,{code:n})}}(Ee=Ye||(Ye={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new vr([4294967295,4294967295],0);function cg(n){const e=nO().encode(n),t=new W_;return t.update(e),new Uint8Array(t.digest())}function lg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vr([t,r],0),new vr([i,s],0)]}class _f{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qs(`Invalid padding: ${t}`);if(r<0)throw new Qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(vr.fromNumber(r)));return i.compare(rO)===1&&(i=new vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cg(e),[r,i]=lg(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _f(s,i,t);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=cg(e),[r,i]=lg(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Qs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nc(ce.min(),i,new ze(ge),Wn(),ye())}}class $o{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $o(r,t,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class VE{constructor(e,t){this.targetId=e,this.Ce=t}}class NE{constructor(e,t,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class hg{constructor(){this.ve=0,this.Fe=fg(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),t=ye(),r=ye();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:se(38017,{changeType:s})}})),new $o(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=fg()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wn(),this.Je=_a(),this.He=_a(),this.Ye=new ze(ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(eh(s))if(r===0){const o=new ne(s.path);this.et(t,o,wt.newNoDocument(o,ce.min()))}else Re(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Or(r).toUint8Array()}catch(c){if(c instanceof iE)return Zi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new _f(o,i,s)}catch(c){return Zi(c instanceof Qs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&eh(a.target)){const c=new ne(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,wt.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}}));let r=ye();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new nc(e,t,this.Ye,this.je,r);return this.je=Wn(),this.Je=_a(),this.He=_a(),this.Ye=new ze(ge),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new rt(ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new rt(ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _a(){return new ze(ne.comparator)}function fg(){return new ze(ne.comparator)}const sO={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aO={and:"AND",or:"OR"};class uO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rh(n,e){return n.useProto3Json||Ju(e)?e:{value:e}}function yu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cO(n,e){return yu(n,e.toTimestamp())}function vn(n){return Re(!!n,49232),ce.fromTimestamp((function(t){const r=Dr(t);return new Ue(r.seconds,r.nanos)})(n))}function Ef(n,e){return ih(n,e).canonicalString()}function ih(n,e){const t=(function(i){return new Fe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ME(n){const e=Fe.fromString(n);return Re(qE(e),10190,{key:e.toString()}),e}function sh(n,e){return Ef(n.databaseId,e.path)}function il(n,e){const t=ME(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(LE(t))}function FE(n,e){return Ef(n.databaseId,e)}function lO(n){const e=ME(n);return e.length===4?Fe.emptyPath():LE(e)}function oh(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LE(n){return Re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dg(n,e,t){return{name:sh(n,e),fields:t.value.mapValue.fields}}function hO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:se(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(Re(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const h=l.code===void 0?U.UNKNOWN:kE(l.code);return new Z(h,l.message||"")})(o);t=new NE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=il(n,r.document.name),s=vn(r.document.updateTime),o=r.document.createTime?vn(r.document.createTime):ce.min(),a=new Wt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ja(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=il(n,r.document),s=r.readTime?vn(r.readTime):ce.min(),o=wt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ja([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=il(n,r.document),s=r.removedTargetIds||[];t=new ja([],s,i,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new eO(i,s),a=r.targetId;t=new VE(a,o)}}return t}function fO(n,e){let t;if(e instanceof Bo)t={update:dg(n,e.key,e.value)};else if(e instanceof OE)t={delete:sh(n,e.key)};else if(e instanceof fi)t={update:dg(n,e.key,e.data),updateMask:bO(e.fieldMask)};else{if(!(e instanceof YD))return se(16599,{Vt:e.type});t={verify:sh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof Ro)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw se(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:cO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se(27497)})(n,e.precondition)),t}function dO(n,e){return n&&n.length>0?(Re(e!==void 0,14353),n.map((t=>(function(i,s){let o=i.updateTime?vn(i.updateTime):vn(s);return o.isEqual(ce.min())&&(o=vn(s)),new GD(o,i.transformResults||[])})(t,e)))):[]}function pO(n,e){return{documents:[FE(n,e.path)]}}function mO(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FE(n,i);const s=(function(l){if(l.length!==0)return jE(sn.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const o=(function(l){if(l.length!==0)return l.map((h=>(function(m){return{field:Ci(m.field),direction:vO(m.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=rh(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function gO(n){let e=lO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Re(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(d){const m=UE(d);return m instanceof sn&&pE(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(d){return d.map((m=>(function(E){return new mu(Pi(E.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(m)))})(t.orderBy));let a=null;t.limit&&(a=(function(d){let m;return m=typeof d=="object"?d.value:d,Ju(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(d){const m=!!d.before,g=d.values||[];return new pu(g,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(d){const m=!d.before,g=d.values||[];return new pu(g,m)})(t.endAt)),ND(e,i,o,s,a,"F",c,l)}function yO(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pi(t.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pi(t.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pi(t.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pi(t.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xe.create(Pi(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return sn.create(t.compositeFilter.filters.map((r=>UE(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}})(t.compositeFilter.op))})(n):se(30097,{filter:n})}function vO(n){return sO[n]}function _O(n){return oO[n]}function EO(n){return aO[n]}function Ci(n){return{fieldPath:n.canonicalString()}}function Pi(n){return dt.fromServerFormat(n.fieldPath)}function jE(n){return n instanceof Xe?(function(t){if(t.op==="=="){if(eg(t.value))return{unaryFilter:{field:Ci(t.field),op:"IS_NAN"}};if(Zm(t.value))return{unaryFilter:{field:Ci(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eg(t.value))return{unaryFilter:{field:Ci(t.field),op:"IS_NOT_NAN"}};if(Zm(t.value))return{unaryFilter:{field:Ci(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ci(t.field),op:_O(t.op),value:t.value}}})(n):n instanceof sn?(function(t){const r=t.getFilters().map((i=>jE(i)));return r.length===1?r[0]:{compositeFilter:{op:EO(t.op),filters:r}}})(n):se(54877,{filter:n})}function bO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t,r,i,s=ce.min(),o=ce.min(),a=mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.yt=e}}function wO(n){const e=gO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.Cn=new SO}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Pr.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class SO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rt(Fe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BE=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(BE,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rs(0)}static cr(){return new rs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LruGarbageCollector",AO=1048576;function gg([n,e],[t,r]){const i=ge(n,t);return i===0?ge(e,r):i}class RO{constructor(e){this.Ir=e,this.buffer=new rt(gg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(mg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ys(t)?X(mg,"Ignoring IndexedDB error during garbage collection: ",t):await gs(t)}await this.Vr(3e5)}))}}class PO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Ku.ce);const r=new RO(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(pg)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,t)))).next((d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(l=Date.now(),Ai()<=me.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function DO(n,e){return new PO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.changes=new hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&co(r.mutation,i,tn.empty(),Ue.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ye()){const i=Xr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let o=zs();return s.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Xr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ye())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,r,i){let s=Wn();const o=uo(),a=(function(){return uo()})();return t.forEach(((c,l)=>{const h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof fi)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),co(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):o.set(l.key,tn.empty())})),this.recalculateAndSaveOverlays(e,s).next((c=>(c.forEach(((l,h)=>o.set(l,h))),t.forEach(((l,h)=>a.set(l,new kO(h,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,t){const r=uo();let i=new ze(((o,a)=>o-a)),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=t.get(c);if(l===null)return;let h=r.get(c)||tn.empty();h=a.applyToLocalView(l,h),r.set(c,h);const d=(i.get(a.batchId)||ye()).add(c);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,d=wE();h.forEach((m=>{if(!s.has(m)){const g=PE(t.get(m),r.get(m));g!==null&&d.set(m,g),s=s.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return j.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):j.resolve(Xr());let a=wo,c=s;return o.next((l=>j.forEach(l,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{c=c.insert(h,m)}))))).next((()=>this.populateOverlays(e,l,s))).next((()=>this.computeViews(e,c,l,ye()))).next((h=>({batchId:a,changes:TE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next((r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=zs();return this.indexManager.getCollectionParents(e,s).next((a=>j.forEach(a,(c=>{const l=(function(d,m){return new qo(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next((h=>{h.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((o=>{s.forEach(((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))}));let a=zs();return o.forEach(((c,l)=>{const h=s.get(c);h!==void 0&&co(h.mutation,l,tn.empty(),Ue.now()),Zu(t,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:vn(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:wO(i.bundledQuery),readTime:vn(i.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.overlays=new ze(ne.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xr();return j.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const i=Xr(),s=t.length+1,o=new ne(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ze(((l,h)=>l-h));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Xr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Xr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,h)=>a.set(l,h))),!(a.size()>=i)););return j.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZD(t,r));let s=this.qr.get(t);s===void 0&&(s=ye(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this.Qr=new rt(st.$r),this.Ur=new rt(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new st(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new st(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ne(new Fe([])),r=new st(t,e),i=new st(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ne(new Fe([])),r=new st(t,e),i=new st(t,e+1);let s=ye();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const t=new st(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ne.comparator(e.key,t.key)||ge(e.Yr,t.Yr)}static Kr(e,t){return ge(e.Yr,t.Yr)||ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new rt(st.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?hf:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(ge);return t.forEach((i=>{const s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new st(new ne(s),0);let a=new rt(ge);return this.Zr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)}),o),j.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,(i=>{const s=new st(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new st(t,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.ri=e,this.docs=(function(){return new ze(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let r=Wn();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Wn();const o=t.path,a=new ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||fD(hD(h),r)<=0||(i.has(h.key)||Zu(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,t,r,i){se(9500)}ii(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new UO(this)}getSize(e){return j.resolve(this.size)}}class UO extends OO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.persistence=e,this.si=new hi((t=>pf(t)),mf),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new bf,this.targetCount=0,this.ai=rs.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new rs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),j.waitFor(s).next((()=>i))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),j.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ku(0),this.li=!1,this.li=!0,this.hi=new MO,this.referenceDelegate=e(this),this.Pi=new jO(this),this.indexManager=new IO,this.remoteDocumentCache=(function(i){return new LO(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new TO(t),this.Ii=new NO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new FO(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);const i=new qO(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class qO extends pD{constructor(e){super(),this.currentSequenceNumber=e}}class Tf{constructor(e){this.persistence=e,this.Ri=new bf,this.Vi=null}static mi(e){return new Tf(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const i=ne.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vu{constructor(e,t){this.persistence=e,this.pi=new hi((r=>yD(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=DO(this,t)}static mi(e,t){return new vu(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?j.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((a=>{a||(r++,s.removeEntry(o,ce.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fa(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ye(),i=ye();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wf(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return NA()?8:mD(At())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new BO;return this.Ss(e,t,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ai()<=me.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ri(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ai()<=me.DEBUG&&X("QueryEngine","Query:",Ri(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ai()<=me.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ri(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(t))):j.resolve())}ys(e,t){if(ig(t))return j.resolve(null);let r=gn(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=nh(t,null,"F"),r=gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=ye(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,nh(t,null,"F")):this.vs(e,l,t,c)}))))})))))}ws(e,t,r,i){return ig(t)||i.isEqual(ce.min())?j.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(t,s);return this.Cs(t,o,r,i)?j.resolve(null):(Ai()<=me.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ri(t)),this.vs(e,o,t,lD(i,wo)).next((a=>a)))}))}Ds(e,t){let r=new rt(EE(e));return t.forEach(((i,s)=>{Zu(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ai()<=me.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ri(t)),this.ps.getDocumentsMatchingQuery(e,t,Pr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="LocalStore",zO=3e8;class QO{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ze(ge),this.xs=new hi((s=>pf(s)),mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function WO(n,e,t,r){return new QO(n,e,t,r)}async function zE(n,e){const t=he(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let c=ye();for(const l of i){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next((l=>({Ls:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function HO(n,e){const t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){const d=l.batch,m=d.keys();let g=j.resolve();return m.forEach((E=>{g=g.next((()=>h.getEntry(c,E))).next((I=>{const R=l.docVersions.get(E);Re(R!==null,48541),I.version.compareTo(R)<0&&(d.applyToRemoteDocument(I,l),I.isValidDocument()&&(I.setReadTime(l.commitVersion),h.addEntry(I)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(c,d)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function QE(n){const e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GO(n,e){const t=he(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach(((h,d)=>{const m=i.get(d);if(!m)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,d).next((()=>t.Pi.addMatchingKeys(s,h.addedDocuments,d))));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(mt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),(function(I,R,w){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=zO?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(m,g,h)&&a.push(t.Pi.updateTargetData(s,g))}));let c=Wn(),l=ye();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))})),a.push(KO(s,o,e.documentUpdates).next((h=>{c=h.ks,l=h.qs}))),!r.isEqual(ce.min())){const h=t.Pi.getLastRemoteSnapshotVersion(s).next((d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(h)}return j.waitFor(a).next((()=>o.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,c,l))).next((()=>c))})).then((s=>(t.Ms=i,s)))}function KO(n,e,t){let r=ye(),i=ye();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let o=Wn();return t.forEach(((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):X(If,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function JO(n,e){const t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hf),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function YO(n,e){const t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,j.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ah(n,e,t){const r=he(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ys(o))throw o;X(If,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function yg(n,e,t){const r=he(n);let i=ce.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,h){const d=he(c),m=d.xs.get(h);return m!==void 0?j.resolve(d.Ms.get(m)):d.Pi.getTargetData(l,h)})(r,o,gn(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((c=>{s=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:ce.min(),t?s:ye()))).next((a=>(XO(r,MD(e),a),{documents:a,Qs:s})))))}function XO(n,e,t){let r=n.Os.get(e)||ce.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class vg{constructor(){this.activeTargetIds=BD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZO{constructor(){this.Mo=new vg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="ConnectivityMonitor";class Eg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(_g,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(_g,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function uh(){return Ea===null?Ea=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RestConnection",tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const o=uh(),a=this.zo(e,t.toUriEncodedString());X(sl,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:l}=new URL(a),h=fs(l);return this.Jo(e,a,c,r,h).then((d=>(X(sl,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Zi(sl,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ms})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=tk[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class ik extends nk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=uh();return new Promise(((a,c)=>{const l=new H_;l.setWithCredentials(!0),l.listenOnce(G_.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Ma.NO_ERROR:const d=l.getResponseJson();X(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Ma.TIMEOUT:X(_t,`RPC '${e}' ${o} timed out`),c(new Z(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:const m=l.getStatus();if(X(_t,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g?.error;if(E&&E.status&&E.message){const I=(function(w){const k=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(k)>=0?k:U.UNKNOWN})(E.status);c(new Z(I,E.message))}else c(new Z(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Z(U.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{X(_t,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);X(_t,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=uh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Y_(),a=J_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=s.join("");X(_t,`Creating RPC '${e}' stream ${i}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,g=!1;const E=new rk({Yo:R=>{g?X(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(X(_t,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),X(_t,`RPC '${e}' stream ${i} sending:`,R),d.send(R))},Zo:()=>d.close()}),I=(R,w,k)=>{R.listen(w,(O=>{try{k(O)}catch(x){setTimeout((()=>{throw x}),0)}}))};return I(d,$s.EventType.OPEN,(()=>{g||(X(_t,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),I(d,$s.EventType.CLOSE,(()=>{g||(g=!0,X(_t,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(d))})),I(d,$s.EventType.ERROR,(R=>{g||(g=!0,Zi(_t,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),E.a_(new Z(U.UNAVAILABLE,"The operation could not be completed")))})),I(d,$s.EventType.MESSAGE,(R=>{if(!g){const w=R.data[0];Re(!!w,16349);const k=w,O=k?.error||k[0]?.error;if(O){X(_t,`RPC '${e}' stream ${i} received error:`,O);const x=O.status;let L=(function(_){const v=Ye[_];if(v!==void 0)return kE(v)})(x),Q=O.message;L===void 0&&(L=U.INTERNAL,Q="Unknown error status: "+x+" with message "+O.message),g=!0,E.a_(new Z(L,Q)),d.close()}else X(_t,`RPC '${e}' stream ${i} received:`,w),E.u_(w)}})),I(a,K_.STAT_EVENT,(R=>{R.stat===Kl.PROXY?X(_t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Kl.NOPROXY&&X(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ol(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){return new uO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="PersistentStream";class HE{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Z(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return X(bg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(X(bg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sk extends HE{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=hO(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?vn(o.readTime):ce.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=oh(this.serializer),t.addTarget=(function(s,o){let a;const c=o.target;if(a=eh(c)?{documents:pO(s,c)}:{query:mO(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xE(s,o.resumeToken);const l=rh(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=yu(s,o.snapshotVersion.toTimestamp());const l=rh(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=yO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=oh(this.serializer),t.removeTarget=e,this.q_(t)}}class ok extends HE{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dO(e.writeResults,e.commitTime),r=vn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=oh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>fO(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{}class uk extends ak{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,ih(t,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(U.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,ih(t,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(U.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ck{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(t),this.aa=!1):X("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="RemoteStore";class lk{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{di(this)&&(X(ai,"Restarting streams for network reachability change."),await(async function(c){const l=he(c);l.Ea.add(4),await zo(l),l.Ra.set("Unknown"),l.Ea.delete(4),await ic(l)})(this))}))})),this.Ra=new ck(r,i)}}async function ic(n){if(di(n))for(const e of n.da)await e(!0)}async function zo(n){for(const e of n.da)await e(!1)}function GE(n,e){const t=he(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cf(t)?Rf(t):vs(t).O_()&&Af(t,e))}function Sf(n,e){const t=he(n),r=vs(t);t.Ia.delete(e),r.O_()&&KE(t,e),t.Ia.size===0&&(r.O_()?r.L_():di(t)&&t.Ra.set("Unknown"))}function Af(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vs(n).Y_(e)}function KE(n,e){n.Va.Ue(e),vs(n).Z_(e)}function Rf(n){n.Va=new iO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vs(n).start(),n.Ra.ua()}function Cf(n){return di(n)&&!vs(n).x_()&&n.Ia.size>0}function di(n){return he(n).Ea.size===0}function JE(n){n.Va=void 0}async function hk(n){n.Ra.set("Online")}async function fk(n){n.Ia.forEach(((e,t)=>{Af(n,e)}))}async function dk(n,e){JE(n),Cf(n)?(n.Ra.ha(e),Rf(n)):n.Ra.set("Unknown")}async function pk(n,e,t){if(n.Ra.set("Online"),e instanceof NE&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){X(ai,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _u(n,r)}else if(e instanceof ja?n.Va.Ze(e):e instanceof VE?n.Va.st(e):n.Va.tt(e),!t.isEqual(ce.min()))try{const r=await QE(n.localStore);t.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ia.get(l);h&&s.Ia.set(l,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),KE(s,c);const d=new hr(h.target,c,l,h.sequenceNumber);Af(s,d)})),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){X(ai,"Failed to raise snapshot:",r),await _u(n,r)}}async function _u(n,e,t){if(!ys(e))throw e;n.Ea.add(1),await zo(n),n.Ra.set("Offline"),t||(t=()=>QE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{X(ai,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ic(n)}))}function YE(n,e){return e().catch((t=>_u(n,t,e)))}async function sc(n){const e=he(n),t=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hf;for(;mk(e);)try{const i=await JO(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,gk(e,i)}catch(i){await _u(e,i)}XE(e)&&ZE(e)}function mk(n){return di(n)&&n.Ta.length<10}function gk(n,e){n.Ta.push(e);const t=Vr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function XE(n){return di(n)&&!Vr(n).x_()&&n.Ta.length>0}function ZE(n){Vr(n).start()}async function yk(n){Vr(n).ra()}async function vk(n){const e=Vr(n);for(const t of n.Ta)e.ea(t.mutations)}async function _k(n,e,t){const r=n.Ta.shift(),i=vf.from(r,e,t);await YE(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await sc(n)}async function Ek(n,e){e&&Vr(n).X_&&await(async function(r,i){if((function(o){return tO(o)&&o!==U.ABORTED})(i.code)){const s=r.Ta.shift();Vr(r).B_(),await YE(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await sc(r)}})(n,e),XE(n)&&ZE(n)}async function Tg(n,e){const t=he(n);t.asyncQueue.verifyOperationInProgress(),X(ai,"RemoteStore received new credentials");const r=di(t);t.Ea.add(3),await zo(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ic(t)}async function bk(n,e){const t=he(n);e?(t.Ea.delete(2),await ic(t)):e||(t.Ea.add(2),await zo(t),t.Ra.set("Unknown"))}function vs(n){return n.ma||(n.ma=(function(t,r,i){const s=he(t);return s.sa(),new sk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:hk.bind(null,n),t_:fk.bind(null,n),r_:dk.bind(null,n),H_:pk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Cf(n)?Rf(n):n.Ra.set("Unknown")):(await n.ma.stop(),JE(n))}))),n.ma}function Vr(n){return n.fa||(n.fa=(function(t,r,i){const s=he(t);return s.sa(),new ok(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:yk.bind(null,n),r_:Ek.bind(null,n),ta:vk.bind(null,n),na:_k.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await sc(n)):(await n.fa.stop(),n.Ta.length>0&&(X(ai,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Pf(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),ys(n))return new Z(U.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=zs(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.ga=new ze(ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class is{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new is(e,t,Wi.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wk{constructor(){this.queries=Ig(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=he(t),s=i.queries;i.queries=Ig(),s.forEach(((o,a)=>{for(const c of a.Sa)c.onError(r)}))})(this,new Z(U.ABORTED,"Firestore shutting down"))}}function Ig(){return new hi((n=>_E(n)),Xu)}async function eb(n,e){const t=he(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Tk,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Df(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Of(t)}async function tb(n,e){const t=he(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Ik(n,e){const t=he(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Of(t)}function Sk(n,e,t){const r=he(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Of(n){n.Ca.forEach((e=>{e.next()}))}var ch,Sg;(Sg=ch||(ch={})).Ma="default",Sg.Cache="cache";class nb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ch.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class ib{constructor(e){this.key=e}}class Ak{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ye(),this.mutatedKeys=ye(),this.eu=EE(e),this.tu=new Wi(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new wg,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,d)=>{const m=i.get(h),g=Zu(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;m&&g?m.data.isEqual(g.data)?E!==I&&(r.track({type:3,doc:g}),R=!0):this.su(m,g)||(r.track({type:2,doc:g}),R=!0,(c&&this.eu(g,c)>0||l&&this.eu(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),R=!0):m&&!g&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(g?(o=o.add(g),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,E){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:R})}};return I(g)-I(E)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new is(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new ib(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new rb(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return is.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kf="SyncEngine";class Rk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ck{constructor(e){this.key=e,this.hu=!1}}class Pk{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new hi((a=>_E(a)),Xu),this.Iu=new Map,this.Eu=new Set,this.du=new ze(ne.comparator),this.Au=new Map,this.Ru=new bf,this.Vu={},this.mu=new Map,this.fu=rs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Dk(n,e,t=!0){const r=lb(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await sb(r,e,t,!0),i}async function Ok(n,e){const t=lb(n);await sb(t,e,!0,!1)}async function sb(n,e,t,r){const i=await YO(n.localStore,gn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await kk(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&GE(n.remoteStore,i),a}async function kk(n,e,t,r,i){n.pu=(d,m,g)=>(async function(I,R,w,k){let O=R.view.ru(w);O.Cs&&(O=await yg(I.localStore,R.query,!1).then((({documents:S})=>R.view.ru(S,O))));const x=k&&k.targetChanges.get(R.targetId),L=k&&k.targetMismatches.get(R.targetId)!=null,Q=R.view.applyChanges(O,I.isPrimaryClient,x,L);return Rg(I,R.targetId,Q.au),Q.snapshot})(n,d,m,g);const s=await yg(n.localStore,e,!0),o=new Ak(e,s.Qs),a=o.ru(s.documents),c=$o.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);Rg(n,t,l.au);const h=new Rk(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function Vk(n,e,t){const r=he(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!Xu(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ah(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sf(r.remoteStore,i.targetId),lh(r,i.targetId)})).catch(gs)):(lh(r,i.targetId),await ah(r.localStore,i.targetId,!0))}async function Nk(n,e){const t=he(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sf(t.remoteStore,r.targetId))}async function xk(n,e,t){const r=Bk(n);try{const i=await(function(o,a){const c=he(o),l=Ue.now(),h=a.reduce(((g,E)=>g.add(E.key)),ye());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let E=Wn(),I=ye();return c.Ns.getEntries(g,h).next((R=>{E=R,E.forEach(((w,k)=>{k.isValidDocument()||(I=I.add(w))}))})).next((()=>c.localDocuments.getOverlayedDocuments(g,E))).next((R=>{d=R;const w=[];for(const k of a){const O=JD(k,d.get(k.key).overlayedDocument);O!=null&&w.push(new fi(k.key,O,hE(O.value.mapValue),yn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,w,a)})).next((R=>{m=R;const w=R.applyToLocalDocumentSet(d,I);return c.documentOverlayCache.saveOverlays(g,R.batchId,w)}))})).then((()=>({batchId:m.batchId,changes:TE(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new ze(ge)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,i.batchId,t),await Qo(r,i.changes),await sc(r.remoteStore)}catch(i){const s=Df(i,"Failed to persist write");t.reject(s)}}async function ob(n,e){const t=he(n);try{const r=await GO(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=t.Au.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Re(o.hu,14607):i.removedDocuments.size>0&&(Re(o.hu,42227),o.hu=!1))})),await Qo(t,r,e)}catch(r){await gs(r)}}function Ag(n,e,t){const r=he(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const c=he(o);c.onlineState=a;let l=!1;c.queries.forEach(((h,d)=>{for(const m of d.Sa)m.va(a)&&(l=!0)})),l&&Of(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mk(n,e,t){const r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new ze(ne.comparator);o=o.insert(s,wt.newNoDocument(s,ce.min()));const a=ye().add(s),c=new nc(ce.min(),new Map,new ze(ge),o,a);await ob(r,c),r.du=r.du.remove(s),r.Au.delete(e),Vf(r)}else await ah(r.localStore,e,!1).then((()=>lh(r,e,t))).catch(gs)}async function Fk(n,e){const t=he(n),r=e.batch.batchId;try{const i=await HO(t.localStore,e);ub(t,r,null),ab(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Qo(t,i)}catch(i){await gs(i)}}async function Lk(n,e,t){const r=he(n);try{const i=await(function(o,a){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next((d=>(Re(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(l,d)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h))).next((()=>c.localDocuments.getDocuments(l,h)))}))})(r.localStore,e);ub(r,e,t),ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Qo(r,i)}catch(i){await gs(i)}}function ab(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ub(n,e,t){const r=he(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function lh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||cb(n,r)}))}function cb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sf(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Vf(n))}function Rg(n,e,t){for(const r of t)r instanceof rb?(n.Ru.addReference(r.key,e),Uk(n,r)):r instanceof ib?(X(kf,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||cb(n,r.key)):se(19791,{wu:r})}function Uk(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(X(kf,"New document in limbo: "+t),n.Eu.add(r),Vf(n))}function Vf(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ne(Fe.fromString(e)),r=n.fu.next();n.Au.set(r,new Ck(t)),n.du=n.du.insert(t,r),GE(n.remoteStore,new hr(gn(gf(t.path)),r,"TargetPurposeLimboResolution",Ku.ce))}}async function Qo(n,e,t){const r=he(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,t).then((l=>{if((l||t)&&r.isPrimaryClient){const h=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);const h=wf.As(c.targetId,l);s.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(c,l){const h=he(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>j.forEach(l,(m=>j.forEach(m.Es,(g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g))).next((()=>j.forEach(m.ds,(g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))))))}catch(d){if(!ys(d))throw d;X(If,"Failed to update sequence numbers: "+d)}for(const d of l){const m=d.targetId;if(!d.fromCache){const g=h.Ms.get(m),E=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(m,I)}}})(r.localStore,s))}async function jk(n,e){const t=he(n);if(!t.currentUser.isEqual(e)){X(kf,"User change. New user:",e.toKey());const r=await zE(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((c=>{c.reject(new Z(U.CANCELLED,o))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qo(t,r.Ls)}}function qk(n,e){const t=he(n),r=t.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let i=ye();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function lb(n){const e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mk.bind(null,e),e.Pu.H_=Ik.bind(null,e.eventManager),e.Pu.yu=Sk.bind(null,e.eventManager),e}function Bk(n){const e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lk.bind(null,e),e}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WO(this.persistence,new $O,e.initialUser,this.serializer)}Cu(e){return new $E(Tf.mi,this.serializer)}Du(e){return new ZO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class $k extends Eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof vu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CO(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new $E((r=>vu.mi(r,t)),this.serializer)}}class hh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ag(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jk.bind(null,this.syncEngine),await bk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wk})()}createDatastore(e){const t=rc(e.databaseInfo.databaseId),r=(function(s){return new ik(s)})(e.databaseInfo);return(function(s,o,a,c){return new uk(s,o,a,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,o,a){return new lk(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ag(this.syncEngine,t,0)),(function(){return Eg.v()?new Eg:new ek})())}createSyncEngine(e,t){return(function(i,s,o,a,c,l,h){const d=new Pk(i,s,o,a,c,l);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=he(t);X(ai,"RemoteStore shutting down."),r.Ea.add(5),await zo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="FirestoreClient";class zk{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{X(Nr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(X(Nr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Df(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function al(n,e){n.asyncQueue.verifyOperationInProgress(),X(Nr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await zE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Cg(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Qk(n);X(Nr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Tg(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Tg(e.remoteStore,i))),n._onlineComponents=e}async function Qk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(Nr,"Using user provided OfflineComponentProvider");try{await al(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Zi("Error using user provided cache. Falling back to memory cache: "+t),await al(n,new Eu)}}else X(Nr,"Using default OfflineComponentProvider"),await al(n,new $k(void 0));return n._offlineComponents}async function fb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(Nr,"Using user provided OnlineComponentProvider"),await Cg(n,n._uninitializedComponentsProvider._online)):(X(Nr,"Using default OnlineComponentProvider"),await Cg(n,new hh))),n._onlineComponents}function Wk(n){return fb(n).then((e=>e.syncEngine))}async function fh(n){const e=await fb(n),t=e.eventManager;return t.onListen=Dk.bind(null,e.syncEngine),t.onUnlisten=Vk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ok.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Nk.bind(null,e.syncEngine),t}function Hk(n,e,t={}){const r=new _r;return n.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,c,l){const h=new hb({next:m=>{h.Nu(),o.enqueueAndForget((()=>tb(s,d))),m.fromCache&&c.source==="server"?l.reject(new Z(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),d=new nb(a,h,{includeMetadataChanges:!0,qa:!0});return eb(s,d)})(await fh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="firestore.googleapis.com",Dg=!0;class Og{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pb,this.ssl=Dg}else this.host=e.host,this.ssl=e.ssl??Dg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AO)throw new Z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=db(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Og({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Og(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZP;switch(r.type){case"firstParty":return new rD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Pg.get(t);r&&(X("ComponentProvider","Removing Datastore"),Pg.delete(t),r.terminate())})(this),Promise.resolve()}}function Gk(n,e,t,r={}){n=Mn(n,oc);const i=fs(e),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(o_(`https://${a}`),a_("Firestore",!0)),s.host!==pb&&s.host!==a&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!ri(c,o)&&(n._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Et.MOCK_USER;else{l=SA(r.mockUserToken,n._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(d)}n._authCredentials=new eD(new Z_(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class et{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jo(t,et._jsonSchema))return new et(e,r||null,new ne(Fe.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ze("string",et._jsonSchemaVersion),referencePath:Ze("string")};class Er extends pi{constructor(e,t,r){super(e,t,gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ne(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function ac(n,e,...t){if(n=jt(n),eE("collection","path",e),n instanceof oc){const r=Fe.fromString(e,...t);return zm(r),new Er(n,null,r)}{if(!(n instanceof et||n instanceof Er))throw new Z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return zm(r),new Er(n.firestore,null,r)}}function ss(n,e,...t){if(n=jt(n),arguments.length===1&&(e=lf.newId()),eE("doc","path",e),n instanceof oc){const r=Fe.fromString(e,...t);return $m(r),new et(n,null,new ne(r))}{if(!(n instanceof et||n instanceof Er))throw new Z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return $m(r),new et(n.firestore,n instanceof Er?n.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="AsyncQueue";class Vg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WE(this,"async_queue_retry"),this._c=()=>{const r=ol();r&&X(kg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=ol();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ol();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ys(e))throw e;X(kg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",Ng(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Pf.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&se(47125,{Pc:Ng(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ng(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}class os extends oc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vg(e),this._firestoreClient=void 0,await e}}}function Kk(n,e){const t=typeof n=="object"?n:h_(),r=typeof n=="string"?n:fu,i=ef(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=wA("firestore");s&&Gk(i,...s)}return i}function Nf(n){if(n._terminated)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jk(n),n._firestoreClient}function Jk(n){const e=n._freezeSettings(),t=(function(i,s,o,a){return new ED(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,db(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(mt.fromBase64String(e))}catch(t){throw new Z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ht(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jo(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:Ze("string",Ht._jsonSchemaVersion),bytes:Ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_n._jsonSchemaVersion}}static fromJSON(e){if(jo(e,_n._jsonSchema))return new _n(e.latitude,e.longitude)}}_n._jsonSchemaVersion="firestore/geoPoint/1.0",_n._jsonSchema={type:Ze("string",_n._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jo(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new En(e.vectorValues);throw new Z(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Ze("string",En._jsonSchemaVersion),vectorValues:Ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=/^__.*__$/;class Xk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bo(e,this.data,t,this.fieldTransforms)}}function mb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:n})}}class Ff{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mb(this.Ac)&&Yk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Zk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rc(e)}Cc(e,t,r,i=!1){return new Ff({Ac:e,methodName:t,Dc:r,path:dt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lf(n){const e=n._freezeSettings(),t=rc(n._databaseId);return new Zk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gb(n,e,t,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);_b("Data must be an object, but it was:",o,r);const a=yb(r,o);let c,l;if(s.merge)c=new tn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=t1(e,d,t);if(!o.contains(m))throw new Z(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);r1(h,m)||h.push(m)}c=new tn(h),l=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,l=o.fieldTransforms;return new Xk(new Wt(a),c,l)}class Uf extends Mf{_toFieldTransform(e){return new WD(e.path,new Ro)}isEqual(e){return e instanceof Uf}}function e1(n,e,t,r=!1){return jf(t,n.Cc(r?4:3,e))}function jf(n,e){if(vb(n=jt(n)))return _b("Unsupported field value:",e,n),yb(n,e);if(n instanceof Mf)return(function(r,i){if(!mb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let c=jf(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $D(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:yu(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yu(i.serializer,s)}}if(r instanceof _n)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:xE(i.serializer,r._byteString)};if(r instanceof et){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ef(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof En)return(function(o,a){return{mapValue:{fields:{[cE]:{stringValue:lE},[du]:{arrayValue:{values:o.toArray().map((l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return yf(a.serializer,l)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Gu(r)}`)})(n,e)}function yb(n,e){const t={};return rE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(n,((r,i)=>{const s=jf(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function vb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof _n||n instanceof Ht||n instanceof et||n instanceof Mf||n instanceof En)}function _b(n,e,t){if(!vb(t)||!tE(t)){const r=Gu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function t1(n,e,t){if((e=jt(e))instanceof xf)return e._internalPath;if(typeof e=="string")return Eb(n,e);throw bu("Field path arguments must be of type string or ",n,!1,void 0,t)}const n1=new RegExp("[~\\*/\\[\\]]");function Eb(n,e,t){if(e.search(n1)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xf(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bu(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Z(U.INVALID_ARGUMENT,a+n+c)}function r1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i1 extends bb{data(){return super.data()}}function qf(n,e){return typeof e=="string"?Eb(n,e):e instanceof xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bf{}class s1 extends Bf{}function o1(n,e,...t){let r=[];e instanceof Bf&&r.push(e),r=r.concat(t),(function(s){const o=s.filter((c=>c instanceof $f)).length,a=s.filter((c=>c instanceof uc)).length;if(o>1||o>0&&a>0)throw new Z(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class uc extends s1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new uc(e,t,r)}_apply(e){const t=this._parse(e);return wb(e._query,t),new pi(e.firestore,e.converter,th(e._query,t))}_parse(e){const t=Lf(e.firestore);return(function(s,o,a,c,l,h,d){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Fg(d,h);const E=[];for(const I of d)E.push(Mg(c,s,I));m={arrayValue:{values:E}}}else m=Mg(c,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Fg(d,h),m=e1(a,o,d,h==="in"||h==="not-in");return Xe.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function a1(n,e,t){const r=e,i=qf("where",n);return uc._create(i,r,t)}class $f extends Bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $f(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)wb(o,c),o=th(o,c)})(e._query,t),new pi(e.firestore,e.converter,th(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Mg(n,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new Z(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vE(e)&&t.indexOf("/")!==-1)throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Fe.fromString(t));if(!ne.isDocumentKey(r))throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xm(n,new ne(r))}if(t instanceof et)return Xm(n,t._key);throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gu(t)}.`)}function Fg(n,e){if(!Array.isArray(n)||n.length===0)throw new Z(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wb(n,e){const t=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Z(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u1{convertValue(e,t="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return li(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[du].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new En(t)}convertGeoPoint(e){return new _n(Ke(e.latitude),Ke(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Io(e));default:return null}}convertTimestamp(e){const t=Dr(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fe.fromString(e);Re(qE(r),9688,{name:e});const i=new So(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ws{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ei extends bb{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ei._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",ei._jsonSchema={type:Ze("string",ei._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class qa extends ei{data(e={}){return super.data(e)}}class ti{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new qa(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const c=new qa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const c=new qa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:c1(a.type),doc:c,oldIndex:l,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ti._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:n})}}ti._jsonSchemaVersion="firestore/querySnapshot/1.0",ti._jsonSchema={type:Ze("string",ti._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class zf extends u1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function l1(n){n=Mn(n,pi);const e=Mn(n.firestore,os),t=Nf(e),r=new zf(e);return Tb(n._query),Hk(t,n._query).then((i=>new ti(e,r,n,i)))}function Sb(n,e,t){n=Mn(n,et);const r=Mn(n.firestore,os),i=Ib(n.converter,e,t);return Ab(r,[gb(Lf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yn.none())])}function h1(n,e){const t=Mn(n.firestore,os),r=ss(n),i=Ib(n.converter,e);return Ab(t,[gb(Lf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then((()=>r))}function lo(n,...e){n=jt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xg(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(xg(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof et)o=Mn(n.firestore,os),a=gf(n._key.path),s={next:c=>{e[r]&&e[r](f1(o,n,c))},error:e[r+1],complete:e[r+2]};else{const c=Mn(n,pi);o=Mn(c.firestore,os),a=c._query;const l=new zf(o);s={next:h=>{e[r]&&e[r](new ti(o,l,c,h))},error:e[r+1],complete:e[r+2]},Tb(n._query)}return(function(l,h,d,m){const g=new hb(m),E=new nb(h,g,d);return l.asyncQueue.enqueueAndForget((async()=>eb(await fh(l),E))),()=>{g.Nu(),l.asyncQueue.enqueueAndForget((async()=>tb(await fh(l),E)))}})(Nf(o),a,i,s)}function Ab(n,e){return(function(r,i){const s=new _r;return r.asyncQueue.enqueueAndForget((async()=>xk(await Wk(r),i,s))),s.promise})(Nf(n),e)}function f1(n,e,t){const r=t.docs.get(e._key),i=new zf(n);return new ei(n,i,e._key,r,new Ws(t.hasPendingWrites,t.fromCache),e.converter)}function dh(){return new Uf("serverTimestamp")}(function(e,t=!0){(function(i){ms=i})(ds),Xi(new ii("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new os(new tD(r.getProvider("auth-internal")),new iD(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(l.options.projectId,h)})(o,i),o);return s={useFetchStreams:t,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),gr(Um,jm,e),gr(Um,jm,"esm2020")})();const d1={apiKey:"AIzaSyBewBUk6Oj4PjB6rVr8iVfZ6Zcyqm7CbXs",authDomain:"uno-game-e3329.firebaseapp.com",projectId:"uno-game-e3329",storageBucket:"uno-game-e3329.appspot.com",messagingSenderId:"793495202186",appId:"1:793495202186:web:705f97f5e200bf41120073",measurementId:"G-6PuJ7DGC39"},Rb=l_(d1),xr=YP(Rb),Fn=Kk(Rb);async function cc(){xr.currentUser||await xC(xr)}const p1=Ov({uri:"https://uno-graphql-web-3.vercel.app/api/graphql",fetch}),m1=pA(async(n,{headers:e})=>{const t=await xr.currentUser?.getIdToken().catch(()=>null);return{headers:{...e,...t?{Authorization:`Bearer ${t}`}:{}}}}),g1=new Zv({link:m1.concat(p1),cache:new Yv});async function y1(n){await cc();const e=xr.currentUser.uid,t=Math.random().toString(36).slice(2,8).toUpperCase(),r=await h1(ac(Fn,"rooms"),{code:t,hostUid:e,status:"lobby",createdAt:dh()});return await Sb(ss(Fn,"rooms",r.id,"players",e),{displayName:n,joinedAt:dh(),isReady:!1,isHost:!0,handCount:0}),{roomId:r.id,code:t}}async function v1(n,e){await cc();const t=xr.currentUser.uid,r=o1(ac(Fn,"rooms"),a1("code","==",n)),i=await l1(r);if(i.empty)throw new Error("Room not found");const s=i.docs[0].id;return await Sb(ss(Fn,"rooms",s,"players",t),{displayName:e,joinedAt:dh(),isReady:!1,isHost:!1,handCount:0},{merge:!0}),{roomId:s}}function _1(n,e,t){const r=lo(ss(Fn,"rooms",n),s=>e({id:s.id,...s.data()})),i=lo(ac(Fn,"rooms",n,"players"),s=>t(s.docs.map(o=>({id:o.id,...o.data()}))));return()=>{r(),i()}}const E1={class:"p-3 rounded border border-slate-300 mb-4"},b1={class:"mb-2"},T1={class:"flex gap-2"},w1={key:0,class:"mt-3 text-sm"},I1={class:"list-disc ml-6"},S1=Pu({__name:"Lobby",emits:["enter-room"],setup(n,{emit:e}){const t=e,r=Dt("Player"),i=Dt(null),s=Dt(""),o=Dt(null),a=Dt([]);let c=null;Ph(async()=>{await cc()}),Ou(()=>{c&&c()});function l(m){c&&c(),c=_1(m,g=>o.value=g,g=>a.value=g)}async function h(){const{roomId:m,code:g}=await y1(r.value||"Player");i.value=m,l(m),t("enter-room",{id:m,host:!0}),console.log("Invite code:",g)}async function d(){const m=s.value.trim();if(!m)return;const{roomId:g}=await v1(m.toUpperCase(),r.value||"Player");i.value=g,l(g),t("enter-room",{id:g,host:!1})}return(m,g)=>(Pe(),$e("div",E1,[ae("div",b1,[g[2]||(g[2]=ae("label",{class:"block text-sm mb-1"},"Display name",-1)),jd(ae("input",{"onUpdate:modelValue":g[0]||(g[0]=E=>r.value=E),class:"border px-2 py-1 rounded w-full"},null,512),[[hp,r.value]])]),ae("div",T1,[ae("button",{onClick:h,class:"px-3 py-2 rounded bg-emerald-600 text-white"},"Create room"),jd(ae("input",{"onUpdate:modelValue":g[1]||(g[1]=E=>s.value=E),placeholder:"Enter code",class:"border px-2 py-1 rounded"},null,512),[[hp,s.value]]),ae("button",{onClick:d,class:"px-3 py-2 rounded bg-blue-600 text-white"},"Join")]),o.value?(Pe(),$e("div",w1,[ae("div",null,[g[3]||(g[3]=ae("b",null,"Room",-1)),Vn(" "+nt(i.value),1)]),ae("div",null,[g[4]||(g[4]=ae("b",null,"Code",-1)),Vn(" "+nt(o.value.code),1)]),ae("div",null,[g[5]||(g[5]=ae("b",null,"Status",-1)),Vn(" "+nt(o.value.status),1)]),g[6]||(g[6]=ae("div",{class:"mt-1"},[ae("b",null,"Players")],-1)),ae("ul",I1,[(Pe(!0),$e(Qt,null,by(a.value,E=>(Pe(),$e("li",{key:E.id},nt(E.displayName)+nt(E.isHost?" (host)":""),1))),128))])])):un("",!0)]))}}),A1=["title","disabled"],R1=["src","alt"],C1={key:1,class:"w-full h-full flex items-center justify-center text-xs px-1"},Lg=Pu({__name:"CardView",props:{card:{},onPlay:{},size:{default:"md"}},setup(n){const e=n,t=Dt(!1);function r(c){return c.kind==="number"?`${c.color}_${c.value}.png`:c.kind==="action"?`${c.color}_${c.action}.png`:c.action==="wildDraw4"?"wildDraw4.png":"wild.png"}function i(c){return c.kind==="number"?`${c.color} ${c.value}`:c.kind==="action"?`${c.color} ${c.action}`:c.action==="wildDraw4"?"+4":"wild"}const s=Lt(()=>`/UNO-WEB3/cards/${r(e.card)}`),o=Lt(()=>e.size==="lg"?{w:96,h:144}:e.size==="sm"?{w:48,h:72}:{w:64,h:96});function a(){e.onPlay?.(e.card)}return(c,l)=>(Pe(),$e("button",{onClick:a,title:JSON.stringify(n.card),class:"m-1 p-0 rounded-lg border border-slate-400 overflow-hidden bg-white hover:shadow transition disabled:opacity-100",style:Do({width:`${o.value.w}px`,height:`${o.value.h}px`,cursor:n.onPlay?"pointer":"default"}),disabled:!n.onPlay},[t.value?(Pe(),$e("div",C1,nt(i(n.card)),1)):(Pe(),$e("img",{key:0,src:s.value,alt:i(n.card),class:"w-full h-full object-contain",onError:l[0]||(l[0]=h=>t.value=!0)},null,40,R1))],12,A1))}}),P1="https://uno-graphql-web-3.vercel.app/api/graphql";async function lc(n,e){await cc();const t=await xr.currentUser?.getIdToken(),r=await fetch(P1,{method:"POST",headers:{"content-type":"application/json",...t?{authorization:`Bearer ${t}`}:{}},body:JSON.stringify({query:n,variables:e})});if(!r.ok){const s=await r.text().catch(()=>"");throw new Error(`GraphQL HTTP ${r.status} ${r.statusText} ${s}`)}const i=await r.json();if(i.errors?.length)throw new Error(i.errors[0]?.message??"GraphQL error");return i.data}function D1(n,e){const t=lo(ss(Fn,"rooms",n),o=>e.onRoom({id:o.id,...o.data()})),r=lo(ac(Fn,"rooms",n,"players"),o=>e.onPlayers(o.docs.map(a=>({id:a.id,...a.data()})))),i=xr.currentUser?.uid,s=i?lo(ss(Fn,"rooms",n,"hands",i),o=>e.onMyHand(o.data()?.cards??[])):()=>{};return()=>{t(),r(),s()}}async function Ug(n){await lc("mutation ($roomId: ID!) { startGame(roomId: $roomId) }",{roomId:n})}async function jg(n,e){await lc("mutation ($roomId: ID!, $card: JSON!) { playCard(roomId: $roomId, card: $card) }",{roomId:n,card:e})}async function O1(n){await lc("mutation ($roomId: ID!) { drawOne(roomId: $roomId) }",{roomId:n})}async function k1(n){await lc("mutation ($roomId: ID!) { endTurn(roomId: $roomId) }",{roomId:n})}function qg(n,e){if(e.kind==="wild")return!0;if(n.kind==="wild"){const t=n.chosenColor;return t?e.color===t:!0}return e.kind==="number"&&n.kind==="number"?e.color===n.color||e.value===n.value:e.kind==="action"&&n.kind==="action"?e.color===n.color||e.action===n.action:e.color===n.color}const V1={key:0,class:"p-6 space-y-3"},N1={class:"flex items-center gap-2"},x1={key:0,class:"mt-2"},M1=["disabled","title"],F1={key:1},L1={class:"mt-2 flex items-center gap-3"},U1={key:2,class:"ml-2 px-2 py-1 rounded text-sm font-semibold border"},j1={class:"mt-3 flex items-center gap-2"},q1=["disabled","title"],B1={class:"mt-4"},$1={class:"font-semibold mb-1"},z1={key:0,class:"mb-2 flex items-center gap-2"},Q1={class:"flex flex-wrap gap-1.5"},W1=["onClick","disabled","aria-disabled","title"],H1={key:2,class:"mt-4 p-4 rounded-xl border bg-white/70 backdrop-blur"},G1={class:"text-xl font-bold mb-1"},K1={class:"text-sm text-gray-600 mb-3"},J1={key:1},Y1={key:1,class:"p-6"},X1=Pu({__name:"OnlineBoard",props:{roomId:{},isHost:{type:Boolean}},setup(n){const e=Dt(null),t=Dt([]),r=Dt([]),i=Dt(null);let s=null;function o(v){s&&s(),s=D1(v,{onRoom:b=>e.value=b,onPlayers:b=>t.value=b,onMyHand:b=>r.value=b})}Ph(()=>o(n.roomId)),Ou(()=>{s&&s()}),wa(()=>n.roomId,v=>{v&&o(v)});const a=Lt(()=>e.value?.topCard??null),c=Lt(()=>xr.currentUser?.uid??null),l=Lt(()=>e.value?.currentTurn===c.value&&e.value?.status==="playing"),h=Lt(()=>n.isHost||e.value?.hostUid===c.value||t.value.length>0&&t.value[0]?.id===c.value),d=Lt(()=>e.value?.pendingType??null),m=Lt(()=>e.value?.chainPlayer===c.value&&e.value?.chainValue!==null),g=Lt(()=>!!a.value&&r.value.some(v=>qg(a.value,v))),E=Lt(()=>{const v=e.value?.winnerUid;return v?t.value.find(b=>b.id===v)?.displayName??v:null}),I=Lt(()=>{const v=a.value;return v&&v.kind==="wild"?v.chosenColor??null:null});async function R(v){const b=i.value;if(!b)return;const C={...b.card,chosenColor:v};try{await jg(n.roomId,C)}catch(D){alert(D?.message??String(D))}finally{i.value=null}}function w(v){return d.value==="draw2"?v.kind==="action"&&v.action==="draw2":d.value==="draw4"?v.kind==="wild"&&v.action==="wildDraw4":!1}function k(v){return m.value&&v.kind==="number"&&v.value===e.value?.chainValue}const O=Lt(()=>e.value?.pendingDraw?{n:e.value.pendingDraw,type:e.value.pendingType}:null);function x(v){return l.value?d.value?w(v):!!a.value&&qg(a.value,v)||k(v):!1}async function L(v,b){if(!x(v))return;const C=v;if(v.kind==="wild"&&!C.chosenColor){i.value={index:b,card:v};return}try{await jg(n.roomId,v)}catch(D){alert(D?.message??String(D))}}async function Q(){try{await O1(n.roomId)}catch(v){alert(v?.message??String(v))}}async function S(){try{await k1(n.roomId)}catch(v){alert(v?.message??String(v))}}async function _(){try{e.value?.code&&await navigator.clipboard.writeText(e.value.code)}catch{}}return(v,b)=>e.value?(Pe(),$e("div",V1,[b[16]||(b[16]=ae("h1",{class:"text-3xl font-extrabold"},"UNO (Online)",-1)),ae("div",null,[b[7]||(b[7]=ae("b",null,"Room:",-1)),Vn(" "+nt(n.roomId),1)]),ae("div",N1,[ae("div",null,[b[8]||(b[8]=ae("b",null,"Code:",-1)),b[9]||(b[9]=Vn()),ae("code",null,nt(e.value.code??""),1)]),e.value.code?(Pe(),$e("button",{key:0,onClick:_,class:"px-2 py-1 text-sm rounded border"}," Copy ")):un("",!0)]),ae("div",null,[b[10]||(b[10]=ae("b",null,"Status:",-1)),Vn(" "+nt(e.value.status),1)]),ae("div",null,[b[11]||(b[11]=ae("b",null,"Turn:",-1)),Vn(" "+nt(e.value.status==="finished"?"":l.value?"You":e.value.currentTurn??""),1)]),ae("div",null,[b[12]||(b[12]=ae("b",null,"Players:",-1)),Vn(" "+nt(t.value.map(C=>C.displayName).join(", ")),1)]),e.value.status==="lobby"||e.value.status==="finished"?(Pe(),$e("div",x1,[h.value?(Pe(),$e("button",{key:0,class:"px-4 py-2 rounded bg-emerald-600 text-white disabled:opacity-50",disabled:t.value.length<2,title:t.value.length<2?"Need at least 2 players":"Start game",onClick:b[0]||(b[0]=C=>pl(Ug)(n.roomId))}," Start game ",8,M1)):(Pe(),$e("div",F1,"Waiting for host to start"))])):un("",!0),e.value.status==="playing"?(Pe(),$e(Qt,{key:1},[ae("div",L1,[b[13]||(b[13]=ae("div",{class:"text-sm font-semibold"},"Top card:",-1)),a.value?(Pe(),Ka(Lg,{key:0,card:a.value,size:"lg"},null,8,["card"])):un("",!0),I.value?(Pe(),$e("div",{key:1,class:"ml-2 px-2 py-1 rounded text-sm font-semibold border",title:"Current color chosen for wild",style:Do({background:I.value==="red"?"#fee2e2":I.value==="yellow"?"#fef9c3":I.value==="green"?"#dcfce7":"#dbeafe"})}," Current color: "+nt(I.value),5)):un("",!0),O.value?(Pe(),$e("div",U1,nt(O.value.type==="draw4"?"+4":"+2")+" stack: draw "+nt(O.value.n),1)):un("",!0)]),ae("div",j1,[ae("button",{onClick:Q,disabled:!l.value,class:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50",title:O.value?`Draw ${O.value.n} and pass`:g.value?"You already have a playable card":"Draw one"},nt(O.value?`Draw ${O.value.n}`:"Draw"),9,q1),m.value?(Pe(),$e("button",{key:0,onClick:S,class:"px-4 py-2 rounded bg-gray-700 text-white",title:"Finish your number chain and pass the turn"}," End turn ")):un("",!0)]),ae("div",B1,[ae("h3",$1,"Your hand ("+nt(r.value.length)+")",1),i.value?(Pe(),$e("div",z1,[b[14]||(b[14]=ae("span",{class:"text-sm"},"Pick color:",-1)),ae("button",{type:"button",onClick:b[1]||(b[1]=C=>R("red")),class:"px-3 py-1 rounded border",style:{background:"#ef4444",color:"white"}},"red"),ae("button",{type:"button",onClick:b[2]||(b[2]=C=>R("yellow")),class:"px-3 py-1 rounded border",style:{background:"#eab308"}},"yellow"),ae("button",{type:"button",onClick:b[3]||(b[3]=C=>R("green")),class:"px-3 py-1 rounded border",style:{background:"#22c55e",color:"white"}},"green"),ae("button",{type:"button",onClick:b[4]||(b[4]=C=>R("blue")),class:"px-3 py-1 rounded border",style:{background:"#3b82f6",color:"white"}},"blue"),ae("button",{type:"button",onClick:b[5]||(b[5]=C=>i.value=null),class:"px-2 py-1 rounded border",title:"Cancel"},"Cancel")])):un("",!0),ae("div",Q1,[(Pe(!0),$e(Qt,null,by(r.value,(C,D)=>(Pe(),$e("button",{key:D,type:"button",onClick:T=>L(C,D),disabled:!x(C),"aria-disabled":!x(C),class:Au(["relative inline-block p-0 border-0 bg-transparent",x(C)?"cursor-pointer":"opacity-60 cursor-not-allowed"]),title:l.value?d.value?d.value==="draw4"?"Only +4 can be played (or Draw)":"Only +2 can be played (or Draw)":void 0:"Not your turn"},[xt(Lg,{card:C,size:"md"},null,8,["card"]),b[15]||(b[15]=ae("span",{class:"absolute inset-0"},null,-1))],10,W1))),128))])])],64)):un("",!0),e.value.status==="finished"?(Pe(),$e("div",H1,[ae("div",G1," "+nt(E.value??"A player")+" won!",1),ae("div",K1," Game over"+nt(I.value?`  final color: ${I.value}`:"")+". ",1),h.value?(Pe(),$e("button",{key:0,class:"px-4 py-2 rounded bg-emerald-600 text-white",onClick:b[6]||(b[6]=C=>pl(Ug)(n.roomId))}," Start new game ")):(Pe(),$e("div",J1,"Waiting for host to start a new game"))])):un("",!0)])):(Pe(),$e("div",Y1,"Loading room"))}}),Z1=Pu({__name:"App",setup(n){const e=Dt(null),t=Dt(!1);function r(i){e.value=i.id,t.value=i.host}return(i,s)=>e.value?(Pe(),Ka(X1,{key:1,roomId:e.value,isHost:t.value},null,8,["roomId","isHost"])):(Pe(),Ka(S1,{key:0,onEnterRoom:r}))}});mI({setup(){Sy(dA,g1)},render:()=>Qw(Z1)}).mount("#root")});export default eV();
