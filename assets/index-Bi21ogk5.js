(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Ld={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function vS(){if(O_)return Tl;O_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Tl.Fragment=t,Tl.jsx=n,Tl.jsxs=n,Tl}var V_;function ES(){return V_||(V_=1,Ld.exports=vS()),Ld.exports}var rt=ES(),zd={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function TS(){if(M_)return bt;M_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,tt={};function $(D,Z,nt){this.props=D,this.context=Z,this.refs=tt,this.updater=nt||q}$.prototype.isReactComponent={},$.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},$.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function dt(){}dt.prototype=$.prototype;function ut(D,Z,nt){this.props=D,this.context=Z,this.refs=tt,this.updater=nt||q}var at=ut.prototype=new dt;at.constructor=ut,Q(at,$.prototype),at.isPureReactComponent=!0;var ft=Array.isArray,gt={H:null,A:null,T:null,S:null,V:null},At=Object.prototype.hasOwnProperty;function O(D,Z,nt,J,mt,It){return nt=It.ref,{$$typeof:r,type:D,key:Z,ref:nt!==void 0?nt:null,props:It}}function S(D,Z){return O(D.type,Z,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function V(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(nt){return Z[nt]})}var M=/\/+/g;function P(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):Z.toString(36)}function I(){}function pe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ae(D,Z,nt,J,mt){var It=typeof D;(It==="undefined"||It==="boolean")&&(D=null);var St=!1;if(D===null)St=!0;else switch(It){case"bigint":case"string":case"number":St=!0;break;case"object":switch(D.$$typeof){case r:case t:St=!0;break;case T:return St=D._init,ae(St(D._payload),Z,nt,J,mt)}}if(St)return mt=mt(D),St=J===""?"."+P(D,0):J,ft(mt)?(nt="",St!=null&&(nt=St.replace(M,"$&/")+"/"),ae(mt,Z,nt,"",function(Qn){return Qn})):mt!=null&&(C(mt)&&(mt=S(mt,nt+(mt.key==null||D&&D.key===mt.key?"":(""+mt.key).replace(M,"$&/")+"/")+St)),Z.push(mt)),1;St=0;var De=J===""?".":J+":";if(ft(D))for(var Wt=0;Wt<D.length;Wt++)J=D[Wt],It=De+P(J,Wt),St+=ae(J,Z,nt,It,mt);else if(Wt=R(D),typeof Wt=="function")for(D=Wt.call(D),Wt=0;!(J=D.next()).done;)J=J.value,It=De+P(J,Wt++),St+=ae(J,Z,nt,It,mt);else if(It==="object"){if(typeof D.then=="function")return ae(pe(D),Z,nt,J,mt);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return St}function H(D,Z,nt){if(D==null)return D;var J=[],mt=0;return ae(D,J,"","",function(It){return Z.call(nt,It,mt++)}),J}function et(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(nt){(D._status===0||D._status===-1)&&(D._status=1,D._result=nt)},function(nt){(D._status===0||D._status===-1)&&(D._status=2,D._result=nt)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ht=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Bt(){}return bt.Children={map:H,forEach:function(D,Z,nt){H(D,function(){Z.apply(this,arguments)},nt)},count:function(D){var Z=0;return H(D,function(){Z++}),Z},toArray:function(D){return H(D,function(Z){return Z})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},bt.Component=$,bt.Fragment=n,bt.Profiler=l,bt.PureComponent=ut,bt.StrictMode=s,bt.Suspense=g,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt,bt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return gt.H.useMemoCache(D)}},bt.cache=function(D){return function(){return D.apply(null,arguments)}},bt.cloneElement=function(D,Z,nt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=Q({},D.props),mt=D.key,It=void 0;if(Z!=null)for(St in Z.ref!==void 0&&(It=void 0),Z.key!==void 0&&(mt=""+Z.key),Z)!At.call(Z,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Z.ref===void 0||(J[St]=Z[St]);var St=arguments.length-2;if(St===1)J.children=nt;else if(1<St){for(var De=Array(St),Wt=0;Wt<St;Wt++)De[Wt]=arguments[Wt+2];J.children=De}return O(D.type,mt,void 0,void 0,It,J)},bt.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},bt.createElement=function(D,Z,nt){var J,mt={},It=null;if(Z!=null)for(J in Z.key!==void 0&&(It=""+Z.key),Z)At.call(Z,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(mt[J]=Z[J]);var St=arguments.length-2;if(St===1)mt.children=nt;else if(1<St){for(var De=Array(St),Wt=0;Wt<St;Wt++)De[Wt]=arguments[Wt+2];mt.children=De}if(D&&D.defaultProps)for(J in St=D.defaultProps,St)mt[J]===void 0&&(mt[J]=St[J]);return O(D,It,void 0,void 0,null,mt)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(D){return{$$typeof:p,render:D}},bt.isValidElement=C,bt.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:et}},bt.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},bt.startTransition=function(D){var Z=gt.T,nt={};gt.T=nt;try{var J=D(),mt=gt.S;mt!==null&&mt(nt,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Bt,ht)}catch(It){ht(It)}finally{gt.T=Z}},bt.unstable_useCacheRefresh=function(){return gt.H.useCacheRefresh()},bt.use=function(D){return gt.H.use(D)},bt.useActionState=function(D,Z,nt){return gt.H.useActionState(D,Z,nt)},bt.useCallback=function(D,Z){return gt.H.useCallback(D,Z)},bt.useContext=function(D){return gt.H.useContext(D)},bt.useDebugValue=function(){},bt.useDeferredValue=function(D,Z){return gt.H.useDeferredValue(D,Z)},bt.useEffect=function(D,Z,nt){var J=gt.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(D,Z)},bt.useId=function(){return gt.H.useId()},bt.useImperativeHandle=function(D,Z,nt){return gt.H.useImperativeHandle(D,Z,nt)},bt.useInsertionEffect=function(D,Z){return gt.H.useInsertionEffect(D,Z)},bt.useLayoutEffect=function(D,Z){return gt.H.useLayoutEffect(D,Z)},bt.useMemo=function(D,Z){return gt.H.useMemo(D,Z)},bt.useOptimistic=function(D,Z){return gt.H.useOptimistic(D,Z)},bt.useReducer=function(D,Z,nt){return gt.H.useReducer(D,Z,nt)},bt.useRef=function(D){return gt.H.useRef(D)},bt.useState=function(D){return gt.H.useState(D)},bt.useSyncExternalStore=function(D,Z,nt){return gt.H.useSyncExternalStore(D,Z,nt)},bt.useTransition=function(){return gt.H.useTransition()},bt.version="19.1.1",bt}var P_;function Cm(){return P_||(P_=1,zd.exports=TS()),zd.exports}var Qe=Cm(),Bd={exports:{}},Al={},qd={exports:{}},jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function AS(){return x_||(x_=1,(function(r){function t(H,et){var ht=H.length;H.push(et);t:for(;0<ht;){var Bt=ht-1>>>1,D=H[Bt];if(0<l(D,et))H[Bt]=et,H[ht]=D,ht=Bt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var et=H[0],ht=H.pop();if(ht!==et){H[0]=ht;t:for(var Bt=0,D=H.length,Z=D>>>1;Bt<Z;){var nt=2*(Bt+1)-1,J=H[nt],mt=nt+1,It=H[mt];if(0>l(J,ht))mt<D&&0>l(It,J)?(H[Bt]=It,H[mt]=ht,Bt=mt):(H[Bt]=J,H[nt]=ht,Bt=nt);else if(mt<D&&0>l(It,ht))H[Bt]=It,H[mt]=ht,Bt=mt;else break t}}return et}function l(H,et){var ht=H.sortIndex-et.sortIndex;return ht!==0?ht:H.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,w=null,R=3,q=!1,Q=!1,tt=!1,$=!1,dt=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function ft(H){for(var et=n(y);et!==null;){if(et.callback===null)s(y);else if(et.startTime<=H)s(y),et.sortIndex=et.expirationTime,t(g,et);else break;et=n(y)}}function gt(H){if(tt=!1,ft(H),!Q)if(n(g)!==null)Q=!0,At||(At=!0,P());else{var et=n(y);et!==null&&ae(gt,et.startTime-H)}}var At=!1,O=-1,S=5,C=-1;function V(){return $?!0:!(r.unstable_now()-C<S)}function M(){if($=!1,At){var H=r.unstable_now();C=H;var et=!0;try{t:{Q=!1,tt&&(tt=!1,ut(O),O=-1),q=!0;var ht=R;try{e:{for(ft(H),w=n(g);w!==null&&!(w.expirationTime>H&&V());){var Bt=w.callback;if(typeof Bt=="function"){w.callback=null,R=w.priorityLevel;var D=Bt(w.expirationTime<=H);if(H=r.unstable_now(),typeof D=="function"){w.callback=D,ft(H),et=!0;break e}w===n(g)&&s(g),ft(H)}else s(g);w=n(g)}if(w!==null)et=!0;else{var Z=n(y);Z!==null&&ae(gt,Z.startTime-H),et=!1}}break t}finally{w=null,R=ht,q=!1}et=void 0}}finally{et?P():At=!1}}}var P;if(typeof at=="function")P=function(){at(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,pe=I.port2;I.port1.onmessage=M,P=function(){pe.postMessage(null)}}else P=function(){dt(M,0)};function ae(H,et){O=dt(function(){H(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(H){switch(R){case 1:case 2:case 3:var et=3;break;default:et=R}var ht=R;R=et;try{return H()}finally{R=ht}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(H,et){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ht=R;R=H;try{return et()}finally{R=ht}},r.unstable_scheduleCallback=function(H,et,ht){var Bt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Bt+ht:Bt):ht=Bt,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ht+D,H={id:T++,callback:et,priorityLevel:H,startTime:ht,expirationTime:D,sortIndex:-1},ht>Bt?(H.sortIndex=ht,t(y,H),n(g)===null&&H===n(y)&&(tt?(ut(O),O=-1):tt=!0,ae(gt,ht-Bt))):(H.sortIndex=D,t(g,H),Q||q||(Q=!0,At||(At=!0,P()))),H},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(H){var et=R;return function(){var ht=R;R=et;try{return H.apply(this,arguments)}finally{R=ht}}}})(jd)),jd}var k_;function SS(){return k_||(k_=1,qd.exports=AS()),qd.exports}var Hd={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function wS(){if(U_)return Ze;U_=1;var r=Cm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ze.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,T)},Ze.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Ze.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ze.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ze.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,w=p(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:q}):T==="script"&&s.d.X(g,{crossOrigin:w,integrity:R,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ze.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ze.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ze.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ze.requestFormReset=function(g){s.d.r(g)},Ze.unstable_batchedUpdates=function(g,y){return g(y)},Ze.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Ze.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ze.version="19.1.1",Ze}var L_;function bS(){if(L_)return Hd.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Hd.exports=wS(),Hd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function RS(){if(z_)return Al;z_=1;var r=SS(),t=Cm(),n=bS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),dt=Symbol.for("react.provider"),ut=Symbol.for("react.consumer"),at=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),At=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case $:return"Profiler";case tt:return"StrictMode";case gt:return"Suspense";case At:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case at:return(e.displayName||"Context")+".Provider";case ut:return(e._context.displayName||"Context")+".Consumer";case ft:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return i=e.displayName||null,i!==null?i:pe(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return pe(e(i))}catch{}}return null}var ae=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Bt=[],D=-1;function Z(e){return{current:e}}function nt(e){0>D||(e.current=Bt[D],Bt[D]=null,D--)}function J(e,i){D++,Bt[D]=e.current,e.current=i}var mt=Z(null),It=Z(null),St=Z(null),De=Z(null);function Wt(e,i){switch(J(St,i),J(It,e),J(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?s_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=s_(i),e=a_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(mt),J(mt,e)}function Qn(){nt(mt),nt(It),nt(St)}function Wi(e){e.memoizedState!==null&&J(De,e);var i=mt.current,a=a_(i,e.type);i!==a&&(J(It,e),J(mt,a))}function yi(e){It.current===e&&(nt(mt),nt(It)),De.current===e&&(nt(De),gl._currentValue=ht)}var ts=Object.prototype.hasOwnProperty,es=r.unstable_scheduleCallback,ns=r.unstable_cancelCallback,fo=r.unstable_shouldYield,au=r.unstable_requestPaint,Sn=r.unstable_now,Uh=r.unstable_getCurrentPriorityLevel,mo=r.unstable_ImmediatePriority,Xs=r.unstable_UserBlockingPriority,is=r.unstable_NormalPriority,Lh=r.unstable_LowPriority,$s=r.unstable_IdlePriority,po=r.log,ou=r.unstable_setDisableYieldValue,oe=null,Ht=null;function hn(e){if(typeof po=="function"&&ou(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(oe,e)}catch{}}var Xe=Math.clz32?Math.clz32:rs,lu=Math.log,zh=Math.LN2;function rs(e){return e>>>=0,e===0?32:31-(lu(e)/zh|0)|0}var ss=256,as=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Zs(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=kn(o):(v&=E,v!==0?h=kn(v):a||(a=E&~e,a!==0&&(h=kn(a))))):(E=o&~f,E!==0?h=kn(E):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function os(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function go(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(){var e=ss;return ss<<=1,(ss&4194048)===0&&(ss=256),e}function _o(){var e=as;return as<<=1,(as&62914560)===0&&(as=4194304),e}function _i(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function vi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function vo(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Xe(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Yn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Yn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Xe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function Eo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Xe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function tr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Js(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function er(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:b_(e.type))}function uu(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var ne=Math.random().toString(36).slice(2),Se="__reactFiber$"+ne,ge="__reactProps$"+ne,wn="__reactContainer$"+ne,To="__reactEvents$"+ne,Bh="__reactListeners$"+ne,nr="__reactHandles$"+ne,cu="__reactResources$"+ne,ls="__reactMarker$"+ne;function ir(e){delete e[Se],delete e[ge],delete e[To],delete e[Bh],delete e[nr]}function Ei(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[wn]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=c_(e);e!==null;){if(a=e[Se])return a;e=c_(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Se]||e[wn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Xn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function en(e){var i=e[cu];return i||(i=e[cu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[ls]=!0}var Ao=new Set,Ws={};function Un(e,i){Ti(e,i),Ti(e+"Capture",i)}function Ti(e,i){for(Ws[e]=i,e=0;e<i.length;e++)Ao.add(i[e])}var hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},us={};function du(e){return ts.call(us,e)?!0:ts.call(fu,e)?!1:hu.test(e)?us[e]=!0:(fu[e]=!0,!1)}function rr(e,i,a){if(du(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function $n(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Be(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var cs,mu;function Ai(e){if(cs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cs=i&&i[1]||"",mu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+e+mu}var ta=!1;function ea(e,i){if(!e||ta)return"";ta=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{ta=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ai(a):""}function So(e){switch(e.tag){case 26:case 27:case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ea(e.type,!1);case 11:return ea(e.type.render,!1);case 1:return ea(e.type,!0);case 31:return Ai("Activity");default:return""}}function na(e){try{var i="";do i+=So(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qh(e){var i=wo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ia(e){e._valueTracker||(e._valueTracker=qh(e))}function bo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=wo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function hs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jh=/[\n"\\]/g;function ye(e){return e.replace(jh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fn(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+nn(i)):e.value!==""+nn(i)&&(e.value=""+nn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?sr(e,v,nn(i)):a!=null?sr(e,v,nn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+nn(E):e.removeAttribute("name")}function fs(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function sr(e,i,a){i==="number"&&hs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Si(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Yt(e,i,a){if(i!=null&&(i=""+nn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+nn(a):""}function ds(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ae(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=nn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function bn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ms.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Ro(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&pu(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&pu(e,f,i[f])}function Io(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ra(e){return Gh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wi=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bi=null,Ri=null;function Co(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[ge]||null;t:switch(e=i.stateNode,i.type){case"input":if(fn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ye(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ge]||null;if(!h)throw Error(s(90));fn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&bo(o)}break t;case"textarea":Yt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Si(e,!!a.multiple,i,!1)}}}var Zn=!1;function gu(e,i,a){if(Zn)return e(i,a);Zn=!0;try{var o=e(i);return o}finally{if(Zn=!1,(bi!==null||Ri!==null)&&(uc(),bi&&(i=bi,e=Ri,Ri=bi=null,Co(i),e)))for(i=0;i<e.length;i++)Co(e[i])}}function ps(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ge]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Ln)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){In=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{In=!1}var Jn=null,ar=null,Ii=null;function Do(){if(Ii)return Ii;var e,i=ar,a=i.length,o,h="value"in Jn?Jn.value:Jn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ii=h.slice(e,1<o?1-o:void 0)}function Wn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function No(){return!1}function Ne(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:No,this.isPropagationStopped=No,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Ne(jt),ys=T({},jt,{view:0,detail:0}),yu=Ne(ys),aa,oa,ei,_s=T({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&e.type==="mousemove"?(aa=e.screenX-ei.screenX,oa=e.screenY-ei.screenY):oa=aa=0,ei=e),aa)},movementY:function(e){return"movementY"in e?e.movementY:oa}}),Cn=Ne(_s),_u=T({},_s,{dataTransfer:0}),Fh=Ne(_u),vs=T({},ys,{relatedTarget:0}),la=Ne(vs),Oo=T({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=Ne(Oo),vu=T({},jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ca=Ne(vu),Qh=T({},jt,{data:0}),Vo=Ne(Qh),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Tu[e])?!!i[e]:!1}function Ts(){return Mo}var Au=T({},ys,{key:function(e){if(e.key){var i=Es[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Wn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(e){return e.type==="keypress"?Wn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ha=Ne(Au),Su=T({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=Ne(Su),Ci=T({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),wu=Ne(Ci),bu=T({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ru=Ne(bu),Iu=T({},_s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fa=Ne(Iu),rn=T({},jt,{newState:0,oldState:0}),Cu=Ne(rn),Du=[9,13,27,32],ni=Ln&&"CompositionEvent"in window,u=null;Ln&&"documentMode"in document&&(u=document.documentMode);var m=Ln&&"TextEvent"in window&&!u,_=Ln&&(!ni||u&&8<u&&11>=u),A=" ",k=!1;function j(e,i){switch(e){case"keyup":return Du.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function we(e,i){switch(e){case"compositionend":return W(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return e=i.data,e===A&&k?null:e;default:return null}}function xt(e,i){if(Pt)return e==="compositionend"||!ni&&j(e,i)?(e=Do(),Ii=ar=Jn=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Di(e,i,a,o){bi?Ri?Ri.push(o):Ri=[o]:bi=o,i=pc(i,"onChange"),0<i.length&&(a=new sa("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var qe=null,ii=null;function xo(e){t_(e,0)}function Nu(e){var i=Xn(e);if(bo(i))return e}function Tp(e,i){if(e==="change")return i}var Ap=!1;if(Ln){var Yh;if(Ln){var Kh="oninput"in document;if(!Kh){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Kh=typeof Sp.oninput=="function"}Yh=Kh}else Yh=!1;Ap=Yh&&(!document.documentMode||9<document.documentMode)}function wp(){qe&&(qe.detachEvent("onpropertychange",bp),ii=qe=null)}function bp(e){if(e.propertyName==="value"&&Nu(ii)){var i=[];Di(i,ii,e,Rn(e)),gu(xo,i)}}function X0(e,i,a){e==="focusin"?(wp(),qe=i,ii=a,qe.attachEvent("onpropertychange",bp)):e==="focusout"&&wp()}function $0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nu(ii)}function Z0(e,i){if(e==="click")return Nu(i)}function J0(e,i){if(e==="input"||e==="change")return Nu(i)}function W0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var dn=typeof Object.is=="function"?Object.is:W0;function ko(e,i){if(dn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ts.call(i,h)||!dn(e[h],i[h]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ip(e,i){var a=Rp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Rp(a)}}function Cp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Cp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Dp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=hs(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=hs(e.document)}return i}function Xh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var tA=Ln&&"documentMode"in document&&11>=document.documentMode,da=null,$h=null,Uo=null,Zh=!1;function Np(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zh||da==null||da!==hs(o)||(o=da,"selectionStart"in o&&Xh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Uo&&ko(Uo,o)||(Uo=o,o=pc($h,"onSelect"),0<o.length&&(i=new sa("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=da)))}function As(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ma={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Jh={},Op={};Ln&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Ss(e){if(Jh[e])return Jh[e];if(!ma[e])return e;var i=ma[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Op)return Jh[e]=i[a];return e}var Vp=Ss("animationend"),Mp=Ss("animationiteration"),Pp=Ss("animationstart"),eA=Ss("transitionrun"),nA=Ss("transitionstart"),iA=Ss("transitioncancel"),xp=Ss("transitionend"),kp=new Map,Wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wh.push("scrollEnd");function zn(e,i){kp.set(e,i),Un(i,[e])}var Up=new WeakMap;function Dn(e,i){if(typeof e=="object"&&e!==null){var a=Up.get(e);return a!==void 0?a:(i={value:e,source:i,stack:na(i)},Up.set(e,i),i)}return{value:e,source:i,stack:na(i)}}var Nn=[],pa=0,tf=0;function Ou(){for(var e=pa,i=tf=pa=0;i<e;){var a=Nn[i];Nn[i++]=null;var o=Nn[i];Nn[i++]=null;var h=Nn[i];Nn[i++]=null;var f=Nn[i];if(Nn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Lp(a,h,f)}}function Vu(e,i,a,o){Nn[pa++]=e,Nn[pa++]=i,Nn[pa++]=a,Nn[pa++]=o,tf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ef(e,i,a,o){return Vu(e,i,a,o),Mu(e)}function ga(e,i){return Vu(e,null,null,i),Mu(e)}function Lp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Xe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Mu(e){if(50<ll)throw ll=0,ld=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ya={};function rA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,i,a,o){return new rA(e,i,a,o)}function nf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ni(e,i){var a=e.alternate;return a===null?(a=mn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function zp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Pu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")nf(e)&&(v=1);else if(typeof e=="string")v=aS(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=mn(31,a,i,h),e.elementType=C,e.lanes=f,e;case Q:return ws(a.children,h,f,i);case tt:v=8,h|=24;break;case $:return e=mn(12,a,i,h|2),e.elementType=$,e.lanes=f,e;case gt:return e=mn(13,a,i,h),e.elementType=gt,e.lanes=f,e;case At:return e=mn(19,a,i,h),e.elementType=At,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:case at:v=10;break t;case ut:v=9;break t;case ft:v=11;break t;case O:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=mn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function ws(e,i,a,o){return e=mn(7,e,o,i),e.lanes=a,e}function rf(e,i,a){return e=mn(6,e,null,i),e.lanes=a,e}function sf(e,i,a){return i=mn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var _a=[],va=0,xu=null,ku=0,On=[],Vn=0,bs=null,Oi=1,Vi="";function Rs(e,i){_a[va++]=ku,_a[va++]=xu,xu=e,ku=i}function Bp(e,i,a){On[Vn++]=Oi,On[Vn++]=Vi,On[Vn++]=bs,bs=e;var o=Oi;e=Vi;var h=32-Xe(o)-1;o&=~(1<<h),a+=1;var f=32-Xe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Oi=1<<32-Xe(i)+h|a<<h|o,Vi=f+e}else Oi=1<<f|a<<h|o,Vi=e}function af(e){e.return!==null&&(Rs(e,1),Bp(e,1,0))}function of(e){for(;e===xu;)xu=_a[--va],_a[va]=null,ku=_a[--va],_a[va]=null;for(;e===bs;)bs=On[--Vn],On[Vn]=null,Vi=On[--Vn],On[Vn]=null,Oi=On[--Vn],On[Vn]=null}var sn=null,le=null,qt=!1,Is=null,ri=!1,lf=Error(s(519));function Cs(e){var i=Error(s(418,""));throw Bo(Dn(i,e)),lf}function qp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[ge]=o,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<cl.length;a++)Nt(cl[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),fs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ia(i);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),ds(i,o.value,o.defaultValue,o.children),ia(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||r_(i.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),o.onScroll!=null&&Nt("scroll",i),o.onScrollEnd!=null&&Nt("scrollend",i),o.onClick!=null&&(i.onclick=gc),i=!0):i=!1,i||Cs(e)}function jp(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:sn=sn.return}}function Lo(e){if(e!==sn)return!1;if(!qt)return jp(e),qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||wd(e.type,e.memoizedProps)),a=!a),a&&le&&Cs(e),jp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=qn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,Ar(e.type)?(e=Cd,Cd=null,le=e):le=i):le=sn?qn(e.stateNode.nextSibling):null;return!0}function zo(){le=sn=null,qt=!1}function Hp(){var e=Is;return e!==null&&(un===null?un=e:un.push.apply(un,e),Is=null),e}function Bo(e){Is===null?Is=[e]:Is.push(e)}var uf=Z(null),Ds=null,Mi=null;function or(e,i,a){J(uf,i._currentValue),i._currentValue=a}function Pi(e){e._currentValue=uf.current,nt(uf)}function cf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function hf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),cf(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),cf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function qo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;dn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===De.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(gl):e=[gl])}h=h.return}e!==null&&hf(i,e,a,o),i.flags|=262144}function Uu(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){Ds=e,Mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Gp(Ds,e)}function Lu(e,i){return Ds===null&&Ns(e),Gp(e,i)}function Gp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Mi===null){if(e===null)throw Error(s(308));Mi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Mi=Mi.next=i;return a}var sA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},aA=r.unstable_scheduleCallback,oA=r.unstable_NormalPriority,Re={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new sA,data:new Map,refCount:0}}function jo(e){e.refCount--,e.refCount===0&&aA(oA,function(){e.controller.abort()})}var Ho=null,df=0,Ea=0,Ta=null;function lA(e,i){if(Ho===null){var a=Ho=[];df=0,Ea=pd(),Ta={status:"pending",value:void 0,then:function(o){a.push(o)}}}return df++,i.then(Fp,Fp),i}function Fp(){if(--df===0&&Ho!==null){Ta!==null&&(Ta.status="fulfilled");var e=Ho;Ho=null,Ea=0,Ta=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function uA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Qp=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&lA(e,i),Qp!==null&&Qp(e,i)};var Os=Z(null);function mf(){var e=Os.current;return e!==null?e:te.pooledCache}function zu(e,i){i===null?J(Os,Os.current):J(Os,i.pool)}function Yp(){var e=mf();return e===null?null:{parent:Re._currentValue,pool:e}}var Go=Error(s(460)),Kp=Error(s(474)),Bu=Error(s(542)),pf={then:function(){}};function Xp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function qu(){}function $p(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(qu,qu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e;default:if(typeof i.status=="string")i.then(qu,qu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e}throw Fo=i,Go}}var Fo=null;function Zp(){if(Fo===null)throw Error(s(459));var e=Fo;return Fo=null,e}function Jp(e){if(e===Go||e===Bu)throw Error(s(483))}var lr=!1;function gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ur(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Mu(e),Lp(e,null,a),i}return Vu(e,o,i,a),Mu(e)}function Qo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Eo(e,a)}}function _f(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var vf=!1;function Yo(){if(vf){var e=Ta;if(e!==null)throw e}}function Ko(e,i,a,o){vf=!1;var h=e.updateQueue;lr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(kt&z)===z:(o&z)===z){z!==0&&z===Ea&&(vf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,yt=E;z=i;var $t=a;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){K=Et.call($t,K,z);break t}K=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,z=typeof Et=="function"?Et.call($t,K,z):Et,z==null)break t;K=T({},K,z);break t;case 2:lr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),_r|=v,e.lanes=v,e.memoizedState=K}}function Wp(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function tg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Wp(a[e],i)}var Aa=Z(null),ju=Z(0);function eg(e,i){e=qi,J(ju,e),J(Aa,i),qi=e|i.baseLanes}function Ef(){J(ju,qi),J(Aa,Aa.current)}function Tf(){qi=ju.current,nt(Aa),nt(ju)}var hr=0,Rt=null,Kt=null,_e=null,Hu=!1,Sa=!1,Vs=!1,Gu=0,Xo=0,wa=null,cA=0;function he(){throw Error(s(321))}function Af(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!dn(e[a],i[a]))return!1;return!0}function Sf(e,i,a,o,h,f){return hr=f,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?Lg:zg,Vs=!1,f=a(o,h),Vs=!1,Sa&&(f=ig(i,a,o,h)),ng(e),f}function ng(e){H.H=$u;var i=Kt!==null&&Kt.next!==null;if(hr=0,_e=Kt=Rt=null,Hu=!1,Xo=0,wa=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&Uu(e)&&(Ve=!0))}function ig(e,i,a,o){Rt=e;var h=0;do{if(Sa&&(wa=null),Xo=0,Sa=!1,25<=h)throw Error(s(301));if(h+=1,_e=Kt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=yA,f=i(a,o)}while(Sa);return f}function hA(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?$o(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(Rt.flags|=1024),i}function wf(){var e=Gu!==0;return Gu=0,e}function bf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Rf(e){if(Hu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Hu=!1}hr=0,_e=Kt=Rt=null,Sa=!1,Xo=Gu=0,wa=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?Rt.memoizedState=_e=e:_e=_e.next=e,_e}function ve(){if(Kt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=_e===null?Rt.memoizedState:_e.next;if(i!==null)_e=i,Kt=e;else{if(e===null)throw Rt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},_e===null?Rt.memoizedState=_e=e:_e=_e.next=e}return _e}function If(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(e){var i=Xo;return Xo+=1,wa===null&&(wa=[]),e=$p(wa,e,i),i=Rt,(_e===null?i.memoizedState:_e.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Lg:zg),e}function Fu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $o(e);if(e.$$typeof===at)return $e(e)}throw Error(s(438,String(e)))}function Cf(e){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Rt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=If(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function xi(e,i){return typeof i=="function"?i(e):i}function Qu(e){var i=ve();return Df(i,Kt,e)}function Df(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,b=null,L=i,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(kt&K)===K:(hr&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===Ea&&(G=!0);else if((hr&z)===z){L=L.next,z===Ea&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,Rt.lanes|=z,_r|=z;K=L.action,Vs&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,Rt.lanes|=K,_r|=K;L=L.next}while(L!==null&&L!==i);if(b===null?v=f:b.next=E,!dn(f,e.memoizedState)&&(Ve=!0,G&&(a=Ta,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Nf(e){var i=ve(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);dn(f,i.memoizedState)||(Ve=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function rg(e,i,a){var o=Rt,h=ve(),f=qt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!dn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=og.bind(null,o,h,e);if(Zo(2048,8,E,[e]),h.getSnapshot!==i||v||_e!==null&&_e.memoizedState.tag&1){if(o.flags|=2048,ba(9,Yu(),ag.bind(null,o,h,a,i),null),te===null)throw Error(s(349));f||(hr&124)!==0||sg(o,i,a)}return a}function sg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=If(),Rt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function ag(e,i,a,o){i.value=a,i.getSnapshot=o,lg(i)&&ug(e)}function og(e,i,a){return a(function(){lg(i)&&ug(e)})}function lg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!dn(e,a)}catch{return!0}}function ug(e){var i=ga(e,2);i!==null&&vn(i,e,2)}function Of(e){var i=on();if(typeof e=="function"){var a=e;if(e=a(),Vs){hn(!0);try{a()}finally{hn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},i}function cg(e,i,a,o){return e.baseState=a,Df(e,Kt,typeof o=="function"?o:xi)}function fA(e,i,a,o,h){if(Xu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,hg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function hg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),fg(e,i,E)}catch(L){Vf(e,i,L)}finally{H.T=f}}else try{f=a(h,o),fg(e,i,f)}catch(L){Vf(e,i,L)}}function fg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){dg(e,i,o)},function(o){return Vf(e,i,o)}):dg(e,i,a)}function dg(e,i,a){i.status="fulfilled",i.value=a,mg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,hg(e,a)))}function Vf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,mg(i),i=i.next;while(i!==o)}e.action=null}function mg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function pg(e,i){return i}function gg(e,i){if(qt){var a=te.formState;if(a!==null){t:{var o=Rt;if(qt){if(le){e:{for(var h=le,f=ri;h.nodeType!==8;){if(!f){h=null;break e}if(h=qn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=qn(h.nextSibling),o=h.data==="F!";break t}}Cs(o)}o=!1}o&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:i},a.queue=o,a=xg.bind(null,Rt,o),o.dispatch=a,o=Of(!1),f=Uf.bind(null,Rt,!1,o.queue),o=on(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=fA.bind(null,Rt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function yg(e){var i=ve();return _g(i,Kt,e)}function _g(e,i,a){if(i=Df(e,i,pg)[0],e=Qu(xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=$o(i)}catch(v){throw v===Go?Bu:v}else o=i;i=ve();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,ba(9,Yu(),dA.bind(null,h,a),null)),[o,f,e]}function dA(e,i){e.action=i}function vg(e){var i=ve(),a=Kt;if(a!==null)return _g(i,a,e);ve(),i=i.memoizedState,a=ve();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function ba(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=If(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Yu(){return{destroy:void 0,resource:void 0}}function Eg(){return ve().memoizedState}function Ku(e,i,a,o){var h=on();o=o===void 0?null:o,Rt.flags|=e,h.memoizedState=ba(1|i,Yu(),a,o)}function Zo(e,i,a,o){var h=ve();o=o===void 0?null:o;var f=h.memoizedState.inst;Kt!==null&&o!==null&&Af(o,Kt.memoizedState.deps)?h.memoizedState=ba(i,f,a,o):(Rt.flags|=e,h.memoizedState=ba(1|i,f,a,o))}function Tg(e,i){Ku(8390656,8,e,i)}function Ag(e,i){Zo(2048,8,e,i)}function Sg(e,i){return Zo(4,2,e,i)}function wg(e,i){return Zo(4,4,e,i)}function bg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Rg(e,i,a){a=a!=null?a.concat([e]):null,Zo(4,4,bg.bind(null,i,e),a)}function Mf(){}function Ig(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Af(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Cg(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Af(i,o[1]))return o[0];if(o=e(),Vs){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,i],o}function Pf(e,i,a){return a===void 0||(hr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Oy(),Rt.lanes|=e,_r|=e,a)}function Dg(e,i,a,o){return dn(a,i)?a:Aa.current!==null?(e=Pf(e,a,o),dn(e,i)||(Ve=!0),e):(hr&42)===0?(Ve=!0,e.memoizedState=a):(e=Oy(),Rt.lanes|=e,_r|=e,i)}function Ng(e,i,a,o,h){var f=et.p;et.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,Uf(e,!1,i,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=uA(b,o);Jo(e,i,G,_n(e))}else Jo(e,i,o,_n(e))}catch(K){Jo(e,i,{then:function(){},status:"rejected",reason:K},_n())}finally{et.p=f,H.T=v}}function mA(){}function xf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Og(e).queue;Ng(e,h,i,ht,a===null?mA:function(){return Vg(e),a(o)})}function Og(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:ht},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Vg(e){var i=Og(e).next.queue;Jo(e,i,{},_n())}function kf(){return $e(gl)}function Mg(){return ve().memoizedState}function Pg(){return ve().memoizedState}function pA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=_n();e=ur(a);var o=cr(i,e,a);o!==null&&(vn(o,i,a),Qo(o,i,a)),i={cache:ff()},e.payload=i;return}i=i.return}}function gA(e,i,a){var o=_n();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xu(e)?kg(i,a):(a=ef(e,i,a,o),a!==null&&(vn(a,e,o),Ug(a,i,o)))}function xg(e,i,a){var o=_n();Jo(e,i,a,o)}function Jo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xu(e))kg(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,dn(E,v))return Vu(e,i,h,0),te===null&&Ou(),!1}catch{}finally{}if(a=ef(e,i,h,o),a!==null)return vn(a,e,o),Ug(a,i,o),!0}return!1}function Uf(e,i,a,o){if(o={lane:2,revertLane:pd(),action:o,hasEagerState:!1,eagerState:null,next:null},Xu(e)){if(i)throw Error(s(479))}else i=ef(e,a,o,2),i!==null&&vn(i,e,2)}function Xu(e){var i=e.alternate;return e===Rt||i!==null&&i===Rt}function kg(e,i){Sa=Hu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Ug(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Eo(e,a)}}var $u={readContext:$e,use:Fu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Lg={readContext:$e,use:Fu,useCallback:function(e,i){return on().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:Tg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Ku(4194308,4,bg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ku(4194308,4,e,i)},useInsertionEffect:function(e,i){Ku(4,2,e,i)},useMemo:function(e,i){var a=on();i=i===void 0?null:i;var o=e();if(Vs){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=on();if(a!==void 0){var h=a(i);if(Vs){hn(!0);try{a(i)}finally{hn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=gA.bind(null,Rt,e),[o.memoizedState,e]},useRef:function(e){var i=on();return e={current:e},i.memoizedState=e},useState:function(e){e=Of(e);var i=e.queue,a=xg.bind(null,Rt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Mf,useDeferredValue:function(e,i){var a=on();return Pf(a,e,i)},useTransition:function(){var e=Of(!1);return e=Ng.bind(null,Rt,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Rt,h=on();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(kt&124)!==0||sg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Tg(og.bind(null,o,f,e),[e]),o.flags|=2048,ba(9,Yu(),ag.bind(null,o,f,a,i),null),a},useId:function(){var e=on(),i=te.identifierPrefix;if(qt){var a=Vi,o=Oi;a=(o&~(1<<32-Xe(o)-1)).toString(32)+a,i=""+i+"R"+a,a=Gu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=cA++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:kf,useFormState:gg,useActionState:gg,useOptimistic:function(e){var i=on();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Uf.bind(null,Rt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Cf,useCacheRefresh:function(){return on().memoizedState=pA.bind(null,Rt)}},zg={readContext:$e,use:Fu,useCallback:Ig,useContext:$e,useEffect:Ag,useImperativeHandle:Rg,useInsertionEffect:Sg,useLayoutEffect:wg,useMemo:Cg,useReducer:Qu,useRef:Eg,useState:function(){return Qu(xi)},useDebugValue:Mf,useDeferredValue:function(e,i){var a=ve();return Dg(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Qu(xi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:rg,useId:Mg,useHostTransitionStatus:kf,useFormState:yg,useActionState:yg,useOptimistic:function(e,i){var a=ve();return cg(a,Kt,e,i)},useMemoCache:Cf,useCacheRefresh:Pg},yA={readContext:$e,use:Fu,useCallback:Ig,useContext:$e,useEffect:Ag,useImperativeHandle:Rg,useInsertionEffect:Sg,useLayoutEffect:wg,useMemo:Cg,useReducer:Nf,useRef:Eg,useState:function(){return Nf(xi)},useDebugValue:Mf,useDeferredValue:function(e,i){var a=ve();return Kt===null?Pf(a,e,i):Dg(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Nf(xi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:rg,useId:Mg,useHostTransitionStatus:kf,useFormState:vg,useActionState:vg,useOptimistic:function(e,i){var a=ve();return Kt!==null?cg(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Cf,useCacheRefresh:Pg},Ra=null,Wo=0;function Zu(e){var i=Wo;return Wo+=1,Ra===null&&(Ra=[]),$p(Ra,e,i)}function tl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ju(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Bg(e){var i=e._init;return i(e._payload)}function qg(e){function i(x,N){if(e){var U=x.deletions;U===null?(x.deletions=[N],x.flags|=16):U.push(N)}}function a(x,N){if(!e)return null;for(;N!==null;)i(x,N),N=N.sibling;return null}function o(x){for(var N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function h(x,N){return x=Ni(x,N),x.index=0,x.sibling=null,x}function f(x,N,U){return x.index=U,e?(U=x.alternate,U!==null?(U=U.index,U<N?(x.flags|=67108866,N):U):(x.flags|=67108866,N)):(x.flags|=1048576,N)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,N,U,Y){return N===null||N.tag!==6?(N=rf(U,x.mode,Y),N.return=x,N):(N=h(N,U),N.return=x,N)}function b(x,N,U,Y){var ot=U.type;return ot===Q?G(x,N,U.props.children,Y,U.key):N!==null&&(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&Bg(ot)===N.type)?(N=h(N,U.props),tl(N,U),N.return=x,N):(N=Pu(U.type,U.key,U.props,null,x.mode,Y),tl(N,U),N.return=x,N)}function L(x,N,U,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=sf(U,x.mode,Y),N.return=x,N):(N=h(N,U.children||[]),N.return=x,N)}function G(x,N,U,Y,ot){return N===null||N.tag!==7?(N=ws(U,x.mode,Y,ot),N.return=x,N):(N=h(N,U),N.return=x,N)}function K(x,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=rf(""+N,x.mode,U),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case R:return U=Pu(N.type,N.key,N.props,null,x.mode,U),tl(U,N),U.return=x,U;case q:return N=sf(N,x.mode,U),N.return=x,N;case S:var Y=N._init;return N=Y(N._payload),K(x,N,U)}if(ae(N)||P(N))return N=ws(N,x.mode,U,null),N.return=x,N;if(typeof N.then=="function")return K(x,Zu(N),U);if(N.$$typeof===at)return K(x,Lu(x,N),U);Ju(x,N)}return null}function z(x,N,U,Y){var ot=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ot!==null?null:E(x,N,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return U.key===ot?b(x,N,U,Y):null;case q:return U.key===ot?L(x,N,U,Y):null;case S:return ot=U._init,U=ot(U._payload),z(x,N,U,Y)}if(ae(U)||P(U))return ot!==null?null:G(x,N,U,Y,null);if(typeof U.then=="function")return z(x,N,Zu(U),Y);if(U.$$typeof===at)return z(x,N,Lu(x,U),Y);Ju(x,U)}return null}function B(x,N,U,Y,ot){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return x=x.get(U)||null,E(N,x,""+Y,ot);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case R:return x=x.get(Y.key===null?U:Y.key)||null,b(N,x,Y,ot);case q:return x=x.get(Y.key===null?U:Y.key)||null,L(N,x,Y,ot);case S:var Ct=Y._init;return Y=Ct(Y._payload),B(x,N,U,Y,ot)}if(ae(Y)||P(Y))return x=x.get(U)||null,G(N,x,Y,ot,null);if(typeof Y.then=="function")return B(x,N,U,Zu(Y),ot);if(Y.$$typeof===at)return B(x,N,U,Lu(N,Y),ot);Ju(N,Y)}return null}function Et(x,N,U,Y){for(var ot=null,Ct=null,lt=N,_t=N=0,Pe=null;lt!==null&&_t<U.length;_t++){lt.index>_t?(Pe=lt,lt=null):Pe=lt.sibling;var zt=z(x,lt,U[_t],Y);if(zt===null){lt===null&&(lt=Pe);break}e&&lt&&zt.alternate===null&&i(x,lt),N=f(zt,N,_t),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt,lt=Pe}if(_t===U.length)return a(x,lt),qt&&Rs(x,_t),ot;if(lt===null){for(;_t<U.length;_t++)lt=K(x,U[_t],Y),lt!==null&&(N=f(lt,N,_t),Ct===null?ot=lt:Ct.sibling=lt,Ct=lt);return qt&&Rs(x,_t),ot}for(lt=o(lt);_t<U.length;_t++)Pe=B(lt,x,_t,U[_t],Y),Pe!==null&&(e&&Pe.alternate!==null&&lt.delete(Pe.key===null?_t:Pe.key),N=f(Pe,N,_t),Ct===null?ot=Pe:Ct.sibling=Pe,Ct=Pe);return e&&lt.forEach(function(Ir){return i(x,Ir)}),qt&&Rs(x,_t),ot}function yt(x,N,U,Y){if(U==null)throw Error(s(151));for(var ot=null,Ct=null,lt=N,_t=N=0,Pe=null,zt=U.next();lt!==null&&!zt.done;_t++,zt=U.next()){lt.index>_t?(Pe=lt,lt=null):Pe=lt.sibling;var Ir=z(x,lt,zt.value,Y);if(Ir===null){lt===null&&(lt=Pe);break}e&&lt&&Ir.alternate===null&&i(x,lt),N=f(Ir,N,_t),Ct===null?ot=Ir:Ct.sibling=Ir,Ct=Ir,lt=Pe}if(zt.done)return a(x,lt),qt&&Rs(x,_t),ot;if(lt===null){for(;!zt.done;_t++,zt=U.next())zt=K(x,zt.value,Y),zt!==null&&(N=f(zt,N,_t),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt);return qt&&Rs(x,_t),ot}for(lt=o(lt);!zt.done;_t++,zt=U.next())zt=B(lt,x,_t,zt.value,Y),zt!==null&&(e&&zt.alternate!==null&&lt.delete(zt.key===null?_t:zt.key),N=f(zt,N,_t),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt);return e&&lt.forEach(function(_S){return i(x,_S)}),qt&&Rs(x,_t),ot}function $t(x,N,U,Y){if(typeof U=="object"&&U!==null&&U.type===Q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case R:t:{for(var ot=U.key;N!==null;){if(N.key===ot){if(ot=U.type,ot===Q){if(N.tag===7){a(x,N.sibling),Y=h(N,U.props.children),Y.return=x,x=Y;break t}}else if(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&Bg(ot)===N.type){a(x,N.sibling),Y=h(N,U.props),tl(Y,U),Y.return=x,x=Y;break t}a(x,N);break}else i(x,N);N=N.sibling}U.type===Q?(Y=ws(U.props.children,x.mode,Y,U.key),Y.return=x,x=Y):(Y=Pu(U.type,U.key,U.props,null,x.mode,Y),tl(Y,U),Y.return=x,x=Y)}return v(x);case q:t:{for(ot=U.key;N!==null;){if(N.key===ot)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){a(x,N.sibling),Y=h(N,U.children||[]),Y.return=x,x=Y;break t}else{a(x,N);break}else i(x,N);N=N.sibling}Y=sf(U,x.mode,Y),Y.return=x,x=Y}return v(x);case S:return ot=U._init,U=ot(U._payload),$t(x,N,U,Y)}if(ae(U))return Et(x,N,U,Y);if(P(U)){if(ot=P(U),typeof ot!="function")throw Error(s(150));return U=ot.call(U),yt(x,N,U,Y)}if(typeof U.then=="function")return $t(x,N,Zu(U),Y);if(U.$$typeof===at)return $t(x,N,Lu(x,U),Y);Ju(x,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(a(x,N.sibling),Y=h(N,U),Y.return=x,x=Y):(a(x,N),Y=rf(U,x.mode,Y),Y.return=x,x=Y),v(x)):a(x,N)}return function(x,N,U,Y){try{Wo=0;var ot=$t(x,N,U,Y);return Ra=null,ot}catch(lt){if(lt===Go||lt===Bu)throw lt;var Ct=mn(29,lt,null,x.mode);return Ct.lanes=Y,Ct.return=x,Ct}finally{}}}var Ia=qg(!0),jg=qg(!1),Mn=Z(null),si=null;function fr(e){var i=e.alternate;J(Ie,Ie.current&1),J(Mn,e),si===null&&(i===null||Aa.current!==null||i.memoizedState!==null)&&(si=e)}function Hg(e){if(e.tag===22){if(J(Ie,Ie.current),J(Mn,e),si===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(si=e)}}else dr()}function dr(){J(Ie,Ie.current),J(Mn,Mn.current)}function ki(e){nt(Mn),si===e&&(si=null),nt(Ie)}var Ie=Z(0);function Wu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Id(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Lf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var zf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=_n(),h=ur(o);h.payload=i,a!=null&&(h.callback=a),i=cr(e,h,o),i!==null&&(vn(i,e,o),Qo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=_n(),h=ur(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=cr(e,h,o),i!==null&&(vn(i,e,o),Qo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=_n(),o=ur(a);o.tag=2,i!=null&&(o.callback=i),i=cr(e,o,a),i!==null&&(vn(i,e,a),Qo(i,e,a))}};function Gg(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!ko(a,o)||!ko(h,f):!0}function Fg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&zf.enqueueReplaceState(i,i.state,null)}function Ms(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var tc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Qg(e){tc(e)}function Yg(e){console.error(e)}function Kg(e){tc(e)}function ec(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Xg(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Bf(e,i,a){return a=ur(a),a.tag=3,a.payload={element:null},a.callback=function(){ec(e,i)},a}function $g(e){return e=ur(e),e.tag=3,e}function Zg(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Xg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Xg(i,a,o),typeof h!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function _A(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&qo(i,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return si===null?cd():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===pf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),fd(e,o,h)),!1;case 22:return a.flags|=65536,o===pf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),fd(e,o,h)),!1}throw Error(s(435,a.tag))}return fd(e,o,h),cd(),!1}if(qt)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==lf&&(e=Error(s(422),{cause:o}),Bo(Dn(e,a)))):(o!==lf&&(i=Error(s(423),{cause:o}),Bo(Dn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Dn(o,a),h=Bf(e.stateNode,o,h),_f(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=Dn(f,a),ol===null?ol=[f]:ol.push(f),ue!==4&&(ue=2),i===null)return!0;o=Dn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Bf(a.stateNode,o,e),_f(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vr===null||!vr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=$g(h),Zg(h,e,a,o),_f(a,h),!1}a=a.return}while(a!==null);return!1}var Jg=Error(s(461)),Ve=!1;function je(e,i,a,o){i.child=e===null?jg(i,null,a,o):Ia(i,e.child,a,o)}function Wg(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ns(i),o=Sf(e,i,a,v,f,h),E=wf(),e!==null&&!Ve?(bf(e,i,h),Ui(e,i,h)):(qt&&E&&af(i),i.flags|=1,je(e,i,o,h),i.child)}function ty(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!nf(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,ey(e,i,f,o,h)):(e=Pu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!Kf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:ko,a(v,o)&&e.ref===i.ref)return Ui(e,i,h)}return i.flags|=1,e=Ni(f,o),e.ref=i.ref,e.return=i,i.child=e}function ey(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(ko(f,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=f,Kf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Ui(e,i,h)}return qf(e,i,a,o,h)}function ny(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return iy(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&zu(i,f!==null?f.cachePool:null),f!==null?eg(i,f):Ef(),Hg(i);else return i.lanes=i.childLanes=536870912,iy(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(zu(i,f.cachePool),eg(i,f),dr(),i.memoizedState=null):(e!==null&&zu(i,null),Ef(),dr());return je(e,i,h,a),i.child}function iy(e,i,a,o){var h=mf();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&zu(i,null),Ef(),Hg(i),e!==null&&qo(e,i,o,!0),null}function nc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function qf(e,i,a,o,h){return Ns(i),a=Sf(e,i,a,o,void 0,h),o=wf(),e!==null&&!Ve?(bf(e,i,h),Ui(e,i,h)):(qt&&o&&af(i),i.flags|=1,je(e,i,a,h),i.child)}function ry(e,i,a,o,h,f){return Ns(i),i.updateQueue=null,a=ig(i,o,a,h),ng(e),o=wf(),e!==null&&!Ve?(bf(e,i,f),Ui(e,i,f)):(qt&&o&&af(i),i.flags|=1,je(e,i,a,f),i.child)}function sy(e,i,a,o,h){if(Ns(i),i.stateNode===null){var f=ya,v=a.contextType;typeof v=="object"&&v!==null&&(f=$e(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=zf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},gf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?$e(v):ya,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Lf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&zf.enqueueReplaceState(f,f.state,null),Ko(i,o,f,h),Yo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=Ms(a,E);f.props=b;var L=f.context,G=a.contextType;v=ya,typeof G=="object"&&G!==null&&(v=$e(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Fg(i,f,o,v),lr=!1;var z=i.memoizedState;f.state=z,Ko(i,o,f,h),Yo(),L=i.memoizedState,E||z!==L||lr?(typeof K=="function"&&(Lf(i,a,K,o),L=i.memoizedState),(b=lr||Gg(i,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,yf(e,i),v=i.memoizedProps,G=Ms(a,v),f.props=G,K=i.pendingProps,z=f.context,L=a.contextType,b=ya,typeof L=="object"&&L!==null&&(b=$e(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Fg(i,f,o,b),lr=!1,z=i.memoizedState,f.state=z,Ko(i,o,f,h),Yo();var B=i.memoizedState;v!==K||z!==B||lr||e!==null&&e.dependencies!==null&&Uu(e.dependencies)?(typeof E=="function"&&(Lf(i,a,E,o),B=i.memoizedState),(G=lr||Gg(i,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Uu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,nc(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Ia(i,e.child,null,h),i.child=Ia(i,null,a,h)):je(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Ui(e,i,h),e}function ay(e,i,a,o){return zo(),i.flags|=256,je(e,i,a,o),i.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hf(e){return{baseLanes:e,cachePool:Yp()}}function Gf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Pn),e}function oy(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(qt){if(h?fr(i):dr(),qt){var E=le,b;if(b=E){t:{for(b=E,E=ri;b.nodeType!==8;){if(!E){E=null;break t}if(b=qn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:bs!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},b=mn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,sn=i,le=null,b=!0):b=!1}b||Cs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Id(E)?i.lanes=32:i.lanes=536870912,null;ki(i)}return E=o.children,o=o.fallback,h?(dr(),h=i.mode,E=ic({mode:"hidden",children:E},h),o=ws(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Hf(a),h.childLanes=Gf(e,v,a),i.memoizedState=jf,o):(fr(i),Ff(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(fr(i),i.flags&=-257,i=Qf(e,i,a)):i.memoizedState!==null?(dr(),i.child=e.child,i.flags|=128,i=null):(dr(),h=o.fallback,E=i.mode,o=ic({mode:"visible",children:o.children},E),h=ws(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ia(i,e.child,null,a),o=i.child,o.memoizedState=Hf(a),o.childLanes=Gf(e,v,a),i.memoizedState=jf,i=h);else if(fr(i),Id(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Bo({value:o,source:null,stack:null}),i=Qf(e,i,a)}else if(Ve||qo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=te,v!==null&&(o=a&-a,o=(o&42)!==0?1:tr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ga(e,o),vn(v,e,o),Jg;E.data==="$?"||cd(),i=Qf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,le=qn(E.nextSibling),sn=i,qt=!0,Is=null,ri=!1,e!==null&&(On[Vn++]=Oi,On[Vn++]=Vi,On[Vn++]=bs,Oi=e.id,Vi=e.overflow,bs=i),i=Ff(i,o.children),i.flags|=4096);return i}return h?(dr(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Ni(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ni(L,h):(h=ws(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Hf(a):(b=E.cachePool,b!==null?(L=Re._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Yp(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Gf(e,v,a),i.memoizedState=jf,o):(fr(i),a=e.child,e=a.sibling,a=Ni(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Ff(e,i){return i=ic({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function ic(e,i){return e=mn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qf(e,i,a){return Ia(i,e.child,null,a),e=Ff(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ly(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),cf(e.return,i,a)}function Yf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function uy(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(je(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ly(e,a,i);else if(e.tag===19)ly(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Wu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Yf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Wu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Yf(i,!0,a,null,f);break;case"together":Yf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ui(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),_r|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(qo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ni(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ni(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Kf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Uu(e)))}function vA(e,i,a){switch(i.tag){case 3:Wt(i,i.stateNode.containerInfo),or(i,Re,e.memoizedState.cache),zo();break;case 27:case 5:Wi(i);break;case 4:Wt(i,i.stateNode.containerInfo);break;case 10:or(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(fr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?oy(e,i,a):(fr(i),e=Ui(e,i,a),e!==null?e.sibling:null);fr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(qo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return uy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,ny(e,i,a);case 24:or(i,Re,e.memoizedState.cache)}return Ui(e,i,a)}function cy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Kf(e,a)&&(i.flags&128)===0)return Ve=!1,vA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,qt&&(i.flags&1048576)!==0&&Bp(i,ku,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")nf(o)?(e=Ms(o,e),i.tag=1,i=sy(null,i,o,e,a)):(i.tag=0,i=qf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===ft){i.tag=11,i=Wg(null,i,o,e,a);break t}else if(h===O){i.tag=14,i=ty(null,i,o,e,a);break t}}throw i=pe(o)||o,Error(s(306,i,""))}}return i;case 0:return qf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Ms(o,i.pendingProps),sy(e,i,o,h,a);case 3:t:{if(Wt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,yf(e,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,or(i,Re,o),o!==f.cache&&hf(i,[Re],a,!0),Yo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=ay(e,i,o,a);break t}else if(o!==h){h=Dn(Error(s(424)),i),Bo(h),i=ay(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=qn(e.firstChild),sn=i,qt=!0,Is=null,ri=!0,a=jg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),o===h){i=Ui(e,i,a);break t}je(e,i,o,a)}i=i.child}return i;case 26:return nc(e,i),e===null?(a=m_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qt||(a=i.type,e=i.pendingProps,o=yc(St.current).createElement(a),o[Se]=i,o[ge]=e,Ge(o,a,e),ce(o),i.stateNode=o):i.memoizedState=m_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Wi(i),e===null&&qt&&(o=i.stateNode=h_(i.type,i.pendingProps,St.current),sn=i,ri=!0,h=le,Ar(i.type)?(Cd=h,le=qn(o.firstChild)):le=h),je(e,i,i.pendingProps.children,a),nc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&qt&&((h=o=le)&&(o=YA(o,i.type,i.pendingProps,ri),o!==null?(i.stateNode=o,sn=i,le=qn(o.firstChild),ri=!1,h=!0):h=!1),h||Cs(i)),Wi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,wd(h,f)?o=null:v!==null&&wd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Sf(e,i,hA,null,null,a),gl._currentValue=h),nc(e,i),je(e,i,o,a),i.child;case 6:return e===null&&qt&&((e=a=le)&&(a=KA(a,i.pendingProps,ri),a!==null?(i.stateNode=a,sn=i,le=null,e=!0):e=!1),e||Cs(i)),null;case 13:return oy(e,i,a);case 4:return Wt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ia(i,null,o,a):je(e,i,o,a),i.child;case 11:return Wg(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,or(i,i.type,o.value),je(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ns(i),h=$e(h),o=o(h),i.flags|=1,je(e,i,o,a),i.child;case 14:return ty(e,i,i.type,i.pendingProps,a);case 15:return ey(e,i,i.type,i.pendingProps,a);case 19:return uy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=ic(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ni(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ny(e,i,a);case 24:return Ns(i),o=$e(Re),e===null?(h=mf(),h===null&&(h=te,f=ff(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},gf(i),or(i,Re,h)):((e.lanes&a)!==0&&(yf(e,i),Ko(i,null,null,a),Yo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),or(i,Re,o)):(o=f.cache,or(i,Re,o),o!==h.cache&&hf(i,[Re],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Li(e){e.flags|=4}function hy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!v_(i)){if(i=Mn.current,i!==null&&((kt&4194048)===kt?si!==null:(kt&62914560)!==kt&&(kt&536870912)===0||i!==si))throw Fo=pf,Kp;e.flags|=8192}}function rc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?_o():536870912,e.lanes|=i,Oa|=i)}function el(e,i){if(!qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function EA(e,i,a){var o=i.pendingProps;switch(of(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Pi(Re),Qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Lo(i)?Li(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hp())),re(i),null;case 26:return a=i.memoizedState,e===null?(Li(i),a!==null?(re(i),hy(i,a)):(re(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Li(i),re(i),hy(i,a)):(re(i),i.flags&=-16777217):(e.memoizedProps!==o&&Li(i),re(i),i.flags&=-16777217),null;case 27:yi(i),a=St.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=mt.current,Lo(i)?qp(i):(e=h_(h,o,a),i.stateNode=e,Li(i))}return re(i),null;case 5:if(yi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(e=mt.current,Lo(i))qp(i);else{switch(h=yc(St.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[ge]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Ge(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Li(i)}}return re(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Li(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=St.current,Lo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||r_(e.nodeValue,a)),e||Cs(i)}else e=yc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Lo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=Hp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ki(i),i):(ki(i),null)}if(ki(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),rc(i,i.updateQueue),re(i),null;case 4:return Qn(),e===null&&vd(i.stateNode.containerInfo),re(i),null;case 10:return Pi(i.type),re(i),null;case 19:if(nt(Ie),h=i.memoizedState,h===null)return re(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)el(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Wu(e),f!==null){for(i.flags|=128,el(h,!1),e=f.updateQueue,i.updateQueue=e,rc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)zp(a,e),a=a.sibling;return J(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&Sn()>oc&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304)}else{if(!o)if(e=Wu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,rc(i,e),el(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qt)return re(i),null}else 2*Sn()-h.renderingStartTime>oc&&a!==536870912&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Sn(),i.sibling=null,e=Ie.current,J(Ie,o?e&1|2:e&1),i):(re(i),null);case 22:case 23:return ki(i),Tf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&rc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&nt(Os),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Pi(Re),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function TA(e,i){switch(of(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Pi(Re),Qn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return yi(i),null;case 13:if(ki(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));zo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return nt(Ie),null;case 4:return Qn(),null;case 10:return Pi(i.type),null;case 22:case 23:return ki(i),Tf(),e!==null&&nt(Os),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Pi(Re),null;case 25:return null;default:return null}}function fy(e,i){switch(of(i),i.tag){case 3:Pi(Re),Qn();break;case 26:case 27:case 5:yi(i);break;case 4:Qn();break;case 13:ki(i);break;case 19:nt(Ie);break;case 10:Pi(i.type);break;case 22:case 23:ki(i),Tf(),e!==null&&nt(Os);break;case 24:Pi(Re)}}function nl(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Jt(i,i.return,E)}}function mr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(G){Jt(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){Jt(i,i.return,G)}}function dy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{tg(i,a)}catch(o){Jt(e,e.return,o)}}}function my(e,i,a){a.props=Ms(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Jt(e,i,o)}}function il(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Jt(e,i,h)}}function ai(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(e,i,h)}else a.current=null}function py(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Jt(e,e.return,h)}}function Xf(e,i,a){try{var o=e.stateNode;jA(o,e.type,a,i),o[ge]=i}catch(h){Jt(e,e.return,h)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ar(e.type)||e.tag===4}function $f(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ar(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=gc));else if(o!==4&&(o===27&&Ar(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Zf(e,i,a),e=e.sibling;e!==null;)Zf(e,i,a),e=e.sibling}function sc(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ar(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(sc(e,i,a),e=e.sibling;e!==null;)sc(e,i,a),e=e.sibling}function yy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ge(i,o,a),i[Se]=e,i[ge]=a}catch(f){Jt(e,e.return,f)}}var zi=!1,fe=!1,Jf=!1,_y=typeof WeakSet=="function"?WeakSet:Set,Me=null;function AA(e,i){if(e=e.containerInfo,Ad=Sc,e=Dp(e),Xh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sd={focusedElem:e,selectionRange:a},Sc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=Ms(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Jt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Rd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function vy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:pr(e,a),o&4&&nl(5,a);break;case 1:if(pr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var h=Ms(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}o&64&&dy(a),o&512&&il(a,a.return);break;case 3:if(pr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{tg(e,i)}catch(v){Jt(a,a.return,v)}}break;case 27:i===null&&o&4&&yy(a);case 26:case 5:pr(e,a),i===null&&o&4&&py(a),o&512&&il(a,a.return);break;case 12:pr(e,a);break;case 13:pr(e,a),o&4&&Ay(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=OA.bind(null,a),XA(e,a))));break;case 22:if(o=a.memoizedState!==null||zi,!o){i=i!==null&&i.memoizedState!==null||fe,h=zi;var f=fe;zi=o,(fe=i)&&!f?gr(e,a,(a.subtreeFlags&8772)!==0):pr(e,a),zi=h,fe=f}break;case 30:break;default:pr(e,a)}}function Ey(e){var i=e.alternate;i!==null&&(e.alternate=null,Ey(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ir(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,ln=!1;function Bi(e,i,a){for(a=a.child;a!==null;)Ty(e,i,a),a=a.sibling}function Ty(e,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||ai(a,i),Bi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ai(a,i);var o=ie,h=ln;Ar(a.type)&&(ie=a.stateNode,ln=!1),Bi(e,i,a),fl(a.stateNode),ie=o,ln=h;break;case 5:fe||ai(a,i);case 6:if(o=ie,h=ln,ie=null,Bi(e,i,a),ie=o,ln=h,ie!==null)if(ln)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(f){Jt(a,i,f)}else try{ie.removeChild(a.stateNode)}catch(f){Jt(a,i,f)}break;case 18:ie!==null&&(ln?(e=ie,u_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),El(e)):u_(ie,a.stateNode));break;case 4:o=ie,h=ln,ie=a.stateNode.containerInfo,ln=!0,Bi(e,i,a),ie=o,ln=h;break;case 0:case 11:case 14:case 15:fe||mr(2,a,i),fe||mr(4,a,i),Bi(e,i,a);break;case 1:fe||(ai(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&my(a,i,o)),Bi(e,i,a);break;case 21:Bi(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Bi(e,i,a),fe=o;break;default:Bi(e,i,a)}}function Ay(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{El(e)}catch(a){Jt(i,i.return,a)}}function SA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new _y),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new _y),i;default:throw Error(s(435,e.tag))}}function Wf(e,i){var a=SA(e);i.forEach(function(o){var h=VA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function pn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ar(E.type)){ie=E.stateNode,ln=!1;break t}break;case 5:ie=E.stateNode,ln=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,ln=!0;break t}E=E.return}if(ie===null)throw Error(s(160));Ty(f,v,h),ie=null,ln=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Sy(i,e),i=i.sibling}var Bn=null;function Sy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(i,e),gn(e),o&4&&(mr(3,e,e.return),nl(3,e),mr(5,e,e.return));break;case 1:pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),o&64&&zi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Bn;if(pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ls]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ge(f,o,a),f[Se]=e,ce(f),o=f;break t;case"link":var v=y_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;case"meta":if(v=y_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,ce(f),o=f}e.stateNode=o}else __(h,e.type,e.stateNode);else e.stateNode=g_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?__(h,e.type,e.stateNode):g_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Xf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),a!==null&&o&4&&Xf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,e),gn(e),o&512&&(fe||a===null||ai(a,a.return)),e.flags&32){h=e.stateNode;try{bn(h,"")}catch(B){Jt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Xf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Jf=!0);break;case 6:if(pn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Jt(e,e.return,B)}}break;case 3:if(Ec=null,h=Bn,Bn=_c(i.containerInfo),pn(i,e),Bn=h,gn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(B){Jt(e,e.return,B)}Jf&&(Jf=!1,wy(e));break;case 4:o=Bn,Bn=_c(e.stateNode.containerInfo),pn(i,e),gn(e),Bn=o;break;case 12:pn(i,e),gn(e);break;case 13:pn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sd=Sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Wf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=zi,G=fe;if(zi=L||h,fe=G||b,pn(i,e),fe=G,zi=L,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||zi||fe||Ps(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Jt(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){Jt(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Wf(e,a))));break;case 19:pn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Wf(e,o)));break;case 30:break;case 21:break;default:pn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(gy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=$f(e);sc(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(bn(v,""),a.flags&=-33);var E=$f(e);sc(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=$f(e);Zf(e,L,b);break;default:throw Error(s(161))}}catch(G){Jt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function wy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;wy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function pr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vy(e,i.alternate,i),i=i.sibling}function Ps(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:mr(4,i,i.return),Ps(i);break;case 1:ai(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&my(i,i.return,a),Ps(i);break;case 27:fl(i.stateNode);case 26:case 5:ai(i,i.return),Ps(i);break;case 22:i.memoizedState===null&&Ps(i);break;case 30:Ps(i);break;default:Ps(i)}e=e.sibling}}function gr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:gr(h,f,a),nl(4,f);break;case 1:if(gr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Jt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Wp(b[h],E)}catch(L){Jt(o,o.return,L)}}a&&v&64&&dy(f),il(f,f.return);break;case 27:yy(f);case 26:case 5:gr(h,f,a),a&&o===null&&v&4&&py(f),il(f,f.return);break;case 12:gr(h,f,a);break;case 13:gr(h,f,a),a&&v&4&&Ay(h,f);break;case 22:f.memoizedState===null&&gr(h,f,a),il(f,f.return);break;case 30:break;default:gr(h,f,a)}i=i.sibling}}function td(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&jo(a))}function ed(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jo(e))}function oi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)by(e,i,a,o),i=i.sibling}function by(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:oi(e,i,a,o),h&2048&&nl(9,i);break;case 1:oi(e,i,a,o);break;case 3:oi(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jo(e)));break;case 12:if(h&2048){oi(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Jt(i,i.return,b)}}else oi(e,i,a,o);break;case 13:oi(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?oi(e,i,a,o):rl(e,i):f._visibility&2?oi(e,i,a,o):(f._visibility|=2,Ca(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&td(v,i);break;case 24:oi(e,i,a,o),h&2048&&ed(i.alternate,i);break;default:oi(e,i,a,o)}}function Ca(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ca(f,v,E,b,h),nl(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ca(f,v,E,b,h):rl(f,v):(G._visibility|=2,Ca(f,v,E,b,h)),h&&L&2048&&td(v.alternate,v);break;case 24:Ca(f,v,E,b,h),h&&L&2048&&ed(v.alternate,v);break;default:Ca(f,v,E,b,h)}i=i.sibling}}function rl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&td(o.alternate,o);break;case 24:rl(a,o),h&2048&&ed(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var sl=8192;function Da(e){if(e.subtreeFlags&sl)for(e=e.child;e!==null;)Ry(e),e=e.sibling}function Ry(e){switch(e.tag){case 26:Da(e),e.flags&sl&&e.memoizedState!==null&&lS(Bn,e.memoizedState,e.memoizedProps);break;case 5:Da(e);break;case 3:case 4:var i=Bn;Bn=_c(e.stateNode.containerInfo),Da(e),Bn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,Da(e),sl=i):Da(e));break;default:Da(e)}}function Iy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function al(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Dy(o,e)}Iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cy(e),e=e.sibling}function Cy(e){switch(e.tag){case 0:case 11:case 15:al(e),e.flags&2048&&mr(9,e,e.return);break;case 3:al(e);break;case 12:al(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,ac(e)):al(e);break;default:al(e)}}function ac(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Dy(o,e)}Iy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:mr(8,i,i.return),ac(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ac(i));break;default:ac(i)}e=e.sibling}}function Dy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:jo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,f=o.return;if(Ey(o),o===a){Me=null;break t}if(h!==null){h.return=f,Me=h;break t}Me=f}}}var wA={getCacheForType:function(e){var i=$e(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},bA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,Dt=null,kt=0,Ft=0,yn=null,yr=!1,Na=!1,nd=!1,qi=0,ue=0,_r=0,xs=0,id=0,Pn=0,Oa=0,ol=null,un=null,rd=!1,sd=0,oc=1/0,lc=null,vr=null,He=0,Er=null,Va=null,Ma=0,ad=0,od=null,Ny=null,ll=0,ld=null;function _n(){if((Gt&2)!==0&&kt!==0)return kt&-kt;if(H.T!==null){var e=Ea;return e!==0?e:pd()}return er()}function Oy(){Pn===0&&(Pn=(kt&536870912)===0||qt?yo():536870912);var e=Mn.current;return e!==null&&(e.flags|=32),Pn}function vn(e,i,a){(e===te&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Pa(e,0),Tr(e,kt,Pn,!1)),vi(e,a),((Gt&2)===0||e!==te)&&(e===te&&((Gt&2)===0&&(xs|=a),ue===4&&Tr(e,kt,Pn,!1)),li(e))}function Vy(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||os(e,i),h=o?CA(e,i):hd(e,i,!0),f=o;do{if(h===0){Na&&!o&&Tr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!RA(a)){h=hd(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=ol;var b=E.current.memoizedState.isDehydrated;if(b&&(Pa(E,v).flags|=256),v=hd(E,v,!1),v!==2){if(nd&&!b){E.errorRecoveryDisabledLanes|=f,xs|=f,h=4;break t}f=un,un=h,f!==null&&(un===null?un=f:un.push.apply(un,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Pa(e,0),Tr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Tr(o,i,Pn,!yr);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=sd+300-Sn(),10<h)){if(Tr(o,i,Pn,!yr),Zs(o,0,!0)!==0)break t;o.timeoutHandle=o_(My.bind(null,o,a,un,lc,rd,i,Pn,xs,Oa,yr,f,2,-0,0),h);break t}My(o,a,un,lc,rd,i,Pn,xs,Oa,yr,f,0,-0,0)}}break}while(!0);li(e)}function My(e,i,a,o,h,f,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:oS},Ry(i),K=uS(),K!==null)){e.cancelPendingCommit=K(By.bind(null,e,i,f,a,o,h,v,E,b,G,1,z,B)),Tr(e,f,v,!L);return}By(e,i,f,a,o,h,v,E,b)}function RA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!dn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Tr(e,i,a,o){i&=~id,i&=~xs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Xe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Yn(e,a,i)}function uc(){return(Gt&6)===0?(ul(0),!1):!0}function ud(){if(Dt!==null){if(Ft===0)var e=Dt.return;else e=Dt,Mi=Ds=null,Rf(e),Ra=null,Wo=0,e=Dt;for(;e!==null;)fy(e.alternate,e),e=e.return;Dt=null}}function Pa(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,GA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ud(),te=e,Dt=a=Ni(e.current,null),kt=i,Ft=0,yn=null,yr=!1,Na=os(e,i),nd=!1,Oa=Pn=id=xs=_r=ue=0,un=ol=null,rd=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Xe(o),f=1<<h;i|=e[h],o&=~f}return qi=i,Ou(),a}function Py(e,i){Rt=null,H.H=$u,i===Go||i===Bu?(i=Zp(),Ft=3):i===Kp?(i=Zp(),Ft=4):Ft=i===Jg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Dt===null&&(ue=1,ec(e,Dn(i,e.current)))}function xy(){var e=H.H;return H.H=$u,e===null?$u:e}function ky(){var e=H.A;return H.A=wA,e}function cd(){ue=4,yr||(kt&4194048)!==kt&&Mn.current!==null||(Na=!0),(_r&134217727)===0&&(xs&134217727)===0||te===null||Tr(te,kt,Pn,!1)}function hd(e,i,a){var o=Gt;Gt|=2;var h=xy(),f=ky();(te!==e||kt!==i)&&(lc=null,Pa(e,i)),i=!1;var v=ue;t:do try{if(Ft!==0&&Dt!==null){var E=Dt,b=yn;switch(Ft){case 8:ud(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var L=Ft;if(Ft=0,yn=null,xa(e,E,b,L),a&&Na){v=0;break t}break;default:L=Ft,Ft=0,yn=null,xa(e,E,b,L)}}IA(),v=ue;break}catch(G){Py(e,G)}while(!0);return i&&e.shellSuspendCounter++,Mi=Ds=null,Gt=o,H.H=h,H.A=f,Dt===null&&(te=null,kt=0,Ou()),v}function IA(){for(;Dt!==null;)Uy(Dt)}function CA(e,i){var a=Gt;Gt|=2;var o=xy(),h=ky();te!==e||kt!==i?(lc=null,oc=Sn()+500,Pa(e,i)):Na=os(e,i);t:do try{if(Ft!==0&&Dt!==null){i=Dt;var f=yn;e:switch(Ft){case 1:Ft=0,yn=null,xa(e,i,f,1);break;case 2:case 9:if(Xp(f)){Ft=0,yn=null,Ly(i);break}i=function(){Ft!==2&&Ft!==9||te!==e||(Ft=7),li(e)},f.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Xp(f)?(Ft=0,yn=null,Ly(i)):(Ft=0,yn=null,xa(e,i,f,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var E=Dt;if(!v||v_(v)){Ft=0,yn=null;var b=E.sibling;if(b!==null)Dt=b;else{var L=E.return;L!==null?(Dt=L,cc(L)):Dt=null}break e}}Ft=0,yn=null,xa(e,i,f,5);break;case 6:Ft=0,yn=null,xa(e,i,f,6);break;case 8:ud(),ue=6;break t;default:throw Error(s(462))}}DA();break}catch(G){Py(e,G)}while(!0);return Mi=Ds=null,H.H=o,H.A=h,Gt=a,Dt!==null?0:(te=null,kt=0,Ou(),ue)}function DA(){for(;Dt!==null&&!fo();)Uy(Dt)}function Uy(e){var i=cy(e.alternate,e,qi);e.memoizedProps=e.pendingProps,i===null?cc(e):Dt=i}function Ly(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=ry(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=ry(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:Rf(i);default:fy(a,i),i=Dt=zp(i,qi),i=cy(a,i,qi)}e.memoizedProps=e.pendingProps,i===null?cc(e):Dt=i}function xa(e,i,a,o){Mi=Ds=null,Rf(i),Ra=null,Wo=0;var h=i.return;try{if(_A(e,h,i,a,kt)){ue=1,ec(e,Dn(a,e.current)),Dt=null;return}}catch(f){if(h!==null)throw Dt=h,f;ue=1,ec(e,Dn(a,e.current)),Dt=null;return}i.flags&32768?(qt||o===1?e=!0:Na||(kt&536870912)!==0?e=!1:(yr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),zy(i,e)):cc(i)}function cc(e){var i=e;do{if((i.flags&32768)!==0){zy(i,yr);return}e=i.return;var a=EA(i.alternate,i,qi);if(a!==null){Dt=a;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=e}while(i!==null);ue===0&&(ue=5)}function zy(e,i){do{var a=TA(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);ue=6,Dt=null}function By(e,i,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do hc();while(He!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=tf,vo(e,a,f,v,E,b),e===te&&(Dt=te=null,kt=0),Va=i,Er=e,Ma=a,ad=f,od=h,Ny=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,MA(is,function(){return Fy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=et.p,et.p=2,v=Gt,Gt|=4;try{AA(e,i,a)}finally{Gt=v,et.p=h,H.T=o}}He=1,qy(),jy(),Hy()}}function qy(){if(He===1){He=0;var e=Er,i=Va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{Sy(i,e);var f=Sd,v=Dp(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Cp(E.ownerDocument.documentElement,E)){if(b!==null&&Xh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),Et=E.textContent.length,yt=Math.min(b.start,Et),$t=b.end===void 0?yt:Math.min(b.end,Et);!B.extend&&yt>$t&&(v=$t,$t=yt,yt=v);var x=Ip(E,yt),N=Ip(E,$t);if(x&&N&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var U=K.createRange();U.setStart(x.node,x.offset),B.removeAllRanges(),yt>$t?(B.addRange(U),B.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),B.addRange(U))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Y=K[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Sc=!!Ad,Sd=Ad=null}finally{Gt=h,et.p=o,H.T=a}}e.current=i,He=2}}function jy(){if(He===2){He=0;var e=Er,i=Va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{vy(e,i.alternate,i)}finally{Gt=h,et.p=o,H.T=a}}He=3}}function Hy(){if(He===4||He===3){He=0,au();var e=Er,i=Va,a=Ma,o=Ny;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?He=5:(He=0,Va=Er=null,Gy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(vr=null),Js(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=et.p,et.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=i,et.p=h}}(Ma&3)!==0&&hc(),li(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===ld?ll++:(ll=0,ld=e):ll=0,ul(0)}}function Gy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,jo(i)))}function hc(e){return qy(),jy(),Hy(),Fy()}function Fy(){if(He!==5)return!1;var e=Er,i=ad;ad=0;var a=Js(Ma),o=H.T,h=et.p;try{et.p=32>a?32:a,H.T=null,a=od,od=null;var f=Er,v=Ma;if(He=0,Va=Er=null,Ma=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Cy(f.current),by(f,f.current,v,a),Gt=E,ul(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{et.p=h,H.T=o,Gy(e,i)}}function Qy(e,i,a){i=Dn(a,i),i=Bf(e.stateNode,i,2),e=cr(e,i,2),e!==null&&(vi(e,2),li(e))}function Jt(e,i,a){if(e.tag===3)Qy(e,e,a);else for(;i!==null;){if(i.tag===3){Qy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(vr===null||!vr.has(o))){e=Dn(a,e),a=$g(2),o=cr(i,a,2),o!==null&&(Zg(a,o,i,e),vi(o,2),li(o));break}}i=i.return}}function fd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new bA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(nd=!0,h.add(a),e=NA.bind(null,e,i,a),i.then(e,e))}function NA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(kt&a)===a&&(ue===4||ue===3&&(kt&62914560)===kt&&300>Sn()-sd?(Gt&2)===0&&Pa(e,0):id|=a,Oa===kt&&(Oa=0)),li(e)}function Yy(e,i){i===0&&(i=_o()),e=ga(e,i),e!==null&&(vi(e,i),li(e))}function OA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Yy(e,a)}function VA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Yy(e,a)}function MA(e,i){return es(e,i)}var fc=null,ka=null,dd=!1,dc=!1,md=!1,ks=0;function li(e){e!==ka&&e.next===null&&(ka===null?fc=ka=e:ka=ka.next=e),dc=!0,dd||(dd=!0,xA())}function ul(e,i){if(!md&&dc){md=!0;do for(var a=!1,o=fc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Xe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Zy(o,f))}else f=kt,f=Zs(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||os(o,f)||(a=!0,Zy(o,f));o=o.next}while(a);md=!1}}function PA(){Ky()}function Ky(){dc=dd=!1;var e=0;ks!==0&&(HA()&&(e=ks),ks=0);for(var i=Sn(),a=null,o=fc;o!==null;){var h=o.next,f=Xy(o,i);f===0?(o.next=null,a===null?fc=h:a.next=h,h===null&&(ka=a)):(a=o,(e!==0||(f&3)!==0)&&(dc=!0)),o=h}ul(e)}function Xy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Xe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=go(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=te,a=kt,a=Zs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ns(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||os(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&ns(o),Js(a)){case 2:case 8:a=Xs;break;case 32:a=is;break;case 268435456:a=$s;break;default:a=is}return o=$y.bind(null,e),a=es(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&ns(o),e.callbackPriority=2,e.callbackNode=null,2}function $y(e,i){if(He!==0&&He!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(hc()&&e.callbackNode!==a)return null;var o=kt;return o=Zs(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Vy(e,o,i),Xy(e,Sn()),e.callbackNode!=null&&e.callbackNode===a?$y.bind(null,e):null)}function Zy(e,i){if(hc())return null;Vy(e,i,!0)}function xA(){FA(function(){(Gt&6)!==0?es(mo,PA):Ky()})}function pd(){return ks===0&&(ks=yo()),ks}function Jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ra(""+e)}function Wy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function kA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=Jy((h[ge]||null).action),v=o.submitter;v&&(i=(i=v[ge]||null)?Jy(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new sa("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var b=v?Wy(h,v):new FormData(h);xf(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Wy(h,v):new FormData(h),xf(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var gd=0;gd<Wh.length;gd++){var yd=Wh[gd],UA=yd.toLowerCase(),LA=yd[0].toUpperCase()+yd.slice(1);zn(UA,"on"+LA)}zn(Vp,"onAnimationEnd"),zn(Mp,"onAnimationIteration"),zn(Pp,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(eA,"onTransitionRun"),zn(nA,"onTransitionStart"),zn(iA,"onTransitionCancel"),zn(xp,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function t_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){tc(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){tc(G)}h.currentTarget=null,f=b}}}}function Nt(e,i){var a=i[To];a===void 0&&(a=i[To]=new Set);var o=e+"__bubble";a.has(o)||(e_(i,e,2,!1),a.add(o))}function _d(e,i,a){var o=0;i&&(o|=4),e_(a,e,o,i)}var mc="_reactListening"+Math.random().toString(36).slice(2);function vd(e){if(!e[mc]){e[mc]=!0,Ao.forEach(function(a){a!=="selectionchange"&&(zA.has(a)||_d(a,!1,e),_d(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[mc]||(i[mc]=!0,_d("selectionchange",!1,i))}}function e_(e,i,a,o){switch(b_(i)){case 2:var h=fS;break;case 8:h=dS;break;default:h=Md}a=h.bind(null,i,a,e),h=void 0,!In||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function Ed(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ei(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}gu(function(){var L=f,G=Rn(a),K=[];t:{var z=kp.get(e);if(z!==void 0){var B=sa,Et=e;switch(e){case"keypress":if(Wn(a)===0)break t;case"keydown":case"keyup":B=ha;break;case"focusin":Et="focus",B=la;break;case"focusout":Et="blur",B=la;break;case"beforeblur":case"afterblur":B=la;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=wu;break;case Vp:case Mp:case Pp:B=ua;break;case xp:B=Ru;break;case"scroll":case"scrollend":B=yu;break;case"wheel":B=fa;break;case"copy":case"cut":case"paste":B=ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Po;break;case"toggle":case"beforetoggle":B=Cu}var yt=(i&4)!==0,$t=!yt&&(e==="scroll"||e==="scrollend"),x=yt?z!==null?z+"Capture":null:z;yt=[];for(var N=L,U;N!==null;){var Y=N;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||x===null||(Y=ps(N,x),Y!=null&&yt.push(hl(N,Y,U))),$t)break;N=N.return}0<yt.length&&(z=new B(z,Et,null,a,G),K.push({event:z,listeners:yt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==wi&&(Et=a.relatedTarget||a.fromElement)&&(Ei(Et)||Et[wn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Et=a.relatedTarget||a.toElement,B=L,Et=Et?Ei(Et):null,Et!==null&&($t=c(Et),yt=Et.tag,Et!==$t||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(B=null,Et=L),B!==Et)){if(yt=Cn,Y="onMouseLeave",x="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Po,Y="onPointerLeave",x="onPointerEnter",N="pointer"),$t=B==null?z:Xn(B),U=Et==null?z:Xn(Et),z=new yt(Y,N+"leave",B,a,G),z.target=$t,z.relatedTarget=U,Y=null,Ei(G)===L&&(yt=new yt(x,N+"enter",Et,a,G),yt.target=U,yt.relatedTarget=$t,Y=yt),$t=Y,B&&Et)e:{for(yt=B,x=Et,N=0,U=yt;U;U=Ua(U))N++;for(U=0,Y=x;Y;Y=Ua(Y))U++;for(;0<N-U;)yt=Ua(yt),N--;for(;0<U-N;)x=Ua(x),U--;for(;N--;){if(yt===x||x!==null&&yt===x.alternate)break e;yt=Ua(yt),x=Ua(x)}yt=null}else yt=null;B!==null&&n_(K,z,B,yt,!1),Et!==null&&$t!==null&&n_(K,$t,Et,yt,!0)}}t:{if(z=L?Xn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ot=Tp;else if(be(z))if(Ap)ot=J0;else{ot=$0;var Ct=X0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Io(L.elementType)&&(ot=Tp):ot=Z0;if(ot&&(ot=ot(e,L))){Di(K,ot,a,G);break t}Ct&&Ct(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&sr(z,"number",z.value)}switch(Ct=L?Xn(L):window,e){case"focusin":(be(Ct)||Ct.contentEditable==="true")&&(da=Ct,$h=L,Uo=null);break;case"focusout":Uo=$h=da=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,Np(K,a,G);break;case"selectionchange":if(tA)break;case"keydown":case"keyup":Np(K,a,G)}var lt;if(ni)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Pt?j(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(_&&a.locale!=="ko"&&(Pt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Pt&&(lt=Do()):(Jn=G,ar="value"in Jn?Jn.value:Jn.textContent,Pt=!0)),Ct=pc(L,_t),0<Ct.length&&(_t=new Vo(_t,e,null,a,G),K.push({event:_t,listeners:Ct}),lt?_t.data=lt:(lt=W(a),lt!==null&&(_t.data=lt)))),(lt=m?we(e,a):xt(e,a))&&(_t=pc(L,"onBeforeInput"),0<_t.length&&(Ct=new Vo("onBeforeInput","beforeinput",null,a,G),K.push({event:Ct,listeners:_t}),Ct.data=lt)),kA(K,e,L,a,G)}t_(K,i)})}function hl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function pc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ps(e,a),h!=null&&o.unshift(hl(e,h,f)),h=ps(e,i),h!=null&&o.push(hl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function n_(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=ps(a,f),L!=null&&v.unshift(hl(a,L,b))):h||(L=ps(a,f),L!=null&&v.push(hl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var BA=/\r\n?/g,qA=/\u0000|\uFFFD/g;function i_(e){return(typeof e=="string"?e:""+e).replace(BA,`
`).replace(qA,"")}function r_(e,i){return i=i_(i),i_(e)===i}function gc(){}function Xt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||bn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&bn(e,""+o);break;case"className":$n(e,"class",o);break;case"tabIndex":$n(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(e,a,o);break;case"style":Ro(e,o,f);break;case"data":if(i!=="object"){$n(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ra(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ra(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=gc);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ra(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),rr(e,"popover",o);break;case"xlinkActuate":Be(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Be(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Be(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Be(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Be(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Be(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Be(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Be(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Be(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hh.get(a)||a,rr(e,a,o))}}function Td(e,i,a,o,h,f){switch(a){case"style":Ro(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?bn(e,o):(typeof o=="number"||typeof o=="bigint")&&bn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=gc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ws.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):rr(e,a,o)}}}function Ge(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,f,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),o&&Xt(e,i,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Xt(e,i,o,G,a,null)}}fs(e,f,E,b,L,v,h,!1),ia(e);return;case"select":Nt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xt(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Si(e,!!o,i,!1):a!=null&&Si(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}ds(e,o,h,f),ia(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,i,b,o,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<cl.length;o++)Nt(cl[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,L,o,a,null)}return;default:if(Io(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Td(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xt(e,i,E,o,a,null))}function jA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||Xt(e,i,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&Xt(e,i,z,B,o,K)}}fn(e,v,E,b,L,G,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Xt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Xt(e,i,h,f,o,b)}i=E,a=v,o=B,z!=null?Si(e,!!a,z,!1):!!o!=!!a&&(i!=null?Si(e,!!a,i,!0):Si(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xt(e,i,v,h,o,f)}Yt(e,z,B);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Xt(e,i,Et,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)z=a[yt],a.hasOwnProperty(yt)&&z!=null&&!o.hasOwnProperty(yt)&&Xt(e,i,yt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xt(e,i,L,z,o,B)}return;default:if(Io(i)){for(var $t in a)z=a[$t],a.hasOwnProperty($t)&&z!==void 0&&!o.hasOwnProperty($t)&&Td(e,i,$t,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||Td(e,i,G,z,o,B);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&Xt(e,i,x,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||Xt(e,i,K,z,o,B)}var Ad=null,Sd=null;function yc(e){return e.nodeType===9?e:e.ownerDocument}function s_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function wd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bd=null;function HA(){var e=window.event;return e&&e.type==="popstate"?e===bd?!1:(bd=e,!0):(bd=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,GA=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(e){return l_.resolve(null).then(e).catch(QA)}:o_;function QA(e){setTimeout(function(){throw e})}function Ar(e){return e==="head"}function u_(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&fl(v.documentElement),a&2&&fl(v.body),a&4)for(a=v.head,fl(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[ls]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),El(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);El(i)}function Rd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Rd(a),ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function YA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ls])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function KA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qn(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function XA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Cd=null;function c_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function h_(e,i,a){switch(i=yc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function fl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ir(e)}var xn=new Map,f_=new Set;function _c(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ji=et.d;et.d={f:$A,r:ZA,D:JA,C:WA,L:tS,m:eS,X:iS,S:nS,M:rS};function $A(){var e=ji.f(),i=uc();return e||i}function ZA(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?Vg(i):ji.r(e)}var La=typeof document>"u"?null:document;function d_(e,i,a){var o=La;if(o&&typeof i=="string"&&i){var h=ye(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),f_.has(h)||(f_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ge(i,"link",e),ce(i),o.head.appendChild(i)))}}function JA(e){ji.D(e),d_("dns-prefetch",e,null)}function WA(e,i){ji.C(e,i),d_("preconnect",e,i)}function tS(e,i,a){ji.L(e,i,a);var o=La;if(o&&e&&i){var h='link[rel="preload"][as="'+ye(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ye(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ye(a.imageSizes)+'"]')):h+='[href="'+ye(e)+'"]';var f=h;switch(i){case"style":f=za(e);break;case"script":f=Ba(e)}xn.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),xn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(dl(f))||i==="script"&&o.querySelector(ml(f))||(i=o.createElement("link"),Ge(i,"link",e),ce(i),o.head.appendChild(i)))}}function eS(e,i){ji.m(e,i);var a=La;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ye(o)+'"][href="'+ye(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ba(e)}if(!xn.has(f)&&(e=T({rel:"modulepreload",href:e},i),xn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ml(f)))return}o=a.createElement("link"),Ge(o,"link",e),ce(o),a.head.appendChild(o)}}}function nS(e,i,a){ji.S(e,i,a);var o=La;if(o&&e){var h=en(o).hoistableStyles,f=za(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(dl(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=xn.get(f))&&Dd(e,a);var b=v=o.createElement("link");ce(b),Ge(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,vc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function iS(e,i){ji.X(e,i);var a=La;if(a&&e){var o=en(a).hoistableScripts,h=Ba(e),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(e=T({src:e,async:!0},i),(i=xn.get(h))&&Nd(e,i),f=a.createElement("script"),ce(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function rS(e,i){ji.M(e,i);var a=La;if(a&&e){var o=en(a).hoistableScripts,h=Ba(e),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=xn.get(h))&&Nd(e,i),f=a.createElement("script"),ce(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function m_(e,i,a,o){var h=(h=St.current)?_c(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=za(a.href),a=en(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=za(a.href);var f=en(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(dl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xn.set(e,a),f||sS(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ba(a),a=en(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function za(e){return'href="'+ye(e)+'"'}function dl(e){return'link[rel="stylesheet"]['+e+"]"}function p_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function sS(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ge(i,"link",a),ce(i),e.head.appendChild(i))}function Ba(e){return'[src="'+ye(e)+'"]'}function ml(e){return"script[async]"+e}function g_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ye(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),Ge(o,"style",h),vc(o,a.precedence,e),i.instance=o;case"stylesheet":h=za(a.href);var f=e.querySelector(dl(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=p_(a),(h=xn.get(h))&&Dd(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ge(f,"link",o),i.state.loading|=4,vc(f,a.precedence,e),i.instance=f;case"script":return f=Ba(a.src),(h=e.querySelector(ml(f)))?(i.instance=h,ce(h),h):(o=a,(h=xn.get(f))&&(o=T({},a),Nd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Ge(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,vc(o,a.precedence,e));return i.instance}function vc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Dd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Nd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ec=null;function y_(e,i,a){if(Ec===null){var o=new Map,h=Ec=new Map;h.set(a,o)}else h=Ec,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ls]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function __(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function aS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var pl=null;function oS(){}function lS(e,i,a){if(pl===null)throw Error(s(475));var o=pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=za(a.href),f=e.querySelector(dl(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Tc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=p_(a),(h=xn.get(h))&&Dd(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ge(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Tc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function uS(){if(pl===null)throw Error(s(475));var e=pl;return e.stylesheets&&e.count===0&&Od(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Od(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Tc(){if(this.count--,this.count===0){if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ac=null;function Od(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ac=new Map,i.forEach(cS,e),Ac=null,Tc.call(e))}function cS(e,i){if(!(i.state.loading&4)){var a=Ac.get(e);if(a)var o=a.get(null);else{a=new Map,Ac.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Tc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var gl={$$typeof:at,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function hS(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function E_(e,i,a,o,h,f,v,E,b,L,G,K){return e=new hS(e,i,a,v,E,b,L,K),i=1,f===!0&&(i|=24),f=mn(3,null,null,i),e.current=f,f.stateNode=e,i=ff(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},gf(f),e}function T_(e){return e?(e=ya,e):ya}function A_(e,i,a,o,h,f){h=T_(h),o.context===null?o.context=h:o.pendingContext=h,o=ur(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=cr(e,o,i),a!==null&&(vn(a,e,i),Qo(a,e,i))}function S_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Vd(e,i){S_(e,i),(e=e.alternate)&&S_(e,i)}function w_(e){if(e.tag===13){var i=ga(e,67108864);i!==null&&vn(i,e,67108864),Vd(e,67108864)}}var Sc=!0;function fS(e,i,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=2,Md(e,i,a,o)}finally{et.p=f,H.T=h}}function dS(e,i,a,o){var h=H.T;H.T=null;var f=et.p;try{et.p=8,Md(e,i,a,o)}finally{et.p=f,H.T=h}}function Md(e,i,a,o){if(Sc){var h=Pd(o);if(h===null)Ed(e,i,o,wc,a),R_(e,o);else if(pS(h,e,i,a,o))o.stopPropagation();else if(R_(e,o),i&4&&-1<mS.indexOf(e)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=kn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Xe(v);E.entanglements[1]|=b,v&=~b}li(f),(Gt&6)===0&&(oc=Sn()+500,ul(0))}}break;case 13:E=ga(f,2),E!==null&&vn(E,f,2),uc(),Vd(f,2)}if(f=Pd(o),f===null&&Ed(e,i,o,wc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Ed(e,i,o,null,a)}}function Pd(e){return e=Rn(e),xd(e)}var wc=null;function xd(e){if(wc=null,e=Ei(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return wc=e,null}function b_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uh()){case mo:return 2;case Xs:return 8;case is:case Lh:return 32;case $s:return 268435456;default:return 32}default:return 32}}var kd=!1,Sr=null,wr=null,br=null,yl=new Map,_l=new Map,Rr=[],mS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R_(e,i){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function vl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&w_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function pS(e,i,a,o,h){switch(i){case"focusin":return Sr=vl(Sr,e,i,a,o,h),!0;case"dragenter":return wr=vl(wr,e,i,a,o,h),!0;case"mouseover":return br=vl(br,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return yl.set(f,vl(yl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,_l.set(f,vl(_l.get(f)||null,e,i,a,o,h)),!0}return!1}function I_(e){var i=Ei(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,uu(e.priority,function(){if(a.tag===13){var o=_n();o=tr(o);var h=ga(a,o);h!==null&&vn(h,a,o),Vd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Pd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);wi=o,a.target.dispatchEvent(o),wi=null}else return i=Kn(a),i!==null&&w_(i),e.blockedOn=a,!1;i.shift()}return!0}function C_(e,i,a){bc(e)&&a.delete(i)}function gS(){kd=!1,Sr!==null&&bc(Sr)&&(Sr=null),wr!==null&&bc(wr)&&(wr=null),br!==null&&bc(br)&&(br=null),yl.forEach(C_),_l.forEach(C_)}function Rc(e,i){e.blockedOn===i&&(e.blockedOn=null,kd||(kd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gS)))}var Ic=null;function D_(e){Ic!==e&&(Ic=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ic===e&&(Ic=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(xd(o||a)===null)continue;break}var f=Kn(a);f!==null&&(e.splice(i,3),i-=3,xf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function El(e){function i(b){return Rc(b,e)}Sr!==null&&Rc(Sr,e),wr!==null&&Rc(wr,e),br!==null&&Rc(br,e),yl.forEach(i),_l.forEach(i);for(var a=0;a<Rr.length;a++){var o=Rr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Rr.length&&(a=Rr[0],a.blockedOn===null);)I_(a),a.blockedOn===null&&Rr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[ge]||null;if(typeof f=="function")v||D_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[ge]||null)E=v.formAction;else if(xd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),D_(a)}}}function Ud(e){this._internalRoot=e}Cc.prototype.render=Ud.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=_n();A_(a,o,e,i,null,null)},Cc.prototype.unmount=Ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;A_(e.current,2,null,e,null,null),uc(),i[wn]=null}};function Cc(e){this._internalRoot=e}Cc.prototype.unstable_scheduleHydration=function(e){if(e){var i=er();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Rr.length&&i!==0&&i<Rr[a].priority;a++);Rr.splice(a,0,e),a===0&&I_(e)}};var N_=t.version;if(N_!=="19.1.1")throw Error(s(527,N_,"19.1.1"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var yS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{oe=Dc.inject(yS),Ht=Dc}catch{}}return Al.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Qg,f=Yg,v=Kg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=E_(e,1,!1,null,null,a,o,h,f,v,E,null),e[wn]=i.current,vd(e),new Ud(i)},Al.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Qg,v=Yg,E=Kg,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=E_(e,1,!0,i,a??null,o,h,f,v,E,b,L),i.context=T_(null),a=i.current,o=_n(),o=tr(o),h=ur(o),h.callback=null,cr(a,h,o),a=o,i.current.lanes=a,vi(i,a),li(i),e[wn]=i.current,vd(e),new Cc(i)},Al.version="19.1.1",Al}var B_;function IS(){if(B_)return Bd.exports;B_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Bd.exports=RS(),Bd.exports}var CS=IS();const DS=()=>{};var q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},NS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,w=(c&3)<<4|p>>4;let R=(p&15)<<2|y>>6,q=y&63;g||(q=64,d||(R=64)),s.push(n[T],n[w],n[R],n[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(AE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):NS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||w==null)throw new OS;const R=c<<2|p>>4;if(s.push(R),y!==64){const q=p<<4&240|y>>2;if(s.push(q),w!==64){const Q=y<<6&192|w;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VS=function(r){const t=AE(r);return SE.encodeByteArray(t,!0)},Qc=function(r){return VS(r).replace(/\./g,"")},wE=function(r){try{return SE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=()=>MS().__FIREBASE_DEFAULTS__,xS=()=>{if(typeof process>"u"||typeof q_>"u")return;const r=q_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&wE(r[1]);return t&&JSON.parse(t)},dh=()=>{try{return DS()||PS()||xS()||kS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bE=r=>dh()?.emulatorHosts?.[r],US=r=>{const t=bE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},RE=()=>dh()?.config,IE=r=>dh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Qc(JSON.stringify(n)),Qc(JSON.stringify(d)),""].join(".")}const Rl={};function BS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Rl))Rl[t]?r.emulator.push(t):r.prod.push(t);return r}function qS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let j_=!1;function DE(r,t){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||Rl[r]===t||Rl[r]||j_)return;Rl[r]=t;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=BS().prod.length>0;function d(){const R=document.getElementById(s);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,q){R.setAttribute("width","24"),R.setAttribute("id",q),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{j_=!0,d()},R}function T(R,q){R.setAttribute("id",q),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function w(){const R=qS(s),q=n("text"),Q=document.getElementById(q)||document.createElement("span"),tt=n("learnmore"),$=document.getElementById(tt)||document.createElement("a"),dt=n("preprendIcon"),ut=document.getElementById(dt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const at=R.element;p(at),T($,tt);const ft=y();g(ut,dt),at.append(ut,Q,$,ft),document.body.appendChild(at)}c?(Q.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function HS(){const r=dh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YS(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function KS(){return!HS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function $S(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="FirebaseError";class Ji extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ZS,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?JS(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Ji(l,p,s)}}function JS(r,t){return r.replace(WS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const WS=/\{\$([^}]+)}/g;function tw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Bs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(H_(c)&&H_(d)){if(!Bs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function H_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function ew(r,t){const n=new nw(r,t);return n.subscribe.bind(n)}class nw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");iw(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Gd),l.error===void 0&&(l.error=Gd),l.complete===void 0&&(l.complete=Gd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iw(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Gd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(r){return r&&r._delegate?r._delegate:r}class qs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new LS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aw(t))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Us){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Us){return this.instances.has(t)}getOptions(t=Us){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Us){return this.component?this.component.multipleInstances?t:Us:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sw(r){return r===Us?void 0:r}function aw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new rw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const lw={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},uw=Ot.INFO,cw={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},hw=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=cw[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dm{constructor(t){this.name=t,this._logLevel=uw,this._logHandler=hw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const fw=(r,t)=>t.some(n=>r instanceof n);let G_,F_;function dw(){return G_||(G_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mw(){return F_||(F_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NE=new WeakMap,em=new WeakMap,OE=new WeakMap,Fd=new WeakMap,Nm=new WeakMap;function pw(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(kr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&NE.set(n,r)}).catch(()=>{}),Nm.set(t,r),t}function gw(r){if(em.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});em.set(r,t)}let nm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return em.get(r);if(t==="objectStoreNames")return r.objectStoreNames||OE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function yw(r){nm=r(nm)}function _w(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Qd(this),t,...n);return OE.set(s,t.sort?t.sort():[t]),kr(s)}:mw().includes(r)?function(...t){return r.apply(Qd(this),t),kr(NE.get(this))}:function(...t){return kr(r.apply(Qd(this),t))}}function vw(r){return typeof r=="function"?_w(r):(r instanceof IDBTransaction&&gw(r),fw(r,dw())?new Proxy(r,nm):r)}function kr(r){if(r instanceof IDBRequest)return pw(r);if(Fd.has(r))return Fd.get(r);const t=vw(r);return t!==r&&(Fd.set(r,t),Nm.set(t,r)),t}const Qd=r=>Nm.get(r);function Ew(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=kr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(kr(d.result),g.oldVersion,g.newVersion,kr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Tw=["get","getKey","getAll","getAllKeys","count"],Aw=["put","add","delete","clear"],Yd=new Map;function Q_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Yd.get(t))return Yd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=Aw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Tw.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Yd.set(t,c),c}yw(r=>({...r,get:(t,n,s)=>Q_(t,n)||r.get(t,n,s),has:(t,n)=>!!Q_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ww(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ww(r){return r.getComponent()?.type==="VERSION"}const im="@firebase/app",Y_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Dm("@firebase/app"),bw="@firebase/app-compat",Rw="@firebase/analytics-compat",Iw="@firebase/analytics",Cw="@firebase/app-check-compat",Dw="@firebase/app-check",Nw="@firebase/auth",Ow="@firebase/auth-compat",Vw="@firebase/database",Mw="@firebase/data-connect",Pw="@firebase/database-compat",xw="@firebase/functions",kw="@firebase/functions-compat",Uw="@firebase/installations",Lw="@firebase/installations-compat",zw="@firebase/messaging",Bw="@firebase/messaging-compat",qw="@firebase/performance",jw="@firebase/performance-compat",Hw="@firebase/remote-config",Gw="@firebase/remote-config-compat",Fw="@firebase/storage",Qw="@firebase/storage-compat",Yw="@firebase/firestore",Kw="@firebase/ai",Xw="@firebase/firestore-compat",$w="firebase",Zw="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",Jw={[im]:"fire-core",[bw]:"fire-core-compat",[Iw]:"fire-analytics",[Rw]:"fire-analytics-compat",[Dw]:"fire-app-check",[Cw]:"fire-app-check-compat",[Nw]:"fire-auth",[Ow]:"fire-auth-compat",[Vw]:"fire-rtdb",[Mw]:"fire-data-connect",[Pw]:"fire-rtdb-compat",[xw]:"fire-fn",[kw]:"fire-fn-compat",[Uw]:"fire-iid",[Lw]:"fire-iid-compat",[zw]:"fire-fcm",[Bw]:"fire-fcm-compat",[qw]:"fire-perf",[jw]:"fire-perf-compat",[Hw]:"fire-rc",[Gw]:"fire-rc-compat",[Fw]:"fire-gcs",[Qw]:"fire-gcs-compat",[Yw]:"fire-fst",[Xw]:"fire-fst-compat",[Kw]:"fire-vertex","fire-js":"fire-js",[$w]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,Ww=new Map,sm=new Map;function K_(r,t){try{r.container.addComponent(t)}catch(n){Qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ja(r){const t=r.name;if(sm.has(t))return Qi.debug(`There were multiple attempts to register component ${t}.`),!1;sm.set(t,r);for(const n of Yc.values())K_(n,r);for(const n of Ww.values())K_(n,r);return!0}function Om(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Hl("app","Firebase",t1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=Zw;function VE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:rm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Ur.create("bad-app-name",{appName:String(l)});if(n||(n=RE()),!n)throw Ur.create("no-options");const c=Yc.get(l);if(c){if(Bs(n,c.options)&&Bs(s,c.config))return c;throw Ur.create("duplicate-app",{appName:l})}const d=new ow(l);for(const g of sm.values())d.addComponent(g);const p=new e1(n,s,d);return Yc.set(l,p),p}function ME(r=rm){const t=Yc.get(r);if(!t&&r===rm&&RE())return VE();if(!t)throw Ur.create("no-app",{appName:r});return t}function Lr(r,t,n){let s=Jw[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qi.warn(d.join(" "));return}Ja(new qs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="firebase-heartbeat-database",i1=1,Pl="firebase-heartbeat-store";let Kd=null;function PE(){return Kd||(Kd=Ew(n1,i1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ur.create("idb-open",{originalErrorMessage:r.message})})),Kd}async function r1(r){try{const n=(await PE()).transaction(Pl),s=await n.objectStore(Pl).get(xE(r));return await n.done,s}catch(t){if(t instanceof Ji)Qi.warn(t.message);else{const n=Ur.create("idb-get",{originalErrorMessage:t?.message});Qi.warn(n.message)}}}async function X_(r,t){try{const s=(await PE()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(t,xE(r)),await s.done}catch(n){if(n instanceof Ji)Qi.warn(n.message);else{const s=Ur.create("idb-set",{originalErrorMessage:n?.message});Qi.warn(s.message)}}}function xE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=1024,a1=30;class o1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>a1){const l=c1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$_(),{heartbeatsToSend:n,unsentEntries:s}=l1(this._heartbeatsCache.heartbeats),l=Qc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qi.warn(t),""}}}function $_(){return new Date().toISOString().substring(0,10)}function l1(r,t=s1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),Z_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Z_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class u1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?$S().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Z_(r){return Qc(JSON.stringify({version:2,heartbeats:r})).length}function c1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(r){Ja(new qs("platform-logger",t=>new Sw(t),"PRIVATE")),Ja(new qs("heartbeat",t=>new o1(t),"PRIVATE")),Lr(im,Y_,r),Lr(im,Y_,"esm2020"),Lr("fire-js","")}h1("");var f1="firebase",d1="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(f1,d1,"app");function kE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m1=kE,UE=new Hl("auth","Firebase",kE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Dm("@firebase/auth");function p1(r,...t){Kc.logLevel<=Ot.WARN&&Kc.warn(`Auth (${ao}): ${r}`,...t)}function kc(r,...t){Kc.logLevel<=Ot.ERROR&&Kc.error(`Auth (${ao}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(r,...t){throw Vm(r,...t)}function ci(r,...t){return Vm(r,...t)}function LE(r,t,n){const s={...m1(),[t]:n};return new Hl("auth","Firebase",s).create(t,{appName:r.name})}function zr(r){return LE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return UE.create(r,...t)}function Tt(r,t,...n){if(!r)throw Vm(t,...n)}function Hi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw kc(t),new Error(t)}function Ki(r,t){r||Hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){return typeof self<"u"&&self.location?.href||""}function g1(){return J_()==="http:"||J_()==="https:"}function J_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g1()||FS()||"connection"in navigator)?navigator.onLine:!0}function _1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=jS()||QS()}get(){return y1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T1=new Fl(3e4,6e4);function mh(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function oo(r,t,n,s,l={}){return BE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=Gl({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return GS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&so(r.emulatorConfig.host)&&(y.credentials="include"),zE.fetch()(await jE(r,r.config.apiHost,n,p),y)})}async function BE(r,t,n){r._canInitEmulator=!1;const s={...v1,...t};try{const l=new A1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Nc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Nc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Nc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw LE(r,T,y);Yi(r,T)}}catch(l){if(l instanceof Ji)throw l;Yi(r,"network-request-failed",{message:String(l)})}}async function qE(r,t,n,s,l={}){const c=await oo(r,t,n,s,l);return"mfaPendingCredential"in c&&Yi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function jE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?Mm(r.config,l):`${r.config.apiScheme}://${l}`;return E1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class A1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ci(this.auth,"network-request-failed")),T1.get())})}}function Nc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ci(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(r,t){return oo(r,"POST","/v1/accounts:delete",t)}async function Xc(r,t){return oo(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function w1(r,t=!1){const n=ze(r),s=await n.getIdToken(t),l=Pm(s);Tt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Il(Xd(l.auth_time)),issuedAtTime:Il(Xd(l.iat)),expirationTime:Il(Xd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Xd(r){return Number(r)*1e3}function Pm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return kc("JWT malformed, contained fewer than 3 sections"),null;try{const l=wE(n);return l?JSON.parse(l):(kc("Failed to decode base64 JWT payload"),null)}catch(l){return kc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function W_(r){const t=Pm(r);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ji&&b1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function b1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Il(this.lastLoginAt),this.creationTime=Il(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(r){const t=r.auth,n=await r.getIdToken(),s=await xl(r,Xc(t,{idToken:n}));Tt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?HE(l.providerUserInfo):[],d=C1(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new om(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function I1(r){const t=ze(r);await $c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function C1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function HE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,t){const n=await BE(r,{},async()=>{const s=Gl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await jE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&so(r.emulatorConfig.host)&&(g.credentials="include"),zE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N1(r,t){return oo(r,"POST","/v2/accounts:revokeToken",mh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const n=W_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await D1(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ka;return s&&(Tt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(Tt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(Tt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r,t){Tt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Hn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new R1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new om(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await xl(this,this.stsTokenManager.getToken(this.auth,t));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return w1(this,t)}reload(){return I1(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Hn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await $c(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(zr(this.auth));const t=await this.getIdToken();return await xl(this,S1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:R,isAnonymous:q,providerData:Q,stsTokenManager:tt}=n;Tt(w&&tt,t,"internal-error");const $=Ka.fromJSON(this.name,tt);Tt(typeof w=="string",t,"internal-error"),Cr(s,t.name),Cr(l,t.name),Tt(typeof R=="boolean",t,"internal-error"),Tt(typeof q=="boolean",t,"internal-error"),Cr(c,t.name),Cr(d,t.name),Cr(p,t.name),Cr(g,t.name),Cr(y,t.name),Cr(T,t.name);const dt=new Hn({uid:w,auth:t,email:l,emailVerified:R,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:$,createdAt:y,lastLoginAt:T});return Q&&Array.isArray(Q)&&(dt.providerData=Q.map(ut=>({...ut}))),g&&(dt._redirectEventId=g),dt}static async _fromIdTokenResponse(t,n,s=!1){const l=new Ka;l.updateFromServerResponse(n);const c=new Hn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await $c(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];Tt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?HE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Ka;p.updateFromIdToken(s);const g=new Hn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new om(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new Map;function Gi(r){Ki(r instanceof Function,"Expected a class definition");let t=tv.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,tv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}GE.type="NONE";const ev=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(r,t,n){return`firebase:${r}:${t}:${n}`}class Xa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Uc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Uc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Xc(this.auth,{idToken:t}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,t):null}return Hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Xa(Gi(ev),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Gi(ev);const d=Uc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let w;if(typeof T=="string"){const R=await Xc(t,{idToken:T}).catch(()=>{});if(!R)break;w=await Hn._fromGetAccountInfoResponse(t,R,T)}else w=Hn._fromJSON(t,T);y!==c&&(p=w),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Xa(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Xa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(KE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(FE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($E(t))return"Blackberry";if(ZE(t))return"Webos";if(QE(t))return"Safari";if((t.includes("chrome/")||YE(t))&&!t.includes("edge/"))return"Chrome";if(XE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function FE(r=tn()){return/firefox\//i.test(r)}function QE(r=tn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YE(r=tn()){return/crios\//i.test(r)}function KE(r=tn()){return/iemobile/i.test(r)}function XE(r=tn()){return/android/i.test(r)}function $E(r=tn()){return/blackberry/i.test(r)}function ZE(r=tn()){return/webos/i.test(r)}function xm(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function O1(r=tn()){return xm(r)&&!!window.navigator?.standalone}function V1(){return YS()&&document.documentMode===10}function JE(r=tn()){return xm(r)||XE(r)||ZE(r)||$E(r)||/windows phone/i.test(r)||KE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(r,t=[]){let n;switch(r){case"Browser":n=nv(tn());break;case"Worker":n=`${nv(tn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(r,t={}){return oo(r,"GET","/v2/passwordPolicy",mh(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=6;class k1{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??x1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iv(this),this.idTokenSubscription=new iv(this),this.beforeStateQueue=new M1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Xc(this,{idToken:t}),s=await Hn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await $c(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(zr(this));const n=t?ze(t):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await P1(this),n=new k1(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Hl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await N1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Gi(t)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&p1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ph(r){return ze(r)}class iv{constructor(t){this.auth=t,this.observer=null,this.addObserver=ew(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L1(r){km=r}function z1(r){return km.loadJS(r)}function B1(){return km.gapiScript}function q1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(r,t){const n=Om(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Bs(c,t??{}))return l;Yi(l,"already-initialized")}return n.initialize({options:t})}function H1(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Gi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function G1(r,t,n){const s=ph(r);Tt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=tT(t),{host:d,port:p}=F1(t),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(Bs(y,s.config.emulator)&&Bs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,so(d)?(CE(`${c}//${d}${g}`),DE("Auth",!0)):Q1()}function tT(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function F1(r){const t=tT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:rv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:rv(d)}}}function rv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Q1(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,n){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(r,t){return qE(r,"POST","/v1/accounts:signInWithIdp",mh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="http://localhost";class js extends eT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new js(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Yi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new js(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return $a(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,$a(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,$a(t,n)}buildRequest(){const t={requestUri:Y1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Gl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends nT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Ql{constructor(){super("facebook.com")}static credential(t){return js._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return js._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ql{constructor(){super("github.com")}static credential(t){return js._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Or.credential(t.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Ql{constructor(){super("twitter.com")}static credential(t,n){return js._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Vr.credential(n,s)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,t){return qE(r,"POST","/v1/accounts:signUp",mh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Hn._fromIdTokenResponse(t,s,l),d=sv(s);return new Hr({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=sv(s);return new Hr({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function sv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(r){if(jn(r.app))return Promise.reject(zr(r));const t=ph(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Hr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await K1(t,{returnSecureToken:!0}),s=await Hr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Ji{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Zc(t,n,s,l)}}function iT(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(r,c,t,s):c})}async function $1(r,t,n=!1){const s=await xl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Hr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(r,t,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(zr(s));const l="reauthenticate";try{const c=await xl(r,iT(s,l,t,r),n);Tt(c.idToken,s,"internal-error");const d=Pm(c.idToken);Tt(d,s,"internal-error");const{sub:p}=d;return Tt(r.uid===p,s,"user-mismatch"),Hr._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(r,t,n=!1){if(jn(r.app))return Promise.reject(zr(r));const s="signIn",l=await iT(r,s,t),c=await Hr._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function W1(r,t,n,s){return ze(r).onIdTokenChanged(t,n,s)}function tb(r,t,n){return ze(r).beforeAuthStateChanged(t,n)}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=1e3,nb=10;class sT extends rT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);V1()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,nb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},eb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}sT.type="LOCAL";const ib=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends rT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}aT.type="SESSION";const oT=aT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new gh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await rb(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Um("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(w){const R=w;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function ab(r){hi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function ob(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lb(){return navigator?.serviceWorker?.controller||null}function ub(){return lT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebaseLocalStorageDb",cb=1,Wc="firebaseLocalStorage",cT="fbase_key";class Yl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(r,t){return r.transaction([Wc],t?"readwrite":"readonly").objectStore(Wc)}function hb(){const r=indexedDB.deleteDatabase(uT);return new Yl(r).toPromise()}function lm(){const r=indexedDB.open(uT,cb);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Wc,{keyPath:cT})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Wc)?t(s):(s.close(),await hb(),t(await lm()))})})}async function av(r,t,n){const s=yh(r,!0).put({[cT]:t,value:n});return new Yl(s).toPromise()}async function fb(r,t){const n=yh(r,!1).get(t),s=await new Yl(n).toPromise();return s===void 0?null:s.value}function ov(r,t){const n=yh(r,!0).delete(t);return new Yl(n).toPromise()}const db=800,mb=3;class hT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>mb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(ub()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ob(),!this.activeServiceWorker)return;this.sender=new sb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||lb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await lm();return await av(t,Jc,"1"),await ov(t,Jc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>av(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>fb(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ov(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=yh(l,!1).getAll();return new Yl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),db)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hT.type="LOCAL";const pb=hT;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(r,t){return t?Gi(t):(Tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends eT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return $a(t,this._buildIdpRequest())}_linkToIdToken(t,n){return $a(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return $a(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function yb(r){return J1(r.auth,new Lm(r),r.bypassAuthState)}function _b(r){const{auth:t,user:n}=r;return Tt(n,t,"internal-error"),Z1(n,new Lm(r),r.bypassAuthState)}async function vb(r){const{auth:t,user:n}=r;return Tt(n,t,"internal-error"),$1(n,new Lm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return yb;case"linkViaPopup":case"linkViaRedirect":return vb;case"reauthViaPopup":case"reauthViaRedirect":return _b;default:Yi(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Fl(2e3,1e4);class Fa extends fT{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=Um();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Eb.get())};t()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="pendingRedirect",Lc=new Map;class Ab extends fT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Lc.get(this.auth._key());if(!t){try{const s=await Sb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Lc.set(this.auth._key(),t)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sb(r,t){const n=Rb(t),s=bb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function wb(r,t){Lc.set(r._key(),t)}function bb(r){return Gi(r._redirectPersistence)}function Rb(r){return Uc(Tb,r.config.apiKey,r.name)}async function Ib(r,t,n=!1){if(jn(r.app))return Promise.reject(zr(r));const s=ph(r),l=gb(s,t),d=await new Ab(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=600*1e3;class Db{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Nb(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!dT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ci(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Cb&&this.cachedEventUids.clear(),this.cachedEventUids.has(lv(t))}saveEventToCache(t){this.cachedEventUids.add(lv(t)),this.lastProcessedEventTime=Date.now()}}function lv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function dT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Nb(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(r,t={}){return oo(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mb=/^https?/;async function Pb(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Ob(r);for(const n of t)try{if(xb(n))return}catch{}Yi(r,"unauthorized-domain")}function xb(r){const t=am(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Mb.test(n))return!1;if(Vb.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Fl(3e4,6e4);function uv(){const r=hi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Ub(r){return new Promise((t,n)=>{function s(){uv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uv(),n(ci(r,"network-request-failed"))},timeout:kb.get()})}if(hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(hi().gapi?.load)s();else{const l=q1("iframefcb");return hi()[l]=()=>{gapi.load?s():n(ci(r,"network-request-failed"))},z1(`${B1()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw zc=null,t})}let zc=null;function Lb(r){return zc=zc||Ub(r),zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Fl(5e3,15e3),Bb="__/auth/iframe",qb="emulator/auth/iframe",jb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gb(r){const t=r.config;Tt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Mm(t,qb):`https://${r.config.authDomain}/${Bb}`,s={apiKey:t.apiKey,appName:r.name,v:ao},l=Hb.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Gl(s).slice(1)}`}async function Fb(r){const t=await Lb(r),n=hi().gapi;return Tt(n,r,"internal-error"),t.open({where:document.body,url:Gb(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jb,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=ci(r,"network-request-failed"),p=hi().setTimeout(()=>{c(d)},zb.get());function g(){hi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yb=500,Kb=600,Xb="_blank",$b="http://localhost";class cv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zb(r,t,n,s=Yb,l=Kb){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Qb,width:s.toString(),height:l.toString(),top:c,left:d},y=tn().toLowerCase();n&&(p=YE(y)?Xb:n),FE(y)&&(t=t||$b,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[q,Q])=>`${R}${q}=${Q},`,"");if(O1(y)&&p!=="_self")return Jb(t||"",p),new cv(null);const w=window.open(t||"",p,T);Tt(w,r,"popup-blocked");try{w.focus()}catch{}return new cv(w)}function Jb(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="__/auth/handler",tR="emulator/auth/handler",eR=encodeURIComponent("fac");async function hv(r,t,n,s,l,c){Tt(r.config.authDomain,r,"auth-domain-config-required"),Tt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ao,eventId:l};if(t instanceof nT){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",tw(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))d[T]=w}if(t instanceof Ql){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${eR}=${encodeURIComponent(g)}`:"";return`${nR(r)}?${Gl(p).slice(1)}${y}`}function nR({config:r}){return r.emulator?Mm(r,tR):`https://${r.authDomain}/${Wb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oT,this._completeRedirectFn=Ib,this._overrideRedirectResult=wb}async _openPopup(t,n,s,l){Ki(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await hv(t,n,s,am(),l);return Zb(t,c,Um())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await hv(t,n,s,am(),l);return ab(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ki(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Fb(t),s=new Db(t);return n.register("authEvent",l=>(Tt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($d,{type:$d},l=>{const c=l?.[0]?.[$d];c!==void 0&&n(!!c),Yi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pb(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return JE()||QE()||xm()}}const rR=iR;var fv="@firebase/auth",dv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oR(r){Ja(new qs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;Tt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(r)},y=new U1(s,l,c,g);return H1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ja(new qs("auth-internal",t=>{const n=ph(t.getProvider("auth").getImmediate());return(s=>new sR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(fv,dv,aR(r)),Lr(fv,dv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=300,uR=IE("authIdTokenMaxAge")||lR;let mv=null;const cR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>uR)return;const l=n?.token;mv!==l&&(mv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function hR(r=ME()){const t=Om(r,"auth");if(t.isInitialized())return t.getImmediate();const n=j1(r,{popupRedirectResolver:rR,persistence:[pb,ib,oT]}),s=IE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=cR(c.toString());tb(n,d,()=>d(n.currentUser)),W1(n,p=>d(p))}}const l=bE("auth");return l&&G1(n,`http://${l}`),n}function fR(){return document.getElementsByTagName("head")?.[0]??document}L1({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ci("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",fR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oR("Browser");var pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,mT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function C(){}C.prototype=S.prototype,O.D=S.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(V,M,P){for(var I=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)I[pe-2]=arguments[pe];return S.prototype[M].apply(V,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,S,C){C||(C=0);var V=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)V[M]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(M=0;16>M;++M)V[M]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=O.g[0],C=O.g[1],M=O.g[2];var P=O.g[3],I=S+(P^C&(M^P))+V[0]+3614090360&4294967295;S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+V[1]+3905402710&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+V[2]+606105819&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+V[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+V[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+V[5]+1200080426&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+V[6]+2821735955&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+V[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+V[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+V[9]+2336552879&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+V[10]+4294925233&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+V[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+V[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+V[13]+4254626195&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+V[14]+2792965006&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+V[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(M^P&(C^M))+V[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+V[6]+3225465664&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+V[11]+643717713&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+V[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+V[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+V[10]+38016083&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+V[15]+3634488961&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+V[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+V[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+V[14]+3275163606&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+V[3]+4107603335&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+V[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+V[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+V[2]+4243563512&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+V[7]+1735328473&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+V[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(C^M^P)+V[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+V[8]+2272392833&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+V[11]+1839030562&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+V[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+V[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+V[4]+1272893353&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+V[7]+4139469664&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+V[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+V[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+V[0]+3936430074&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+V[3]+3572445317&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+V[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+V[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+V[12]+3873151461&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+V[15]+530742520&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+V[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(M^(C|~P))+V[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+V[7]+1126891415&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+V[14]+2878612391&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+V[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+V[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+V[3]+2399980690&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+V[10]+4293915773&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+V[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+V[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+V[15]+4264355552&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+V[6]+2734768916&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+V[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+V[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+V[11]+3174756917&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+V[2]+718787259&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+P&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var C=S-this.blockSize,V=this.B,M=this.h,P=0;P<S;){if(M==0)for(;P<=C;)l(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<S;)if(V[M++]=O.charCodeAt(P++),M==this.blockSize){l(this,V),M=0;break}}else for(;P<S;)if(V[M++]=O[P++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var C=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=C&255,C/=256;for(this.u(O),O=Array(16),S=C=0;4>S;++S)for(var V=0;32>V;V+=8)O[C++]=this.g[S]>>>V&255;return O};function c(O,S){var C=p;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=S(O)}function d(O,S){this.h=S;for(var C=[],V=!0,M=O.length-1;0<=M;M--){var P=O[M]|0;V&&P==S||(C[M]=P,V=!1)}this.g=C}var p={};function g(O){return-128<=O&&128>O?c(O,function(S){return new d([S|0],0>S?-1:0)}):new d([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return w;if(0>O)return $(y(-O));for(var S=[],C=1,V=0;O>=C;V++)S[V]=O/C|0,C*=4294967296;return new d(S,0)}function T(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return $(T(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),V=w,M=0;M<O.length;M+=8){var P=Math.min(8,O.length-M),I=parseInt(O.substring(M,M+P),S);8>P?(P=y(Math.pow(S,P)),V=V.j(P).add(y(I))):(V=V.j(C),V=V.add(y(I)))}return V}var w=g(0),R=g(1),q=g(16777216);r=d.prototype,r.m=function(){if(tt(this))return-$(this).m();for(var O=0,S=1,C=0;C<this.g.length;C++){var V=this.i(C);O+=(0<=V?V:4294967296+V)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(Q(this))return"0";if(tt(this))return"-"+$(this).toString(O);for(var S=y(Math.pow(O,6)),C=this,V="";;){var M=ft(C,S).g;C=dt(C,M.j(S));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=M,Q(C))return P+V;for(;6>P.length;)P="0"+P;V=P+V}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function Q(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function tt(O){return O.h==-1}r.l=function(O){return O=dt(this,O),tt(O)?-1:Q(O)?0:1};function $(O){for(var S=O.g.length,C=[],V=0;V<S;V++)C[V]=~O.g[V];return new d(C,~O.h).add(R)}r.abs=function(){return tt(this)?$(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],V=0,M=0;M<=S;M++){var P=V+(this.i(M)&65535)+(O.i(M)&65535),I=(P>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);V=I>>>16,P&=65535,I&=65535,C[M]=I<<16|P}return new d(C,C[C.length-1]&-2147483648?-1:0)};function dt(O,S){return O.add($(S))}r.j=function(O){if(Q(this)||Q(O))return w;if(tt(this))return tt(O)?$(this).j($(O)):$($(this).j(O));if(tt(O))return $(this.j($(O)));if(0>this.l(q)&&0>O.l(q))return y(this.m()*O.m());for(var S=this.g.length+O.g.length,C=[],V=0;V<2*S;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<O.g.length;M++){var P=this.i(V)>>>16,I=this.i(V)&65535,pe=O.i(M)>>>16,ae=O.i(M)&65535;C[2*V+2*M]+=I*ae,ut(C,2*V+2*M),C[2*V+2*M+1]+=P*ae,ut(C,2*V+2*M+1),C[2*V+2*M+1]+=I*pe,ut(C,2*V+2*M+1),C[2*V+2*M+2]+=P*pe,ut(C,2*V+2*M+2)}for(V=0;V<S;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=S;V<2*S;V++)C[V]=0;return new d(C,0)};function ut(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function at(O,S){this.g=O,this.h=S}function ft(O,S){if(Q(S))throw Error("division by zero");if(Q(O))return new at(w,w);if(tt(O))return S=ft($(O),S),new at($(S.g),$(S.h));if(tt(S))return S=ft(O,$(S)),new at($(S.g),S.h);if(30<O.g.length){if(tt(O)||tt(S))throw Error("slowDivide_ only works with positive integers.");for(var C=R,V=S;0>=V.l(O);)C=gt(C),V=gt(V);var M=At(C,1),P=At(V,1);for(V=At(V,2),C=At(C,2);!Q(V);){var I=P.add(V);0>=I.l(O)&&(M=M.add(C),P=I),V=At(V,1),C=At(C,1)}return S=dt(O,M.j(S)),new at(M,S)}for(M=w;0<=O.l(S);){for(C=Math.max(1,Math.floor(O.m()/S.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),P=y(C),I=P.j(S);tt(I)||0<I.l(O);)C-=V,P=y(C),I=P.j(S);Q(P)&&(P=R),M=M.add(P),O=dt(O,I)}return new at(M,O)}r.A=function(O){return ft(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)&O.i(V);return new d(C,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)|O.i(V);return new d(C,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)^O.i(V);return new d(C,this.h^O.h)};function gt(O){for(var S=O.g.length+1,C=[],V=0;V<S;V++)C[V]=O.i(V)<<1|O.i(V-1)>>>31;return new d(C,O.h)}function At(O,S){var C=S>>5;S%=32;for(var V=O.g.length-C,M=[],P=0;P<V;P++)M[P]=0<S?O.i(P+C)>>>S|O.i(P+C+1)<<32-S:O.i(P+C);return new d(M,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,Br=d}).apply(typeof pv<"u"?pv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pT,Sl,gT,Bc,um,yT,_T,vT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var k=u[A];if(!(k in _))break t;_=_[k]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,k={next:function(){if(!A&&_<u.length){var j=_++;return{value:m(j,u[j]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function w(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,R.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function Q(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,k,j){for(var W=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)W[Pt-2]=arguments[Pt];return m.prototype[k].apply(A,W)}}function tt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function $(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const k=u.length||0,j=A.length||0;u.length=k+j;for(let W=0;W<j;W++)u[k+W]=A[W]}else u.push(A)}}class dt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ut(u){return/^[\s\xa0]*$/.test(u)}function at(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ft(u){return ft[" "](u),u}ft[" "]=function(){};var gt=at().indexOf("Gecko")!=-1&&!(at().toLowerCase().indexOf("webkit")!=-1&&at().indexOf("Edge")==-1)&&!(at().indexOf("Trident")!=-1||at().indexOf("MSIE")!=-1)&&at().indexOf("Edge")==-1;function At(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function O(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let _,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(_ in A)u[_]=A[_];for(let j=0;j<C.length;j++)_=C[j],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){p.setTimeout(()=>{throw u},0)}function I(){var u=Bt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class pe{constructor(){this.h=this.g=null}add(m,_){const A=ae.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new dt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ht=!1,Bt=new pe,D=()=>{const u=p.Promise.resolve(void 0);et=()=>{u.then(Z)}};var Z=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(_){P(_)}var m=ae;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ht=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var mt=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function It(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(gt){t:{try{ft(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:St[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&It.aa.h.call(this)}}Q(It,J);var St={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Qn(u,m,_,A,k){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=k,this.key=++Wt,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yi(u){this.src=u,this.g={},this.h=0}yi.prototype.add=function(u,m,_,A,k){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var W=es(u,m,A,k);return-1<W?(m=u[W],_||(m.fa=!1)):(m=new Qn(m,this.src,j,!!A,k),m.fa=_,u.push(m)),m};function ts(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],k=Array.prototype.indexOf.call(A,m,void 0),j;(j=0<=k)&&Array.prototype.splice.call(A,k,1),j&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function es(u,m,_,A){for(var k=0;k<u.length;++k){var j=u[k];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==A)return k}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),fo={};function au(u,m,_,A,k){if(Array.isArray(m)){for(var j=0;j<m.length;j++)au(u,m[j],_,A,k);return null}return _=ou(_),u&&u[De]?u.K(m,_,y(A)?!!A.capture:!1,k):Sn(u,m,_,!1,A,k)}function Sn(u,m,_,A,k,j){if(!m)throw Error("Invalid event type");var W=y(k)?!!k.capture:!!k,Pt=$s(u);if(Pt||(u[ns]=Pt=new yi(u)),_=Pt.add(m,_,A,W,j),_.proxy)return _;if(A=Uh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)mt||(k=W),k===void 0&&(k=!1),u.addEventListener(m.toString(),A,k);else if(u.attachEvent)u.attachEvent(is(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Uh(){function u(_){return m.call(u.src,u.listener,_)}const m=Lh;return u}function mo(u,m,_,A,k){if(Array.isArray(m))for(var j=0;j<m.length;j++)mo(u,m[j],_,A,k);else A=y(A)?!!A.capture:!!A,_=ou(_),u&&u[De]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],_=es(j,_,A,k),-1<_&&(Wi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=$s(u))&&(m=u.g[m.toString()],u=-1,m&&(u=es(m,_,A,k)),(_=-1<u?m[u]:null)&&Xs(_))}function Xs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])ts(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(is(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=$s(m))?(ts(_,u),_.h==0&&(_.src=null,m[ns]=null)):Wi(u)}}}function is(u){return u in fo?fo[u]:fo[u]="on"+u}function Lh(u,m){if(u.da)u=!0;else{m=new It(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Xs(u),u=_.call(A,m)}return u}function $s(u){return u=u[ns],u instanceof yi?u:null}var po="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(u){return typeof u=="function"?u:(u[po]||(u[po]=function(m){return u.handleEvent(m)}),u[po])}function oe(){nt.call(this),this.i=new yi(this),this.M=this,this.F=null}Q(oe,nt),oe.prototype[De]=!0,oe.prototype.removeEventListener=function(u,m,_,A){mo(this,u,m,_,A)};function Ht(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var k=m;m=new J(A,u),V(m,k)}if(k=!0,_)for(var j=_.length-1;0<=j;j--){var W=m.g=_[j];k=hn(W,A,!0,m)&&k}if(W=m.g=u,k=hn(W,A,!0,m)&&k,k=hn(W,A,!1,m)&&k,_)for(j=0;j<_.length;j++)W=m.g=_[j],k=hn(W,A,!1,m)&&k}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Wi(_[A]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},oe.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function hn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,j=0;j<m.length;++j){var W=m[j];if(W&&!W.da&&W.capture==_){var Pt=W.listener,we=W.ha||W.src;W.fa&&ts(u.i,W),k=Pt.call(we,A)!==!1&&k}}return k&&!A.defaultPrevented}function Xe(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function lu(u){u.g=Xe(()=>{u.g=null,u.i&&(u.i=!1,lu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class zh extends nt{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:lu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(u){nt.call(this),this.h=u,this.g={}}Q(rs,nt);var ss=[];function as(u){At(u.g,function(m,_){this.g.hasOwnProperty(_)&&Xs(m)},u),u.g={}}rs.prototype.N=function(){rs.aa.N.call(this),as(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=p.JSON.stringify,Zs=p.JSON.parse,os=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function go(){}go.prototype.h=null;function yo(u){return u.h||(u.h=u.i())}function _o(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){J.call(this,"d")}Q(vi,J);function vo(){J.call(this,"c")}Q(vo,J);var Yn={},Eo=null;function tr(){return Eo=Eo||new oe}Yn.La="serverreachability";function Js(u){J.call(this,Yn.La,u)}Q(Js,J);function er(u){const m=tr();Ht(m,new Js(m))}Yn.STAT_EVENT="statevent";function uu(u,m){J.call(this,Yn.STAT_EVENT,u),this.stat=m}Q(uu,J);function ne(u){const m=tr();Ht(m,new uu(m,u))}Yn.Ma="timingevent";function Se(u,m){J.call(this,Yn.Ma,u),this.size=m}Q(Se,J);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function To(u,m,_,A,k,j){u.info(function(){if(u.g)if(j)for(var W="",Pt=j.split("&"),we=0;we<Pt.length;we++){var xt=Pt[we].split("=");if(1<xt.length){var Oe=xt[0];xt=xt[1];var be=Oe.split("_");W=2<=be.length&&be[1]=="type"?W+(Oe+"="+xt+"&"):W+(Oe+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+m+`
`+_+`
`+W})}function Bh(u,m,_,A,k,j,W){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+m+`
`+_+`
`+j+" "+W})}function nr(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ls(u,_)+(A?" "+A:"")})}function cu(u,m){u.info(function(){return"TIMEOUT: "+m})}wn.prototype.info=function(){};function ls(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return kn(_)}catch{return m}}var ir={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Xn(){}Q(Xn,go),Xn.prototype.g=function(){return new XMLHttpRequest},Xn.prototype.i=function(){return{}},Kn=new Xn;function en(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Ao={},Ws={};function Un(u,m,_){u.L=1,u.v=ds(fn(m)),u.m=_,u.P=!0,Ti(u,null)}function Ti(u,m){u.F=Date.now(),us(u),u.A=fn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Co(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=Ru(u.j,_?m:null,!u.m),0<u.O&&(u.M=new zh(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(ss[0]=k.toString()),k=ss);for(var j=0;j<k.length;j++){var W=au(_,k[j],A||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),er(),To(u.i,u.u,u.A,u.l,u.R,u.m)}en.prototype.ca=function(u){u=u.target;const m=this.M;m&&Cn(u)==3?m.j():this.Y(u)},en.prototype.Y=function(u){try{if(u==this.g)t:{const be=Cn(this.g);var m=this.g.Ba();const Di=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||be!=4||m==7||(m==8||0>=Di?er(3):er(2)),rr(this);var _=this.g.Z();this.X=_;e:if(hu(this)){var A=_u(this.g);u="";var k=A.length,j=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),$n(this);var W="";break e}this.h.i=new p.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(j&&m==k-1)});A.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=_==200,Bh(this.i,this.u,this.A,this.l,this.R,be,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,we=this.g;if((Pt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ut(Pt)){var xt=Pt;break e}}xt=null}if(_=xt)nr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,_);else{this.o=!1,this.s=3,ne(12),Be(this),$n(this);break t}}if(this.P){_=!0;let qe;for(;!this.J&&this.C<W.length;)if(qe=fu(this,W),qe==Ws){be==4&&(this.s=4,ne(14),_=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Ao){this.s=4,ne(15),nr(this.i,this.l,W,"[Invalid Chunk]"),_=!1;break}else nr(this.i,this.l,qe,null),cs(this,qe);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||W.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)nr(this.i,this.l,W,"[Invalid Chunked Response]"),Be(this),$n(this);else if(0<W.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Ts(Oe),Oe.M=!0,ne(11))}}else nr(this.i,this.l,W,null),cs(this,W);be==4&&Be(this),this.o&&!this.J&&(be==4?Su(this.j,this):(this.o=!1,us(this)))}else Fh(this.g),_==400&&0<W.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Be(this),$n(this)}}}catch{}finally{}};function hu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Ws:(_=Number(m.substring(_,A)),isNaN(_)?Ao:(A+=1,A+_>m.length?Ws:(m=m.slice(A,A+_),u.C=A+_,m)))}en.prototype.cancel=function(){this.J=!0,Be(this)};function us(u){u.S=Date.now()+u.I,du(u,u.I)}function du(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(R(u.ba,u),m)}function rr(u){u.B&&(p.clearTimeout(u.B),u.B=null)}en.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cu(this.i,this.A),this.L!=2&&(er(),ne(17)),Be(this),this.s=2,$n(this)):du(this,this.S-u)};function $n(u){u.j.G==0||u.J||Su(u.j,u)}function Be(u){rr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,as(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function cs(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||So(_.h,u))){if(!u.K&&So(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ha(_),ua(_);else break t;Mo(_),ne(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&_.v==0&&!_.C&&(_.C=ge(R(_.Za,_),6e3));if(1>=ea(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ci(_,11)}else if((u.K||_.g==u)&&ha(_),!ut(m))for(k=_.Da.g.parse(m),m=0;m<k.length;m++){let xt=k[m];if(_.T=xt[0],xt=xt[1],_.G==2)if(xt[0]=="c"){_.K=xt[1],_.ia=xt[2];const Oe=xt[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const be=xt[4];be!=null&&(_.Aa=be,_.j.info("SVER="+_.Aa));const Di=xt[5];Di!=null&&typeof Di=="number"&&0<Di&&(A=1.5*Di,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const qe=u.g;if(qe){const ii=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var j=A.h;j.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(na(j,j.h),j.h=null))}if(A.D){const xo=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(A.ya=xo,Yt(A.I,A.D,xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var W=u;if(A.qa=bu(A,A.J?A.ia:null,A.W),W.K){nn(A.h,W);var Pt=W,we=A.L;we&&(Pt.I=we),Pt.B&&(rr(Pt),us(Pt)),A.g=W}else Tu(A);0<_.i.length&&ca(_)}else xt[0]!="stop"&&xt[0]!="close"||Ci(_,7);else _.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?Ci(_,7):Oo(_):xt[0]!="noop"&&_.l&&_.l.ta(xt),_.v=0)}}er(4)}catch{}}var mu=class{constructor(u,m){this.g=u,this.map=m}};function Ai(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ea(u){return u.h?1:u.g?u.g.size:0}function So(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function na(u,m){u.g?u.g.add(m):u.h=m}function nn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ai.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return tt(u.i)}function qh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function bo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ia(u),A=qh(u),k=A.length,j=0;j<k;j++)m.call(void 0,A[j],_&&_[j],u)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),k=null;if(0<=A){var j=u[_].substring(0,A);k=u[_].substring(A+1)}else j=u[_];m(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ye(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ye){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,sr(this,u.s),this.l=u.l;var m=u.i,_=new wi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Si(this,_),this.m=u.m}else u&&(m=String(u).match(hs))?(this.h=!1,fs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),sr(this,m[4]),this.l=bn(m[5]||"",!0),Si(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}ye.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ms(m,Ro,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ms(m,Ro,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ms(_,_.charAt(0)=="/"?Hh:Io,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ms(_,ra)),u.join("")};function fn(u){return new ye(u)}function fs(u,m,_){u.j=_?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function sr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Si(u,m,_){m instanceof wi?(u.i=m,gu(u.i,u.h)):(_||(m=ms(m,Gh)),u.i=new wi(m,u.h))}function Yt(u,m,_){u.i.set(m,_)}function ds(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ms(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,pu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ro=/[#\/\?@]/g,Io=/[#\?:]/g,Hh=/[#\?]/g,Gh=/[#\?@]/g,ra=/#/g;function wi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rn(u){u.g||(u.g=new Map,u.h=0,u.i&&jh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=wi.prototype,r.add=function(u,m){Rn(this),this.i=null,u=Zn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function bi(u,m){Rn(u),m=Zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ri(u,m){return Rn(u),m=Zn(u,m),u.g.has(m)}r.forEach=function(u,m){Rn(this),this.g.forEach(function(_,A){_.forEach(function(k){u.call(m,k,A,this)},this)},this)},r.na=function(){Rn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const k=u[A];for(let j=0;j<k.length;j++)_.push(m[A])}return _},r.V=function(u){Rn(this);let m=[];if(typeof u=="string")Ri(this,u)&&(m=m.concat(this.g.get(Zn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Rn(this),this.i=null,u=Zn(this,u),Ri(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Co(u,m,_){bi(u,m),0<_.length&&(u.i=null,u.g.set(Zn(u,m),tt(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const j=encodeURIComponent(String(A)),W=this.V(A);for(A=0;A<W.length;A++){var k=j;W[A]!==""&&(k+="="+encodeURIComponent(String(W[A]))),u.push(k)}}return this.i=u.join("&")};function Zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function gu(u,m){m&&!u.j&&(Rn(u),u.i=null,u.g.forEach(function(_,A){var k=A.toLowerCase();A!=k&&(bi(this,A),Co(this,k,_))},u)),u.j=m}function ps(u,m){const _=new wn;if(p.Image){const A=new Image;A.onload=q(In,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(In,_,"TestLoadImage: error",!1,m,A),A.onabort=q(In,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(In,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Ln(u,m){const _=new wn,A=new AbortController,k=setTimeout(()=>{A.abort(),In(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(j=>{clearTimeout(k),j.ok?In(_,"TestPingServer: ok",!0,m):In(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),In(_,"TestPingServer: error",!1,m)})}function In(u,m,_,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(_)}catch{}}function gs(){this.g=new os}function Jn(u,m,_){const A=_||"";try{bo(u,function(k,j){let W=k;y(k)&&(W=kn(k)),m.push(A+j+"="+encodeURIComponent(W))})}catch(k){throw m.push(A+"type="+encodeURIComponent("_badmap")),k}}function ar(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(ar,go),ar.prototype.g=function(){return new Ii(this.l,this.j)},ar.prototype.i=(function(u){return function(){return u}})({});function Ii(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Ii,oe),r=Ii.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ti(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Do(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Do(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):ti(this),this.readyState==3&&Do(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},r.Qa=function(u){this.g&&(this.response=u,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ti(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ti(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function No(u){let m="";return At(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Ne(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=No(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Yt(u,m,_))}function jt(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(jt,oe);var sa=/^https?$/i,ys=["POST","PUT"];r=jt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?yo(this.o):yo(Kn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){yu(this,j);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)_.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const j of A.keys())_.set(j,A.get(j));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),k=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ys,m,void 0))||A||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of _)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){yu(this,j)}};function yu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,aa(u),ei(u)}function aa(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),jt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},r.bb=function(){oa(this)};function oa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Xe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const W=u.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=W===0){var k=String(u.D).match(hs)[1]||null;!k&&p.self&&p.self.location&&(k=p.self.location.protocol.slice(0,-1)),A=!sa.test(k?k.toLowerCase():"")}_=A}if(_)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<Cn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",aa(u)}}finally{ei(u)}}}}function ei(u,m){if(u.g){_s(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{_.onreadystatechange=A}catch{}}}function _s(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Zs(m)}};function _u(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fh(u){const m={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ut(u[A]))continue;var _=M(u[A]);const k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[k]||[];m[k]=j,j.push(_)}O(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function la(u){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,u),this.cb=vs("retryDelaySeedMs",1e4,u),this.Wa=vs("forwardChannelMaxRetries",2,u),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new gs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=la.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ne(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=bu(this,null,this.W),ca(this)};function Oo(u){if(vu(u),u.G==3){var m=u.U++,_=fn(u.I);if(Yt(_,"SID",u.K),Yt(_,"RID",m),Yt(_,"TYPE","terminate"),Es(u,_),m=new en(u,u.j,m),m.L=2,m.v=ds(fn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Ru(m.j,null),m.g.ea(m.v)),m.F=Date.now(),us(m)}wu(u)}function ua(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function vu(u){ua(u),u.u&&(p.clearTimeout(u.u),u.u=null),ha(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ca(u){if(!ta(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||D(),ht||(et(),ht=!0),Bt.add(m,u),u.B=0}}function Qh(u,m){return ea(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(R(u.Ga,u,m),Po(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new en(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),V(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=Eu(this,k,m),_=fn(this.I),Yt(_,"RID",u),Yt(_,"CVER",22),this.D&&Yt(_,"X-HTTP-Session-Id",this.D),Es(this,_),j&&(this.O?m="headers="+encodeURIComponent(String(No(j)))+"&"+m:this.m&&Ne(_,this.m,j)),na(this.h,k),this.Ua&&Yt(_,"TYPE","init"),this.P?(Yt(_,"$req",m),Yt(_,"SID","null"),k.T=!0,Un(k,_,null)):Un(k,_,m),this.G=2}}else this.G==3&&(u?Vo(this,u):this.i.length==0||ta(this.h)||Vo(this))};function Vo(u,m){var _;m?_=m.l:_=u.U++;const A=fn(u.I);Yt(A,"SID",u.K),Yt(A,"RID",_),Yt(A,"AID",u.T),Es(u,A),u.m&&u.o&&Ne(A,u.m,u.o),_=new en(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Eu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),na(u.h,_),Un(_,A,m)}function Es(u,m){u.H&&At(u.H,function(_,A){Yt(m,A,_)}),u.l&&bo({},function(_,A){Yt(m,A,_)})}function Eu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?R(u.l.Na,u.l,u):null;t:{var k=u.i;let j=-1;for(;;){const W=["count="+_];j==-1?0<_?(j=k[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Pt=!0;for(let we=0;we<_;we++){let xt=k[we].g;const Oe=k[we].map;if(xt-=j,0>xt)j=Math.max(0,k[we].g-100),Pt=!1;else try{Jn(Oe,W,"req"+xt+"_")}catch{A&&A(Oe)}}if(Pt){A=W.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function Tu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||D(),ht||(et(),ht=!0),Bt.add(m,u),u.v=0}}function Mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(R(u.Fa,u),Po(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),ua(this),Au(this))};function Ts(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Au(u){u.g=new en(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=fn(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),Es(u,m),u.m&&u.o&&Ne(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ds(fn(m)),_.m=null,_.P=!0,Ti(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ua(this),Mo(this),ne(19))};function ha(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Su(u,m){var _=null;if(u.g==m){ha(u),Ts(u),u.g=null;var A=2}else if(So(u.h,m))_=m.D,nn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;A=tr(),Ht(A,new Se(A,_)),ca(u)}else Tu(u);else if(k=m.s,k==3||k==0&&0<m.X||!(A==1&&Qh(u,m)||A==2&&Mo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),k){case 1:Ci(u,5);break;case 4:Ci(u,10);break;case 3:Ci(u,6);break;default:Ci(u,2)}}}function Po(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ci(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),A=u.Xa;const k=!A;A=new ye(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||fs(A,"https"),ds(A),k?ps(A.toString(),_):Ln(A.toString(),_)}else ne(2);u.G=0,u.l&&u.l.sa(m),wu(u),vu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function wu(u){if(u.G=0,u.ka=[],u.l){const m=wo(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function bu(u,m,_){var A=_ instanceof ye?fn(_):new ye(_);if(A.g!="")m&&(A.g=m+"."+A.g),sr(A,A.s);else{var k=p.location;A=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var j=new ye(null);A&&fs(j,A),m&&(j.g=m),k&&sr(j,k),_&&(j.l=_),A=j}return _=u.D,m=u.ya,_&&m&&Yt(A,_,m),Yt(A,"VER",u.la),Es(u,A),A}function Ru(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new jt(new ar({eb:_})):new jt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iu(){}r=Iu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fa(){}fa.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){oe.call(this),this.g=new la(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ut(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ut(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ni(this)}Q(rn,oe),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Oo(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=kn(u),u=_);m.i.push(new mu(m.Ya++,u)),m.G==3&&ca(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,rn.aa.N.call(this)};function Cu(u){vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Q(Cu,vi);function Du(){vo.call(this),this.status=1}Q(Du,vo);function ni(u){this.g=u}Q(ni,Iu),ni.prototype.ua=function(){Ht(this.g,"a")},ni.prototype.ta=function(u){Ht(this.g,new Cu(u))},ni.prototype.sa=function(u){Ht(this.g,new Du)},ni.prototype.ra=function(){Ht(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,vT=function(){return new fa},_T=function(){return tr()},yT=Yn,um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,Bc=ir,Ei.COMPLETE="complete",gT=Ei,_o.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Sl=_o,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,pT=jt}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const gv="@firebase/firestore",yv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Dm("@firebase/firestore");function qa(){return Hs.logLevel}function st(r,...t){if(Hs.logLevel<=Ot.DEBUG){const n=t.map(zm);Hs.debug(`Firestore (${lo}): ${r}`,...n)}}function Xi(r,...t){if(Hs.logLevel<=Ot.ERROR){const n=t.map(zm);Hs.error(`Firestore (${lo}): ${r}`,...n)}}function Wa(r,...t){if(Hs.logLevel<=Ot.WARN){const n=t.map(zm);Hs.warn(`Firestore (${lo}): ${r}`,...n)}}function zm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ET(r,s,n)}function ET(r,t,n){let s=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Xi(s),new Error(s)}function Lt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||ET(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Ji{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(We.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pR{constructor(t){this.t=t,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Lt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Lt(typeof s.accessToken=="string",31837,{l:s}),new TT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Lt(t===null||typeof t=="string",2055,{h:t}),new We(t)}}class gR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new gR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(We.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _v{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Lt(this.o===void 0,3512);const s=c=>{c.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _v(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _v(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=vR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function cm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Zd(l)===Zd(c)?Vt(l,c):Zd(l)?1:-1}return Vt(r.length,t.length)}const ER=55296,TR=57343;function Zd(r){const t=r.charCodeAt(0);return t>=ER&&t<=TR}function to(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__name__";class ui{constructor(t,n,s){n===void 0?n=0:n>t.length&&pt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&pt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ui.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ui?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ui.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Vt(t.length,n.length)}static compareSegments(t,n){const s=ui.isNumericId(t),l=ui.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ui.extractNumericId(t).compare(ui.extractNumericId(n)):cm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Br.fromString(t.substring(4,t.length-2))}}class Zt extends ui{construct(t,n,s){return new Zt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new it(F.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends ui{construct(t,n,s){return new Ye(t,n,s)}static isValidIdentifier(t){return AR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new Ye([vv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new it(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new it(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new it(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new it(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(Zt.fromString(t))}static fromName(t){return new ct(Zt.fromString(t).popFirst(5))}static empty(){return new ct(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Zt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Zt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new Zt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r,t,n){if(!n)throw new it(F.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function SR(r,t,n,s){if(t===!0&&s===!0)throw new it(F.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Ev(r){if(!ct.isDocumentKey(r))throw new it(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Tv(r){if(ct.isDocumentKey(r))throw new it(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ST(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":pt(12329,{type:typeof r})}function Gn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new it(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(r);throw new it(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,t){const n={typeString:r};return t&&(n.value=t),n}function Kl(r,t){if(!ST(r))throw new it(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new it(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=-62135596800,Sv=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Sv);return new ee(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new it(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Av)throw new it(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sv}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kl(t,ee._jsonSchema))return new ee(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Av;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:Ae("string",ee._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new ee(0,0))}static max(){return new vt(new ee(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function wR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=vt.fromTimestamp(s===1e9?new ee(n+1,0):new ee(n,s));return new Gr(l,ct.empty(),t)}function bR(r){return new Gr(r.readTime,r.key,kl)}class Gr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(vt.min(),ct.empty(),kl)}static max(){return new Gr(vt.max(),ct.empty(),kl)}}function RR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r){if(r.code!==F.FAILED_PRECONDITION||r.message!==IR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new X(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function DR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=-1;function Xl(r){return r==null}function th(r){return r===0&&1/r==-1/0}function NR(r){return typeof r=="number"&&Number.isInteger(r)&&!th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="";function OR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=wv(t)),t=VR(r.get(n),t);return wv(t)}function VR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case wT:n+="";break;default:n+=c}}return n}function wv(r){return r+wT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Zr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function bT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||Fe.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vc(this.root,t,this.comparator,!0)}}class Vc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Fe.RED,this.left=l??Fe.EMPTY,this.right=c??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Fe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Fe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Fe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rv(this.data.getIterator())}getIteratorFrom(t){return new Rv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class Rv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(Ye.comparator)}static empty(){return new Tn([])}unionWith(t){let n=new Ce(Ye.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return to(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new RT("Invalid base64 string: "+c):c}})(t);return new Ke(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ke(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(r){if(Lt(!!r,39018),typeof r=="string"){let t=0;const n=MR.exec(r);if(Lt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?Ke.fromBase64String(r):Ke.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="server_timestamp",CT="__type__",DT="__previous_value__",NT="__local_write_time__";function jm(r){return(r?.mapValue?.fields||{})[CT]?.stringValue===IT}function Eh(r){const t=r.mapValue.fields[DT];return jm(t)?Eh(t):t}function Ul(r){const t=Fr(r.mapValue.fields[NT].timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t,n,s,l,c,d,p,g,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const eh="(default)";class Ll{constructor(t,n){this.projectId=t,this.database=n||eh}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===eh}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="__type__",xR="__max__",Mc={mapValue:{}},VT="__vector__",nh="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jm(r)?4:UR(r)?9007199254740991:kR(r)?10:11:pt(28295,{value:r})}function gi(r,t){if(r===t)return!0;const n=Yr(r);if(n!==Yr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ul(r).isEqual(Ul(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Fr(l.timestampValue),p=Fr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Qr(l.bytesValue).isEqual(Qr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),p=de(c.doubleValue);return d===p?th(d)===th(p):isNaN(d)&&isNaN(p)}return!1})(r,t);case 9:return to(r.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(bv(d)!==bv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!gi(d[g],p[g])))return!1;return!0})(r,t);default:return pt(52216,{left:r})}}function zl(r,t){return(r.values||[]).find((n=>gi(n,t)))!==void 0}function eo(r,t){if(r===t)return 0;const n=Yr(r),s=Yr(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=de(c.integerValue||c.doubleValue),g=de(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Iv(r.timestampValue,t.timestampValue);case 4:return Iv(Ul(r),Ul(t));case 5:return cm(r.stringValue,t.stringValue);case 6:return(function(c,d){const p=Qr(c),g=Qr(d);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Vt(p[y],g[y]);if(T!==0)return T}return Vt(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Vt(de(c.latitude),de(d.latitude));return p!==0?p:Vt(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Cv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[nh]?.arrayValue,T=g[nh]?.arrayValue,w=Vt(y?.values?.length||0,T?.values?.length||0);return w!==0?w:Cv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Mc.mapValue&&d===Mc.mapValue)return 0;if(c===Mc.mapValue)return 1;if(d===Mc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let w=0;w<g.length&&w<T.length;++w){const R=cm(g[w],T[w]);if(R!==0)return R;const q=eo(p[g[w]],y[T[w]]);if(q!==0)return q}return Vt(g.length,T.length)})(r.mapValue,t.mapValue);default:throw pt(23264,{he:n})}}function Iv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Fr(r),s=Fr(t),l=Vt(n.seconds,s.seconds);return l!==0?l:Vt(n.nanos,s.nanos)}function Cv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=eo(n[l],s[l]);if(c)return c}return Vt(n.length,s.length)}function no(r){return hm(r)}function hm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Fr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Qr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ct.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=hm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${hm(n.fields[d])}`;return l+"}"})(r.mapValue):pt(61005,{value:r})}function qc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eh(r);return t?16+qc(t):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+qc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Zr(s.fields,((c,d)=>{l+=c.length+qc(d)})),l})(r.mapValue);default:throw pt(13486,{value:r})}}function Dv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function fm(r){return!!r&&"integerValue"in r}function Hm(r){return!!r&&"arrayValue"in r}function Nv(r){return!!r&&"nullValue"in r}function Ov(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jc(r){return!!r&&"mapValue"in r}function kR(r){return(r?.mapValue?.fields||{})[OT]?.stringValue===VT}function Cl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Zr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Cl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cl(r.arrayValue.values[n]);return t}return{...r}}function UR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.value=t}static empty(){return new an({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!jc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cl(n)}setAll(t){let n=Ye.emptyPath(),s={},l=[];t.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Cl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];jc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Zr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new an(Cl(this.value))}}function MT(r){const t=[];return Zr(r.fields,((n,s)=>{const l=new Ye([n]);if(jc(s)){const c=MT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t,n,s,l,c,d,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new ke(t,0,vt.min(),vt.min(),vt.min(),an.empty(),0)}static newFoundDocument(t,n,s,l){return new ke(t,1,n,vt.min(),s,l,0)}static newNoDocument(t,n){return new ke(t,2,n,vt.min(),vt.min(),an.empty(),0)}static newUnknownDocument(t,n){return new ke(t,3,n,vt.min(),vt.min(),an.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n){this.position=t,this.inclusive=n}}function Vv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ct.comparator(ct.fromName(d.referenceValue),n.key):s=eo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!gi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,n="asc"){this.field=t,this.dir=n}}function LR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{}class Te extends PT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new BR(t,n,s):n==="array-contains"?new HR(t,s):n==="in"?new GR(t,s):n==="not-in"?new FR(t,s):n==="array-contains-any"?new QR(t,s):new Te(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new qR(t,s):new jR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eo(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends PT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Fn(t,n)}matches(t){return xT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xT(r){return r.op==="and"}function kT(r){return zR(r)&&xT(r)}function zR(r){for(const t of r.filters)if(t instanceof Fn)return!1;return!0}function dm(r){if(r instanceof Te)return r.field.canonicalString()+r.op.toString()+no(r.value);if(kT(r))return r.filters.map((t=>dm(t))).join(",");{const t=r.filters.map((n=>dm(n))).join(",");return`${r.op}(${t})`}}function UT(r,t){return r instanceof Te?(function(s,l){return l instanceof Te&&s.op===l.op&&s.field.isEqual(l.field)&&gi(s.value,l.value)})(r,t):r instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&UT(d,l.filters[p])),!0):!1})(r,t):void pt(19439)}function LT(r){return r instanceof Te?(function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`})(r):r instanceof Fn?(function(n){return n.op.toString()+" {"+n.getFilters().map(LT).join(" ,")+"}"})(r):"Filter"}class BR extends Te{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class qR extends Te{constructor(t,n){super(t,"in",n),this.keys=zT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class jR extends Te{constructor(t,n){super(t,"not-in",n),this.keys=zT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function zT(r,t){return(t.arrayValue?.values||[]).map((n=>ct.fromName(n.referenceValue)))}class HR extends Te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hm(n)&&zl(n.arrayValue,this.value)}}class GR extends Te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class FR extends Te{constructor(t,n){super(t,"not-in",n)}matches(t){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class QR extends Te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>zl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(t,n=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Pv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new YR(r,t,n,s,l,c,d)}function Gm(r){const t=wt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>dm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Xl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>no(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>no(s))).join(",")),t.Te=n}return t.Te}function Fm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!LR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!UT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Mv(r.startAt,t.startAt)&&Mv(r.endAt,t.endAt)}function mm(r){return ct.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(r,t,n,s,l,c,d,p){return new $l(r,t,n,s,l,c,d,p)}function Qm(r){return new $l(r)}function xv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function BT(r){return r.collectionGroup!==null}function Dl(r){const t=wt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ce(Ye.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new rh(c,s))})),n.has(Ye.keyField().canonicalString())||t.Ie.push(new rh(Ye.keyField(),s))}return t.Ie}function fi(r){const t=wt(r);return t.Ee||(t.Ee=XR(t,Dl(r))),t.Ee}function XR(r,t){if(r.limitType==="F")return Pv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new rh(l.field,c)}));const n=r.endAt?new ih(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ih(r.startAt.position,r.startAt.inclusive):null;return Pv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function pm(r,t){const n=r.filters.concat([t]);return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function gm(r,t,n){return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Th(r,t){return Fm(fi(r),fi(t))&&r.limitType===t.limitType}function qT(r){return`${Gm(fi(r))}|lt:${r.limitType}`}function ja(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>LT(l))).join(", ")}]`),Xl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>no(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>no(l))).join(",")),`Target(${s})`})(fi(r))}; limitType=${r.limitType})`}function Ah(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ct.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Vv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Dl(s),l)||s.endAt&&!(function(d,p,g){const y=Vv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Dl(s),l))})(r,t)}function $R(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function jT(r){return(t,n)=>{let s=!1;for(const l of Dl(r)){const c=ZR(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function ZR(r,t,n){const s=r.field.isKeyField()?ct.comparator(t.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?eo(g,y):pt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return pt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Zr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new se(ct.comparator);function $i(){return JR}const HT=new se(ct.comparator);function wl(...r){let t=HT;for(const n of r)t=t.insert(n.key,n);return t}function GT(r){let t=HT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ls(){return Nl()}function FT(){return Nl()}function Nl(){return new Fs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const WR=new se(ct.comparator),tI=new Ce(ct.comparator);function Mt(...r){let t=tI;for(const n of r)t=t.add(n);return t}const eI=new Ce(Vt);function nI(){return eI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(t)?"-0":t}}function QT(r){return{integerValue:""+r}}function iI(r,t){return NR(t)?QT(t):Ym(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function rI(r,t,n){return r instanceof Bl?(function(l,c){const d={fields:{[CT]:{stringValue:IT},[NT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&jm(c)&&(c=Eh(c)),c&&(d.fields[DT]=c),{mapValue:d}})(n,t):r instanceof ql?KT(r,t):r instanceof jl?XT(r,t):(function(l,c){const d=YT(l,c),p=kv(d)+kv(l.Ae);return fm(d)&&fm(l.Ae)?QT(p):Ym(l.serializer,p)})(r,t)}function sI(r,t,n){return r instanceof ql?KT(r,t):r instanceof jl?XT(r,t):n}function YT(r,t){return r instanceof sh?(function(s){return fm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Bl extends Sh{}class ql extends Sh{constructor(t){super(),this.elements=t}}function KT(r,t){const n=$T(t);for(const s of r.elements)n.some((l=>gi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class jl extends Sh{constructor(t){super(),this.elements=t}}function XT(r,t){let n=$T(t);for(const s of r.elements)n=n.filter((l=>!gi(l,s)));return{arrayValue:{values:n}}}class sh extends Sh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function kv(r){return de(r.integerValue||r.doubleValue)}function $T(r){return Hm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,n){this.field=t,this.transform=n}}function oI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof ql&&l instanceof ql||s instanceof jl&&l instanceof jl?to(s.elements,l.elements,gi):s instanceof sh&&l instanceof sh?gi(s.Ae,l.Ae):s instanceof Bl&&l instanceof Bl})(r.transform,t.transform)}class lI{constructor(t,n){this.version=t,this.transformResults=n}}class Ue{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ue}static exists(t){return new Ue(void 0,t)}static updateTime(t){return new Ue(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class wh{}function ZT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new bh(r.key,Ue.none()):new Zl(r.key,r.data,Ue.none());{const n=r.data,s=an.empty();let l=new Ce(Ye.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Jr(r.key,s,new Tn(l.toArray()),Ue.none())}}function uI(r,t,n){r instanceof Zl?(function(l,c,d){const p=l.value.clone(),g=Lv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):r instanceof Jr?(function(l,c,d){if(!Hc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Lv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(JT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Ol(r,t,n,s){return r instanceof Zl?(function(c,d,p,g){if(!Hc(c.precondition,d))return p;const y=c.value.clone(),T=zv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Jr?(function(c,d,p,g){if(!Hc(c.precondition,d))return p;const y=zv(c.fieldTransforms,g,d),T=d.data;return T.setAll(JT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,d,p){return Hc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,t,n)}function cI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=YT(s.transform,l||null);c!=null&&(n===null&&(n=an.empty()),n.set(s.field,c))}return n||null}function Uv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&to(s,l,((c,d)=>oI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Zl extends wh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Jr extends wh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function JT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Lv(r,t,n){const s=new Map;Lt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,sI(d,p,n[l]))}return s}function zv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,rI(c,d,t))}return s}class bh extends wh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WT extends wh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&uI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ol(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ol(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=FT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=ZT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(vt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&to(this.mutations,t.mutations,((n,s)=>Uv(n,s)))&&to(this.baseMutations,t.baseMutations,((n,s)=>Uv(n,s)))}}class Km{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Lt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return WR})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Km(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,Ut;function t0(r){switch(r){case F.OK:return pt(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return pt(15467,{code:r})}}function e0(r){if(r===void 0)return Xi("GRPC error has no .code"),F.UNKNOWN;switch(r){case Ee.OK:return F.OK;case Ee.CANCELLED:return F.CANCELLED;case Ee.UNKNOWN:return F.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return F.INTERNAL;case Ee.UNAVAILABLE:return F.UNAVAILABLE;case Ee.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ee.NOT_FOUND:return F.NOT_FOUND;case Ee.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ee.ABORTED:return F.ABORTED;case Ee.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ee.DATA_LOSS:return F.DATA_LOSS;default:return pt(39323,{code:r})}}(Ut=Ee||(Ee={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Br([4294967295,4294967295],0);function Bv(r){const t=mI().encode(r),n=new mT;return n.update(t),new Uint8Array(n.digest())}function qv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Br([n,s],0),new Br([l,c],0)]}class Xm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(s<0)throw new bl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Br.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Br.fromNumber(s)));return l.compare(pI)===1&&(l=new Br([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Bv(t),[s,l]=qv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Xm(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const n=Bv(t),[s,l]=qv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Jl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Rh(vt.min(),l,new se(Vt),$i(),Mt())}}class Jl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Jl(s,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class n0{constructor(t,n){this.targetId=t,this.Ce=n}}class i0{constructor(t,n,s=Ke.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class jv{constructor(){this.ve=0,this.Fe=Hv(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),n=Mt(),s=Mt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:pt(38017,{changeType:c})}})),new Jl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Hv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gI{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=Pc(),this.He=Pc(),this.Ye=new se(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(mm(c))if(s===0){const d=new ct(c.path);this.et(n,d,ke.newNoDocument(d,vt.min()))}else Lt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Qr(s).toUint8Array()}catch(g){if(g instanceof RT)return Wa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Xm(d,l,c)}catch(g){return Wa(g instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&mm(p.target)){const g=new ct(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,ke.newNoDocument(g,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Mt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Rh(t,n,this.Ye,this.je,s);return this.je=$i(),this.Je=Pc(),this.He=Pc(),this.Ye=new se(Vt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new jv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new jv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Pc(){return new se(ct.comparator)}function Hv(){return new se(ct.comparator)}const yI={asc:"ASCENDING",desc:"DESCENDING"},_I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vI={and:"AND",or:"OR"};class EI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ym(r,t){return r.useProto3Json||Xl(t)?t:{value:t}}function ah(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function r0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function TI(r,t){return ah(r,t.toTimestamp())}function An(r){return Lt(!!r,49232),vt.fromTimestamp((function(n){const s=Fr(n);return new ee(s.seconds,s.nanos)})(r))}function $m(r,t){return _m(r,t).canonicalString()}function _m(r,t){const n=(function(l){return new Zt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function s0(r){const t=Zt.fromString(r);return Lt(h0(t),10190,{key:t.toString()}),t}function oh(r,t){return $m(r.databaseId,t.path)}function Vl(r,t){const n=s0(t);if(n.get(1)!==r.databaseId.projectId)throw new it(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new it(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ct(o0(n))}function a0(r,t){return $m(r.databaseId,t)}function AI(r){const t=s0(r);return t.length===4?Zt.emptyPath():o0(t)}function vm(r){return new Zt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function o0(r){return Lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Gv(r,t,n){return{name:oh(r,t),fields:n.value.mapValue.fields}}function SI(r,t){return"found"in t?(function(s,l){Lt(!!l.found,43571),l.found.name,l.found.updateTime;const c=Vl(s,l.found.name),d=An(l.found.updateTime),p=l.found.createTime?An(l.found.createTime):vt.min(),g=new an({mapValue:{fields:l.found.fields}});return ke.newFoundDocument(c,d,p,g)})(r,t):"missing"in t?(function(s,l){Lt(!!l.missing,3894),Lt(!!l.readTime,22933);const c=Vl(s,l.missing),d=An(l.readTime);return ke.newNoDocument(c,d)})(r,t):pt(7234,{result:t})}function wI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:pt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Lt(T===void 0||typeof T=="string",58123),Ke.fromBase64String(T||"")):(Lt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ke.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?F.UNKNOWN:e0(y.code);return new it(T,y.message||"")})(d);n=new i0(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Vl(r,s.document.name),c=An(s.document.updateTime),d=s.document.createTime?An(s.document.createTime):vt.min(),p=new an({mapValue:{fields:s.document.fields}}),g=ke.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Gc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Vl(r,s.document),c=s.readTime?An(s.readTime):vt.min(),d=ke.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Gc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Vl(r,s.document),c=s.removedTargetIds||[];n=new Gc([],c,l,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new dI(l,c),p=s.targetId;n=new n0(p,d)}}return n}function l0(r,t){let n;if(t instanceof Zl)n={update:Gv(r,t.key,t.value)};else if(t instanceof bh)n={delete:oh(r,t.key)};else if(t instanceof Jr)n={update:Gv(r,t.key,t.data),updateMask:MI(t.fieldMask)};else{if(!(t instanceof WT))return pt(16599,{Vt:t.type});n={verify:oh(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Bl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ql)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof jl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof sh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw pt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:TI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pt(27497)})(r,t.precondition)),n}function bI(r,t){return r&&r.length>0?(Lt(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?An(l.updateTime):An(c);return d.isEqual(vt.min())&&(d=An(c)),new lI(d,l.transformResults||[])})(n,t)))):[]}function RI(r,t){return{documents:[a0(r,t.path)]}}function II(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=a0(r,l);const c=(function(y){if(y.length!==0)return c0(Fn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:Ha(R.field),direction:NI(R.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const p=ym(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function CI(r){let t=AI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Lt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const R=u0(w);return R instanceof Fn&&kT(R)?R.getFilters():[R]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((R=>(function(Q){return new rh(Ga(Q.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let R;return R=typeof w=="object"?w.value:w,Xl(R)?null:R})(n.limit));let g=null;n.startAt&&(g=(function(w){const R=!!w.before,q=w.values||[];return new ih(q,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const R=!w.before,q=w.values||[];return new ih(q,R)})(n.endAt)),KR(t,l,d,c,p,"F",g,y)}function DI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function u0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return Te.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ga(n.unaryFilter.field);return Te.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ga(n.unaryFilter.field);return Te.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ga(n.unaryFilter.field);return Te.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Te.create(Ga(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Fn.create(n.compositeFilter.filters.map((s=>u0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return pt(1026)}})(n.compositeFilter.op))})(r):pt(30097,{filter:r})}function NI(r){return yI[r]}function OI(r){return _I[r]}function VI(r){return vI[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Ga(r){return Ye.fromServerFormat(r.fieldPath)}function c0(r){return r instanceof Te?(function(n){if(n.op==="=="){if(Ov(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(Nv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ov(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(Nv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:OI(n.op),value:n.value}}})(r):r instanceof Fn?(function(n){const s=n.getFilters().map((l=>c0(l)));return s.length===1?s[0]:{compositeFilter:{op:VI(n.op),filters:s}}})(r):pt(54877,{filter:r})}function MI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function h0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n,s,l,c=vt.min(),d=vt.min(),p=Ke.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Mr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t){this.yt=t}}function xI(r){const t=CI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.Cn=new UI}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(Gr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(Gr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class UI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(Zt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f0=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(f0,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new io(0)}static cr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="LruGarbageCollector",LI=1048576;function Yv([r,t],[n,s]){const l=Vt(r,n);return l===0?Vt(t,s):l}class zI{constructor(t){this.Ir=t,this.buffer=new Ce(Yv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Yv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Qv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?st(Qv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)}))}}class qI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(vh.ce);const s=new zI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Fv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,p=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(y=Date.now(),qa()<=Ot.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function jI(r,t){return new qI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new Fs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ke.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Ol(s.mutation,l,Tn.empty(),ee.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Mt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Mt()){const l=Ls();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=wl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=Ls();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Mt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(t,n,s,l){let c=$i();const d=Nl(),p=(function(){return Nl()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Jr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Ol(T.mutation,y,T.mutation.getFieldMask(),ee.now())):d.set(y.key,Tn.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new GI(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Nl();let l=new se(((d,p)=>d-p)),c=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||Tn.empty();T=p.applyToLocalView(y,T),s.set(g,T);const w=(l.get(p.batchId)||Mt()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,w=FT();T.forEach((R=>{if(!c.has(R)){const q=ZT(n.get(R),s.get(R));q!==null&&w.set(R,q),c=c.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,w))}return X.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ct.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(Ls());let p=kl,g=c;return d.next((y=>X.forEach(y,((T,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(T)?X.resolve():this.remoteDocumentCache.getEntry(t,T).next((R=>{g=g.insert(T,R)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,Mt()))).next((T=>({batchId:p,changes:GT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next((s=>{let l=wl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=wl();return this.indexManager.getCollectionParents(t,c).next((p=>X.forEach(p,(g=>{const y=(function(w,R){return new $l(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((w,R)=>{d=d.insert(w,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,ke.newInvalidDocument(T)))}));let p=wl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Ol(T.mutation,y,Tn.empty(),ee.now()),Ah(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:An(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:xI(l.bundledQuery),readTime:An(l.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.overlays=new se(ct.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ls();return X.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Ls(),c=n.length+1,d=new ct(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new se(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Ls(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=Ls(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return X.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new fI(n,s));let c=this.qr.get(n);c===void 0&&(c=Mt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.Qr=new Ce(xe.$r),this.Ur=new Ce(xe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new xe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new xe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ct(new Zt([])),s=new xe(n,t),l=new xe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ct(new Zt([])),s=new xe(n,t),l=new xe(n,t+1);let c=Mt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new xe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class xe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ct.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(xe.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new xe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?qm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new xe(n,0),l=new xe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Vt);return n.forEach((l=>{const c=new xe(l,0),d=new xe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ct.isDocumentKey(c)||(c=c.child(""));const d=new xe(new ct(c),0);let p=new Ce(Vt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),X.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(l=>{const c=new xe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new xe(n,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.ri=t,this.docs=(function(){return new se(ct.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():ke.newInvalidDocument(n))}getEntries(t,n){let s=$i();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():ke.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=$i();const d=n.path,p=new ct(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||RR(bR(T),s)<=0||(l.has(T.key)||Ah(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){pt(9500)}ii(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new ZI(this)}getSize(t){return X.resolve(this.size)}}class ZI extends HI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.persistence=t,this.si=new Fs((n=>Gm(n)),Fm),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Zm,this.targetCount=0,this.ai=io.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new io(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,n){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new KI,this.referenceDelegate=t(this),this.Pi=new JI(this),this.indexManager=new kI,this.remoteDocumentCache=(function(l){return new $I(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new PI(n),this.Ii=new QI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new YI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new XI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new WI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class WI extends CR{constructor(t){super(),this.currentSequenceNumber=t}}class Jm{constructor(t){this.persistence=t,this.Ri=new Zm,this.Vi=null}static mi(t){return new Jm(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ct.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class lh{constructor(t,n){this.persistence=t,this.pi=new Fs((s=>OR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=jI(this,n)}static mi(t,n){return new lh(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((p=>{p||(s++,c.removeEntry(d,vt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=qc(t.data.value)),n}br(t,n,s){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Mt(),l=Mt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Wm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KS()?8:DR(tn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new tC;return this.Ss(t,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,d,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(qa()<=Ot.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(qa()<=Ot.DEBUG&&st("QueryEngine","Query:",ja(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(qa()<=Ot.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fi(n))):X.resolve())}ys(t,n){if(xv(n))return X.resolve(null);let s=fi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=gm(n,null,"F"),s=fi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Mt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(t,gm(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return xv(n)||l.isEqual(vt.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?X.resolve(null):(qa()<=Ot.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ja(n)),this.vs(t,d,n,wR(l,kl)).next((p=>p)))}))}Ds(t,n){let s=new Ce(jT(t));return n.forEach(((l,c)=>{Ah(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return qa()<=Ot.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",ja(n)),this.ps.getDocumentsMatchingQuery(t,n,Gr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="LocalStore",nC=3e8;class iC{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new se(Vt),this.xs=new Fs((c=>Gm(c)),Fm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function rC(r,t,n,s){return new iC(r,t,n,s)}async function m0(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Mt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function sC(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const w=y.batch,R=w.keys();let q=X.resolve();return R.forEach((Q=>{q=q.next((()=>T.getEntry(g,Q))).next((tt=>{const $=y.docVersions.get(Q);Lt($!==null,48541),tt.version.compareTo($)<0&&(w.applyToRemoteDocument(tt,y),tt.isValidDocument()&&(tt.setReadTime(y.commitVersion),T.addEntry(tt)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Mt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function p0(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function aC(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,w)=>{const R=l.get(w);if(!R)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let q=R.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?q=q.withResumeToken(Ke.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(w,q),(function(tt,$,dt){return tt.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=nC?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0})(R,q,T)&&p.push(n.Pi.updateTargetData(c,q))}));let g=$i(),y=Mt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(oC(c,d,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(vt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return X.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function oC(r,t,n){let s=Mt(),l=Mt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=$i();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(vt.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):st(tp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function lC(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=qm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function uC(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Mr(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Em(r,t,n){const s=wt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!co(d))throw d;st(tp,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Kv(r,t,n){const s=wt(r);let l=vt.min(),c=Mt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const w=wt(g),R=w.xs.get(T);return R!==void 0?X.resolve(w.Ms.get(R)):w.Pi.getTargetData(y,T)})(s,d,fi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:vt.min(),n?c:Mt()))).next((p=>(cC(s,$R(t),p),{documents:p,Qs:c})))))}function cC(r,t,n){let s=r.Os.get(t)||vt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Xv{constructor(){this.activeTargetIds=nI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hC{constructor(){this.Mo=new Xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Xv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="ConnectivityMonitor";class Zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st($v,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st($v,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function Tm(){return xc===null?xc=(function(){return 268435456+Math.round(2147483648*Math.random())})():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="RestConnection",dC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===eh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=Tm(),p=this.zo(t,n.toUriEncodedString());st(Jd,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=so(y);return this.Jo(t,p,g,s,T).then((w=>(st(Jd,`Received RPC '${t}' ${d}: `,w),w)),(w=>{throw Wa(Jd,`RPC '${t}' ${d} failed with error: `,w,"url: ",p,"request:",s),w}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=dC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class gC extends mC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=Tm();return new Promise(((p,g)=>{const y=new pT;y.setWithCredentials(!0),y.listenOnce(gT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Bc.NO_ERROR:const w=y.getResponseJson();st(Je,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(w)),p(w);break;case Bc.TIMEOUT:st(Je,`RPC '${t}' ${d} timed out`),g(new it(F.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const R=y.getStatus();if(st(Je,`RPC '${t}' ${d} failed with status:`,R,"response text:",y.getResponseText()),R>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const Q=q?.error;if(Q&&Q.status&&Q.message){const tt=(function(dt){const ut=dt.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(ut)>=0?ut:F.UNKNOWN})(Q.status);g(new it(tt,Q.message))}else g(new it(F.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new it(F.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(Je,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);st(Je,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=Tm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=vT(),p=_T(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");st(Je,`Creating RPC '${t}' stream ${l}: ${T}`,g);const w=d.createWebChannel(T,g);this.I_(w);let R=!1,q=!1;const Q=new pC({Yo:$=>{q?st(Je,`Not sending because RPC '${t}' stream ${l} is closed:`,$):(R||(st(Je,`Opening RPC '${t}' stream ${l} transport.`),w.open(),R=!0),st(Je,`RPC '${t}' stream ${l} sending:`,$),w.send($))},Zo:()=>w.close()}),tt=($,dt,ut)=>{$.listen(dt,(at=>{try{ut(at)}catch(ft){setTimeout((()=>{throw ft}),0)}}))};return tt(w,Sl.EventType.OPEN,(()=>{q||(st(Je,`RPC '${t}' stream ${l} transport opened.`),Q.o_())})),tt(w,Sl.EventType.CLOSE,(()=>{q||(q=!0,st(Je,`RPC '${t}' stream ${l} transport closed`),Q.a_(),this.E_(w))})),tt(w,Sl.EventType.ERROR,($=>{q||(q=!0,Wa(Je,`RPC '${t}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),Q.a_(new it(F.UNAVAILABLE,"The operation could not be completed")))})),tt(w,Sl.EventType.MESSAGE,($=>{if(!q){const dt=$.data[0];Lt(!!dt,16349);const ut=dt,at=ut?.error||ut[0]?.error;if(at){st(Je,`RPC '${t}' stream ${l} received error:`,at);const ft=at.status;let gt=(function(S){const C=Ee[S];if(C!==void 0)return e0(C)})(ft),At=at.message;gt===void 0&&(gt=F.INTERNAL,At="Unknown error status: "+ft+" with message "+at.message),q=!0,Q.a_(new it(gt,At)),w.close()}else st(Je,`RPC '${t}' stream ${l} received:`,dt),Q.u_(dt)}})),tt(p,yT.STAT_EVENT,($=>{$.stat===um.PROXY?st(Je,`RPC '${t}' stream ${l} detected buffering proxy`):$.stat===um.NOPROXY&&st(Je,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){return new EI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="PersistentStream";class g0{constructor(t,n,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ep(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Xi(n.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new it(F.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(Jv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(Jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yC extends g0{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=wI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return vt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?vt.min():d.readTime?An(d.readTime):vt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=vm(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=mm(g)?{documents:RI(c,g)}:{query:II(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=r0(c,d.resumeToken);const y=ym(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(vt.min())>0){p.readTime=ah(c,d.snapshotVersion.toTimestamp());const y=ym(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=DI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=vm(this.serializer),n.removeTarget=t,this.q_(n)}}class _C extends g0{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=bI(t.writeResults,t.commitTime),s=An(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=vm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>l0(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class EC extends vC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new it(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,_m(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it(F.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,_m(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new it(F.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class AC{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Qs(this)&&(st(Gs,"Restarting streams for network reachability change."),await(async function(g){const y=wt(g);y.Ea.add(4),await Wl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ch(y)})(this))}))})),this.Ra=new TC(s,l)}}async function Ch(r){if(Qs(r))for(const t of r.da)await t(!0)}async function Wl(r){for(const t of r.da)await t(!1)}function y0(r,t){const n=wt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),sp(n)?rp(n):ho(n).O_()&&ip(n,t))}function np(r,t){const n=wt(r),s=ho(n);n.Ia.delete(t),s.O_()&&_0(n,t),n.Ia.size===0&&(s.O_()?s.L_():Qs(n)&&n.Ra.set("Unknown"))}function ip(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ho(r).Y_(t)}function _0(r,t){r.Va.Ue(t),ho(r).Z_(t)}function rp(r){r.Va=new gI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ho(r).start(),r.Ra.ua()}function sp(r){return Qs(r)&&!ho(r).x_()&&r.Ia.size>0}function Qs(r){return wt(r).Ea.size===0}function v0(r){r.Va=void 0}async function SC(r){r.Ra.set("Online")}async function wC(r){r.Ia.forEach(((t,n)=>{ip(r,t)}))}async function bC(r,t){v0(r),sp(r)?(r.Ra.ha(t),rp(r)):r.Ra.set("Unknown")}async function RC(r,t,n){if(r.Ra.set("Online"),t instanceof i0&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){st(Gs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await uh(r,s)}else if(t instanceof Gc?r.Va.Ze(t):t instanceof n0?r.Va.st(t):r.Va.tt(t),!n.isEqual(vt.min()))try{const s=await p0(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Ke.EMPTY_BYTE_STRING,T.snapshotVersion)),_0(c,g);const w=new Mr(T.target,g,y,T.sequenceNumber);ip(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){st(Gs,"Failed to raise snapshot:",s),await uh(r,s)}}async function uh(r,t,n){if(!co(t))throw t;r.Ea.add(1),await Wl(r),r.Ra.set("Offline"),n||(n=()=>p0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(Gs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ch(r)}))}function E0(r,t){return t().catch((n=>uh(r,n,t)))}async function Dh(r){const t=wt(r),n=Kr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:qm;for(;IC(t);)try{const l=await lC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,CC(t,l)}catch(l){await uh(t,l)}T0(t)&&A0(t)}function IC(r){return Qs(r)&&r.Ta.length<10}function CC(r,t){r.Ta.push(t);const n=Kr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function T0(r){return Qs(r)&&!Kr(r).x_()&&r.Ta.length>0}function A0(r){Kr(r).start()}async function DC(r){Kr(r).ra()}async function NC(r){const t=Kr(r);for(const n of r.Ta)t.ea(n.mutations)}async function OC(r,t,n){const s=r.Ta.shift(),l=Km.from(s,t,n);await E0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Dh(r)}async function VC(r,t){t&&Kr(r).X_&&await(async function(s,l){if((function(d){return t0(d)&&d!==F.ABORTED})(l.code)){const c=s.Ta.shift();Kr(s).B_(),await E0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Dh(s)}})(r,t),T0(r)&&A0(r)}async function Wv(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),st(Gs,"RemoteStore received new credentials");const s=Qs(n);n.Ea.add(3),await Wl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ch(n)}async function MC(r,t){const n=wt(r);t?(n.Ea.delete(2),await Ch(n)):t||(n.Ea.add(2),await Wl(n),n.Ra.set("Unknown"))}function ho(r){return r.ma||(r.ma=(function(n,s,l){const c=wt(n);return c.sa(),new yC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:SC.bind(null,r),t_:wC.bind(null,r),r_:bC.bind(null,r),H_:RC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),sp(r)?rp(r):r.Ra.set("Unknown")):(await r.ma.stop(),v0(r))}))),r.ma}function Kr(r){return r.fa||(r.fa=(function(n,s,l){const c=wt(n);return c.sa(),new _C(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:DC.bind(null,r),r_:VC.bind(null,r),ta:NC.bind(null,r),na:OC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Dh(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,p=new ap(t,n,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(r,t){if(Xi("AsyncQueue",`${t}: ${r}`),co(r))return new it(F.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(t){return new Za(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=wl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Za)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Za;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.ga=new se(ct.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class ro{constructor(t,n,s,l,c,d,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new ro(t,n,Za.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Th(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class xC{constructor(){this.queries=eE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=eE(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new it(F.ABORTED,"Firestore shutting down"))}}function eE(){return new Fs((r=>qT(r)),Th)}async function S0(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new PC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=op(d,`Initialization of query '${ja(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&lp(n)}async function w0(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kC(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&lp(n)}function UC(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function lp(r){r.Ca.forEach((t=>{t.next()}))}var Am,nE;(nE=Am||(Am={})).Ma="default",nE.Cache="cache";class b0{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new ro(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ro.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.key=t}}class I0{constructor(t){this.key=t}}class LC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=jT(t),this.tu=new Za(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new tE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,w)=>{const R=l.get(T),q=Ah(this.query,w)?w:null,Q=!!R&&this.mutatedKeys.has(R.key),tt=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let $=!1;R&&q?R.data.isEqual(q.data)?Q!==tt&&(s.track({type:3,doc:q}),$=!0):this.su(R,q)||(s.track({type:2,doc:q}),$=!0,(g&&this.eu(q,g)>0||y&&this.eu(q,y)<0)&&(p=!0)):!R&&q?(s.track({type:0,doc:q}),$=!0):R&&!q&&(s.track({type:1,doc:R}),$=!0,(g||y)&&(p=!0)),$&&(q?(d=d.add(q),c=tt?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,w)=>(function(q,Q){const tt=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:$})}};return tt(q)-tt(Q)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new ro(this.query,t.tu,c,d,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new I0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new R0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Mt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const up="SyncEngine";class zC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class BC{constructor(t){this.key=t,this.hu=!1}}class qC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Fs((p=>qT(p)),Th),this.Iu=new Map,this.Eu=new Set,this.du=new se(ct.comparator),this.Au=new Map,this.Ru=new Zm,this.Vu={},this.mu=new Map,this.fu=io.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jC(r,t,n=!0){const s=M0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await C0(s,t,n,!0),l}async function HC(r,t){const n=M0(r);await C0(n,t,!0,!1)}async function C0(r,t,n,s){const l=await uC(r.localStore,fi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await GC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&y0(r.remoteStore,l),p}async function GC(r,t,n,s,l){r.pu=(w,R,q)=>(async function(tt,$,dt,ut){let at=$.view.ru(dt);at.Cs&&(at=await Kv(tt.localStore,$.query,!1).then((({documents:O})=>$.view.ru(O,at))));const ft=ut&&ut.targetChanges.get($.targetId),gt=ut&&ut.targetMismatches.get($.targetId)!=null,At=$.view.applyChanges(at,tt.isPrimaryClient,ft,gt);return rE(tt,$.targetId,At.au),At.snapshot})(r,w,R,q);const c=await Kv(r.localStore,t,!0),d=new LC(t,c.Qs),p=d.ru(c.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);rE(r,n,y.au);const T=new zC(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function FC(r,t,n){const s=wt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Th(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Em(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&np(s.remoteStore,l.targetId),Sm(s,l.targetId)})).catch(uo)):(Sm(s,l.targetId),await Em(s.localStore,l.targetId,!0))}async function QC(r,t){const n=wt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),np(n.remoteStore,s.targetId))}async function YC(r,t,n){const s=t2(r);try{const l=await(function(d,p){const g=wt(d),y=ee.now(),T=p.reduce(((q,Q)=>q.add(Q.key)),Mt());let w,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Q=$i(),tt=Mt();return g.Ns.getEntries(q,T).next(($=>{Q=$,Q.forEach(((dt,ut)=>{ut.isValidDocument()||(tt=tt.add(dt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(q,Q))).next(($=>{w=$;const dt=[];for(const ut of p){const at=cI(ut,w.get(ut.key).overlayedDocument);at!=null&&dt.push(new Jr(ut.key,at,MT(at.value.mapValue),Ue.exists(!0)))}return g.mutationQueue.addMutationBatch(q,y,dt,p)})).next(($=>{R=$;const dt=$.applyToLocalDocumentSet(w,tt);return g.documentOverlayCache.saveOverlays(q,$.batchId,dt)}))})).then((()=>({batchId:R.batchId,changes:GT(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new se(Vt)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await tu(s,l.changes),await Dh(s.remoteStore)}catch(l){const c=op(l,"Failed to persist write");n.reject(c)}}async function D0(r,t){const n=wt(r);try{const s=await aC(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Lt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Lt(d.hu,14607):l.removedDocuments.size>0&&(Lt(d.hu,42227),d.hu=!1))})),await tu(n,s,t)}catch(s){await uo(s)}}function iE(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=wt(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,w)=>{for(const R of w.Sa)R.va(p)&&(y=!0)})),y&&lp(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function KC(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new se(ct.comparator);d=d.insert(c,ke.newNoDocument(c,vt.min()));const p=Mt().add(c),g=new Rh(vt.min(),new Map,new se(Vt),d,p);await D0(s,g),s.du=s.du.remove(c),s.Au.delete(t),cp(s)}else await Em(s.localStore,t,!1).then((()=>Sm(s,t,n))).catch(uo)}async function XC(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await sC(n.localStore,t);O0(n,s,null),N0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await uo(l)}}async function $C(r,t,n){const s=wt(r);try{const l=await(function(d,p){const g=wt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(Lt(w!==null,37113),T=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);O0(s,t,n),N0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await tu(s,l)}catch(l){await uo(l)}}function N0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function O0(r,t,n){const s=wt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Sm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||V0(r,s)}))}function V0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(np(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),cp(r))}function rE(r,t,n){for(const s of n)s instanceof R0?(r.Ru.addReference(s.key,t),ZC(r,s)):s instanceof I0?(st(up,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||V0(r,s.key)):pt(19791,{wu:s})}function ZC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(st(up,"New document in limbo: "+n),r.Eu.add(s),cp(r))}function cp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ct(Zt.fromString(t)),s=r.fu.next();r.Au.set(s,new BC(n)),r.du=r.du.insert(n,s),y0(r.remoteStore,new Mr(fi(Qm(n.path)),s,"TargetPurposeLimboResolution",vh.ce))}}async function tu(r,t,n){const s=wt(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Wm.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=wt(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>X.forEach(y,(R=>X.forEach(R.Es,(q=>T.persistence.referenceDelegate.addReference(w,R.targetId,q))).next((()=>X.forEach(R.ds,(q=>T.persistence.referenceDelegate.removeReference(w,R.targetId,q)))))))))}catch(w){if(!co(w))throw w;st(tp,"Failed to update sequence numbers: "+w)}for(const w of y){const R=w.targetId;if(!w.fromCache){const q=T.Ms.get(R),Q=q.snapshotVersion,tt=q.withLastLimboFreeSnapshotVersion(Q);T.Ms=T.Ms.insert(R,tt)}}})(s.localStore,c))}async function JC(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){st(up,"User change. New user:",t.toKey());const s=await m0(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new it(F.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await tu(n,s.Ls)}}function WC(r,t){const n=wt(r),s=n.Au.get(t);if(s&&s.hu)return Mt().add(s.key);{let l=Mt();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function M0(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=D0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KC.bind(null,t),t.Pu.H_=kC.bind(null,t.eventManager),t.Pu.yu=UC.bind(null,t.eventManager),t}function t2(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$C.bind(null,t),t}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ih(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return rC(this.persistence,new eC,t.initialUser,this.serializer)}Cu(t){return new d0(Jm.mi,this.serializer)}Du(t){return new hC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class e2 extends ch{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Lt(this.persistence.referenceDelegate instanceof lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new d0((s=>lh.mi(s,n)),this.serializer)}}class wm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=JC.bind(null,this.syncEngine),await MC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new xC})()}createDatastore(t){const n=Ih(t.databaseInfo.databaseId),s=(function(c){return new gC(c)})(t.databaseInfo);return(function(c,d,p,g){return new EC(c,d,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,p){return new AC(s,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>iE(this.syncEngine,n,0)),(function(){return Zv.v()?new Zv:new fC})())}createSyncEngine(t,n){return(function(l,c,d,p,g,y,T){const w=new qC(l,c,d,p,g,y);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=wt(n);st(Gs,"RemoteStore shutting down."),s.Ea.add(5),await Wl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new it(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,c){const d=wt(l),p={documents:c.map((w=>oh(d.serializer,w)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,Zt.emptyPath(),p,c.length),y=new Map;g.forEach((w=>{const R=SI(d.serializer,w);y.set(R.key.toString(),R)}));const T=[];return c.forEach((w=>{const R=y.get(w.toString());Lt(!!R,55234,{key:w}),T.push(R)})),T})(this.datastore,t);return n.forEach((s=>this.recordVersion(s))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(t.toString())}delete(t){this.write(new bh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,s)=>{const l=ct.fromPath(s);this.mutations.push(new WT(l,this.precondition(l)))})),await(async function(s,l){const c=wt(s),d={writes:l.map((p=>l0(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,Zt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw pt(50498,{Gu:t.constructor.name});n=vt.min()}const s=this.readVersions.get(t.key.toString());if(s){if(!n.isEqual(s))throw new it(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(vt.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(vt.min()))throw new it(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n,s,l,c){this.asyncQueue=t,this.datastore=n,this.options=s,this.updateFunction=l,this.deferred=c,this.zu=s.maxAttempts,this.M_=new ep(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new n2(this.datastore),n=this.Hu(t);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(s)})).catch((l=>{this.Yu(l)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(t){try{const n=this.updateFunction(t);return!Xl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!t0(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class r2{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=We.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{st(Xr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(st(Xr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=op(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function tm(r,t){r.asyncQueue.verifyOperationInProgress(),st(Xr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await m0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function sE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await s2(r);st(Xr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Wv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Wv(t.remoteStore,l))),r._onlineComponents=t}async function s2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Xr,"Using user provided OfflineComponentProvider");try{await tm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===F.FAILED_PRECONDITION||l.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await tm(r,new ch)}}else st(Xr,"Using default OfflineComponentProvider"),await tm(r,new e2(void 0));return r._offlineComponents}async function hp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Xr,"Using user provided OnlineComponentProvider"),await sE(r,r._uninitializedComponentsProvider._online)):(st(Xr,"Using default OnlineComponentProvider"),await sE(r,new wm))),r._onlineComponents}function a2(r){return hp(r).then((t=>t.syncEngine))}function o2(r){return hp(r).then((t=>t.datastore))}async function bm(r){const t=await hp(r),n=t.eventManager;return n.onListen=jC.bind(null,t.syncEngine),n.onUnlisten=FC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=HC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=QC.bind(null,t.syncEngine),n}function l2(r,t,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new P0({next:R=>{T.Nu(),d.enqueueAndForget((()=>w0(c,w))),R.fromCache&&g.source==="server"?y.reject(new it(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new b0(p,T,{includeMetadataChanges:!0,qa:!0});return S0(c,w)})(await bm(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firestore.googleapis.com",oE=!0;class lE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new it(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k0,this.ssl=oE}else this.host=t.host,this.ssl=t.ssl??oE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=f0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LI)throw new it(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new it(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new it(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new it(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new dR;switch(s.type){case"firstParty":return new yR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new it(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=aE.get(n);s&&(st("ComponentProvider","Removing Datastore"),aE.delete(n),s.terminate())})(this),Promise.resolve()}}function u2(r,t,n,s={}){r=Gn(r,Nh);const l=so(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(CE(`https://${p}`),DE("Firestore",!0)),c.host!==k0&&c.host!==p&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Bs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=We.MOCK_USER;else{y=zS(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new it(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new We(w)}r._authCredentials=new mR(new TT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ys(this.firestore,t,this._query)}}class me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Kl(n,me._jsonSchema))return new me(t,s||null,new ct(Zt.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Ae("string",me._jsonSchemaVersion),referencePath:Ae("string")};class qr extends Ys{constructor(t,n,s){super(t,n,Qm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new ct(t))}withConverter(t){return new qr(this.firestore,t,this._path)}}function Wr(r,t,...n){if(r=ze(r),AT("collection","path",t),r instanceof Nh){const s=Zt.fromString(t,...n);return Tv(s),new qr(r,null,s)}{if(!(r instanceof me||r instanceof qr))throw new it(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Zt.fromString(t,...n));return Tv(s),new qr(r.firestore,null,s)}}function Le(r,t,...n){if(r=ze(r),arguments.length===1&&(t=Bm.newId()),AT("doc","path",t),r instanceof Nh){const s=Zt.fromString(t,...n);return Ev(s),new me(r,null,new ct(s))}{if(!(r instanceof me||r instanceof qr))throw new it(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Zt.fromString(t,...n));return Ev(s),new me(r.firestore,r instanceof qr?r.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="AsyncQueue";class cE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ep(this,"async_queue_retry"),this._c=()=>{const s=Wd();s&&st(uE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!co(t))throw t;st(uE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",hE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=ap.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&pt(47125,{Pc:hE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function hE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class $r extends Nh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new cE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cE(t),this._firestoreClient=void 0,await t}}}function c2(r,t){const n=typeof r=="object"?r:ME(),s=typeof r=="string"?r:eh,l=Om(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=US("firestore");c&&u2(l,...c)}return l}function eu(r){if(r._terminated)throw new it(F.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||h2(r),r._firestoreClient}function h2(r){const t=r._freezeSettings(),n=(function(l,c,d,p){return new PR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new r2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this._byteString=t}static fromBase64String(t){try{return new En(Ke.fromBase64String(t))}catch(n){throw new it(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new En(Ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kl(t,En._jsonSchema))return En.fromBase64String(t.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:Ae("string",En._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new it(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new it(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new it(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(t){if(Kl(t,di._jsonSchema))return new di(t.latitude,t.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Ae("string",di._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kl(t,mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mi(t.vectorValues);throw new it(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Ae("string",mi._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=/^__.*__$/;class d2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Jr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(t,this.data,n,this.fieldTransforms)}}class U0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Jr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function L0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:r})}}class fp{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new fp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return hh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(L0(this.Ac)&&f2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class m2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Ih(t)}Cc(t,n,s,l=!1){return new fp({Ac:t,methodName:n,Dc:s,path:Ye.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iu(r){const t=r._freezeSettings(),n=Ih(r._databaseId);return new m2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function Vh(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);mp("Data must be an object, but it was:",d,s);const p=q0(s,d);let g,y;if(c.merge)g=new Tn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const R=Rm(t,w,n);if(!d.contains(R))throw new it(F.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);H0(T,R)||T.push(R)}g=new Tn(T),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new d2(new an(p),g,y)}class Mh extends Oh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Mh}}class dp extends Oh{_toFieldTransform(t){return new aI(t.path,new Bl)}isEqual(t){return t instanceof dp}}function z0(r,t,n,s){const l=r.Cc(1,t,n);mp("Data must be an object, but it was:",l,s);const c=[],d=an.empty();Zr(s,((g,y)=>{const T=pp(t,g,n);y=ze(y);const w=l.yc(T);if(y instanceof Mh)c.push(T);else{const R=ru(y,w);R!=null&&(c.push(T),d.set(T,R))}}));const p=new Tn(c);return new U0(d,p,l.fieldTransforms)}function B0(r,t,n,s,l,c){const d=r.Cc(1,t,n),p=[Rm(t,s,n)],g=[l];if(c.length%2!=0)throw new it(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(Rm(t,c[R])),g.push(c[R+1]);const y=[],T=an.empty();for(let R=p.length-1;R>=0;--R)if(!H0(y,p[R])){const q=p[R];let Q=g[R];Q=ze(Q);const tt=d.yc(q);if(Q instanceof Mh)y.push(q);else{const $=ru(Q,tt);$!=null&&(y.push(q),T.set(q,$))}}const w=new Tn(y);return new U0(T,w,d.fieldTransforms)}function p2(r,t,n,s=!1){return ru(n,r.Cc(s?4:3,t))}function ru(r,t){if(j0(r=ze(r)))return mp("Unsupported field value:",t,r),q0(r,t);if(r instanceof Oh)return(function(s,l){if(!L0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=ru(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=ze(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ee.fromDate(s);return{timestampValue:ah(l.serializer,c)}}if(s instanceof ee){const c=new ee(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ah(l.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof En)return{bytesValue:r0(l.serializer,s._byteString)};if(s instanceof me){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$m(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof mi)return(function(d,p){return{mapValue:{fields:{[OT]:{stringValue:VT},[nh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Ym(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${_h(s)}`)})(r,t)}function q0(r,t){const n={};return bT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zr(r,((s,l)=>{const c=ru(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function j0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ee||r instanceof di||r instanceof En||r instanceof me||r instanceof Oh||r instanceof mi)}function mp(r,t,n){if(!j0(n)||!ST(n)){const s=_h(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Rm(r,t,n){if((t=ze(t))instanceof nu)return t._internalPath;if(typeof t=="string")return pp(r,t);throw hh("Field path arguments must be of type string or ",r,!1,void 0,n)}const g2=new RegExp("[~\\*/\\[\\]]");function pp(r,t,n){if(t.search(g2)>=0)throw hh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nu(...t.split("."))._internalPath}catch{throw hh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function hh(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new it(F.INVALID_ARGUMENT,p+r+g)}function H0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y2 extends fh{data(){return super.data()}}function gp(r,t){return typeof t=="string"?pp(r,t):t instanceof nu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yp{}class _2 extends yp{}function v2(r,t,...n){let s=[];t instanceof yp&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof _p)).length,p=c.filter((g=>g instanceof Ph)).length;if(d>1||d>0&&p>0)throw new it(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Ph extends _2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Ph(t,n,s)}_apply(t){const n=this._parse(t);return F0(t._query,n),new Ys(t.firestore,t.converter,pm(t._query,n))}_parse(t){const n=iu(t.firestore);return(function(c,d,p,g,y,T,w){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new it(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){mE(w,T);const Q=[];for(const tt of w)Q.push(dE(g,c,tt));R={arrayValue:{values:Q}}}else R=dE(g,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||mE(w,T),R=p2(p,d,w,T==="in"||T==="not-in");return Te.create(y,T,R)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function E2(r,t,n){const s=t,l=gp("where",r);return Ph._create(l,s,n)}class _p extends yp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _p(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)F0(d,g),d=pm(d,g)})(t._query,n),new Ys(t.firestore,t.converter,pm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dE(r,t,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new it(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(t)&&n.indexOf("/")!==-1)throw new it(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Zt.fromString(n));if(!ct.isDocumentKey(s))throw new it(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Dv(r,new ct(s))}if(n instanceof me)return Dv(r,n._key);throw new it(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function mE(r,t){if(!Array.isArray(r)||r.length===0)throw new it(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function F0(r,t){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new it(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new it(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Q0{convertValue(t,n="none"){switch(Yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Zr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[nh].arrayValue?.values?.map((s=>de(s.doubleValue)));return new mi(n)}convertGeoPoint(t){return new di(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Eh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ul(t));default:return null}}convertTimestamp(t){const n=Fr(t);return new ee(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Zt.fromString(t);Lt(h0(s),9688,{name:t});const l=new Ll(s.get(1),s.get(3)),c=new ct(s.popFirst(5));return l.isEqual(n)||Xi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class T2 extends Q0{constructor(t){super(),this.firestore=t}convertBytes(t){return new En(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}class Qa{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jr extends fh{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(gp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Ae("string",jr._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Fc extends jr{data(t={}){return super.data(t)}}class zs{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Qa(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Fc(this._firestore,this._userDataWriter,s.key,s,new Qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Fc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Qa(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Fc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Qa(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:A2(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function A2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:r})}}zs._jsonSchemaVersion="firestore/querySnapshot/1.0",zs._jsonSchema={type:Ae("string",zs._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class kh extends Q0{constructor(t){super(),this.firestore=t}convertBytes(t){return new En(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function su(r){r=Gn(r,Ys);const t=Gn(r.firestore,$r),n=eu(t),s=new kh(t);return G0(r._query),l2(n,r._query).then((l=>new zs(t,s,r,l)))}function Y0(r,t,n){r=Gn(r,me);const s=Gn(r.firestore,$r),l=xh(r.converter,t,n);return vp(s,[Vh(iu(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Ue.none())])}function S2(r,t){const n=Gn(r.firestore,$r),s=Le(r),l=xh(r.converter,t);return vp(n,[Vh(iu(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Ue.exists(!1))]).then((()=>s))}function Ml(r,...t){r=ze(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||fE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof me)d=Gn(r.firestore,$r),p=Qm(r._key.path),c={next:g=>{t[s]&&t[s](w2(d,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Gn(r,Ys);d=Gn(g.firestore,$r),p=g._query;const y=new kh(d);c={next:T=>{t[s]&&t[s](new zs(d,y,g,T))},error:t[s+1],complete:t[s+2]},G0(r._query)}return(function(y,T,w,R){const q=new P0(R),Q=new b0(T,q,w);return y.asyncQueue.enqueueAndForget((async()=>S0(await bm(y),Q))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>w0(await bm(y),Q)))}})(eu(d),p,l,c)}function vp(r,t){return(function(s,l){const c=new Fi;return s.asyncQueue.enqueueAndForget((async()=>YC(await a2(s),l,c))),c.promise})(eu(r),t)}function w2(r,t,n){const s=n.docs.get(t._key),l=new kh(r);return new jr(r,l,t._key,s,new Qa(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iu(t)}set(t,n,s){this._verifyNotCommitted();const l=Pr(t,this._firestore),c=xh(l.converter,n,s),d=Vh(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,Ue.none())),this}update(t,n,s,...l){this._verifyNotCommitted();const c=Pr(t,this._firestore);let d;return d=typeof(n=ze(n))=="string"||n instanceof nu?B0(this._dataReader,"WriteBatch.update",c._key,n,s,l):z0(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Ue.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Pr(t,this._firestore);return this._mutations=this._mutations.concat(new bh(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pr(r,t){if((r=ze(r)).firestore!==t)throw new it(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=iu(t)}get(t){const n=Pr(t,this._firestore),s=new T2(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return pt(24041);const c=l[0];if(c.isFoundDocument())return new fh(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new fh(this._firestore,s,n._key,null,n.converter);throw pt(18433,{doc:c})}))}set(t,n,s){const l=Pr(t,this._firestore),c=xh(l.converter,n,s),d=Vh(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,s);return this._transaction.set(l._key,d),this}update(t,n,s,...l){const c=Pr(t,this._firestore);let d;return d=typeof(n=ze(n))=="string"||n instanceof nu?B0(this._dataReader,"Transaction.update",c._key,n,s,l):z0(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(t){const n=Pr(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends I2{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Pr(t,this._firestore),s=new kh(this._firestore);return super.get(t).then((l=>new jr(this._firestore,s,n._key,l._document,new Qa(!1,!1),n.converter)))}}function Ep(r,t,n){r=Gn(r,$r);const s={...b2,...n};return(function(c){if(c.maxAttempts<1)throw new it(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,d,p){const g=new Fi;return c.asyncQueue.enqueueAndForget((async()=>{const y=await o2(c);new i2(c.asyncQueue,y,p,d,g).ju()})),g.promise})(eu(r),(l=>t(new C2(r,l))),s)}function pi(){return new dp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(r){return eu(r=Gn(r,$r)),new R2(r,(t=>vp(r,t)))}(function(t,n=!0){(function(l){lo=l})(ao),Ja(new qs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new $r(new pR(s.getProvider("auth-internal")),new _R(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new it(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Lr(gv,yv,t),Lr(gv,yv,"esm2020")})();const N2={apiKey:"AIzaSyBewBUk6Oj4PjB6rVr8iVfZ6Zcyqm7CbXs",authDomain:"uno-game-e3329.firebaseapp.com",projectId:"uno-game-e3329",storageBucket:"uno-game-e3329.appspot.com",messagingSenderId:"793495202186",appId:"1:793495202186:web:705f97f5e200bf41120073",measurementId:"G-6PuJ7DGC39"},K0=VE(N2),Zi=hR(K0),Qt=c2(K0);async function Ks(){Zi.currentUser||await X1(Zi)}async function O2(r){await Ks();const t=Zi.currentUser.uid,n=Math.random().toString(36).slice(2,8).toUpperCase(),s=await S2(Wr(Qt,"rooms"),{code:n,hostUid:t,status:"lobby",createdAt:pi()});return await Y0(Le(Qt,"rooms",s.id,"players",t),{displayName:r,joinedAt:pi(),isReady:!1,isHost:!0,handCount:0}),{roomId:s.id,code:n}}async function V2(r,t){await Ks();const n=Zi.currentUser.uid,s=v2(Wr(Qt,"rooms"),E2("code","==",r)),l=await su(s);if(l.empty)throw new Error("Room not found");const c=l.docs[0].id;return await Y0(Le(Qt,"rooms",c,"players",n),{displayName:t,joinedAt:pi(),isReady:!1,isHost:!1,handCount:0},{merge:!0}),{roomId:c}}function M2(r,t,n){const s=Ml(Le(Qt,"rooms",r),c=>t({id:c.id,...c.data()})),l=Ml(Wr(Qt,"rooms",r,"players"),c=>n(c.docs.map(d=>({id:d.id,...d.data()}))));return()=>{s(),l()}}function P2({onEnterRoom:r}){const[t,n]=Qe.useState("Player"),[s,l]=Qe.useState(null),[c,d]=Qe.useState(""),[p,g]=Qe.useState(null),[y,T]=Qe.useState([]);Qe.useEffect(()=>{Ks()},[]),Qe.useEffect(()=>{if(!s)return;const q=M2(s,g,T);return()=>q()},[s]);async function w(){const{roomId:q,code:Q}=await O2(t||"Player");l(q),r(q,!0),console.log("Invite code:",Q)}async function R(){if(!c.trim())return;const{roomId:q}=await V2(c.trim().toUpperCase(),t||"Player");l(q),r(q,!1)}return rt.jsxs("div",{className:"p-3 rounded border border-slate-300 mb-4",children:[rt.jsxs("div",{className:"mb-2",children:[rt.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),rt.jsx("input",{value:t,onChange:q=>n(q.target.value),className:"border px-2 py-1 rounded w-full"})]}),rt.jsxs("div",{className:"flex gap-2",children:[rt.jsx("button",{onClick:w,className:"px-3 py-2 rounded bg-emerald-600 text-white",children:"Create room"}),rt.jsx("input",{value:c,onChange:q=>d(q.target.value),placeholder:"Enter code",className:"border px-2 py-1 rounded"}),rt.jsx("button",{onClick:R,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Join"})]}),p&&rt.jsxs("div",{className:"mt-3 text-sm",children:[rt.jsxs("div",{children:[rt.jsx("b",{children:"Room"})," ",s]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Code"})," ",p.code]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Status"})," ",p.status]}),rt.jsx("div",{className:"mt-1",children:rt.jsx("b",{children:"Players"})}),rt.jsx("ul",{className:"list-disc ml-6",children:y.map(q=>rt.jsxs("li",{children:[q.displayName,q.isHost?" (host)":""]},q.id))})]})]})}function x2(r){return r.kind==="number"?`${r.color}_${r.value}.png`:r.kind==="action"?`${r.color}_${r.action}.png`:r.action==="wildDraw4"?"wildDraw4.png":"wild.png"}function pE(r){return r.kind==="number"?`${r.color} ${r.value}`:r.kind==="action"?`${r.color} ${r.action}`:r.action==="wildDraw4"?"+4":"wild"}function gE({card:r,onPlay:t,size:n="md"}){const[s,l]=Qe.useState(!1),c=`/UNO-WEB3/cards/${x2(r)}`,d=n==="lg"?{w:96,h:144}:n==="sm"?{w:48,h:72}:{w:64,h:96};return rt.jsx("button",{onClick:()=>t?.(r),title:JSON.stringify(r),className:"m-1 p-0 rounded-lg border border-slate-400 overflow-hidden bg-white hover:shadow transition disabled:opacity-100",style:{width:d.w,height:d.h,cursor:t?"pointer":"default"},disabled:!t,children:s?rt.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs px-1",children:pE(r)}):rt.jsx("img",{src:c,alt:pE(r),className:"w-full h-full object-contain",onError:()=>l(!0)})})}const yE=["red","yellow","green","blue"];function k2(){const r=[];for(const t of yE){r.push({kind:"number",color:t,value:0});for(let n=1;n<=9;n++)r.push({kind:"number",color:t,value:n}),r.push({kind:"number",color:t,value:n})}for(const t of yE)for(let n=0;n<2;n++)r.push({kind:"action",color:t,action:"skip"}),r.push({kind:"action",color:t,action:"reverse"}),r.push({kind:"action",color:t,action:"draw2",drawAmount:2});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wild"});for(let t=0;t<4;t++)r.push({kind:"wild",action:"wildDraw4",drawAmount:4});return r}function U2(r){for(let t=r.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[r[t],r[n]]=[r[n],r[t]]}return r}function Im(r,t){if(t.kind==="wild")return!0;if(r.kind==="wild"){const n=r.chosenColor;return n?t.color===n:!0}return t.kind==="number"&&r.kind==="number"?t.color===r.color||t.value===r.value:t.kind==="action"&&r.kind==="action"?t.color===r.color||t.action===r.action:t.color===r.color}const xr=r=>String(r??"").toLowerCase();function L2(r){return r.kind==="action"&&xr(r.action)==="skip"}function z2(r){return r.kind==="action"&&xr(r.action)==="reverse"}function _E(r){const t=xr(r.action);return r.kind==="action"&&(t==="draw2"||t==="draw_2"||t==="+2"||t==="plus2"||t==="drawtwo")}function vE(r){const t=xr(r.action??r.type??r.kind);return r.kind==="wild"&&(t==="draw4"||t==="draw_4"||t==="+4"||t==="plus4"||t==="wildDraw4"||t==="drawfour")}function B2(r,t){return r.kind!==t.kind?!1:r.kind==="number"&&t.kind==="number"?r.color===t.color&&r.value===t.value:r.kind==="action"&&t.kind==="action"?r.color===t.color&&xr(r.action)===xr(t.action):xr(r.action)===xr(t.action)}function q2(r,t){const n=Ml(Le(Qt,"rooms",r),d=>t.onRoom({id:d.id,...d.data()})),s=Ml(Wr(Qt,"rooms",r,"players"),d=>t.onPlayers(d.docs.map(p=>({id:p.id,...p.data()})))),l=Zi.currentUser?.uid,c=l?Ml(Le(Qt,"rooms",r,"hands",l),d=>t.onMyHand(d.data()?.cards??[])):()=>{};return()=>{n(),s(),c()}}async function EE(r){await Ks();const n=(await su(Wr(Qt,"rooms",r,"players"))).docs.map(p=>p.id);if(n.length<2)throw new Error("Need at least 2 players");const s=U2(k2()),l={};for(const p of n)l[p]=s.splice(0,7);let c=s.pop();for(;c.kind==="wild";)s.unshift(c),c=s.pop();const d=D2(Qt);d.set(Le(Qt,"rooms",r),{status:"playing",currentTurn:n[0],direction:1,topCard:c,drawPile:s,discardPile:[c],pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,winnerUid:null,finishedAt:null,updatedAt:pi()},{merge:!0});for(const p of n)d.set(Le(Qt,"rooms",r,"hands",p),{cards:l[p]}),d.set(Le(Qt,"rooms",r,"players",p),{handCount:l[p].length},{merge:!0});await d.commit()}function Ya(r,t,n){return(t+n+r.length)%r.length}async function TE(r,t){await Ks();const n=Zi.currentUser.uid,s=Le(Qt,"rooms",r),l=Le(Qt,"rooms",r,"hands",n);await Ep(Qt,async c=>{const d=await c.get(s),p=await c.get(l);if(!d.exists())throw new Error("Room missing");const g=d.data(),y=p.data()?.cards??[];if(g.status!=="playing")throw new Error("Game not started");if(g.currentTurn!==n)throw new Error("Not your turn");const w=(await su(Wr(Qt,"rooms",r,"players"))).docs.map(P=>P.id);let R=g.direction??1;const q=w.indexOf(n),Q=Ya(w,q,R),tt=[...g.drawPile??[]],$=[...g.discardPile??[]],dt=g.pendingDraw??0,ut=g.pendingType??null,at=g.chainValue??null,ft=g.chainPlayer??null;if(dt>0){if(!(ut==="draw2"&&_E(t)||ut==="draw4"&&vE(t)))throw new Error(`You must draw ${dt} or stack another ${ut==="draw2"?"+2":"+4"}`)}else if(at!==null){if(ft!==n)throw new Error("Other player must end their chain");if(!(t.kind==="number"&&t.value===at))throw new Error(`You can only play another ${at} or end your turn`)}else if(!Im(g.topCard,t))throw new Error("Illegal play");const gt=y.findIndex(P=>B2(P,t));if(gt<0)throw new Error("Card not in hand");if(y.splice(gt,1),$.push(t),y.length===0){c.set(l,{cards:[]},{merge:!0}),c.set(Le(Qt,"rooms",r,"players",n),{handCount:0},{merge:!0}),c.set(s,{topCard:t,discardPile:$,status:"finished",winnerUid:n,pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,finishedAt:pi(),updatedAt:pi()},{merge:!0});return}let At=Q,O=dt,S=ut,C=null,V=null;if(dt>0)ut==="draw2"&&(O+=2),ut==="draw4"&&(O+=4),At=Q;else if(at!==null)y.some(I=>I.kind==="number"&&I.value===at)?(At=q,C=at,V=n):At=Q;else if(L2(t))At=Ya(w,Q,R);else if(z2(t))R=-R,At=w.length===2?Ya(w,Q,R):Ya(w,q,R);else if(_E(t))O=2,S="draw2",At=Q;else if(vE(t))O=4,S="draw4",At=Q;else if(t.kind==="wild")At=Q;else if(t.kind==="number"){const P=t.value;y.some(pe=>pe.kind==="number"&&pe.value===P)?(At=q,C=P,V=n):At=Q}const M=w[At];c.set(l,{cards:y},{merge:!0}),c.set(Le(Qt,"rooms",r,"players",n),{handCount:y.length},{merge:!0}),c.set(s,{topCard:t,discardPile:$,drawPile:tt,currentTurn:M,direction:R,pendingDraw:O,pendingType:S,chainValue:C,chainPlayer:V,updatedAt:pi()},{merge:!0})})}async function j2(r){await Ks();const t=Zi.currentUser.uid,n=Le(Qt,"rooms",r),s=Le(Qt,"rooms",r,"hands",t);await Ep(Qt,async l=>{const c=await l.get(n),d=await l.get(s);if(!c.exists())throw new Error("Room missing");const p=c.data(),g=d.data()?.cards??[];if(p.currentTurn!==t)throw new Error("Not your turn");const y=[...p.drawPile??[]],w=(await su(Wr(Qt,"rooms",r,"players"))).docs.map($=>$.id),R=p.direction??1,q=w.indexOf(t),Q=w[Ya(w,q,R)],tt=p.pendingDraw??0;if(tt>0){for(let $=0;$<tt;$++){if(!y.length)throw new Error("No cards to draw");g.push(y.pop())}l.set(s,{cards:g},{merge:!0}),l.set(Le(Qt,"rooms",r,"players",t),{handCount:g.length},{merge:!0}),l.set(n,{drawPile:y,currentTurn:Q,pendingDraw:0,pendingType:null,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0});return}if(!y.length)throw new Error("No cards to draw");g.push(y.pop()),l.set(s,{cards:g},{merge:!0}),l.set(Le(Qt,"rooms",r,"players",t),{handCount:g.length},{merge:!0}),l.set(n,{drawPile:y,currentTurn:Q,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0})})}async function H2(r){await Ks();const t=Zi.currentUser.uid,n=Le(Qt,"rooms",r);await Ep(Qt,async s=>{const l=await s.get(n);if(!l.exists())throw new Error("Room missing");const c=l.data();if(c.currentTurn!==t)throw new Error("Not your turn");if(c.chainPlayer!==t||c.chainValue===null)throw new Error("You have nothing to end");const p=(await su(Wr(Qt,"rooms",r,"players"))).docs.map(w=>w.id),g=c.direction??1,y=p.indexOf(t),T=p[Ya(p,y,g)];s.set(n,{currentTurn:T,chainValue:null,chainPlayer:null,updatedAt:pi()},{merge:!0})})}function G2({roomId:r,isHost:t}){const[n,s]=Qe.useState(null),[l,c]=Qe.useState([]),[d,p]=Qe.useState([]),[g,y]=Qe.useState(null);Qe.useEffect(()=>{const ft=q2(r,{onRoom:s,onPlayers:c,onMyHand:p});return()=>ft()},[r]);const T=n?.topCard??null,w=Zi.currentUser?.uid??null,R=n?.currentTurn===w&&n?.status==="playing",q=t||n?.hostUid===w||l.length>0&&l[0]?.id===w,Q=Qe.useMemo(()=>!!T&&d.some(ft=>Im(T,ft)),[d,T]);if(!n)return rt.jsx("div",{className:"p-6",children:"Loading room"});const tt=n?.winnerUid?l.find(ft=>ft.id===n.winnerUid)?.displayName??n.winnerUid:null,$=T&&T.kind==="wild"?T.chosenColor??null:null,dt=async ft=>{const gt=g;if(!gt)return;const At={...gt.card,chosenColor:ft};try{await TE(r,At)}catch(O){alert(O.message??String(O))}finally{y(null)}},ut=n?.chainPlayer===w&&n?.chainValue!==null,at=n?.pendingDraw?{n:n.pendingDraw,type:n.pendingType}:null;return rt.jsxs("div",{className:"p-6 space-y-3",children:[rt.jsx("h1",{className:"text-3xl font-extrabold",children:"UNO (Online)"}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Room:"})," ",r]}),rt.jsxs("div",{className:"flex items-center gap-2",children:[rt.jsxs("div",{children:[rt.jsx("b",{children:"Code:"})," ",rt.jsx("code",{children:n.code??""})]}),n.code&&rt.jsx("button",{onClick:()=>navigator.clipboard.writeText(n.code).catch(()=>{}),className:"px-2 py-1 text-sm rounded border",children:"Copy"})]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Status:"})," ",n.status]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Turn:"})," ",n.status==="finished"?"":R?"You":n.currentTurn??""]}),rt.jsxs("div",{children:[rt.jsx("b",{children:"Players:"})," ",l.map(ft=>ft.displayName).join(", ")]}),(n.status==="lobby"||n.status==="finished")&&rt.jsx("div",{className:"mt-2",children:q?rt.jsx("button",{className:"px-4 py-2 rounded bg-emerald-600 text-white disabled:opacity-50",onClick:()=>EE(r),disabled:l.length<2,title:l.length<2?"Need at least 2 players":"Start game",children:"Start game"}):rt.jsx("div",{children:"Waiting for host to start"})}),n.status==="playing"&&rt.jsxs(rt.Fragment,{children:[rt.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[rt.jsx("div",{className:"text-sm font-semibold",children:"Top card:"}),T&&rt.jsx(gE,{card:T,size:"lg"}),$&&rt.jsxs("div",{className:"ml-2 px-2 py-1 rounded text-sm font-semibold border",title:"Current color chosen for wild",style:{background:$==="red"?"#fee2e2":$==="yellow"?"#fef9c3":$==="green"?"#dcfce7":"#dbeafe"},children:["Current color: ",$]}),at&&rt.jsxs("div",{className:"ml-2 px-2 py-1 rounded text-sm font-semibold border",children:[at.type==="draw4"?"+4":"+2"," stack: draw ",at.n]})]}),rt.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[rt.jsx("button",{onClick:async()=>{try{await j2(r)}catch(ft){alert(ft.message??String(ft))}},disabled:!R,className:"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50",title:at?`Draw ${at.n} and pass`:Q?"You already have a playable card":"Draw one",children:at?`Draw ${at.n}`:"Draw"}),ut&&rt.jsx("button",{onClick:async()=>{try{await H2(r)}catch(ft){alert(ft.message??String(ft))}},className:"px-4 py-2 rounded bg-gray-700 text-white",title:"Finish your number chain and pass the turn",children:"End turn"})]}),rt.jsxs("div",{className:"mt-4",children:[rt.jsxs("h3",{className:"font-semibold mb-1",children:["Your hand (",d.length,")"]}),g&&rt.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[rt.jsx("span",{className:"text-sm",children:"Pick color:"}),rt.jsx("button",{type:"button",onClick:()=>dt("red"),className:"px-3 py-1 rounded border",style:{background:"#ef4444",color:"white"},children:"red"}),rt.jsx("button",{type:"button",onClick:()=>dt("yellow"),className:"px-3 py-1 rounded border",style:{background:"#eab308"},children:"yellow"}),rt.jsx("button",{type:"button",onClick:()=>dt("green"),className:"px-3 py-1 rounded border",style:{background:"#22c55e",color:"white"},children:"green"}),rt.jsx("button",{type:"button",onClick:()=>dt("blue"),className:"px-3 py-1 rounded border",style:{background:"#3b82f6",color:"white"},children:"blue"}),rt.jsx("button",{type:"button",onClick:()=>y(null),className:"px-2 py-1 rounded border",title:"Cancel",children:"Cancel"})]}),rt.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((ft,gt)=>{const At=!!T&&Im(T,ft),O=R&&At;return rt.jsxs("button",{type:"button",onClick:async()=>{if(O){if(ft.kind==="wild"&&!ft.chosenColor){y({index:gt,card:ft});return}try{await TE(r,ft)}catch(S){alert(S.message??String(S))}}},disabled:!O,className:["relative inline-block p-0 border-0 bg-transparent",O?"cursor-pointer":"opacity-60 cursor-default"].join(" "),"aria-disabled":!O,children:[rt.jsx(gE,{card:ft,size:"md"}),rt.jsx("span",{className:"absolute inset-0"})]},gt)})})]})]}),n.status==="finished"&&rt.jsxs("div",{className:"mt-4 p-4 rounded-xl border bg-white/70 backdrop-blur",children:[rt.jsxs("div",{className:"text-xl font-bold mb-1",children:[" ",tt??"A player"," won!"]}),rt.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Game over",$?`  final color: ${$}`:"","."]}),q?rt.jsx("button",{className:"px-4 py-2 rounded bg-emerald-600 text-white",onClick:()=>EE(r),children:"Start new game"}):rt.jsx("div",{children:"Waiting for host to start a new game"})]})]})}function F2(){const[r,t]=Qe.useState(null),[n,s]=Qe.useState(!1);return r?rt.jsx(G2,{roomId:r,isHost:n}):rt.jsx(P2,{onEnterRoom:(l,c)=>{t(l),s(c)}})}CS.createRoot(document.getElementById("root")).render(rt.jsx(Qe.StrictMode,{children:rt.jsx(F2,{})}));
